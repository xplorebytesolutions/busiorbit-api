2025-08-25 14:41:06.394 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 14:41:06.442 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 14:41:06.456 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 14:41:07.209 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 14:41:07.700 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 14:41:07.985 +05:30 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 14:41:07.991 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 14:41:07.992 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 14:41:07.993 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 14:41:07.994 +05:30 [INF] Hosting environment: Development
2025-08-25 14:41:07.995 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 14:41:08.004 +05:30 [INF] Executed DbCommand (131ms) [Parameters=[@__cutoff_0='2025-08-18T09:11:06.5743933Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 14:41:10.079 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 14:41:10.276 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 207.9485ms
2025-08-25 14:41:10.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 14:41:10.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 14:41:10.397 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.1473ms
2025-08-25 14:41:10.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.0539ms
2025-08-25 14:41:10.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 14:41:10.705 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 179.1309ms
2025-08-25 14:41:48.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 14:41:48.276 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 14:41:48.353 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:48.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 99.9497ms
2025-08-25 14:41:48.370 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 14:41:48.382 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:48.463 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 14:41:48.491 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 14:41:48.604 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 14:41:48.738 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 14:41:48.904 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 14:41:49.111 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 14:41:49.125 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 14:41:49.227 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 14:41:49.230 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 14:41:49.243 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:41:49.263 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 764.0089ms
2025-08-25 14:41:49.266 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 14:41:49.275 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 905.0521ms
2025-08-25 14:41:49.280 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 14:41:49.285 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:49.287 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.8728ms
2025-08-25 14:41:49.292 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 14:41:49.298 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:49.349 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 14:41:49.357 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 14:41:49.378 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 14:41:49.424 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 14:41:49.429 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:41:49.448 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 87.4492ms
2025-08-25 14:41:49.451 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 14:41:49.453 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 160.3136ms
2025-08-25 14:41:49.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 14:41:49.475 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:49.482 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 14:41:49.485 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 14:41:49.498 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 14:41:49.503 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:41:49.506 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.8206ms
2025-08-25 14:41:49.508 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 14:41:49.509 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.826ms
2025-08-25 14:41:49.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 14:41:49.588 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:49.591 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 14:41:49.593 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 14:41:49.603 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 14:41:49.607 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:41:49.609 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.2917ms
2025-08-25 14:41:49.611 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 14:41:49.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.3821ms
2025-08-25 14:41:53.808 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-25 14:41:53.813 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:53.815 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 7.7405ms
2025-08-25 14:41:53.820 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-25 14:41:53.825 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:41:53.829 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-25 14:41:53.837 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-25 14:41:53.872 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 14:41:53.907 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-25 14:41:53.926 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 86.4733ms
2025-08-25 14:41:53.929 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-25 14:41:53.931 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 110.9755ms
2025-08-25 14:44:20.493 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-25 14:44:20.508 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:20.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 16.0578ms
2025-08-25 14:44:20.516 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 555
2025-08-25 14:44:20.519 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:20.521 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-25 14:44:20.545 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-25 14:44:20.561 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Pinnacle
2025-08-25 14:44:20.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-25 14:44:20.704 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p5='71d5f233-da2f-481c-b482-c7be8641fb81', @p0='433e607d-5965-11ef-b1d4-02c8a5e042bd' (Nullable = false), @p1='337117692828294', @p2='2025-08-25T09:14:20.5840677Z' (Nullable = true) (DbType = DateTime), @p3='251114021418599', @p4='+918800232575'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "PhoneNumberId" = @p1, "UpdatedAt" = @p2, "WabaId" = @p3, "WhatsAppBusinessNumber" = @p4
WHERE "Id" = @p5;
2025-08-25 14:44:20.721 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:44:20.725 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 176.4705ms
2025-08-25 14:44:20.727 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-25 14:44:20.728 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 212.5278ms
2025-08-25 14:44:25.589 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 14:44:25.591 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 14:44:25.594 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:25.598 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:25.599 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 10.2228ms
2025-08-25 14:44:25.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 9.3807ms
2025-08-25 14:44:25.605 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 14:44:25.610 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 14:44:25.613 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:25.618 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:25.618 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:44:25.619 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 14:44:25.626 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 14:44:25.626 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 14:44:25.634 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 14:44:25.663 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 14:44:25.668 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:44:25.673 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 14:44:25.686 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 55.5339ms
2025-08-25 14:44:25.689 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 14:44:25.691 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 81.1608ms
2025-08-25 14:44:25.734 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 14:44:25.795 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:44:25.809 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 179.7808ms
2025-08-25 14:44:25.811 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:44:25.812 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 207.8313ms
2025-08-25 14:44:57.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 14:44:57.241 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:57.243 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 8.4797ms
2025-08-25 14:44:57.250 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 74
2025-08-25 14:44:57.256 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:44:57.258 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 14:44:57.265 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 14:44:57.323 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+917082156227
2025-08-25 14:44:57.344 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+917082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 14:44:57.351 +05:30 [INF] Contact already exists: contactId="9841a0df-6c0d-4c42-95d3-fe6faf47e91b"
2025-08-25 14:44:57.357 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 14:44:57.373 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 14:44:57.377 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 14:44:59.642 +05:30 [INF] Received HTTP response headers after 2260.7461ms - 200
2025-08-25 14:44:59.645 +05:30 [INF] End processing HTTP request after 2273.7654ms - 200
2025-08-25 14:44:59.922 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p0='b7af75d4-6e2a-4645-82ca-2f3276a56cbe', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='9841a0df-6c0d-4c42-95d3-fe6faf47e91b' (Nullable = true), @p6='2025-08-25T09:14:59.7795664Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10=' Send WhatsApp Message' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSQzlDNTlFRkUxOTRFOEFGNkMzAA==', @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+917082156227\",\"wa_id\":\"917082156227\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSQzlDNTlFRkUxOTRFOEFGNkMzAA==\"}]}","MessageId":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSQzlDNTlFRkUxOTRFOEFGNkMzAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15=' Send WhatsApp Message', @p16='2025-08-25T09:14:59.7796337Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 14:44:59.929 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:44:59.935 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2667.1252ms
2025-08-25 14:44:59.937 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 14:44:59.939 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 2688.8548ms
2025-08-25 14:46:12.041 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 14:46:12.049 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:12.051 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 10.385ms
2025-08-25 14:46:12.059 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 74
2025-08-25 14:46:12.068 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:12.070 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 14:46:12.072 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 14:46:12.080 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 14:46:12.188 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 14:46:12.192 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 14:46:12.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 14:46:12.200 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 14:46:12.201 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 14:46:13.803 +05:30 [INF] Received HTTP response headers after 1600.2411ms - 200
2025-08-25 14:46:13.805 +05:30 [INF] End processing HTTP request after 1605.7139ms - 200
2025-08-25 14:46:13.822 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='5a2784a8-693a-4f7c-b9a2-2157b221dd34', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T09:16:13.8075318Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10=' Send WhatsApp Message' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDU3ODIyMzRFNzJCMjUzMTVGAA==', @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDU3ODIyMzRFNzJCMjUzMTVGAA==\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDU3ODIyMzRFNzJCMjUzMTVGAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=' Send WhatsApp Message', @p16='2025-08-25T09:16:13.8075324Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 14:46:13.825 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:46:13.827 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1752.1986ms
2025-08-25 14:46:13.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 14:46:13.830 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1771.7831ms
2025-08-25 14:46:35.975 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 14:46:35.979 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:35.981 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 5.8757ms
2025-08-25 14:46:35.985 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-25 14:46:35.989 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:35.990 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 5.3591ms
2025-08-25 14:46:35.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 14:46:35.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-25 14:46:36.008 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:36.013 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:46:36.013 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:36.015 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 14:46:36.016 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-25 14:46:36.019 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 14:46:36.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 14:46:36.027 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-25 14:46:36.036 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 14:46:36.041 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:46:36.043 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 25.0775ms
2025-08-25 14:46:36.054 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:46:36.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 60.0493ms
2025-08-25 14:46:36.074 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-25 14:46:36.080 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:46:36.082 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:46:36.638 +05:30 [INF] Received HTTP response headers after 555.073ms - 401
2025-08-25 14:46:36.640 +05:30 [INF] End processing HTTP request after 559.7497ms - 401
2025-08-25 14:46:36.642 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-25 14:46:36.644 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 14:46:36.646 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-25 14:46:36.647 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-25 14:46:37.678 +05:30 [INF] Received HTTP response headers after 1029.4798ms - 401
2025-08-25 14:46:37.684 +05:30 [INF] End processing HTTP request after 1037.5434ms - 401
2025-08-25 14:46:37.686 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"error":{"message":"Error validating access token: Session has expired on Saturday, 23-Aug-25 05:00:00 PDT. The current time is Monday, 25-Aug-25 02:16:36 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ai0UIWvchZbkCsE6yo7VA9U"}}
2025-08-25 14:46:37.688 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": {"error":{"message":"Error validating access token: Session has expired on Saturday, 23-Aug-25 05:00:00 PDT. The current time is Monday, 25-Aug-25 02:16:36 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ai0UIWvchZbkCsE6yo7VA9U"}}
2025-08-25 14:46:37.690 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:46:37.695 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1661.5835ms
2025-08-25 14:46:37.697 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-25 14:46:37.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1703.1527ms
2025-08-25 14:46:43.537 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:46:43.541 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:43.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 6.2053ms
2025-08-25 14:46:43.552 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:46:43.557 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:43.559 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:46:43.566 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:46:43.589 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 14:46:43.593 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:46:43.601 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 32.0461ms
2025-08-25 14:46:43.603 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:46:43.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 52.6093ms
2025-08-25 14:46:47.326 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 14:46:47.330 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:47.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 6.1572ms
2025-08-25 14:46:47.337 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 14:46:47.341 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:47.343 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 14:46:47.350 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:46:47.360 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 14:46:47.378 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 14:46:47.403 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:46:47.405 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:46:48.312 +05:30 [INF] Received HTTP response headers after 905.9798ms - 200
2025-08-25 14:46:48.314 +05:30 [INF] End processing HTTP request after 911.1264ms - 200
2025-08-25 14:46:48.514 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='testing_1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 14:46:48.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='test_msg', @__it_Language_3='en_GB'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 14:46:48.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='tempalte_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 14:46:48.592 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0bc77f04-41f2-4194-8271-3487d88ebcf2', @p1='Dear {{1}},
The Sale is live Now!!!!!!' (Nullable = false), @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='[]' (Nullable = false), @p4='MARKETING', @p5='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p6='865429905017848', @p7='True', @p8='True', @p9='en' (Nullable = false), @p10='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p11='tempalte_v1' (Nullable = false), @p12='1', @p13='pinnacle' (Nullable = false), @p14='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=HqMXtoxlchEQ7kNvwFRKxLr&_nc_oc=Adl5GldyWoa6MyD_fvBTWiiS_pl0AvQSJg1bipv08owEIzz4zWY5u6vZq_s_PJjs6eM&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=SisvtzcC3zz-iH7ACldQTA&oh=01_Q5Aa2QHmFkzkSLWWFcdo1-bE2vnyolz-VR-4tQoB9D7wSVdQsw&oe=68D39FFD"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p17='a408c86c-84f1-4df0-9872-a92426bb3535', @p18='Dear User,
Testing' (Nullable = false), @p19='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p20='[]' (Nullable = false), @p21='MARKETING', @p22='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p23='817759340478776', @p24='True', @p25='True', @p26='en' (Nullable = false), @p27='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p28='testing_1' (Nullable = false), @p29='0', @p30='pinnacle' (Nullable = false), @p31='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=VUWTYFbh_iMQ7kNvwErWoWV&_nc_oc=AdlYwPN5yNGNyzF2iywEd8Lt6769EQj5dSq1kqTTRclS7YYyEFkQPrC3hU94AvGX3Dg&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=SisvtzcC3zz-iH7ACldQTA&oh=01_Q5Aa2QH-h7n5pzlHLdGnlcecQZJscdC-0T7MJq1DDPWNJCr6bg&oe=68D38C99"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p34='bf982141-a662-4efe-89be-dcbf05164a3c', @p35='test msg' (Nullable = false), @p36='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p37='[]' (Nullable = false), @p38='MARKETING', @p39='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p40='422342703560510', @p41='False', @p42='True', @p43='en_GB' (Nullable = false), @p44='2025-08-25T09:16:47.3662620Z' (DbType = DateTime), @p45='test_msg' (Nullable = false), @p46='0', @p47='pinnacle' (Nullable = false), @p48='{"name":"test_msg","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello"},{"type":"BODY","text":"test msg"}],"language":"en_GB","status":"APPROVED","category":"MARKETING","id":"422342703560510"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-25T09:16:47.3662620Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 14:46:48.609 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 14:46:48.615 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1263.4396ms
2025-08-25 14:46:48.617 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 14:46:48.619 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 1281.8227ms
2025-08-25 14:46:48.642 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:46:48.646 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:48.647 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 5.1526ms
2025-08-25 14:46:48.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:46:48.656 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:46:48.657 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:46:48.659 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:46:48.668 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 14:46:48.674 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:46:48.678 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 17.3637ms
2025-08-25 14:46:48.683 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:46:48.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 32.2808ms
2025-08-25 14:47:08.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 14:47:08.927 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:08.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 6.7757ms
2025-08-25 14:47:08.934 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 14:47:08.937 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:08.939 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 14:47:08.940 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:47:08.949 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 14:47:08.955 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 14:47:08.959 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:47:08.961 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:47:09.099 +05:30 [INF] Received HTTP response headers after 136.0842ms - 200
2025-08-25 14:47:09.101 +05:30 [INF] End processing HTTP request after 142.0808ms - 200
2025-08-25 14:47:09.107 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='testing_1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 14:47:09.111 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='test_msg', @__it_Language_3='en_GB'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 14:47:09.116 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='tempalte_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 14:47:09.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='45dcdf4a-d551-47de-8c36-b8b293b68b31', @p1='Dear User,
Testing' (Nullable = false), @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='[]' (Nullable = false), @p4='MARKETING', @p5='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p6='817759340478776', @p7='True', @p8='True', @p9='en' (Nullable = false), @p10='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p11='testing_1' (Nullable = false), @p12='0', @p13='pinnacle' (Nullable = false), @p14='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=VUWTYFbh_iMQ7kNvwErWoWV&_nc_oc=AdlYwPN5yNGNyzF2iywEd8Lt6769EQj5dSq1kqTTRclS7YYyEFkQPrC3hU94AvGX3Dg&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=SisvtzcC3zz-iH7ACldQTA&oh=01_Q5Aa2QH-h7n5pzlHLdGnlcecQZJscdC-0T7MJq1DDPWNJCr6bg&oe=68D38C99"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p17='55363cf8-e69c-4466-90e6-3843f79168d8', @p18='test msg' (Nullable = false), @p19='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p20='[]' (Nullable = false), @p21='MARKETING', @p22='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p23='422342703560510', @p24='False', @p25='True', @p26='en_GB' (Nullable = false), @p27='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p28='test_msg' (Nullable = false), @p29='0', @p30='pinnacle' (Nullable = false), @p31='{"name":"test_msg","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello"},{"type":"BODY","text":"test msg"}],"language":"en_GB","status":"APPROVED","category":"MARKETING","id":"422342703560510"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p34='b8f0fa8f-f692-4b28-8216-ad783edfb946', @p35='Dear {{1}},
The Sale is live Now!!!!!!' (Nullable = false), @p36='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p37='[]' (Nullable = false), @p38='MARKETING', @p39='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p40='865429905017848', @p41='True', @p42='True', @p43='en' (Nullable = false), @p44='2025-08-25T09:17:08.9534711Z' (DbType = DateTime), @p45='tempalte_v1' (Nullable = false), @p46='1', @p47='pinnacle' (Nullable = false), @p48='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=HqMXtoxlchEQ7kNvwFRKxLr&_nc_oc=Adl5GldyWoa6MyD_fvBTWiiS_pl0AvQSJg1bipv08owEIzz4zWY5u6vZq_s_PJjs6eM&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=SisvtzcC3zz-iH7ACldQTA&oh=01_Q5Aa2QHmFkzkSLWWFcdo1-bE2vnyolz-VR-4tQoB9D7wSVdQsw&oe=68D39FFD"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-25T09:17:08.9534711Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 14:47:09.127 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 14:47:09.129 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 186.2056ms
2025-08-25 14:47:09.131 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 14:47:09.132 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 198.5808ms
2025-08-25 14:47:09.159 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:47:09.163 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:09.164 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 5.8731ms
2025-08-25 14:47:09.169 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:47:09.172 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:09.173 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:47:09.175 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:47:09.182 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 14:47:09.197 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:47:09.200 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 21.6979ms
2025-08-25 14:47:09.202 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:47:09.203 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 34.385ms
2025-08-25 14:47:14.447 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - null null
2025-08-25 14:47:14.451 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:14.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - 204 null null 6.4185ms
2025-08-25 14:47:14.477 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - null null
2025-08-25 14:47:14.480 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:14.482 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 14:47:14.488 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:47:14.507 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='tempalte_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-25 14:47:14.512 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:47:14.517 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 24.2458ms
2025-08-25 14:47:14.520 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 14:47:14.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - 200 null application/json; charset=utf-8 44.5577ms
2025-08-25 14:47:43.069 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 14:47:43.074 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:43.076 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 6.5918ms
2025-08-25 14:47:43.082 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-25 14:47:43.086 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:43.087 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 5.5516ms
2025-08-25 14:47:43.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 14:47:43.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-25 14:47:43.097 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:43.102 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:43.103 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:47:43.104 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-25 14:47:43.106 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 14:47:43.107 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-25 14:47:43.110 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 14:47:43.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-25 14:47:43.124 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:47:43.148 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 14:47:43.225 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 14:47:43.230 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 14:47:43.235 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:47:43.237 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 127.2298ms
2025-08-25 14:47:43.239 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:47:43.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 147.6143ms
2025-08-25 14:47:43.301 +05:30 [INF] Received HTTP response headers after 151.1133ms - 401
2025-08-25 14:47:43.302 +05:30 [INF] End processing HTTP request after 178.2554ms - 401
2025-08-25 14:47:43.304 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-25 14:47:43.305 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 14:47:43.307 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-25 14:47:43.308 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-25 14:47:43.712 +05:30 [INF] Received HTTP response headers after 402.8269ms - 401
2025-08-25 14:47:43.714 +05:30 [INF] End processing HTTP request after 407.1346ms - 401
2025-08-25 14:47:43.716 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"error":{"message":"Error validating access token: Session has expired on Saturday, 23-Aug-25 05:00:00 PDT. The current time is Monday, 25-Aug-25 02:17:43 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A0ZmO2kXh856RDfKeFrFodW"}}
2025-08-25 14:47:43.719 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": {"error":{"message":"Error validating access token: Session has expired on Saturday, 23-Aug-25 05:00:00 PDT. The current time is Monday, 25-Aug-25 02:17:43 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A0ZmO2kXh856RDfKeFrFodW"}}
2025-08-25 14:47:43.721 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:47:43.723 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 610.9747ms
2025-08-25 14:47:43.724 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-25 14:47:43.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 633.4538ms
2025-08-25 14:47:57.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:47:57.862 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:57.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 9.1206ms
2025-08-25 14:47:57.869 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 14:47:57.875 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:47:57.877 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:47:57.878 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:47:57.888 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 14:47:57.893 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:47:57.895 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 13.9184ms
2025-08-25 14:47:57.897 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 14:47:57.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 30.0047ms
2025-08-25 14:48:00.160 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - null null
2025-08-25 14:48:00.165 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:00.166 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - 204 null null 5.6318ms
2025-08-25 14:48:00.171 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - null null
2025-08-25 14:48:00.175 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:00.177 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 14:48:00.178 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:48:00.184 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='tempalte_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-25 14:48:00.189 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:48:00.191 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 11.197ms
2025-08-25 14:48:00.193 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 14:48:00.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - 200 null application/json; charset=utf-8 23.7063ms
2025-08-25 14:48:02.496 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/testing_1 - null null
2025-08-25 14:48:02.500 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:02.502 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/testing_1 - 204 null null 5.9372ms
2025-08-25 14:48:02.508 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/testing_1 - null null
2025-08-25 14:48:02.513 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:02.515 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 14:48:02.517 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 14:48:02.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='testing_1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-25 14:48:02.530 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:48:02.533 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 11.6493ms
2025-08-25 14:48:02.535 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 14:48:02.537 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/testing_1 - 200 null application/json; charset=utf-8 29.1975ms
2025-08-25 14:48:37.514 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-25 14:48:37.520 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:37.521 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 6.7422ms
2025-08-25 14:48:37.531 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 240
2025-08-25 14:48:37.539 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:37.542 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-25 14:48:37.550 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 14:48:37.619 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 14:48:37.624 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 14:48:37.627 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 14:48:38.080 +05:30 [INF] Received HTTP response headers after 451.8315ms - 401
2025-08-25 14:48:38.083 +05:30 [INF] End processing HTTP request after 459.3049ms - 401
2025-08-25 14:48:38.085 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 14:48:38.178 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='5470f715-f19c-4724-9120-7a2730bd090a', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3='image', @p4='2025-08-25T09:18:38.0892061Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11='', @p12='False', @p13='testing_1', @p14='testing_1' (Nullable = false), @p15='Testing' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='testing_1', @p20='[]', @p21='2025-08-25T09:18:38.0893206Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-25 14:48:38.183 +05:30 [INF] ✅ Campaign 'Testing' created with 0 recipients, 0 user buttons, 0 template buttons and 0 template parameters
2025-08-25 14:48:38.191 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:48:38.195 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 640.7707ms
2025-08-25 14:48:38.198 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-25 14:48:38.199 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 667.9231ms
2025-08-25 14:48:38.302 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-25 14:48:38.313 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-25 14:48:38.313 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-25 14:48:38.320 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.327 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.303 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a - null null
2025-08-25 14:48:38.338 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 22.6167ms
2025-08-25 14:48:38.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 26.4061ms
2025-08-25 14:48:38.315 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.352 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.357 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-25 14:48:38.361 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-25 14:48:38.362 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 60.3227ms
2025-08-25 14:48:38.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a - 204 null null 60.5014ms
2025-08-25 14:48:38.367 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.369 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a - null null
2025-08-25 14:48:38.378 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 14:48:38.379 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:48:38.382 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.384 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 14:48:38.385 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-25 14:48:38.386 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-25 14:48:38.387 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-25 14:48:38.395 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 14:48:38.396 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 14:48:38.404 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 14:48:38.409 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-25 14:48:38.412 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:48:38.415 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:48:38.416 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 29.3066ms
2025-08-25 14:48:38.419 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 14:48:38.420 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 58.6446ms
2025-08-25 14:48:38.420 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 30.2174ms
2025-08-25 14:48:38.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-25 14:48:38.427 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 14:48:38.431 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:38.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 76.1004ms
2025-08-25 14:48:38.434 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 14:48:38.440 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-25 14:48:38.448 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-25 14:48:38.454 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:48:38.457 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='5470f715-f19c-4724-9120-7a2730bd090a', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-25 14:48:38.458 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 15.8625ms
2025-08-25 14:48:38.462 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 14:48:38.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 38.4027ms
2025-08-25 14:48:38.471 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-25 14:48:38.480 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 76.7781ms
2025-08-25 14:48:38.482 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-25 14:48:38.483 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a - 200 null application/json; charset=utf-8 106.4449ms
2025-08-25 14:48:45.958 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a/assign-contacts - null null
2025-08-25 14:48:45.961 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:45.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a/assign-contacts - 204 null null 3.0597ms
2025-08-25 14:48:45.964 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a/assign-contacts - application/json 55
2025-08-25 14:48:45.967 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:45.968 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-25 14:48:45.971 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 14:48:45.995 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5470f715-f19c-4724-9120-7a2730bd090a', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-25 14:48:46.022 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='73ada0ee-63d6-40da-b24b-6dee035550be', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='5470f715-f19c-4724-9120-7a2730bd090a', @p4=NULL, @p5=NULL, @p6='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-25T09:18:45.9992123Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-25T09:18:45.9992679Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-25 14:48:46.025 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 14:48:46.026 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 53.6779ms
2025-08-25 14:48:46.027 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-25 14:48:46.028 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/5470f715-f19c-4724-9120-7a2730bd090a/assign-contacts - 200 null application/json; charset=utf-8 64.1776ms
2025-08-25 14:48:49.427 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 14:48:49.429 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:49.430 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.0752ms
2025-08-25 14:48:49.434 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 14:48:49.436 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:48:49.437 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 14:48:49.441 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 14:48:49.457 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 14:48:49.461 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 14:48:49.464 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 21.7431ms
2025-08-25 14:48:49.465 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 14:48:49.466 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 31.1548ms
2025-08-25 14:49:02.705 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null null
2025-08-25 14:49:02.707 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:49:02.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - 204 null null 3.2008ms
2025-08-25 14:49:02.710 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null 0
2025-08-25 14:49:02.713 +05:30 [INF] CORS policy execution successful.
2025-08-25 14:49:02.714 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 14:49:02.717 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 14:49:02.730 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 14:49:02.738 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5470f715-f19c-4724-9120-7a2730bd090a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 14:49:02.745 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 14:49:02.747 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 14:49:02.748 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 14:49:02.821 +05:30 [INF] Received HTTP response headers after 72.0076ms - 401
2025-08-25 14:49:02.822 +05:30 [INF] End processing HTTP request after 74.7757ms - 401
2025-08-25 14:49:02.823 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 14:49:02.825 +05:30 [ERR] ❌ Could not fetch template metadata for testing_1.
2025-08-25 14:49:02.827 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 14:49:02.828 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 109.5937ms
2025-08-25 14:49:02.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 14:49:02.830 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - 400 null application/json; charset=utf-8 119.1262ms
2025-08-25 16:11:16.838 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 16:11:16.870 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 16:11:16.891 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 16:11:17.578 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 16:11:18.064 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 16:11:18.319 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 16:11:18.352 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@__cutoff_0='2025-08-18T10:41:16.9721588Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 16:11:18.373 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 16:11:18.374 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 16:11:18.375 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 16:11:18.375 +05:30 [INF] Hosting environment: Development
2025-08-25 16:11:18.376 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 16:11:20.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 16:11:20.581 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 122.1129ms
2025-08-25 16:11:20.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 16:11:20.609 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.276ms
2025-08-25 16:11:20.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 16:11:20.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.1566ms
2025-08-25 16:11:20.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 16:11:21.231 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 344.1921ms
2025-08-25 16:12:10.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 16:12:10.840 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 16:12:10.885 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:10.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 51.6169ms
2025-08-25 16:12:10.898 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 16:12:10.905 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:11.014 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-08-2025 10:11:49 AM', Current time (UTC): '25-08-2025 10:42:11 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-25 16:12:11.054 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-08-2025 10:11:49 AM', Current time (UTC): '25-08-2025 10:42:11 AM'.
2025-08-25 16:12:11.056 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 16:12:11.068 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 16:12:11.125 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 16:12:11.188 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 16:12:11.268 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 16:12:11.365 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 16:12:11.372 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 16:12:11.380 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 16:12:11.381 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 16:12:11.386 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:12:11.394 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 320.0465ms
2025-08-25 16:12:11.396 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 16:12:11.518 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 808
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-25 16:12:11.531 +05:30 [ERR] Response has already started, unable to write error response for path: /api/auth/login
2025-08-25 16:12:11.534 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json 636.4306ms
2025-08-25 16:12:18.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 16:12:18.833 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:18.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.9547ms
2025-08-25 16:12:18.836 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 16:12:18.838 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:18.840 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 16:12:18.841 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 16:12:18.846 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 16:12:18.851 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 16:12:18.856 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 16:12:18.865 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 16:12:18.867 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 16:12:18.869 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 16:12:18.870 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 16:12:18.872 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:12:18.877 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 34.3829ms
2025-08-25 16:12:18.879 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 16:12:18.880 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 43.6052ms
2025-08-25 16:12:18.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:12:18.887 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:18.888 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.3969ms
2025-08-25 16:12:18.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:12:18.908 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:18.918 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:12:18.924 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:12:18.934 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 16:12:18.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:12:18.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:12:18.968 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 43.0655ms
2025-08-25 16:12:18.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:12:18.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 65.3024ms
2025-08-25 16:12:18.983 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:12:18.985 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:18.988 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:12:18.989 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:12:18.997 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:12:19.000 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:12:19.001 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0305ms
2025-08-25 16:12:19.003 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:12:19.004 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.4767ms
2025-08-25 16:12:19.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:12:19.053 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:19.055 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:12:19.056 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:12:19.063 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:12:19.065 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:12:19.067 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8999ms
2025-08-25 16:12:19.068 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:12:19.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.3247ms
2025-08-25 16:12:26.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 16:12:26.596 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:26.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 16:12:26.597 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 4.201ms
2025-08-25 16:12:26.600 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:26.602 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 16:12:26.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 5.4595ms
2025-08-25 16:12:26.604 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:26.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 16:12:26.607 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 16:12:26.609 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:26.610 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 16:12:26.613 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 16:12:26.614 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 16:12:26.618 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 16:12:26.634 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 16:12:26.637 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:12:26.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 16:12:26.653 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 37.7815ms
2025-08-25 16:12:26.654 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 16:12:26.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 48.7392ms
2025-08-25 16:12:26.671 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 16:12:26.703 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 16:12:26.709 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 95.4366ms
2025-08-25 16:12:26.710 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 16:12:26.711 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 109.4227ms
2025-08-25 16:12:52.134 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 16:12:52.136 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:52.137 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 2.966ms
2025-08-25 16:12:52.139 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 99
2025-08-25 16:12:52.141 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:12:52.143 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 16:12:52.146 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 16:12:54.037 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 16:12:54.044 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 16:12:54.048 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 16:12:54.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 16:12:54.075 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 16:12:54.078 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 16:12:55.583 +05:30 [INF] Received HTTP response headers after 1502.7648ms - 200
2025-08-25 16:12:55.585 +05:30 [INF] End processing HTTP request after 1510.2928ms - 200
2025-08-25 16:12:55.707 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='93e4abd0-2dbb-426e-958d-049363d7be57', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T10:42:55.5885976Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='Test Message after implemention factory pattern' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGQzQwN0NGRDRDRUZEQUQyAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGQzQwN0NGRDRDRUZEQUQyAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Test Message after implemention factory pattern', @p16='2025-08-25T10:42:55.5886246Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 16:12:55.716 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 16:12:55.719 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3571.8517ms
2025-08-25 16:12:55.720 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 16:12:55.721 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 3582.2648ms
2025-08-25 16:18:42.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-25 16:18:42.550 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:18:42.551 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 10.1749ms
2025-08-25 16:18:42.554 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-25 16:18:42.559 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:18:42.560 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:18:42.564 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 16:18:42.658 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-08-25 16:18:42.662 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 16:18:42.666 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 100.4262ms
2025-08-25 16:18:42.667 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:18:42.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 114.2738ms
2025-08-25 16:34:40.702 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 16:34:40.707 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:34:40.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.3031ms
2025-08-25 16:34:40.711 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 16:34:40.717 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:34:40.718 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:34:40.719 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 16:34:40.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 16:34:40.792 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 16:34:40.793 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 72.51ms
2025-08-25 16:34:40.794 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:34:40.795 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 83.8044ms
2025-08-25 16:58:23.933 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 16:58:23.968 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 16:58:23.980 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 16:58:24.665 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 16:58:25.180 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 16:58:25.382 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 16:58:25.383 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 16:58:25.384 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 16:58:25.385 +05:30 [INF] Hosting environment: Development
2025-08-25 16:58:25.386 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 16:58:25.387 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 16:58:25.405 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__cutoff_0='2025-08-18T11:28:24.0707466Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 16:58:27.950 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 16:58:28.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 188.8796ms
2025-08-25 16:58:28.153 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 16:58:28.160 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.3372ms
2025-08-25 16:58:28.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 16:58:28.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.6582ms
2025-08-25 16:58:28.415 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 16:58:28.589 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.9791ms
2025-08-25 16:58:38.327 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:38.331 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 16:58:38.363 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:38.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 39.4822ms
2025-08-25 16:58:38.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:38.378 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:38.514 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:38.526 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:38.615 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 16:58:38.674 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:38.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:38.698 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 168.3576ms
2025-08-25 16:58:38.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:38.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 334.2657ms
2025-08-25 16:58:38.708 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:38.710 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:38.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:38.714 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:38.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:38.724 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:38.726 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1056ms
2025-08-25 16:58:38.727 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:38.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.1336ms
2025-08-25 16:58:43.827 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 16:58:43.830 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:43.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.2303ms
2025-08-25 16:58:43.834 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 16:58:43.838 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:43.841 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 16:58:43.846 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 16:58:43.864 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 16:58:43.913 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 16:58:43.963 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 16:58:44.052 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 16:58:44.059 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 16:58:44.067 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 16:58:44.069 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 16:58:44.070 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:44.072 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 225.3137ms
2025-08-25 16:58:44.073 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 16:58:44.074 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 240.2879ms
2025-08-25 16:58:44.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:44.080 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3444ms
2025-08-25 16:58:44.083 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:44.086 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.088 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.089 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:44.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:44.097 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:44.099 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4864ms
2025-08-25 16:58:44.100 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.100 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1882ms
2025-08-25 16:58:44.118 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:44.122 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.124 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.125 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:44.130 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:44.134 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:44.136 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4577ms
2025-08-25 16:58:44.138 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.139 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:44.140 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.1117ms
2025-08-25 16:58:44.142 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.145 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.146 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:44.152 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:44.155 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:44.156 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5101ms
2025-08-25 16:58:44.157 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8293ms
2025-08-25 16:58:44.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:44.224 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 16:58:44.227 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.230 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.231 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.0463ms
2025-08-25 16:58:44.232 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:44.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 16:58:44.242 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:44.246 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:44.247 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:58:44.248 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.1824ms
2025-08-25 16:58:44.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 16:58:44.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.255 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 16:58:44.255 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:44.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.5249ms
2025-08-25 16:58:44.260 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.264 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 16:58:44.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 16:58:44.275 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 16:58:44.276 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1004ms
2025-08-25 16:58:44.278 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 16:58:44.285 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.9788ms
2025-08-25 16:58:44.325 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 16:58:44.330 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 16:58:44.344 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 85.8637ms
2025-08-25 16:58:44.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:58:44.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 111.5374ms
2025-08-25 16:58:50.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 16:58:50.386 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:50.387 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.647ms
2025-08-25 16:58:50.389 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 16:58:50.391 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:50.392 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:58:50.393 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 16:58:50.406 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 16:58:50.408 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 16:58:50.410 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.8887ms
2025-08-25 16:58:50.411 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 16:58:50.412 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 22.4178ms
2025-08-25 16:58:53.168 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null null
2025-08-25 16:58:53.171 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:53.172 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - 204 null null 3.8096ms
2025-08-25 16:58:53.174 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null 0
2025-08-25 16:58:53.178 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:58:53.179 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 16:58:53.183 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 16:59:02.366 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 16:59:02.385 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__campaignId_0='5470f715-f19c-4724-9120-7a2730bd090a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 16:59:06.394 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 16:59:06.439 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 16:59:06.440 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 16:59:07.077 +05:30 [INF] Received HTTP response headers after 634.0759ms - 401
2025-08-25 16:59:07.079 +05:30 [INF] End processing HTTP request after 640.9162ms - 401
2025-08-25 16:59:07.080 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 16:59:07.082 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 16:59:07.088 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 13903.1678ms
2025-08-25 16:59:07.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 16:59:07.090 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - 400 null application/json; charset=utf-8 13915.7495ms
2025-08-25 16:59:16.311 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null null
2025-08-25 16:59:16.314 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:59:16.314 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - 204 null null 3.531ms
2025-08-25 16:59:16.317 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null 0
2025-08-25 16:59:16.319 +05:30 [INF] CORS policy execution successful.
2025-08-25 16:59:16.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 16:59:16.321 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 16:59:26.863 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5470f715-f19c-4724-9120-7a2730bd090a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 17:02:27.443 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 17:02:27.509 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 17:02:27.529 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 17:02:28.410 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 17:02:28.841 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 17:02:29.021 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 17:02:29.022 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 17:02:29.023 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 17:02:29.024 +05:30 [INF] Hosting environment: Development
2025-08-25 17:02:29.024 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 17:02:29.039 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 17:02:29.041 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__cutoff_0='2025-08-18T11:32:27.7000303Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 17:02:31.186 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 17:02:31.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 165.8646ms
2025-08-25 17:02:31.366 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 17:02:31.377 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.3945ms
2025-08-25 17:02:31.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 17:02:31.455 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.3623ms
2025-08-25 17:02:31.589 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 17:02:31.760 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 171.8328ms
2025-08-25 17:02:39.322 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null null
2025-08-25 17:02:39.326 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 17:02:39.358 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:02:39.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - 204 null null 38.9184ms
2025-08-25 17:02:39.368 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5470f715-f19c-4724-9120-7a2730bd090a - null 0
2025-08-25 17:02:39.378 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:02:39.473 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:02:39.487 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:03:00.580 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 17:03:00.629 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__campaignId_0='5470f715-f19c-4724-9120-7a2730bd090a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 17:16:26.204 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 17:17:12.689 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 17:17:12.753 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 17:17:12.771 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 17:17:13.584 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 17:17:14.070 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 17:17:14.257 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 17:17:14.259 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 17:17:14.261 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 17:17:14.262 +05:30 [INF] Hosting environment: Development
2025-08-25 17:17:14.263 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 17:17:14.271 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 17:17:14.290 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[@__cutoff_0='2025-08-18T11:47:12.8822202Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 17:17:16.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 17:17:16.595 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 146.6883ms
2025-08-25 17:17:16.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 17:17:16.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.833ms
2025-08-25 17:17:16.673 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 17:17:16.707 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.3743ms
2025-08-25 17:17:16.839 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 17:17:17.043 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 204.4791ms
2025-08-25 17:17:47.617 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:17:47.624 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 17:17:47.669 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:47.672 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 54.7931ms
2025-08-25 17:17:47.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:17:47.687 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:47.781 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:17:47.794 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:17:47.864 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:17:47.881 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:17:47.898 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 99.7255ms
2025-08-25 17:17:47.900 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:17:47.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 227.0327ms
2025-08-25 17:17:51.509 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:17:51.513 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:51.514 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 4.5511ms
2025-08-25 17:17:51.517 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:17:51.520 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:51.524 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:17:51.528 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:17:51.550 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:17:51.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:17:51.605 +05:30 [INF] ⏭️ Skipping sync for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"; TTL not expired.
2025-08-25 17:17:51.607 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:17:51.615 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 84.9748ms
2025-08-25 17:17:51.616 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:17:51.617 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 100.0134ms
2025-08-25 17:17:51.631 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:17:51.633 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:51.637 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:17:51.638 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:17:51.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:17:51.648 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:17:51.650 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.9693ms
2025-08-25 17:17:51.651 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:17:51.652 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 21.3838ms
2025-08-25 17:17:58.997 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:17:58.999 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:59.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 3.7366ms
2025-08-25 17:17:59.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:17:59.006 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:59.007 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:17:59.008 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:17:59.013 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:17:59.020 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:17:59.022 +05:30 [INF] ⏭️ Skipping sync for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"; TTL not expired.
2025-08-25 17:17:59.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:17:59.025 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 15.274ms
2025-08-25 17:17:59.026 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:17:59.027 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 23.7741ms
2025-08-25 17:17:59.040 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:17:59.042 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:59.043 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 3.0892ms
2025-08-25 17:17:59.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:17:59.049 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:17:59.050 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:17:59.051 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:17:59.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:17:59.058 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:17:59.059 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.9785ms
2025-08-25 17:17:59.061 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:17:59.062 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 15.3846ms
2025-08-25 17:18:08.140 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:18:08.144 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:08.145 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 4.1998ms
2025-08-25 17:18:08.148 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:18:08.150 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:08.151 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:18:08.153 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:18:08.157 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:18:08.162 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:18:08.165 +05:30 [INF] ⏭️ Skipping sync for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"; TTL not expired.
2025-08-25 17:18:08.166 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:18:08.167 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 12.6113ms
2025-08-25 17:18:08.168 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:18:08.169 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 21.3054ms
2025-08-25 17:18:08.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:18:08.183 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:08.184 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 2.7558ms
2025-08-25 17:18:08.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:18:08.189 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:08.190 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:18:08.191 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:18:08.198 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:18:08.200 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:08.202 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.9463ms
2025-08-25 17:18:08.203 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:18:08.204 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 17.9669ms
2025-08-25 17:18:11.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:18:11.067 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:11.068 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.0079ms
2025-08-25 17:18:11.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:18:11.073 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:11.074 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:18:11.077 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:18:11.123 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 17:18:11.161 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:18:11.165 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:11.176 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 96.758ms
2025-08-25 17:18:11.177 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:18:11.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 107.8651ms
2025-08-25 17:18:11.186 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:18:11.189 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:11.190 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:18:11.192 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:18:11.199 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:18:11.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:11.205 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.1944ms
2025-08-25 17:18:11.207 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:18:11.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.802ms
2025-08-25 17:18:11.243 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:18:11.243 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:18:11.245 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:11.248 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:11.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:18:11.250 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:18:11.250 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:18:11.251 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:18:11.258 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:18:11.258 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:18:11.263 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:11.265 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:11.266 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.4317ms
2025-08-25 17:18:11.267 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6122ms
2025-08-25 17:18:11.269 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:18:11.270 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:18:11.271 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 27.5891ms
2025-08-25 17:18:11.272 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.6673ms
2025-08-25 17:18:16.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:18:16.518 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:16.519 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 2.9448ms
2025-08-25 17:18:16.521 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:18:16.523 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:16.524 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:18:16.525 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:18:16.529 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:18:16.534 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:18:16.535 +05:30 [INF] ⏭️ Skipping sync for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"; TTL not expired.
2025-08-25 17:18:16.536 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:18:16.537 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 11.4075ms
2025-08-25 17:18:16.539 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:18:16.539 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 18.3028ms
2025-08-25 17:18:16.555 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:18:16.557 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:16.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 3.6143ms
2025-08-25 17:18:16.561 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:18:16.563 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:16.564 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:18:16.565 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:18:16.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:18:16.571 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:16.572 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.2744ms
2025-08-25 17:18:16.573 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:18:16.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 13.42ms
2025-08-25 17:18:21.968 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - null null
2025-08-25 17:18:21.970 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:21.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - 204 null null 3.1592ms
2025-08-25 17:18:21.990 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - null null
2025-08-25 17:18:21.993 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:18:21.994 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 17:18:21.997 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:18:22.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='tempalte_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-25 17:18:22.017 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:18:22.021 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 22.1901ms
2025-08-25 17:18:22.022 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 17:18:22.023 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/tempalte_v1 - 200 null application/json; charset=utf-8 33.0091ms
2025-08-25 17:19:11.831 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:19:11.833 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:11.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 3.8531ms
2025-08-25 17:19:11.841 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:19:11.843 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:11.844 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:19:11.845 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:11.849 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:19:11.854 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:19:11.856 +05:30 [INF] ⏭️ Skipping sync for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"; TTL not expired.
2025-08-25 17:19:11.857 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:19:11.858 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 11.4604ms
2025-08-25 17:19:11.859 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:19:11.860 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 18.3963ms
2025-08-25 17:19:11.876 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:11.879 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:11.880 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 4.5061ms
2025-08-25 17:19:11.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:11.886 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:11.888 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:11.889 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:11.893 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:19:11.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:11.896 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.4978ms
2025-08-25 17:19:11.898 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:11.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 15.1732ms
2025-08-25 17:19:26.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 17:19:26.089 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5776ms
2025-08-25 17:19:26.093 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 17:19:26.096 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.098 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 17:19:26.101 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 17:19:26.118 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 17:19:26.143 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 17:19:26.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 17:19:26.278 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 17:19:26.287 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 17:19:26.295 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 17:19:26.296 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 17:19:26.298 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:26.300 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 197.2338ms
2025-08-25 17:19:26.301 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 17:19:26.301 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 208.6186ms
2025-08-25 17:19:26.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:19:26.306 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1422ms
2025-08-25 17:19:26.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:19:26.312 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.314 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:19:26.317 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:19:26.320 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:26.321 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8941ms
2025-08-25 17:19:26.322 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.323 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.1325ms
2025-08-25 17:19:26.335 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:19:26.338 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.339 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.340 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:19:26.344 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:19:26.348 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:26.349 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5897ms
2025-08-25 17:19:26.351 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:19:26.351 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.353 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.354 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.8564ms
2025-08-25 17:19:26.355 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.358 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:19:26.362 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:19:26.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:26.366 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0263ms
2025-08-25 17:19:26.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.736ms
2025-08-25 17:19:26.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:19:26.425 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.428 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:19:26.435 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:19:26.438 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:26.440 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1272ms
2025-08-25 17:19:26.441 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.443 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.2483ms
2025-08-25 17:19:26.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:19:26.459 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:19:26.462 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.465 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.467 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.467 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.0659ms
2025-08-25 17:19:26.469 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:19:26.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:19:26.483 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:19:26.487 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:26.487 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:26.488 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8341ms
2025-08-25 17:19:26.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:19:26.490 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:19:26.493 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.3749ms
2025-08-25 17:19:26.495 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:19:26.536 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 17:19:26.540 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:19:26.547 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 50.0972ms
2025-08-25 17:19:26.549 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:19:26.550 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 70.5721ms
2025-08-25 17:19:31.324 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:31.327 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:31.328 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 3.912ms
2025-08-25 17:19:31.331 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:31.333 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:31.334 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:31.335 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:31.340 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:19:31.343 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:31.345 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.8439ms
2025-08-25 17:19:31.346 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:31.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 16.6072ms
2025-08-25 17:19:34.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:19:35.002 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:35.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 3.7472ms
2025-08-25 17:19:35.005 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:19:35.008 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:35.009 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:19:35.010 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:35.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:19:35.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:19:35.022 +05:30 [INF] ⏭️ Skipping sync for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"; TTL not expired.
2025-08-25 17:19:35.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:19:35.024 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 13.0438ms
2025-08-25 17:19:35.025 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:19:35.027 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 21.2921ms
2025-08-25 17:19:35.041 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:35.043 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:35.044 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:35.045 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:35.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:19:35.052 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:35.053 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.6756ms
2025-08-25 17:19:35.055 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:35.056 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 15.2871ms
2025-08-25 17:19:46.010 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-25 17:19:46.013 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:46.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 3.5859ms
2025-08-25 17:19:46.017 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-25 17:19:46.019 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:46.020 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:19:46.021 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:46.025 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 17:19:46.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-25 17:19:46.052 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 17:19:46.054 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-25 17:19:47.350 +05:30 [INF] Received HTTP response headers after 1293.3511ms - 200
2025-08-25 17:19:47.352 +05:30 [INF] End processing HTTP request after 1300.7546ms - 200
2025-08-25 17:19:47.497 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='automation_builder_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 17:19:47.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='testing_1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 17:19:47.554 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='test_msg', @__it_Language_3='en_GB'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 17:19:47.556 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='tempalte_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-25 17:19:47.637 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='274d3709-2f83-45ee-85d4-440b4002a190', @p1='Hi {{1}}, exciting news from Mindsmiratus ! ✨

Our new Automation Flow Builder is now live, designed to help you nurture leads and boost sales 24/7.

Ready to see how you can set up your first automated campaign in under 5 minutes?' (Nullable = false), @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='[{"Type":"URL","Text":"Explore the Feature","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/"},{"Type":"URL","Text":"Book a Demo","SubType":"url","Index":1,"ParameterValue":"https://www.mindsmiratus.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p4='MARKETING', @p5='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p6='1104667477832305', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p11='automation_builder_launch' (Nullable = false), @p12='1', @p13='pinnacle' (Nullable = false), @p14='{"name":"automation_builder_launch","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hi {{1}}, exciting news from Mindsmiratus ! ✨\n\nOur new Automation Flow Builder is now live, designed to help you nurture leads and boost sales 24/7.\n\nReady to see how you can set up your first automated campaign in under 5 minutes?","example":{"body_text":[["Hi Sam, exciting news from Mindsmiratus ! ✨  Our new Automation Flow Builder is now live, designed to help you nurture leads and boost sales 24/7."]]}},{"type":"FOOTER","text":"Team Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore the Feature","url":"https://www.mindsmiratus.com/"},{"type":"URL","text":"Book a Demo","url":"https://www.mindsmiratus.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","id":"1104667477832305"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p17='6c783a31-ae10-4ef9-a4c6-28df4d1ee1a5', @p18='Dear {{1}},
The Sale is live Now!!!!!!' (Nullable = false), @p19='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p20='[]' (Nullable = false), @p21='MARKETING', @p22='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p23='865429905017848', @p24='True', @p25='True', @p26='en' (Nullable = false), @p27='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p28='tempalte_v1' (Nullable = false), @p29='1', @p30='pinnacle' (Nullable = false), @p31='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=HqMXtoxlchEQ7kNvwFRKxLr&_nc_oc=Adl5GldyWoa6MyD_fvBTWiiS_pl0AvQSJg1bipv08owEIzz4zWY5u6vZq_s_PJjs6eM&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=vMvYgM6EMjJ1V31sz-KfvQ&oh=01_Q5Aa2QGndKB25C2pWY8LXrV702mD0w4IPY5GEAN5k-5nTJxf1g&oe=68D3D83D"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p34='a85d423e-f7c2-4b27-96d1-630d8bfd87e0', @p35='Dear User,
Testing' (Nullable = false), @p36='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p37='[]' (Nullable = false), @p38='MARKETING', @p39='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p40='817759340478776', @p41='True', @p42='True', @p43='en' (Nullable = false), @p44='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p45='testing_1' (Nullable = false), @p46='0', @p47='pinnacle' (Nullable = false), @p48='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=VUWTYFbh_iMQ7kNvwErWoWV&_nc_oc=AdlYwPN5yNGNyzF2iywEd8Lt6769EQj5dSq1kqTTRclS7YYyEFkQPrC3hU94AvGX3Dg&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=vMvYgM6EMjJ1V31sz-KfvQ&oh=01_Q5Aa2QHjS-5T0JkB4FNsDCJXgZ7YfoqSmuVqSyu9tjeGpYhzJw&oe=68D3C4D9"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p51='ae93f19e-ee5d-4f4a-ba5f-83443e6473f6', @p52='test msg' (Nullable = false), @p53='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p54='[]' (Nullable = false), @p55='MARKETING', @p56='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p57='422342703560510', @p58='False', @p59='True', @p60='en_GB' (Nullable = false), @p61='2025-08-25T11:49:46.0290435Z' (DbType = DateTime), @p62='test_msg' (Nullable = false), @p63='0', @p64='pinnacle' (Nullable = false), @p65='{"name":"test_msg","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello"},{"type":"BODY","text":"test msg"}],"language":"en_GB","status":"APPROVED","category":"MARKETING","id":"422342703560510"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-25T11:49:46.0290435Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
2025-08-25 17:19:47.655 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:19:47.656 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1633.479ms
2025-08-25 17:19:47.657 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-25 17:19:47.658 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 1640.9806ms
2025-08-25 17:19:47.670 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:47.672 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:47.673 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 3.0024ms
2025-08-25 17:19:47.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 17:19:47.677 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:47.678 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:47.679 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:47.682 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 17:19:47.685 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:47.687 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.5512ms
2025-08-25 17:19:47.688 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 17:19:47.689 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 13.1681ms
2025-08-25 17:19:50.710 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/automation_builder_launch - null null
2025-08-25 17:19:50.712 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:50.713 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/automation_builder_launch - 204 null null 3.2342ms
2025-08-25 17:19:50.716 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/automation_builder_launch - null null
2025-08-25 17:19:50.718 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:19:50.719 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 17:19:50.720 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 17:19:50.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='automation_builder_launch'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-25 17:19:50.727 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:19:50.728 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 7.0059ms
2025-08-25 17:19:50.729 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-25 17:19:50.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/automation_builder_launch - 200 null application/json; charset=utf-8 14.4036ms
2025-08-25 17:21:16.055 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-25 17:21:16.058 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.059 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.9989ms
2025-08-25 17:21:16.065 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 576
2025-08-25 17:21:16.067 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.068 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-25 17:21:16.072 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:21:16.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 17:21:16.118 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 17:21:16.119 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 17:21:16.699 +05:30 [INF] Received HTTP response headers after 579.2032ms - 401
2025-08-25 17:21:16.701 +05:30 [INF] End processing HTTP request after 582.8556ms - 401
2025-08-25 17:21:16.703 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 17:21:16.789 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='03ef3838-08f4-4605-b705-046ce8661d89', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-25T11:51:16.7267297Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='automation_builder_launch', @p14='automation_builder_launch' (Nullable = false), @p15='Automation_Builder_Launch' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='automation_builder_launch', @p20='["User"]', @p21='2025-08-25T11:51:16.7267795Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-25 17:21:16.792 +05:30 [INF] ✅ Campaign 'Automation_Builder_Launch' created with 0 recipients, 0 user buttons, 0 template buttons and 1 template parameters
2025-08-25 17:21:16.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:21:16.798 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 724.5563ms
2025-08-25 17:21:16.799 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-25 17:21:16.800 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 734.7879ms
2025-08-25 17:21:16.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-25 17:21:16.853 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:21:16.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-25 17:21:16.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-25 17:21:16.862 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.864 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.867 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.869 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 16.7704ms
2025-08-25 17:21:16.870 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 17.3628ms
2025-08-25 17:21:16.871 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 15.3363ms
2025-08-25 17:21:16.871 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 16.1426ms
2025-08-25 17:21:16.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:21:16.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-25 17:21:16.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-25 17:21:16.886 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.888 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.890 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.891 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-25 17:21:16.891 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:21:16.891 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 17:21:16.895 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-25 17:21:16.896 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:21:16.896 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 17:21:16.902 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-25 17:21:16.905 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-25 17:21:16.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:21:16.914 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 17:21:16.916 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 19.5153ms
2025-08-25 17:21:16.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-25 17:21:16.919 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:21:16.921 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:16.922 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 40.277ms
2025-08-25 17:21:16.923 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:21:16.926 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-25 17:21:16.930 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-25 17:21:16.933 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:21:16.934 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 6.8782ms
2025-08-25 17:21:16.936 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:21:16.937 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 20.4352ms
2025-08-25 17:21:16.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-25 17:21:16.944 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 17:21:16.958 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-25 17:21:16.963 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 65.686ms
2025-08-25 17:21:16.964 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-25 17:21:16.965 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 85.9144ms
2025-08-25 17:21:16.984 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:21:16.989 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 90.4958ms
2025-08-25 17:21:16.991 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 17:21:16.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 107.8517ms
2025-08-25 17:21:20.836 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89/assign-contacts - null null
2025-08-25 17:21:20.840 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:20.841 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89/assign-contacts - 204 null null 4.2951ms
2025-08-25 17:21:20.844 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89/assign-contacts - application/json 55
2025-08-25 17:21:20.847 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:20.849 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-25 17:21:20.853 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:21:20.869 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-25 17:21:20.921 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='03ef3838-08f4-4605-b705-046ce8661d89', @p4=NULL, @p5=NULL, @p6='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-25T11:51:20.8755267Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-25T11:51:20.8755806Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-25 17:21:20.925 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:21:20.927 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 73.2899ms
2025-08-25 17:21:20.929 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-25 17:21:20.930 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89/assign-contacts - 200 null application/json; charset=utf-8 85.2065ms
2025-08-25 17:21:24.701 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-25 17:21:24.704 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:24.705 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 4.2704ms
2025-08-25 17:21:24.718 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-25 17:21:24.721 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:24.722 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:21:24.723 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:21:24.731 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-08-25 17:21:24.735 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:21:24.736 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.0996ms
2025-08-25 17:21:24.738 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:21:24.739 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 20.6045ms
2025-08-25 17:21:29.653 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:21:29.656 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:29.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.027ms
2025-08-25 17:21:29.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:21:29.663 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:29.664 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:21:29.665 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:21:29.670 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 17:21:29.673 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:21:29.674 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.4518ms
2025-08-25 17:21:29.675 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:21:29.676 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.6232ms
2025-08-25 17:21:43.842 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:21:43.845 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:43.847 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 5.0124ms
2025-08-25 17:21:43.850 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 17:21:43.854 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:21:43.854 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:21:43.858 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:22:06.462 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 17:22:06.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 17:22:43.311 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 17:22:43.326 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 17:22:43.326 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates
2025-08-25 17:22:43.731 +05:30 [INF] Received HTTP response headers after 403.0781ms - 401
2025-08-25 17:22:43.732 +05:30 [INF] End processing HTTP request after 406.276ms - 401
2025-08-25 17:22:43.733 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-25 17:47:55.189 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 17:47:55.220 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 17:47:55.233 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 17:47:55.854 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 17:47:56.271 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 17:47:56.440 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 17:47:56.441 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 17:47:56.442 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 17:47:56.443 +05:30 [INF] Hosting environment: Development
2025-08-25 17:47:56.444 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 17:47:56.448 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 17:47:56.464 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__cutoff_0='2025-08-18T12:17:55.3120902Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 17:47:58.683 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 17:47:58.820 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 144.5108ms
2025-08-25 17:47:58.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 17:47:58.844 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.9965ms
2025-08-25 17:47:58.893 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 17:47:58.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.9278ms
2025-08-25 17:47:59.053 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 17:47:59.218 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.5881ms
2025-08-25 17:48:15.526 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 17:48:15.530 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 17:48:15.564 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:15.567 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 41.5718ms
2025-08-25 17:48:15.570 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 17:48:15.578 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:15.670 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 17:48:15.683 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 17:48:15.741 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 17:48:15.797 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 17:48:15.876 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 17:48:15.972 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 17:48:15.980 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 17:48:15.988 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 17:48:15.989 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 17:48:15.994 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:48:16.002 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 314.3196ms
2025-08-25 17:48:16.003 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 17:48:16.007 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 436.9967ms
2025-08-25 17:48:16.011 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:48:16.014 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:16.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1574ms
2025-08-25 17:48:16.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:48:16.020 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:16.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:48:16.030 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:48:16.041 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 17:48:16.067 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:48:16.070 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:48:16.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 47.4279ms
2025-08-25 17:48:16.080 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:48:16.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 63.2351ms
2025-08-25 17:48:16.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:48:16.096 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:16.100 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:48:16.101 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:48:16.111 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:48:16.114 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:48:16.116 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.4113ms
2025-08-25 17:48:16.118 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:48:16.119 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.3162ms
2025-08-25 17:48:16.168 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 17:48:16.171 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:16.173 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:48:16.175 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 17:48:16.182 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 17:48:16.185 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 17:48:16.187 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4064ms
2025-08-25 17:48:16.188 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 17:48:16.189 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8869ms
2025-08-25 17:48:20.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:48:20.950 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:20.951 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.5901ms
2025-08-25 17:48:20.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:48:20.958 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:20.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:48:20.964 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:48:21.008 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 17:48:21.011 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:48:21.022 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 55.6365ms
2025-08-25 17:48:21.023 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:48:21.025 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 70.551ms
2025-08-25 17:48:22.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:48:22.764 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:22.765 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 5.515ms
2025-08-25 17:48:22.768 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 17:48:22.771 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:48:22.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:48:22.776 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:48:35.472 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 17:48:35.492 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 17:48:55.760 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 17:50:28.904 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 17:50:28.906 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 17:50:30.393 +05:30 [INF] Received HTTP response headers after 1484.8326ms - 200
2025-08-25 17:50:30.395 +05:30 [INF] End processing HTTP request after 1491.8662ms - 200
2025-08-25 17:51:21.352 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 17:51:21.410 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 17:51:21.411 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 17:51:21.685 +05:30 [INF] Received HTTP response headers after 272.9648ms - 400
2025-08-25 17:51:21.688 +05:30 [INF] End processing HTTP request after 277.5953ms - 400
2025-08-25 17:51:40.516 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[@p0='ec15715c-e269-4862-a8c9-7ab98c767dac', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:21:23.7711487Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='7fd3bacd-2553-45c8-a2c7-3052e97cc757', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:21:30.0035610Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='ec15715c-e269-4862-a8c9-7ab98c767dac' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:21:30.0050772Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 17:51:54.507 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:51:56.384 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 213605.7014ms
2025-08-25 17:51:56.385 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:51:56.387 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 213618.2605ms
2025-08-25 17:53:29.981 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:53:29.984 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:53:29.985 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.7305ms
2025-08-25 17:53:29.988 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 17:53:29.990 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:53:29.992 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:53:29.993 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:53:37.730 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 17:53:51.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 17:54:07.594 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 17:54:07.595 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 17:54:08.680 +05:30 [INF] Received HTTP response headers after 1083.8114ms - 200
2025-08-25 17:54:08.681 +05:30 [INF] End processing HTTP request after 1087.4679ms - 200
2025-08-25 17:55:25.007 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 17:55:25.008 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 17:55:25.659 +05:30 [INF] Received HTTP response headers after 649.759ms - 400
2025-08-25 17:55:25.661 +05:30 [INF] End processing HTTP request after 653.5131ms - 400
2025-08-25 17:55:58.937 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='6bdae5e3-8837-4489-bfd4-8be0367eefef', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:25:58.8631622Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='2c59e202-1562-4a43-a230-2a3893ba4bb6', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:25:58.8654641Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='6bdae5e3-8837-4489-bfd4-8be0367eefef' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:25:58.8654644Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 17:55:58.940 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:55:58.941 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 148946.6463ms
2025-08-25 17:55:58.942 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:55:58.943 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 148954.7042ms
2025-08-25 17:56:02.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:56:02.616 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:56:02.616 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 2.9384ms
2025-08-25 17:56:02.619 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 17:56:02.620 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:56:02.621 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:56:02.622 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:56:12.446 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 17:56:24.916 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 17:56:29.950 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 17:56:29.951 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 17:56:31.067 +05:30 [INF] Received HTTP response headers after 1114.7154ms - 200
2025-08-25 17:56:31.068 +05:30 [INF] End processing HTTP request after 1117.9138ms - 200
2025-08-25 17:57:21.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 17:57:21.209 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 17:57:21.210 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 17:57:21.566 +05:30 [INF] Received HTTP response headers after 355.1268ms - 400
2025-08-25 17:57:21.568 +05:30 [INF] End processing HTTP request after 358.5303ms - 400
2025-08-25 17:57:21.573 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='70cdcdfe-8643-4226-84e6-094e924628ca', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:27:21.5693622Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='d8506e8a-887f-4fc3-a4cd-19be6425eb43', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:27:21.5696429Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='70cdcdfe-8643-4226-84e6-094e924628ca' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:27:21.5696432Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 17:57:21.577 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:57:21.579 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 78955.4152ms
2025-08-25 17:57:21.580 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 17:57:21.581 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 78962.5309ms
2025-08-25 17:57:24.373 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-25 17:57:24.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-25 17:57:24.380 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:57:24.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-25 17:57:24.389 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.391 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.393 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.395 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 22.5033ms
2025-08-25 17:57:24.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 13.4238ms
2025-08-25 17:57:24.397 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 19.8963ms
2025-08-25 17:57:24.398 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 15.2934ms
2025-08-25 17:57:24.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-25 17:57:24.413 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-25 17:57:24.416 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:57:24.419 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.421 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.425 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.426 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 17:57:24.427 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:57:24.428 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-25 17:57:24.432 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 17:57:24.432 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-25 17:57:24.434 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:57:24.443 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-25 17:57:24.447 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-25 17:57:24.453 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:57:24.458 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.6956ms
2025-08-25 17:57:24.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-25 17:57:24.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 17:57:24.480 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:24.466 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:57:24.487 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:57:24.488 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 74.9933ms
2025-08-25 17:57:24.489 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-25 17:57:24.499 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-25 17:57:24.504 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:57:24.506 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 9.7787ms
2025-08-25 17:57:24.508 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-25 17:57:24.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 49.4206ms
2025-08-25 17:57:24.517 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 17:57:24.523 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 17:57:24.531 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 96.4797ms
2025-08-25 17:57:24.533 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 17:57:24.534 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 124.5072ms
2025-08-25 17:57:24.559 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-25 17:57:24.566 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-25 17:57:24.571 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 132.2781ms
2025-08-25 17:57:24.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-25 17:57:24.575 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 158.4677ms
2025-08-25 17:57:30.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:57:30.758 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:30.760 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.1249ms
2025-08-25 17:57:30.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:57:30.765 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:30.766 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:57:30.767 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:57:30.773 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 17:57:30.776 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:57:30.778 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.8575ms
2025-08-25 17:57:30.779 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:57:30.780 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.1671ms
2025-08-25 17:57:32.124 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:57:32.127 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:32.128 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.8608ms
2025-08-25 17:57:32.139 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 17:57:32.142 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:57:32.143 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-25 17:57:32.147 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:57:32.161 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-25 17:57:32.164 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:57:32.165 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 16.1344ms
2025-08-25 17:57:32.166 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-25 17:57:32.168 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 28.8027ms
2025-08-25 17:58:16.980 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:58:16.987 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:58:16.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.6721ms
2025-08-25 17:58:16.991 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 17:58:16.993 +05:30 [INF] CORS policy execution successful.
2025-08-25 17:58:16.994 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:58:16.995 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 17:58:17.002 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 17:58:17.005 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 17:58:17.006 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.6371ms
2025-08-25 17:58:17.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 17:58:17.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.0066ms
2025-08-25 18:07:28.677 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 18:07:28.714 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 18:07:28.726 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 18:07:29.402 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 18:07:29.845 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 18:07:30.015 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 18:07:30.016 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 18:07:30.018 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 18:07:30.018 +05:30 [INF] Hosting environment: Development
2025-08-25 18:07:30.019 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 18:07:30.027 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 18:07:30.044 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[@__cutoff_0='2025-08-18T12:37:28.8067360Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 18:07:32.263 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 18:07:32.431 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 175.3259ms
2025-08-25 18:07:32.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 18:07:32.451 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.2801ms
2025-08-25 18:07:32.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 18:07:32.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.6507ms
2025-08-25 18:07:32.716 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 18:07:32.900 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 184.3444ms
2025-08-25 18:07:40.571 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 18:07:40.575 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 18:07:40.610 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:40.613 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 41.8879ms
2025-08-25 18:07:40.617 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 18:07:40.625 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:40.715 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 18:07:40.727 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 18:07:40.788 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 18:07:40.844 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 18:07:40.922 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 18:07:41.023 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 18:07:41.031 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 18:07:41.043 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 18:07:41.045 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 18:07:41.054 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:07:41.063 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 332.1655ms
2025-08-25 18:07:41.065 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 18:07:41.072 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 454.7146ms
2025-08-25 18:07:41.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:07:41.079 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:41.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.524ms
2025-08-25 18:07:41.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:07:41.087 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:41.093 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:07:41.098 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:07:41.111 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 18:07:41.138 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:07:41.141 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:07:41.150 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 49.6517ms
2025-08-25 18:07:41.151 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:07:41.152 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 68.8387ms
2025-08-25 18:07:41.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:07:41.171 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:41.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:07:41.180 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:07:41.193 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:07:41.198 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:07:41.200 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.9417ms
2025-08-25 18:07:41.201 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:07:41.203 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.9437ms
2025-08-25 18:07:41.259 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:07:41.263 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:41.266 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:07:41.268 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:07:41.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:07:41.282 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:07:41.284 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.844ms
2025-08-25 18:07:41.286 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:07:41.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.9883ms
2025-08-25 18:07:45.203 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 18:07:45.206 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:45.207 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 4.4826ms
2025-08-25 18:07:45.215 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 18:07:45.219 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:45.222 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 18:07:45.227 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 18:07:45.257 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 18:07:45.261 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:07:45.269 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 40.1262ms
2025-08-25 18:07:45.271 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 18:07:45.273 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 57.9619ms
2025-08-25 18:07:50.148 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 18:07:50.152 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:50.153 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.105ms
2025-08-25 18:07:50.159 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 18:07:50.163 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:50.165 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 18:07:50.169 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 18:07:50.213 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 18:07:50.217 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 18:07:50.226 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 55.2558ms
2025-08-25 18:07:50.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 18:07:50.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 70.4404ms
2025-08-25 18:07:51.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 18:07:51.967 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:51.968 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.7254ms
2025-08-25 18:07:51.971 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 18:07:51.974 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:07:51.975 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:07:51.979 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 18:07:57.674 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 18:07:57.697 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 18:07:59.463 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 18:07:59.467 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:07:59.469 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:08:00.526 +05:30 [INF] Received HTTP response headers after 1053.2983ms - 200
2025-08-25 18:08:00.529 +05:30 [INF] End processing HTTP request after 1062.249ms - 200
2025-08-25 18:08:00.573 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 18:08:00.627 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:08:00.629 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:08:00.946 +05:30 [INF] Received HTTP response headers after 316.5773ms - 400
2025-08-25 18:08:00.948 +05:30 [INF] End processing HTTP request after 320.5103ms - 400
2025-08-25 18:08:01.152 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='7a449c2b-184b-4c58-9e69-094e699cb331', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:38:00.9510025Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='0f7fccd7-9f54-444a-93d6-8350a85e716f', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:38:00.9911916Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='7a449c2b-184b-4c58-9e69-094e699cb331' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:38:00.9912341Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 18:08:01.173 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:08:01.179 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9198.6381ms
2025-08-25 18:08:01.180 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:08:01.181 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 9210.3186ms
2025-08-25 18:08:18.944 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 18:08:18.947 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:08:18.947 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.0154ms
2025-08-25 18:08:18.950 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 18:08:18.953 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:08:18.954 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:08:18.955 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 18:08:29.457 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 18:08:47.548 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 18:08:59.810 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:08:59.811 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:08:59.884 +05:30 [INF] Received HTTP response headers after 72.3246ms - 200
2025-08-25 18:08:59.886 +05:30 [INF] End processing HTTP request after 76.1208ms - 200
2025-08-25 18:09:23.887 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:09:23.888 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:09:24.189 +05:30 [INF] Received HTTP response headers after 299.8814ms - 400
2025-08-25 18:09:24.190 +05:30 [INF] End processing HTTP request after 303.3485ms - 400
2025-08-25 18:09:31.455 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='afce5083-7c89-4f19-a290-92a7c9638ebe', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:39:31.4508415Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='0f558bfa-19e7-4cb4-a471-0307008b37d9', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:39:31.4512339Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='afce5083-7c89-4f19-a290-92a7c9638ebe' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:39:31.4512339Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 18:09:31.459 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:09:31.460 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 72503.6216ms
2025-08-25 18:09:31.461 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:09:31.462 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 72511.3882ms
2025-08-25 18:09:41.092 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 18:09:41.095 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:41.096 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5024ms
2025-08-25 18:09:41.102 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 18:09:41.105 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:41.106 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 18:09:41.107 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 18:09:41.111 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 18:09:41.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 18:09:41.119 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 18:09:41.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 18:09:41.127 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 18:09:41.128 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 18:09:41.129 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 18:09:41.130 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:09:41.132 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.9996ms
2025-08-25 18:09:41.133 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 18:09:41.134 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 31.5754ms
2025-08-25 18:09:41.138 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:09:41.140 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:41.141 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.558ms
2025-08-25 18:09:41.144 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:09:41.146 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:41.148 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:09:41.149 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:09:41.155 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:09:41.158 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:09:41.160 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8884ms
2025-08-25 18:09:41.162 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:09:41.163 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.1142ms
2025-08-25 18:09:41.179 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:09:41.182 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:41.184 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:09:41.185 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:09:41.191 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:09:41.195 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:09:41.197 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7917ms
2025-08-25 18:09:41.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:09:41.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4342ms
2025-08-25 18:09:41.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:09:41.269 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:41.271 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:09:41.272 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:09:41.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:09:41.283 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:09:41.285 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2783ms
2025-08-25 18:09:41.286 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:09:41.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.2018ms
2025-08-25 18:09:58.707 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 18:09:58.711 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:58.712 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.2516ms
2025-08-25 18:09:58.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 18:09:58.723 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:58.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 18:09:58.725 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 18:09:58.732 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 18:09:58.736 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 18:09:58.738 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.6321ms
2025-08-25 18:09:58.739 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 18:09:58.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 22.2587ms
2025-08-25 18:09:59.861 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 18:09:59.863 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:59.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.4285ms
2025-08-25 18:09:59.867 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 18:09:59.869 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:09:59.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:09:59.872 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 18:10:02.025 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 18:10:02.626 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 18:10:02.628 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:10:02.629 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:10:03.736 +05:30 [INF] Received HTTP response headers after 1105.7332ms - 200
2025-08-25 18:10:03.738 +05:30 [INF] End processing HTTP request after 1109.5128ms - 200
2025-08-25 18:10:03.740 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:10:03.741 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:10:04.080 +05:30 [INF] Received HTTP response headers after 337.8144ms - 400
2025-08-25 18:10:04.082 +05:30 [INF] End processing HTTP request after 341.8205ms - 400
2025-08-25 18:10:04.087 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='6884ea13-3e8d-46e2-bbf0-4eb8ebec83fe', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:40:04.0834856Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='e685af9a-bc28-4d64-a936-c6a3222b7dc0', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:40:04.0838683Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='6884ea13-3e8d-46e2-bbf0-4eb8ebec83fe' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:40:04.0838683Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 18:10:04.091 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:10:04.092 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4218.6111ms
2025-08-25 18:10:04.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:10:04.094 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 4227.5639ms
2025-08-25 18:10:17.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 18:10:17.839 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:10:17.840 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.3512ms
2025-08-25 18:10:17.843 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 18:10:17.845 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:10:17.846 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:10:17.847 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 18:10:20.635 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 18:10:21.348 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 18:10:21.351 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:10:21.352 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 18:10:21.436 +05:30 [INF] Received HTTP response headers after 82.6764ms - 200
2025-08-25 18:10:21.438 +05:30 [INF] End processing HTTP request after 86.8992ms - 200
2025-08-25 18:10:21.440 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:10:21.441 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 18:10:21.534 +05:30 [INF] Received HTTP response headers after 91.8749ms - 400
2025-08-25 18:10:21.536 +05:30 [INF] End processing HTTP request after 96.1183ms - 400
2025-08-25 18:10:21.542 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='209fdd78-5540-456f-aab0-cd72a632f7e9', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:40:21.5375896Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='d8ae02a9-f253-4812-9a25-a3ab2b27a377', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T12:40:21.5380855Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='209fdd78-5540-456f-aab0-cd72a632f7e9' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T12:40:21.5380855Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 18:10:21.563 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:10:21.565 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3717.0126ms
2025-08-25 18:10:21.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 18:10:21.569 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 3726.0293ms
2025-08-25 18:12:30.102 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 18:12:30.108 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 18:12:30.113 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:12:30.116 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:12:30.117 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 15.1305ms
2025-08-25 18:12:30.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 12.5123ms
2025-08-25 18:12:30.128 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 18:12:30.132 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 18:12:30.135 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:12:30.137 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:12:30.139 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 18:12:30.139 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 18:12:30.144 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 18:12:30.144 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 18:12:30.152 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 18:12:30.160 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 18:12:30.165 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:12:30.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 18:12:30.181 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 34.7836ms
2025-08-25 18:12:30.182 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 18:12:30.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 55.7542ms
2025-08-25 18:12:30.202 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 18:12:30.208 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:12:30.213 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 65.3069ms
2025-08-25 18:12:30.214 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 18:12:30.216 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 84.0366ms
2025-08-25 18:13:03.416 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 18:13:03.418 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:13:03.419 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.3151ms
2025-08-25 18:13:03.422 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 81
2025-08-25 18:13:03.425 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:13:03.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:13:03.431 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 18:13:05.435 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 18:13:05.515 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 18:13:05.518 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 18:13:05.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 18:13:05.533 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:13:05.534 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:13:06.819 +05:30 [INF] Received HTTP response headers after 1284.2803ms - 401
2025-08-25 18:13:06.821 +05:30 [INF] End processing HTTP request after 1287.6756ms - 401
2025-08-25 18:13:06.822 +05:30 [WRN] Pinnacle send failed (HTTP 401): {"code":100,"status":"failed","message":"Authentication Failed"}
2025-08-25 18:13:06.827 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='0ff9ab18-9b66-4778-8f31-1d20338c20d5', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:43:06.8241013Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='Template Free Message Testing' (Nullable = false), @p11=NULL, @p12='{"code":100,"status":"failed","message":"Authentication Failed"}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Template Free Message Testing', @p16='2025-08-25T12:43:06.8241015Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 18:13:06.830 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:13:06.833 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3400.4035ms
2025-08-25 18:13:06.835 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:13:06.836 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 3414.0367ms
2025-08-25 18:13:56.840 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 18:13:56.842 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:13:56.843 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.0894ms
2025-08-25 18:13:56.869 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 81
2025-08-25 18:13:56.871 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:13:56.872 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:13:56.873 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 18:14:11.589 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 18:14:11.592 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 18:14:11.607 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 18:14:12.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 18:14:12.305 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:14:12.306 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:14:12.402 +05:30 [INF] Received HTTP response headers after 95.0016ms - 401
2025-08-25 18:14:12.403 +05:30 [INF] End processing HTTP request after 97.8769ms - 401
2025-08-25 18:14:12.404 +05:30 [WRN] Pinnacle send failed (HTTP 401): {"code":100,"status":"failed","message":"Authentication Failed"}
2025-08-25 18:14:25.716 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='217357e9-ba8e-4ade-a022-9b4a52fee8b3', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:44:24.4645601Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='Template Free Message Testing' (Nullable = false), @p11=NULL, @p12='{"code":100,"status":"failed","message":"Authentication Failed"}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Template Free Message Testing', @p16='2025-08-25T12:44:24.4716861Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 18:14:27.038 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:14:27.040 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 30165.2426ms
2025-08-25 18:14:27.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:14:27.042 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 30173.0179ms
2025-08-25 18:14:46.537 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:14:46.540 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.541 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1069ms
2025-08-25 18:14:46.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:14:46.549 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.550 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:14:46.551 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:14:46.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:14:46.560 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:14:46.561 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5225ms
2025-08-25 18:14:46.563 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:14:46.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0135ms
2025-08-25 18:14:46.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:14:46.627 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.628 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:14:46.629 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:14:46.632 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:14:46.635 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:14:46.636 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.262ms
2025-08-25 18:14:46.637 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:14:46.638 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.3976ms
2025-08-25 18:14:46.667 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 18:14:46.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:14:46.668 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 18:14:46.675 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.677 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.680 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.683 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:14:46.681 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.9097ms
2025-08-25 18:14:46.683 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 15.4501ms
2025-08-25 18:14:46.688 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:14:46.691 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 18:14:46.694 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 18:14:46.700 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:14:46.705 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:14:46.706 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 18:14:46.708 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:14:46.709 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 18:14:46.710 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 18:14:46.711 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.2578ms
2025-08-25 18:14:46.712 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 18:14:46.715 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 18:14:46.716 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:14:46.722 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 18:14:46.724 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 54.9887ms
2025-08-25 18:14:46.734 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:14:46.738 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 20.0543ms
2025-08-25 18:14:46.740 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 18:14:46.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 47.0496ms
2025-08-25 18:14:46.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 18:14:46.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 18:14:46.796 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:14:46.797 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 82.406ms
2025-08-25 18:14:46.798 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 18:14:46.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 108.0562ms
2025-08-25 18:15:34.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 18:15:34.237 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:15:34.237 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 2.9241ms
2025-08-25 18:15:34.241 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 81
2025-08-25 18:15:34.243 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:15:34.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:15:34.245 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 18:15:35.617 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 18:15:35.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 18:15:35.625 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 18:15:35.628 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 18:15:35.630 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:15:35.631 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:15:36.009 +05:30 [INF] Received HTTP response headers after 377.0502ms - 401
2025-08-25 18:15:36.011 +05:30 [INF] End processing HTTP request after 380.8367ms - 401
2025-08-25 18:15:36.012 +05:30 [WRN] Pinnacle send failed (HTTP 401): {"code":100,"status":"failed","message":"Authentication Failed"}
2025-08-25 18:15:36.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='91f38289-29ee-4fdf-a153-abb57a27992f', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:45:36.0142695Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='Template Free Message Testing' (Nullable = false), @p11=NULL, @p12='{"code":100,"status":"failed","message":"Authentication Failed"}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Template Free Message Testing', @p16='2025-08-25T12:45:36.0142697Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 18:15:36.019 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:15:36.021 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1774.6376ms
2025-08-25 18:15:36.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:15:36.023 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1782.7337ms
2025-08-25 18:18:13.545 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 18:18:13.593 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 18:18:13.607 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 18:18:14.363 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 18:18:14.879 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 18:18:15.101 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 18:18:15.102 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 18:18:15.103 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 18:18:15.105 +05:30 [INF] Hosting environment: Development
2025-08-25 18:18:15.106 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 18:18:15.107 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 18:18:15.127 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@__cutoff_0='2025-08-18T12:48:13.6984482Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 18:18:17.258 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 18:18:17.399 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 148.1721ms
2025-08-25 18:18:17.418 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 18:18:17.431 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.4082ms
2025-08-25 18:18:17.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 18:18:17.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.5563ms
2025-08-25 18:18:17.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 18:18:17.871 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 197.1523ms
2025-08-25 18:18:21.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 18:18:21.081 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 18:18:21.115 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:21.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 40.9227ms
2025-08-25 18:18:21.122 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 81
2025-08-25 18:18:21.130 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:21.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:18:21.234 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 18:18:21.262 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 18:18:21.315 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 18:18:21.373 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 18:18:21.382 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 18:18:21.409 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:18:21.411 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:18:22.268 +05:30 [INF] Received HTTP response headers after 854.5067ms - 401
2025-08-25 18:18:22.270 +05:30 [INF] End processing HTTP request after 862.3965ms - 401
2025-08-25 18:18:22.272 +05:30 [WRN] Pinnacle send failed (HTTP 401): {"code":100,"status":"failed","message":"Authentication Failed"}
2025-08-25 18:18:22.410 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='ef20608b-a0c6-4297-bd60-f72cc5be48f2', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:48:22.2742223Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='Template Free Message Testing' (Nullable = false), @p11=NULL, @p12='{"code":100,"status":"failed","message":"Authentication Failed"}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Template Free Message Testing', @p16='2025-08-25T12:48:22.2742488Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 18:18:22.425 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:18:22.437 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1198.9719ms
2025-08-25 18:18:22.439 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:18:22.443 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1321.0126ms
2025-08-25 18:18:38.680 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 18:18:38.683 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:38.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.956ms
2025-08-25 18:18:38.687 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 18:18:38.690 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:38.693 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 18:18:38.697 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 18:18:38.706 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 18:18:38.761 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 18:18:38.803 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 18:18:38.887 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 18:18:38.894 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 18:18:38.901 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 18:18:38.903 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 18:18:38.904 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:18:38.906 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 207.2643ms
2025-08-25 18:18:38.907 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 18:18:38.908 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 221.4443ms
2025-08-25 18:18:38.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:18:38.913 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:38.914 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2042ms
2025-08-25 18:18:38.917 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:18:38.919 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:38.922 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:18:38.927 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:18:38.939 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 18:18:38.963 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:18:38.966 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:18:38.970 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 41.1024ms
2025-08-25 18:18:38.971 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:18:38.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 55.3742ms
2025-08-25 18:18:38.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:18:38.987 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:38.990 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:18:38.991 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:18:39.001 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:18:39.005 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:18:39.006 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4268ms
2025-08-25 18:18:39.007 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:18:39.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.2602ms
2025-08-25 18:18:39.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 18:18:39.070 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:39.072 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:18:39.077 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 18:18:39.087 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 18:18:39.091 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:18:39.093 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.8082ms
2025-08-25 18:18:39.094 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 18:18:39.096 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.5331ms
2025-08-25 18:18:45.309 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 18:18:45.313 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:45.314 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 4.5011ms
2025-08-25 18:18:45.317 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-25 18:18:45.320 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:45.321 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 18:18:45.326 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-25 18:18:45.345 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-25 18:18:45.348 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:18:45.354 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 26.3841ms
2025-08-25 18:18:45.355 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-25 18:18:45.356 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 39.4785ms
2025-08-25 18:18:50.167 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 18:18:50.169 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:50.170 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 3.2248ms
2025-08-25 18:18:50.173 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 18:18:50.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 18:18:50.177 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:50.179 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:50.179 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 6.0719ms
2025-08-25 18:18:50.180 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 18:18:50.183 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 18:18:50.186 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:18:50.187 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 18:18:50.188 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 18:18:50.191 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 18:18:50.192 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 18:18:50.206 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 18:18:50.209 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 18:18:50.212 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 18:18:50.222 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 27.7966ms
2025-08-25 18:18:50.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 18:18:50.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 41.0488ms
2025-08-25 18:18:50.240 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 18:18:50.246 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:18:50.251 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 62.6668ms
2025-08-25 18:18:50.252 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 18:18:50.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 78.711ms
2025-08-25 18:19:01.843 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 18:19:01.845 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:19:01.846 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.0345ms
2025-08-25 18:19:01.848 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 58
2025-08-25 18:19:01.850 +05:30 [INF] CORS policy execution successful.
2025-08-25 18:19:01.851 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:19:01.852 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 18:19:01.856 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 18:19:01.859 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 18:19:01.862 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 18:19:01.864 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 18:19:01.866 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:19:01.867 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/251114021418599/messages
2025-08-25 18:19:01.930 +05:30 [INF] Received HTTP response headers after 62.1644ms - 401
2025-08-25 18:19:01.931 +05:30 [INF] End processing HTTP request after 65.1145ms - 401
2025-08-25 18:19:01.932 +05:30 [WRN] Pinnacle send failed (HTTP 401): {"code":100,"status":"failed","message":"Authentication Failed"}
2025-08-25 18:19:01.954 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='c3478af9-69cb-473a-a910-0495e36ab08c', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T12:49:01.9339364Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='ADdASD' (Nullable = false), @p11=NULL, @p12='{"code":100,"status":"failed","message":"Authentication Failed"}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='ADdASD', @p16='2025-08-25T12:49:01.9339366Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 18:19:01.957 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 18:19:01.958 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 105.2016ms
2025-08-25 18:19:01.959 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 18:19:01.960 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 112.264ms
2025-08-25 19:05:37.248 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 19:05:37.293 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 19:05:37.313 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 19:05:38.099 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 19:05:38.650 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 19:05:38.844 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 19:05:38.846 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 19:05:38.847 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 19:05:38.847 +05:30 [INF] Hosting environment: Development
2025-08-25 19:05:38.848 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 19:05:38.861 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 19:05:38.878 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[@__cutoff_0='2025-08-18T13:35:37.4108933Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 19:05:41.025 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 19:05:41.345 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 331.4777ms
2025-08-25 19:05:41.380 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 19:05:41.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.8187ms
2025-08-25 19:05:41.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 19:05:41.548 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.4798ms
2025-08-25 19:05:41.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 19:05:42.037 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 284.0999ms
2025-08-25 19:05:52.602 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 19:05:52.611 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 19:05:52.679 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:05:52.685 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 82.1885ms
2025-08-25 19:05:52.692 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 19:05:52.707 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:05:52.890 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 19:05:52.911 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 19:05:53.018 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 19:05:53.125 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 19:05:53.302 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 19:05:53.476 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 19:05:53.489 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 19:05:53.503 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 19:05:53.506 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 19:05:53.518 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:05:53.531 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 612.7758ms
2025-08-25 19:05:53.535 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 19:05:53.543 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 850.831ms
2025-08-25 19:05:53.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:05:53.554 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:05:53.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6121ms
2025-08-25 19:05:53.562 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:05:53.569 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:05:53.582 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:05:53.591 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:05:53.612 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 19:05:53.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:05:53.661 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:05:53.676 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 81.5262ms
2025-08-25 19:05:53.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:05:53.681 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 118.9682ms
2025-08-25 19:05:53.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:05:53.716 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:05:53.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:05:53.727 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:05:53.741 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:05:53.747 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:05:53.749 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9375ms
2025-08-25 19:05:53.751 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:05:53.753 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.7053ms
2025-08-25 19:05:53.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:05:53.844 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:05:53.848 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:05:53.850 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:05:53.861 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:05:53.867 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:05:53.870 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0933ms
2025-08-25 19:05:53.872 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:05:53.874 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.9751ms
2025-08-25 19:06:01.398 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:06:01.413 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:01.415 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 17.3669ms
2025-08-25 19:06:01.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:06:01.433 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:01.436 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:06:01.445 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:06:01.525 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 19:06:01.531 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 19:06:01.549 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 101.0178ms
2025-08-25 19:06:01.551 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:06:01.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 127.5077ms
2025-08-25 19:06:06.537 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 19:06:06.542 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:06.544 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 6.6676ms
2025-08-25 19:06:06.549 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 19:06:06.555 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:06.558 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:06:06.564 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:06:18.014 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 19:06:18.038 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 19:06:19.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 19:06:19.652 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 19:06:19.655 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 19:06:21.376 +05:30 [INF] Received HTTP response headers after 1716.5733ms - 200
2025-08-25 19:06:21.379 +05:30 [INF] End processing HTTP request after 1727.9353ms - 200
2025-08-25 19:06:21.422 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 19:06:21.500 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:06:21.502 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:06:21.985 +05:30 [INF] Received HTTP response headers after 481.1555ms - 400
2025-08-25 19:06:21.987 +05:30 [INF] End processing HTTP request after 487.0333ms - 400
2025-08-25 19:06:22.379 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[@p0='cbc97596-124c-440f-b998-01cfd90e7a11', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T13:36:21.9907801Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='7dbaee44-88b7-4ceb-80fe-77d752a1a179', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T13:36:22.0636641Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='cbc97596-124c-440f-b998-01cfd90e7a11' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T13:36:22.0637446Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 19:06:22.413 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:06:22.424 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 15856.1882ms
2025-08-25 19:06:22.426 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:06:22.428 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 15879.07ms
2025-08-25 19:06:31.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 19:06:31.969 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 19:06:31.971 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:31.975 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:31.976 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 9.4794ms
2025-08-25 19:06:31.977 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.5551ms
2025-08-25 19:06:31.981 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 19:06:31.985 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 19:06:31.990 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:31.992 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:31.995 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 19:06:31.996 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 19:06:32.003 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 19:06:32.005 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 19:06:32.018 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 19:06:32.034 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 19:06:32.041 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 19:06:32.043 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:06:32.061 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 54.9892ms
2025-08-25 19:06:32.064 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 19:06:32.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 85.2683ms
2025-08-25 19:06:32.088 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 19:06:32.099 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:06:32.109 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 96.2157ms
2025-08-25 19:06:32.112 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 19:06:32.113 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 128.5928ms
2025-08-25 19:06:53.287 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 19:06:53.292 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:53.294 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 7.0892ms
2025-08-25 19:06:53.299 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 72
2025-08-25 19:06:53.305 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:06:53.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 19:06:53.319 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 19:06:53.342 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 19:06:53.357 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 19:06:53.364 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 19:06:53.377 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 19:06:53.388 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:06:53.391 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:06:54.956 +05:30 [INF] Received HTTP response headers after 1562.7895ms - 200
2025-08-25 19:06:54.958 +05:30 [INF] End processing HTTP request after 1569.7761ms - 200
2025-08-25 19:06:54.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='61a73f0e-e47e-4aad-93ca-aeea5e8bee14', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T13:36:54.9634825Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='Free Message Testing' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODAyNzI0RkZEQUUzRDVBNkE4AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODAyNzI0RkZEQUUzRDVBNkE4AA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Free Message Testing', @p16='2025-08-25T13:36:54.9634828Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 19:06:54.973 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:06:54.979 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1652.3964ms
2025-08-25 19:06:54.981 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 19:06:54.983 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1683.6841ms
2025-08-25 19:10:38.669 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:10:38.677 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:10:38.678 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 21.2447ms
2025-08-25 19:10:38.685 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:10:38.689 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:10:38.691 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:10:38.692 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:10:38.718 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 19:10:38.724 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 19:10:38.727 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 31.6367ms
2025-08-25 19:10:38.729 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:10:38.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 46.5755ms
2025-08-25 19:10:40.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 19:10:40.555 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:10:40.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 7.1578ms
2025-08-25 19:10:40.561 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 19:10:40.566 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:10:40.568 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:10:40.570 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:10:51.055 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 19:10:56.242 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 19:12:25.543 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 19:12:25.544 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200
2025-08-25 19:12:26.842 +05:30 [INF] Received HTTP response headers after 1296.0179ms - 200
2025-08-25 19:12:26.844 +05:30 [INF] End processing HTTP request after 1300.746ms - 200
2025-08-25 19:15:38.946 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 19:15:38.974 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:15:38.975 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:15:39.459 +05:30 [INF] Received HTTP response headers after 481.7404ms - 400
2025-08-25 19:15:39.461 +05:30 [INF] End processing HTTP request after 486.9095ms - 400
2025-08-25 19:15:56.665 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@p0='f2f78431-87a9-4fe3-9be7-d4ff3aa2f756', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T13:45:52.0431163Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='8c5d1ce4-a658-4eee-ab19-33bee42d2eb5', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T13:45:56.6356095Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='f2f78431-87a9-4fe3-9be7-d4ff3aa2f756' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T13:45:56.6356096Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 19:15:56.673 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:15:56.675 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 316102.554ms
2025-08-25 19:15:56.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:15:56.679 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 316118.8304ms
2025-08-25 19:18:26.745 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 19:18:26.798 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 19:18:26.819 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 19:18:27.795 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 19:18:28.363 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 19:18:28.552 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 19:18:28.554 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 19:18:28.555 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 19:18:28.556 +05:30 [INF] Hosting environment: Development
2025-08-25 19:18:28.557 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 19:18:28.566 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 19:18:28.583 +05:30 [INF] Executed DbCommand (41ms) [Parameters=[@__cutoff_0='2025-08-18T13:48:26.9500415Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 19:18:30.383 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 19:18:30.572 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 196.197ms
2025-08-25 19:18:30.709 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 19:18:30.709 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 19:18:30.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.936ms
2025-08-25 19:18:30.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.7354ms
2025-08-25 19:18:30.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 19:18:31.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 234.5504ms
2025-08-25 19:18:40.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 19:18:40.604 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 19:18:40.670 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:40.675 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 82.5505ms
2025-08-25 19:18:40.681 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 19:18:40.699 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:40.870 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 19:18:40.889 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 19:18:41.002 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 19:18:41.108 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 19:18:41.273 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 19:18:41.465 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 19:18:41.478 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 19:18:41.493 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 19:18:41.495 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 19:18:41.507 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:18:41.519 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 623.0574ms
2025-08-25 19:18:41.522 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 19:18:41.532 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 850.7632ms
2025-08-25 19:18:41.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:18:41.548 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:41.550 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.929ms
2025-08-25 19:18:41.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:18:41.560 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:41.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:18:41.579 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:18:41.600 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 19:18:41.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:18:41.660 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:18:41.674 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 91.4977ms
2025-08-25 19:18:41.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:18:41.679 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 123.8806ms
2025-08-25 19:18:41.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:18:41.706 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:41.716 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:18:41.718 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:18:41.731 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:18:41.736 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:18:41.738 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.3535ms
2025-08-25 19:18:41.740 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:18:41.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 41.0991ms
2025-08-25 19:18:41.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:18:41.818 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:41.821 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:18:41.824 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:18:41.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:18:41.842 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:18:41.844 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.1989ms
2025-08-25 19:18:41.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:18:41.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.6655ms
2025-08-25 19:18:48.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:18:48.197 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:48.199 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.8271ms
2025-08-25 19:18:48.204 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:18:48.212 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:48.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:18:48.224 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:18:48.314 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 19:18:48.320 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 19:18:48.341 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 113.4116ms
2025-08-25 19:18:48.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:18:48.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 141.5986ms
2025-08-25 19:18:49.826 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 19:18:49.831 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:49.832 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 7.0294ms
2025-08-25 19:18:49.837 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 19:18:49.842 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:18:49.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:18:49.851 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:18:57.231 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 19:18:57.274 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 19:19:08.882 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 19:19:38.924 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 19:19:38.928 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 19:19:40.520 +05:30 [INF] Received HTTP response headers after 1587.5331ms - 200
2025-08-25 19:19:40.523 +05:30 [INF] End processing HTTP request after 1600.3639ms - 200
2025-08-25 19:21:05.826 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 19:21:22.351 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:21:22.355 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:21:22.652 +05:30 [INF] Received HTTP response headers after 294.9495ms - 400
2025-08-25 19:21:22.654 +05:30 [INF] End processing HTTP request after 303.0346ms - 400
2025-08-25 19:26:23.941 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 19:26:23.998 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 19:26:24.021 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 19:26:25.244 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 19:26:26.080 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 19:26:26.373 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 19:26:26.383 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 19:26:26.385 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 19:26:26.386 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 19:26:26.387 +05:30 [INF] Hosting environment: Development
2025-08-25 19:26:26.388 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 19:26:26.407 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[@__cutoff_0='2025-08-18T13:56:24.1828523Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 19:26:27.688 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 19:26:27.903 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 222.1344ms
2025-08-25 19:26:28.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 19:26:28.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 19:26:28.076 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.0595ms
2025-08-25 19:26:28.117 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.6018ms
2025-08-25 19:26:28.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 19:26:28.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 273.6975ms
2025-08-25 19:26:44.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 19:26:44.966 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 19:26:45.028 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:45.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 82.8518ms
2025-08-25 19:26:45.039 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 19:26:45.056 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:45.221 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 19:26:45.240 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 19:26:45.337 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 19:26:45.458 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 19:26:45.586 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 19:26:45.740 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 19:26:45.752 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 19:26:45.765 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 19:26:45.768 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 19:26:45.778 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:26:45.790 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 543.9448ms
2025-08-25 19:26:45.793 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 19:26:45.803 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 764.4167ms
2025-08-25 19:26:45.810 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:26:45.817 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:45.819 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.1249ms
2025-08-25 19:26:45.823 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:26:45.828 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:45.836 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:26:45.844 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:26:45.862 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 19:26:45.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:26:45.906 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:26:45.919 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 72.2975ms
2025-08-25 19:26:45.921 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:26:45.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 99.3808ms
2025-08-25 19:26:45.940 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:26:45.945 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:45.952 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:26:45.954 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:26:45.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:26:45.971 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:26:45.973 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.9779ms
2025-08-25 19:26:45.975 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:26:45.977 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.554ms
2025-08-25 19:26:46.046 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 19:26:46.051 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:46.053 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:26:46.055 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 19:26:46.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 19:26:46.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:26:46.068 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6421ms
2025-08-25 19:26:46.070 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 19:26:46.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.0743ms
2025-08-25 19:26:52.088 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:26:52.094 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:52.096 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.5315ms
2025-08-25 19:26:52.103 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 19:26:52.109 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:52.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:26:52.121 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:26:52.195 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 19:26:52.202 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 19:26:52.222 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 97.8529ms
2025-08-25 19:26:52.225 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 19:26:52.227 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 124.765ms
2025-08-25 19:26:53.913 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 19:26:53.921 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:53.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 13.6885ms
2025-08-25 19:26:53.931 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 19:26:53.936 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:26:53.938 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:26:53.945 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 19:27:01.143 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 19:27:01.183 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 19:27:27.229 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 19:27:27.285 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 19:27:27.289 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 19:27:29.609 +05:30 [INF] Received HTTP response headers after 2315.6737ms - 200
2025-08-25 19:27:29.612 +05:30 [INF] End processing HTTP request after 2327.7839ms - 200
2025-08-25 19:27:54.992 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 19:28:18.883 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:28:18.885 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 19:28:19.690 +05:30 [INF] Received HTTP response headers after 804.1905ms - 400
2025-08-25 19:28:19.692 +05:30 [INF] End processing HTTP request after 808.578ms - 400
2025-08-25 19:28:51.337 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='92e9b80f-16cd-4ed5-b9eb-9157b43259a1', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T13:58:46.1675269Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='ffb2864d-c703-4711-aef5-8f3889c4823f', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T13:58:49.1729484Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='92e9b80f-16cd-4ed5-b9eb-9157b43259a1' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T13:58:49.1741351Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 19:28:51.375 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:28:51.385 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 117437.8848ms
2025-08-25 19:28:51.388 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 19:28:51.390 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 117458.366ms
2025-08-25 19:29:08.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-25 19:29:08.297 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 19:29:08.299 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:29:08.302 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:29:08.302 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 8.4741ms
2025-08-25 19:29:08.303 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 6.2707ms
2025-08-25 19:29:08.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-25 19:29:08.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-25 19:29:08.319 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:29:08.321 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:29:08.323 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 19:29:08.323 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 19:29:08.330 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-25 19:29:08.330 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-25 19:29:08.341 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-25 19:29:08.357 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-25 19:29:08.363 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-25 19:29:08.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 19:29:08.380 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 46.7646ms
2025-08-25 19:29:08.383 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-25 19:29:08.384 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 75.8505ms
2025-08-25 19:29:08.408 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-25 19:29:08.418 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:29:08.428 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 92.2663ms
2025-08-25 19:29:08.430 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-25 19:29:08.432 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 118.6921ms
2025-08-25 19:29:30.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 19:29:30.811 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:29:30.812 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 6.9021ms
2025-08-25 19:29:30.830 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 82
2025-08-25 19:29:30.836 +05:30 [INF] CORS policy execution successful.
2025-08-25 19:29:30.839 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 19:29:30.847 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 19:29:30.869 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 19:29:30.887 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 19:29:30.894 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 19:29:30.913 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 19:29:30.931 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd (pathId=337117692828294)
2025-08-25 19:29:30.933 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 19:29:30.934 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 19:29:33.010 +05:30 [INF] Received HTTP response headers after 2073.8362ms - 200
2025-08-25 19:29:33.012 +05:30 [INF] End processing HTTP request after 2079.599ms - 200
2025-08-25 19:29:33.041 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='8cb49b5e-7d58-4534-be25-26a3fa329a86', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T13:59:33.0186575Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='Pinnacle provider update check' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkY5MDJGODVGNzQwMUQ5MzgzAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkY5MDJGODVGNzQwMUQ5MzgzAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Pinnacle provider update check', @p16='2025-08-25T13:59:33.0186578Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 19:29:33.046 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 19:29:33.054 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2203.6791ms
2025-08-25 19:29:33.057 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 19:29:33.060 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 2230.2155ms
2025-08-25 20:05:26.967 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 20:05:27.026 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 20:05:27.044 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 20:05:29.928 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 20:05:30.726 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 20:05:31.001 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 20:05:31.009 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 20:05:31.010 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 20:05:31.012 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 20:05:31.014 +05:30 [INF] Hosting environment: Development
2025-08-25 20:05:31.015 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 20:05:31.033 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[@__cutoff_0='2025-08-18T14:35:28.9391559Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 20:05:31.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 20:05:31.791 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 216.427ms
2025-08-25 20:05:31.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 20:05:31.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.5225ms
2025-08-25 20:05:31.906 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 20:05:31.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.602ms
2025-08-25 20:05:32.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 20:05:32.424 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.1593ms
2025-08-25 20:05:53.448 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-25 20:05:53.457 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 20:05:53.537 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:05:53.544 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 96.0084ms
2025-08-25 20:05:53.557 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 82
2025-08-25 20:05:53.572 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:05:54.064 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 20:05:54.096 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-25 20:05:54.158 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+918974005240
2025-08-25 20:05:54.267 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-25 20:05:54.388 +05:30 [INF] Contact already exists: contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-25 20:05:54.405 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-25 20:05:54.462 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd (pathId=337117692828294)
2025-08-25 20:05:54.470 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:05:54.474 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:05:56.325 +05:30 [INF] Received HTTP response headers after 1846.422ms - 200
2025-08-25 20:05:56.328 +05:30 [INF] End processing HTTP request after 1861.7697ms - 200
2025-08-25 20:05:56.571 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@p0='b1ede9ee-ff2e-4615-99da-4582e228d630', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T14:35:56.3336208Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='Pinnacle provider update check' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzIzOUQ5RjA3MzlCNTdEM0Q2AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzIzOUQ5RjA3MzlCNTdEM0Q2AA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Pinnacle provider update check', @p16='2025-08-25T14:35:56.3336747Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-25 20:05:56.600 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 20:05:56.626 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2522.3985ms
2025-08-25 20:05:56.629 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-25 20:05:56.638 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 3081.7294ms
2025-08-25 20:06:02.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 20:06:02.684 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:06:02.685 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.5378ms
2025-08-25 20:06:02.690 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 20:06:02.699 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:06:02.705 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 20:06:02.717 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:06:02.907 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 20:06:02.917 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 20:06:02.938 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 218.4567ms
2025-08-25 20:06:02.941 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 20:06:02.944 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 253.9032ms
2025-08-25 20:06:04.309 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 20:06:04.314 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:06:04.316 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 6.9064ms
2025-08-25 20:06:04.322 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 20:06:04.329 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:06:04.335 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:06:04.347 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:06:08.772 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 20:06:08.800 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 20:06:09.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 20:06:09.205 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:06:09.207 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:06:11.272 +05:30 [INF] Received HTTP response headers after 2062.8736ms - 200
2025-08-25 20:06:11.274 +05:30 [INF] End processing HTTP request after 2069.0195ms - 200
2025-08-25 20:06:11.438 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 20:06:11.540 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:06:11.542 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:06:12.090 +05:30 [INF] Received HTTP response headers after 546.1025ms - 400
2025-08-25 20:06:12.092 +05:30 [INF] End processing HTTP request after 551.8121ms - 400
2025-08-25 20:06:12.256 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p0='48836c13-e563-43a6-a6fd-fe2cd99fa554', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T14:36:12.0948714Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='3ffae0f6-88ad-4c0d-97da-fd0a1ca1e8e4', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T14:36:12.1013826Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='48836c13-e563-43a6-a6fd-fe2cd99fa554' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T14:36:12.1014963Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 20:06:12.282 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 20:06:12.285 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7933.8043ms
2025-08-25 20:06:12.288 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:06:12.290 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 7967.9529ms
2025-08-25 20:06:29.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 20:06:29.462 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:06:29.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 8.4315ms
2025-08-25 20:06:29.472 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 20:06:29.477 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:06:29.479 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:06:29.481 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:06:33.420 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 20:06:33.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 20:06:33.432 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:06:33.434 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:06:33.594 +05:30 [INF] Received HTTP response headers after 158.7195ms - 200
2025-08-25 20:06:33.595 +05:30 [INF] End processing HTTP request after 163.2745ms - 200
2025-08-25 20:06:33.599 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:06:33.600 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:06:33.697 +05:30 [INF] Received HTTP response headers after 95.5196ms - 400
2025-08-25 20:06:33.699 +05:30 [INF] End processing HTTP request after 100.6663ms - 400
2025-08-25 20:06:33.728 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@p0='03bba954-087d-4fad-937f-6768f73817f0', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T14:36:33.7017791Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='9a8c9108-588e-40c8-b8f9-5724da00d52e', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T14:36:33.7022571Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='03bba954-087d-4fad-937f-6768f73817f0' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T14:36:33.7022572Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 20:06:33.734 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 20:06:33.737 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4253.0841ms
2025-08-25 20:06:33.739 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:06:33.741 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 4269.1877ms
2025-08-25 20:08:11.222 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 20:08:11.227 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:08:11.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 6.0403ms
2025-08-25 20:08:11.233 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 20:08:11.238 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:08:11.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:08:11.242 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:08:15.131 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 20:08:15.138 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 20:08:15.149 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:08:15.151 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:08:16.104 +05:30 [INF] Received HTTP response headers after 951.1826ms - 200
2025-08-25 20:08:16.106 +05:30 [INF] End processing HTTP request after 957.0074ms - 200
2025-08-25 20:08:16.108 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:08:16.110 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:08:16.409 +05:30 [INF] Received HTTP response headers after 296.7568ms - 400
2025-08-25 20:08:16.411 +05:30 [INF] End processing HTTP request after 302.7135ms - 400
2025-08-25 20:08:16.436 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='281e4037-b918-4c86-90b7-69f677873cd6', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T14:38:16.4139854Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='7066797f-53e9-4942-a54d-c8c91fd6d54f', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T14:38:16.4144611Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='281e4037-b918-4c86-90b7-69f677873cd6' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T14:38:16.4144612Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 20:08:16.443 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 20:08:16.445 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5201.0087ms
2025-08-25 20:08:16.448 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:08:16.450 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 5216.4266ms
2025-08-25 20:10:02.100 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 20:10:02.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 10.6897ms
2025-08-25 20:10:02.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 20:10:15.719 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 20:10:15.782 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 20:10:15.806 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 20:10:16.891 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 20:10:17.443 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 20:10:17.639 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 20:10:17.640 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 20:10:17.641 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 20:10:17.643 +05:30 [INF] Hosting environment: Development
2025-08-25 20:10:17.644 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 20:10:17.650 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 20:10:17.668 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[@__cutoff_0='2025-08-18T14:40:15.9435895Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 20:10:19.406 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 20:10:19.588 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 190.9436ms
2025-08-25 20:10:19.604 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 20:10:19.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7078ms
2025-08-25 20:10:19.690 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 20:10:19.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.9126ms
2025-08-25 20:10:19.983 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 20:10:20.232 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 249.2459ms
2025-08-25 20:10:33.342 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 20:10:33.352 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 20:10:33.417 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:33.422 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 80.1085ms
2025-08-25 20:10:33.428 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 20:10:33.446 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:33.625 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 20:10:33.646 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 20:10:33.741 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 20:10:33.848 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 20:10:34.003 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 20:10:34.181 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 20:10:34.195 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 20:10:34.211 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 20:10:34.215 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 20:10:34.225 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:10:34.238 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 584.9732ms
2025-08-25 20:10:34.241 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 20:10:34.250 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 821.4372ms
2025-08-25 20:10:34.260 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:10:34.272 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:34.274 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.3463ms
2025-08-25 20:10:34.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:10:34.285 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:34.293 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:10:34.301 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 20:10:34.320 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 20:10:34.360 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 20:10:34.366 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:10:34.383 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 77.9285ms
2025-08-25 20:10:34.386 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:10:34.388 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 109.6777ms
2025-08-25 20:10:34.413 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:10:34.420 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:34.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:10:34.431 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 20:10:34.445 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 20:10:34.451 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:10:34.454 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.5927ms
2025-08-25 20:10:34.456 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:10:34.458 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 45.8146ms
2025-08-25 20:10:34.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:10:34.533 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:34.536 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:10:34.538 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 20:10:34.549 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 20:10:34.558 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:10:34.561 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.3622ms
2025-08-25 20:10:34.564 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:10:34.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.6137ms
2025-08-25 20:10:41.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 20:10:41.198 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:41.201 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 25.2601ms
2025-08-25 20:10:41.208 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 20:10:41.215 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:41.218 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 20:10:41.226 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:10:41.311 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 20:10:41.318 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 20:10:41.336 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 105.9797ms
2025-08-25 20:10:41.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 20:10:41.341 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 132.8904ms
2025-08-25 20:10:42.863 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 20:10:42.868 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:42.870 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 7.1704ms
2025-08-25 20:10:42.878 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 20:10:42.884 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:10:42.887 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:10:42.894 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:10:46.707 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 20:10:46.723 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 20:10:46.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 20:10:47.020 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:10:47.024 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:10:48.171 +05:30 [INF] Received HTTP response headers after 1142.4766ms - 200
2025-08-25 20:10:48.174 +05:30 [INF] End processing HTTP request after 1154.9439ms - 200
2025-08-25 20:10:48.318 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 20:10:48.363 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:10:48.365 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:10:48.779 +05:30 [INF] Received HTTP response headers after 412.1153ms - 400
2025-08-25 20:10:48.781 +05:30 [INF] End processing HTTP request after 417.8568ms - 400
2025-08-25 20:10:49.169 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@p0='68516fa6-6fcc-493b-acba-d09adeb44c85', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T14:40:48.7868556Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='b85b9a3c-8a89-49a0-94e7-3eb200b9f111', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T14:40:48.8638552Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='68516fa6-6fcc-493b-acba-d09adeb44c85' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T14:40:48.8638966Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 20:10:49.205 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 20:10:49.217 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6319.7571ms
2025-08-25 20:10:49.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:10:49.224 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 6345.2179ms
2025-08-25 20:13:53.983 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 20:13:53.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 12.445ms
2025-08-25 20:13:54.041 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 20:13:54.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 20:13:54.051 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.7642ms
2025-08-25 20:13:54.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.2887ms
2025-08-25 20:14:07.647 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-25 20:14:07.691 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-25 20:14:07.709 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-25 20:14:08.907 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-25 20:14:09.524 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-25 20:14:09.709 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-25 20:14:09.711 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-25 20:14:09.712 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-25 20:14:09.713 +05:30 [INF] Hosting environment: Development
2025-08-25 20:14:09.714 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-25 20:14:09.729 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-25 20:14:09.746 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__cutoff_0='2025-08-18T14:44:07.8392736Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-25 20:14:11.441 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-25 20:14:11.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 263.5368ms
2025-08-25 20:14:11.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-25 20:14:11.735 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 16.51ms
2025-08-25 20:14:11.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-25 20:14:11.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.5558ms
2025-08-25 20:14:12.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-25 20:14:12.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 276.5077ms
2025-08-25 20:14:48.968 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-25 20:14:48.979 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-25 20:14:49.056 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:49.063 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 95.4265ms
2025-08-25 20:14:49.075 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-25 20:14:49.091 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:49.260 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 20:14:49.282 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-25 20:14:49.388 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-25 20:14:49.486 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-25 20:14:49.633 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-25 20:14:49.797 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-25 20:14:49.811 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-25 20:14:49.828 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-25 20:14:49.831 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-25 20:14:49.842 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:14:49.854 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 565.4368ms
2025-08-25 20:14:49.857 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-25 20:14:49.866 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 790.204ms
2025-08-25 20:14:49.874 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:14:49.879 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:49.881 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.4876ms
2025-08-25 20:14:49.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:14:49.893 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:49.902 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:14:49.909 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 20:14:49.929 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-25 20:14:49.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 20:14:49.973 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:14:49.989 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 77.3944ms
2025-08-25 20:14:49.992 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:14:49.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 109.1063ms
2025-08-25 20:14:50.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:14:50.016 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:50.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:14:50.024 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 20:14:50.037 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 20:14:50.044 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:14:50.046 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.403ms
2025-08-25 20:14:50.049 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:14:50.051 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.5026ms
2025-08-25 20:14:50.119 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-25 20:14:50.124 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:50.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:14:50.129 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-25 20:14:50.141 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-25 20:14:50.144 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-25 20:14:50.147 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.3801ms
2025-08-25 20:14:50.149 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-25 20:14:50.151 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.3456ms
2025-08-25 20:14:55.642 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 20:14:55.655 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:55.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 16.5488ms
2025-08-25 20:14:55.664 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-25 20:14:55.672 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:55.674 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 20:14:55.682 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:14:55.762 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-25 20:14:55.769 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-25 20:14:55.786 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 101.355ms
2025-08-25 20:14:55.789 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-25 20:14:55.791 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 127.7085ms
2025-08-25 20:14:57.369 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-25 20:14:57.372 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:57.374 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 5.3098ms
2025-08-25 20:14:57.379 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-25 20:14:57.384 +05:30 [INF] CORS policy execution successful.
2025-08-25 20:14:57.386 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:14:57.393 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-25 20:15:02.764 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-25 20:15:02.784 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-25 20:15:03.089 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-25 20:15:03.120 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:15:03.125 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-25 20:15:04.175 +05:30 [INF] Received HTTP response headers after 1044.7498ms - 200
2025-08-25 20:15:04.178 +05:30 [INF] End processing HTTP request after 1058.9218ms - 200
2025-08-25 20:15:04.340 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-25 20:15:04.396 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:15:04.399 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages
2025-08-25 20:15:04.825 +05:30 [INF] Received HTTP response headers after 424.6636ms - 400
2025-08-25 20:15:04.827 +05:30 [INF] End processing HTTP request after 430.9989ms - 400
2025-08-25 20:15:05.199 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='9a4e49fd-4dbd-4036-bcde-316e22e1fdd9', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-25T14:45:04.8317583Z' (DbType = DateTime), @p7='API returned error', @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11=NULL, @p12='{"code":"100","status":"failed","message":"apikey is required as parameter in header","data":{}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='390d7020-55e7-4693-b7c8-62a5ca5d742f', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-25T14:45:04.9096435Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41=NULL, @p42='9a4e49fd-4dbd-4036-bcde-316e22e1fdd9' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Failed', @p47='2025-08-25T14:45:04.9096922Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-25 20:15:05.231 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-25 20:15:05.241 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7843.2627ms
2025-08-25 20:15:05.244 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-25 20:15:05.246 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 7867.005ms
