2025-09-03 09:53:12.113 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 09:53:12.152 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 09:53:12.166 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 09:53:13.071 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 09:53:13.696 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 09:53:13.718 +05:30 [INF] ClickLogWorker started
2025-09-03 09:53:13.980 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 09:53:13.987 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 09:53:13.988 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 09:53:13.990 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 09:53:13.991 +05:30 [INF] Hosting environment: Development
2025-09-03 09:53:13.992 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 09:53:14.008 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[@__cutoff_0='2025-08-27T04:23:12.2908438Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 09:53:14.774 +05:30 [INF] ClickLogWorker stopped
2025-09-03 09:53:16.004 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 09:53:16.260 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 268.9967ms
2025-09-03 09:53:16.305 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 09:53:16.315 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.4719ms
2025-09-03 09:53:16.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 09:53:16.427 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.3244ms
2025-09-03 09:53:16.600 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 09:53:16.844 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 243.3828ms
2025-09-03 10:01:50.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 10:01:50.152 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 10:01:50.198 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:01:50.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 54.7044ms
2025-09-03 10:01:50.205 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 10:01:50.214 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:01:50.260 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 10:01:50.280 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 10:01:50.361 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 10:01:50.510 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 10:01:50.603 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 10:01:50.728 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 10:01:50.736 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 10:01:50.783 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 10:01:50.784 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 10:01:50.790 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:01:50.798 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 512.5917ms
2025-09-03 10:01:50.799 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 10:01:50.803 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 598.1108ms
2025-09-03 10:01:50.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:01:50.809 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:01:50.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.1047ms
2025-09-03 10:01:50.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:01:50.818 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:01:50.851 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:01:50.856 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:01:50.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 10:01:50.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:01:50.901 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:01:50.913 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 54.8086ms
2025-09-03 10:01:50.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:01:50.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 100.8692ms
2025-09-03 10:01:50.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:01:50.933 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:01:50.938 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:01:50.940 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:01:50.953 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:01:50.958 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:01:50.961 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.429ms
2025-09-03 10:01:50.962 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:01:50.964 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.5509ms
2025-09-03 10:01:51.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:01:51.088 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:01:51.091 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:01:51.092 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:01:51.099 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:01:51.103 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:01:51.105 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.071ms
2025-09-03 10:01:51.107 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:01:51.109 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.0418ms
2025-09-03 10:02:27.410 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 10:02:27.414 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:27.415 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 4.9517ms
2025-09-03 10:02:27.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 10:02:27.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 10:02:27.430 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 10:02:27.431 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:27.433 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:27.434 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 10:02:27.436 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:02:27.487 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 50.6623ms
2025-09-03 10:02:27.488 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 10:02:27.513 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 10:02:27.545 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 10:02:27.511 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 847
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 10:02:27.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 134.5407ms
2025-09-03 10:02:27.583 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 10:02:27.638 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:02:27.652 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 215.3195ms
2025-09-03 10:02:27.654 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:27.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 228.0218ms
2025-09-03 10:02:36.942 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 10:02:36.945 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:36.946 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 3.6205ms
2025-09-03 10:02:36.960 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 10:02:36.963 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:36.964 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:36.965 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:02:36.968 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 10:02:36.972 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 10:02:36.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 10:02:36.981 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:02:36.982 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 15.0843ms
2025-09-03 10:02:36.983 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:36.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 24.2058ms
2025-09-03 10:02:37.258 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 10:02:37.261 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 10:02:37.262 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 10:02:37.292 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 28.6741ms
2025-09-03 10:02:37.293 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 10:02:37.320 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 847
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 10:02:37.326 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 68.0618ms
2025-09-03 10:02:57.570 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=favourites&search= - null null
2025-09-03 10:02:57.573 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:57.574 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=favourites&search= - 204 null null 3.6342ms
2025-09-03 10:02:57.576 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=favourites&search= - null null
2025-09-03 10:02:57.578 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:57.579 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:57.581 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:02:57.583 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=favourites, page=1, pageSize=25
2025-09-03 10:02:57.588 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsFavorite"
2025-09-03 10:02:57.599 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsFavorite"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 10:02:57.601 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:02:57.602 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 20.1962ms
2025-09-03 10:02:57.603 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:57.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=favourites&search= - 200 null application/json; charset=utf-8 27.9675ms
2025-09-03 10:02:58.119 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=archived&search= - null null
2025-09-03 10:02:58.121 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:58.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=archived&search= - 204 null null 3.2325ms
2025-09-03 10:02:58.124 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=archived&search= - null null
2025-09-03 10:02:58.126 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:58.127 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:58.128 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:02:58.130 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=archived, page=1, pageSize=25
2025-09-03 10:02:58.134 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsArchived"
2025-09-03 10:02:58.147 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsArchived"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 10:02:58.149 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:02:58.150 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 20.6328ms
2025-09-03 10:02:58.151 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:58.152 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=archived&search= - 200 null application/json; charset=utf-8 27.701ms
2025-09-03 10:02:58.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=groups&search= - null null
2025-09-03 10:02:58.687 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:58.689 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=groups&search= - 204 null null 3.9858ms
2025-09-03 10:02:58.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=groups&search= - null null
2025-09-03 10:02:58.694 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:58.695 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:58.695 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:02:58.697 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=groups, page=1, pageSize=25
2025-09-03 10:02:58.721 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."Group" IS NOT NULL AND c."Group" <> ''
2025-09-03 10:02:58.732 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."Group" IS NOT NULL AND c."Group" <> ''
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 10:02:58.734 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:02:58.735 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 38.0312ms
2025-09-03 10:02:58.736 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:58.736 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=groups&search= - 200 null application/json; charset=utf-8 44.6033ms
2025-09-03 10:02:59.418 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 10:02:59.420 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:59.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 3.4255ms
2025-09-03 10:02:59.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 10:02:59.426 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:02:59.427 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:59.428 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:02:59.429 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 10:02:59.432 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 10:02:59.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 10:02:59.439 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:02:59.440 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 10.7366ms
2025-09-03 10:02:59.441 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 10:02:59.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 18.0433ms
2025-09-03 10:40:47.663 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:40:47.667 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:40:47.670 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:47.673 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:47.673 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.2243ms
2025-09-03 10:40:47.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 8.1851ms
2025-09-03 10:40:47.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:40:47.684 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:40:47.687 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:47.689 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:40:47.689 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:47.691 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:40:47.693 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:47.695 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:47.698 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:40:47.763 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:40:47.787 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:40:47.826 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:40:47.830 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 133.9696ms
2025-09-03 10:40:47.832 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:40:47.833 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 149.1136ms
2025-09-03 10:40:47.887 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:40:47.890 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:40:47.891 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:40:47.894 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 199.0374ms
2025-09-03 10:40:47.895 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:40:47.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 214.6466ms
2025-09-03 10:40:48.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:48.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:48.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:48.960 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:48.966 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.968 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.970 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.971 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.972 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 13.1109ms
2025-09-03 10:40:48.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 11.5235ms
2025-09-03 10:40:48.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 12.1269ms
2025-09-03 10:40:48.974 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 14.0457ms
2025-09-03 10:40:48.976 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null 0
2025-09-03 10:40:48.985 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:48.989 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:48.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:48.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:48.996 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.998 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:48.999 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:48.999 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:49.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:40:49.004 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:49.004 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:49.009 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 10:40:49.021 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:49.022 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:40:49.025 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 34.7347ms
2025-09-03 10:40:49.026 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:49.027 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:49.028 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 21.7071ms
2025-09-03 10:40:49.029 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 10:40:49.029 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 0 null 52.5624ms
2025-09-03 10:40:49.030 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:40:49.030 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:49.032 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:49.036 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 42.4964ms
2025-09-03 10:40:49.037 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:49.041 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:49.042 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 10:40:49.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:49.048 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:49.050 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.1089ms
2025-09-03 10:40:49.051 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:49.053 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 23.8268ms
2025-09-03 10:40:49.083 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:40:49.090 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 81.9749ms
2025-09-03 10:40:49.091 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:49.092 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 97.9814ms
2025-09-03 10:40:52.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.250 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.253 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.255 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.0029ms
2025-09-03 10:40:52.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.5044ms
2025-09-03 10:40:52.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 9.1559ms
2025-09-03 10:40:52.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 9.6512ms
2025-09-03 10:40:52.264 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null 0
2025-09-03 10:40:52.268 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.269 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:52.270 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:52.274 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:40:52.275 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.275 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.277 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:40:52.278 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.280 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.281 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.3753ms
2025-09-03 10:40:52.282 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:52.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:52.283 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:52.284 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:52.285 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:52.285 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 0 null 21.6795ms
2025-09-03 10:40:52.287 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 10:40:52.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:40:52.295 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:52.297 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:40:52.298 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:52.299 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.3426ms
2025-09-03 10:40:52.300 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.4191ms
2025-09-03 10:40:52.301 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 10:40:52.301 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:52.302 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:52.304 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:52.305 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 29.8178ms
2025-09-03 10:40:52.305 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 30.8354ms
2025-09-03 10:40:52.306 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:52.311 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:52.312 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 10:40:52.322 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:52.324 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:52.326 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.5885ms
2025-09-03 10:40:52.327 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:52.328 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 27.0441ms
2025-09-03 10:40:54.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.738 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.739 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.741 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.743 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 8.5892ms
2025-09-03 10:40:54.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 9.0375ms
2025-09-03 10:40:54.745 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 9.5474ms
2025-09-03 10:40:54.745 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 9.9287ms
2025-09-03 10:40:54.748 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null 0
2025-09-03 10:40:54.752 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.755 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.756 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.758 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.760 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:54.761 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:54.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:54.762 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:54.763 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:54.764 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:54.767 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 10:40:54.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:40:54.771 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:40:54.776 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:40:54.781 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 15.4345ms
2025-09-03 10:40:54.781 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:40:54.782 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:54.783 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.9808ms
2025-09-03 10:40:54.784 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 0 null 36.0924ms
2025-09-03 10:40:54.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:54.788 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 33.1191ms
2025-09-03 10:40:54.832 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:54.834 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:54.835 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 68.9109ms
2025-09-03 10:40:54.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 10:40:54.836 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:54.838 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:54.839 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 86.3341ms
2025-09-03 10:40:54.840 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:54.842 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:54.844 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 10:40:54.847 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:54.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:54.851 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.4843ms
2025-09-03 10:40:54.852 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:54.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 17.0246ms
2025-09-03 10:40:55.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.621 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.623 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.625 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.627 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.627 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 8.4081ms
2025-09-03 10:40:55.628 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 9.0758ms
2025-09-03 10:40:55.629 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 9.5225ms
2025-09-03 10:40:55.629 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 10.0154ms
2025-09-03 10:40:55.632 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.634 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null 0
2025-09-03 10:40:55.638 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.640 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.642 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.643 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.644 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:55.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:55.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:55.646 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:55.646 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:55.648 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:40:55.650 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 10:40:55.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:40:55.657 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:40:55.658 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:55.660 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:40:55.661 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:40:55.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:55.664 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 13.0485ms
2025-09-03 10:40:55.665 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.1336ms
2025-09-03 10:40:55.666 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 16.7057ms
2025-09-03 10:40:55.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 10:40:55.667 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:40:55.667 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:40:55.668 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:55.670 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:40:55.671 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 0 null 36.5185ms
2025-09-03 10:40:55.671 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 33.098ms
2025-09-03 10:40:55.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 40.5456ms
2025-09-03 10:40:55.673 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:55.681 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:40:55.683 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 10:40:55.687 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:40:55.690 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:40:55.691 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0879ms
2025-09-03 10:40:55.692 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:40:55.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 26.3281ms
2025-09-03 10:41:01.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.735 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.737 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.739 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.741 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 9.2928ms
2025-09-03 10:41:01.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 10.1049ms
2025-09-03 10:41:01.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 10.5856ms
2025-09-03 10:41:01.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 11.2173ms
2025-09-03 10:41:01.749 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null 0
2025-09-03 10:41:01.752 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.756 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.759 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.761 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:41:01.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:41:01.763 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:01.764 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:01.765 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:01.766 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:01.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:41:01.774 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:41:01.773 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 10:41:01.776 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:41:01.778 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:41:01.781 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:41:01.779 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 12.4376ms
2025-09-03 10:41:01.782 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.0425ms
2025-09-03 10:41:01.785 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:41:01.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:41:01.787 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:41:01.788 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 15.4662ms
2025-09-03 10:41:01.789 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 0 null 39.4171ms
2025-09-03 10:41:01.790 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 37.8915ms
2025-09-03 10:41:01.791 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:01.797 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 42.9799ms
2025-09-03 10:41:01.807 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 10:41:01.810 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:01.811 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:01.812 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:01.814 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 10:41:01.817 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:41:01.820 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:41:01.821 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.8155ms
2025-09-03 10:41:01.822 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:01.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 16.3507ms
2025-09-03 10:41:02.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.550 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.550 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.554 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.556 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.558 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 9.1037ms
2025-09-03 10:41:02.559 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 9.7876ms
2025-09-03 10:41:02.560 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 9.9939ms
2025-09-03 10:41:02.560 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 10.3143ms
2025-09-03 10:41:02.565 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null 0
2025-09-03 10:41:02.569 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.571 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.573 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.574 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:41:02.574 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:02.575 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:02.576 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:02.579 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:41:02.579 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 10:41:02.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.584 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:41:02.582 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:41:02.586 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.588 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:41:02.588 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 11.3343ms
2025-09-03 10:41:02.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:41:02.590 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.4168ms
2025-09-03 10:41:02.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:41:02.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 10:41:02.592 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:02.593 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:02.594 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 0 null 28.6348ms
2025-09-03 10:41:02.599 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:41:02.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 28.2084ms
2025-09-03 10:41:02.595 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:02.603 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:41:02.605 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:02.606 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.7287ms
2025-09-03 10:41:02.607 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:02.608 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:41:02.610 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 10:41:02.610 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 29.0076ms
2025-09-03 10:41:02.614 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:41:02.617 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:41:02.618 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.4822ms
2025-09-03 10:41:02.619 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:02.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 28.3664ms
2025-09-03 10:41:03.180 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.183 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.186 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.188 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.190 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.191 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 10.5722ms
2025-09-03 10:41:03.191 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 10.9536ms
2025-09-03 10:41:03.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 11.6952ms
2025-09-03 10:41:03.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 11.4091ms
2025-09-03 10:41:03.199 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null 0
2025-09-03 10:41:03.206 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.207 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:41:03.208 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:03.211 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 10:41:03.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.214 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 10:41:03.215 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.217 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.218 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 8.5786ms
2025-09-03 10:41:03.218 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:41:03.219 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:03.220 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 10:41:03.220 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:03.221 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:03.222 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 0 null 23.3062ms
2025-09-03 10:41:03.226 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 10:41:03.227 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 10:41:03.233 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:41:03.235 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:41:03.236 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:41:03.237 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.3807ms
2025-09-03 10:41:03.238 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.7843ms
2025-09-03 10:41:03.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 10:41:03.238 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 10:41:03.239 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:03.242 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:03.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 30.3134ms
2025-09-03 10:41:03.243 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 31.1301ms
2025-09-03 10:41:03.244 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:03.249 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:03.251 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 10:41:03.260 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 10:41:03.263 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 10:41:03.264 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.1304ms
2025-09-03 10:41:03.266 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 10:41:03.267 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.3235ms
2025-09-03 10:41:38.695 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:41:38.699 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.455ms
2025-09-03 10:41:38.703 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:41:38.706 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.707 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:41:38.709 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:41:38.716 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:41:38.720 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:41:38.722 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8026ms
2025-09-03 10:41:38.723 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:41:38.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.5996ms
2025-09-03 10:41:38.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:41:38.822 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.824 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:41:38.825 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:41:38.831 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:41:38.837 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:41:38.840 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.9834ms
2025-09-03 10:41:38.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:41:38.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1476ms
2025-09-03 10:41:38.911 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:41:38.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:41:38.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:41:38.921 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.924 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.927 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.928 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:41:38.929 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 17.529ms
2025-09-03 10:41:38.932 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:41:38.931 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 18.2275ms
2025-09-03 10:41:38.941 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:41:38.952 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:41:38.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:41:38.957 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.961 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:41:38.964 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:41:38.966 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:41:38.966 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.0054ms
2025-09-03 10:41:38.968 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:41:38.969 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:41:38.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:41:38.971 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:41:38.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:41:38.975 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 63.4707ms
2025-09-03 10:41:38.981 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:41:38.986 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:41:38.994 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:41:38.997 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:41:38.998 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:41:38.999 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 25.7157ms
2025-09-03 10:41:39.000 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:41:39.001 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:41:39.003 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 22.4376ms
2025-09-03 10:41:39.004 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 63.2201ms
2025-09-03 10:41:39.006 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:41:39.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 57.1568ms
2025-09-03 10:48:07.205 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:48:07.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:48:07.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:48:07.211 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:48:07.214 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:07.216 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:07.218 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:07.220 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:07.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 15.4577ms
2025-09-03 10:48:07.221 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.3289ms
2025-09-03 10:48:07.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 15.0781ms
2025-09-03 10:48:07.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 11.6108ms
2025-09-03 10:48:07.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:48:07.237 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:48:07.239 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:07.241 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:07.242 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:48:07.242 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:48:07.243 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:48:07.244 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:48:07.248 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:48:07.333 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:48:07.337 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:48:07.340 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:48:07.342 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 96.5648ms
2025-09-03 10:48:07.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:48:07.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 109.6261ms
2025-09-03 10:48:07.352 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:48:07.355 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:48:07.356 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:48:07.357 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 110.1125ms
2025-09-03 10:48:07.359 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:48:07.360 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 122.618ms
2025-09-03 10:48:12.186 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:48:12.189 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1341ms
2025-09-03 10:48:12.193 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:48:12.196 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.198 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:48:12.200 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:48:12.205 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:48:12.209 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:48:12.211 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2958ms
2025-09-03 10:48:12.213 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:48:12.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.1432ms
2025-09-03 10:48:12.305 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:48:12.309 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.311 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:48:12.313 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:48:12.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:48:12.326 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:48:12.329 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3633ms
2025-09-03 10:48:12.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:48:12.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.7552ms
2025-09-03 10:48:12.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:48:12.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:48:12.407 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:48:12.423 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:48:12.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:48:12.458 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.431 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.449 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.453 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.462 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:48:12.462 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 54.9915ms
2025-09-03 10:48:12.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 36.3041ms
2025-09-03 10:48:12.428 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.466 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 42.8498ms
2025-09-03 10:48:12.471 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:48:12.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:48:12.491 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:48:12.481 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 74.8056ms
2025-09-03 10:48:12.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:48:12.494 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.498 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:48:12.507 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:48:12.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:48:12.518 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:48:12.513 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:48:12.512 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 24.3895ms
2025-09-03 10:48:12.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:48:12.522 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:48:12.534 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:48:12.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:48:12.535 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:48:12.540 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:48:12.541 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 118.3823ms
2025-09-03 10:48:12.550 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:48:12.550 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 28.5442ms
2025-09-03 10:48:12.557 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:48:12.558 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:48:12.559 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:48:12.560 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 80.3519ms
2025-09-03 10:48:12.567 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 32.0249ms
2025-09-03 10:48:12.574 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:48:12.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 90.3678ms
2025-09-03 10:51:23.465 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.b90cc3daac1c23ed130c.hot-update.json - null null
2025-09-03 10:51:23.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.b90cc3daac1c23ed130c.hot-update.json - 404 0 null 2.9685ms
2025-09-03 10:51:23.480 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.b90cc3daac1c23ed130c.hot-update.json, Response status code: 404
2025-09-03 10:51:24.031 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:24.035 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:24.036 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5361ms
2025-09-03 10:51:24.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:24.051 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:24.053 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:24.055 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:24.063 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:24.068 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:24.070 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.5402ms
2025-09-03 10:51:24.072 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:24.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.06ms
2025-09-03 10:51:24.207 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:24.212 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:24.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:24.215 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:24.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:24.230 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:24.232 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6568ms
2025-09-03 10:51:24.235 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:24.237 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.0659ms
2025-09-03 10:51:25.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:25.071 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.073 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:25.074 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:25.080 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:25.085 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:25.087 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5395ms
2025-09-03 10:51:25.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:25.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1745ms
2025-09-03 10:51:25.344 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:25.348 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:25.352 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:25.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:25.370 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:25.373 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.4626ms
2025-09-03 10:51:25.375 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:25.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.5785ms
2025-09-03 10:51:25.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:51:25.475 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:25.479 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:51:25.475 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:51:25.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:51:25.482 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.489 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.493 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.498 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.502 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.503 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 31.1347ms
2025-09-03 10:51:25.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 35.1263ms
2025-09-03 10:51:25.513 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 38.4297ms
2025-09-03 10:51:25.511 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:25.515 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 41.9476ms
2025-09-03 10:51:25.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:51:25.538 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:25.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:51:25.547 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:25.556 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:25.558 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:51:25.562 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:25.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:51:25.564 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:51:25.567 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6076ms
2025-09-03 10:51:25.569 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:51:25.572 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:51:25.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:25.580 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:51:25.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 110.3289ms
2025-09-03 10:51:25.587 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:51:25.592 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:51:25.602 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:51:25.606 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:51:25.606 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:25.608 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 36.8471ms
2025-09-03 10:51:25.611 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 33.0947ms
2025-09-03 10:51:25.613 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:51:25.615 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:51:25.617 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 80.4816ms
2025-09-03 10:51:25.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 76.2148ms
2025-09-03 10:51:31.250 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 10:51:31.253 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1029ms
2025-09-03 10:51:31.257 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 10:51:31.259 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.260 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 10:51:31.261 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 10:51:31.266 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 10:51:31.269 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 10:51:31.275 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 10:51:31.281 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 10:51:31.283 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 10:51:31.285 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 10:51:31.285 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 10:51:31.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.288 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 25.5407ms
2025-09-03 10:51:31.289 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 10:51:31.290 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 33.2654ms
2025-09-03 10:51:31.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:31.295 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.296 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.638ms
2025-09-03 10:51:31.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:31.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.301 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.302 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:31.305 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:31.307 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4053ms
2025-09-03 10:51:31.310 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3234ms
2025-09-03 10:51:31.325 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:31.328 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.330 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:31.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:31.337 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.340 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.022ms
2025-09-03 10:51:31.341 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:31.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.344 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7059ms
2025-09-03 10:51:31.347 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.350 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:31.355 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:31.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.360 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1703ms
2025-09-03 10:51:31.361 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.0467ms
2025-09-03 10:51:31.421 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:51:31.425 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:51:31.425 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.425 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:51:31.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:31.426 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:51:31.428 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.429 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.6814ms
2025-09-03 10:51:31.432 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.435 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.438 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.439 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.4892ms
2025-09-03 10:51:31.445 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 19.3342ms
2025-09-03 10:51:31.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.447 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 20.9996ms
2025-09-03 10:51:31.456 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:51:31.457 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:31.461 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:51:31.468 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:31.463 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.471 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.474 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.475 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:51:31.476 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:51:31.477 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.5141ms
2025-09-03 10:51:31.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:51:31.478 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:51:31.479 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:51:31.481 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.486 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:51:31.489 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:51:31.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:51:31.489 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 63.6449ms
2025-09-03 10:51:31.484 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:31.497 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:51:31.499 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:51:31.503 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.507 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:51:31.507 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.508 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:51:31.509 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 24.0871ms
2025-09-03 10:51:31.511 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 23.6922ms
2025-09-03 10:51:31.514 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:51:31.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:51:31.517 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:51:31.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 63.0643ms
2025-09-03 10:51:31.521 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:31.522 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 61.3951ms
2025-09-03 10:51:31.528 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.656ms
2025-09-03 10:51:31.532 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:51:31.534 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 55.7273ms
2025-09-03 10:51:35.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:51:35.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:51:35.111 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:51:35.112 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:51:35.113 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:35.115 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:35.118 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:35.120 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:51:35.121 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 9.7577ms
2025-09-03 10:51:35.121 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.4494ms
2025-09-03 10:51:35.124 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:51:35.124 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:51:35.131 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:51:35.133 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:51:35.134 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:51:35.138 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:51:35.142 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:51:35.144 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:51:35.146 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:51:35.148 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:51:35.148 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:51:35.149 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 15.2751ms
2025-09-03 10:51:35.150 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 14.4494ms
2025-09-03 10:51:35.152 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:51:35.153 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:51:35.154 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 42.9787ms
2025-09-03 10:51:35.155 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 43.7233ms
2025-09-03 10:58:26.625 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 10:58:26.659 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 10:58:26.672 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 10:58:30.851 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 10:58:31.383 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 10:58:31.396 +05:30 [INF] ClickLogWorker started
2025-09-03 10:58:31.634 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 10:58:31.636 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 10:58:31.640 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 10:58:31.641 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 10:58:31.642 +05:30 [INF] Hosting environment: Development
2025-09-03 10:58:31.643 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 10:58:31.658 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__cutoff_0='2025-08-27T05:28:30.2919083Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 10:58:31.826 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 10:58:32.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 275.2428ms
2025-09-03 10:58:32.122 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 10:58:32.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.5417ms
2025-09-03 10:58:32.214 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 10:58:32.249 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4305ms
2025-09-03 10:58:32.444 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 10:58:32.452 +05:30 [INF] ClickLogWorker stopped
2025-09-03 10:58:32.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 192.6239ms
2025-09-03 10:58:37.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:37.033 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 10:58:37.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.086 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 58.4305ms
2025-09-03 10:58:37.091 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:37.102 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.496 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:37.511 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:37.600 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 10:58:37.662 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:37.672 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:37.712 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 195.3141ms
2025-09-03 10:58:37.714 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:37.721 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 629.9927ms
2025-09-03 10:58:37.729 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:37.732 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.736 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:37.737 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:37.750 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:37.754 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:37.756 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.1819ms
2025-09-03 10:58:37.757 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:37.759 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.3815ms
2025-09-03 10:58:37.802 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:58:37.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:58:37.803 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:58:37.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:58:37.807 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.810 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.812 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:37.816 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.817 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.7795ms
2025-09-03 10:58:37.817 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 12.1752ms
2025-09-03 10:58:37.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.6882ms
2025-09-03 10:58:37.821 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.822 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 15.5277ms
2025-09-03 10:58:37.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:58:37.837 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:37.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:58:37.842 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:37.842 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.847 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:37.849 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:58:37.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:58:37.854 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:37.860 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:58:37.860 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:58:37.861 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:37.868 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.4355ms
2025-09-03 10:58:37.870 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:58:37.870 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:37.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 67.8627ms
2025-09-03 10:58:37.882 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:58:37.924 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:58:37.962 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:58:38.011 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:38.016 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 153.2418ms
2025-09-03 10:58:38.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:58:38.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 181.9237ms
2025-09-03 10:58:38.058 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:58:38.059 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:58:38.074 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 208.1866ms
2025-09-03 10:58:38.075 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:58:38.076 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 243.8927ms
2025-09-03 10:58:57.003 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 10:58:57.006 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.8774ms
2025-09-03 10:58:57.010 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 10:58:57.014 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.015 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 10:58:57.020 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 10:58:57.041 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 10:58:57.058 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 10:58:57.097 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 10:58:57.183 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 10:58:57.191 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 10:58:57.200 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 10:58:57.201 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 10:58:57.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.205 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 183.9469ms
2025-09-03 10:58:57.206 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 10:58:57.207 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 196.6701ms
2025-09-03 10:58:57.210 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:57.212 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.213 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.679ms
2025-09-03 10:58:57.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:57.218 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.220 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:57.224 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:57.227 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.228 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7606ms
2025-09-03 10:58:57.229 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2662ms
2025-09-03 10:58:57.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:57.248 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.251 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:57.256 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:57.260 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.262 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4169ms
2025-09-03 10:58:57.263 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.265 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.6497ms
2025-09-03 10:58:57.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:57.272 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.274 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:57.278 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:57.282 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.284 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6192ms
2025-09-03 10:58:57.286 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.6404ms
2025-09-03 10:58:57.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:57.324 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.325 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.327 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:57.333 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:57.338 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.339 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5561ms
2025-09-03 10:58:57.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.342 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6641ms
2025-09-03 10:58:57.370 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:58:57.371 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:58:57.372 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 10:58:57.372 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:58:57.372 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:58:57.373 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.375 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.377 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.379 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.381 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.382 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 12.2708ms
2025-09-03 10:58:57.382 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.7636ms
2025-09-03 10:58:57.384 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.384 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.9454ms
2025-09-03 10:58:57.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 12.5971ms
2025-09-03 10:58:57.393 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 10:58:57.396 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:58:57.399 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:58:57.403 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 10:58:57.405 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.407 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:58:57.409 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.410 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:58:57.410 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:58:57.412 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3446ms
2025-09-03 10:58:57.412 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:58:57.413 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:58:57.415 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 10:58:57.418 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:58:57.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.3606ms
2025-09-03 10:58:57.425 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:58:57.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:58:57.438 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:58:57.438 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:58:57.440 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:58:57.443 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 24.795ms
2025-09-03 10:58:57.444 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:58:57.445 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 46.2446ms
2025-09-03 10:58:57.445 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:58:57.450 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 33.3964ms
2025-09-03 10:58:57.451 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:58:57.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 56.6866ms
2025-09-03 10:59:13.318 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:59:13.318 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 10:59:13.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 10:59:13.320 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:59:13.320 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:59:13.322 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:59:13.324 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:59:13.326 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:59:13.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 9.4897ms
2025-09-03 10:59:13.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 9.3612ms
2025-09-03 10:59:13.328 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.7135ms
2025-09-03 10:59:13.329 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 9.0067ms
2025-09-03 10:59:13.337 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 10:59:13.340 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 10:59:13.342 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:59:13.344 +05:30 [INF] CORS policy execution successful.
2025-09-03 10:59:13.345 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:59:13.345 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:59:13.346 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 10:59:13.347 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 10:59:13.350 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 10:59:13.352 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 10:59:13.358 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 10:59:13.361 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 10:59:13.363 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 10:59:13.365 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 10:59:13.367 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 10:59:13.368 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 18.1297ms
2025-09-03 10:59:13.369 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 20.9345ms
2025-09-03 10:59:13.370 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 10:59:13.371 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 10:59:13.373 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 32.8628ms
2025-09-03 10:59:13.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 36.2671ms
2025-09-03 11:02:42.453 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 11:02:42.489 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 11:02:42.503 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 11:02:43.220 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 11:02:43.709 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 11:02:43.727 +05:30 [INF] ClickLogWorker started
2025-09-03 11:02:43.887 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 11:02:43.888 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 11:02:43.889 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 11:02:43.890 +05:30 [INF] Hosting environment: Development
2025-09-03 11:02:43.891 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 11:02:43.906 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 11:02:43.908 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@__cutoff_0='2025-08-27T05:32:42.6009531Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 11:02:44.785 +05:30 [INF] ClickLogWorker stopped
2025-09-03 11:02:45.877 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 11:02:46.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 145.6042ms
2025-09-03 11:02:46.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 11:02:46.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.3207ms
2025-09-03 11:02:46.096 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 11:02:46.126 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.6976ms
2025-09-03 11:02:46.412 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 11:02:46.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.0195ms
2025-09-03 11:02:56.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:02:56.635 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 11:02:56.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:56.668 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 38.5749ms
2025-09-03 11:02:56.671 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:02:56.679 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:56.793 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:02:56.804 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:02:56.893 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 11:02:56.954 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:02:56.962 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:02:56.977 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 169.3953ms
2025-09-03 11:02:56.979 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:02:56.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 312.3436ms
2025-09-03 11:02:56.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:02:56.990 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:56.993 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:02:56.995 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:02:57.001 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:02:57.005 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:02:57.006 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.344ms
2025-09-03 11:02:57.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:02:57.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9805ms
2025-09-03 11:02:57.058 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:02:57.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:02:57.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:02:57.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:02:57.066 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.069 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.071 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.066 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:02:57.074 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.075 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 17.2345ms
2025-09-03 11:02:57.075 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 16.6975ms
2025-09-03 11:02:57.076 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 17.8962ms
2025-09-03 11:02:57.079 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 15.7108ms
2025-09-03 11:02:57.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:02:57.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:02:57.093 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:02:57.097 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.099 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:57.099 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:02:57.100 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:02:57.100 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:02:57.108 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:02:57.108 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:02:57.108 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:02:57.113 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:02:57.118 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6532ms
2025-09-03 11:02:57.119 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:02:57.120 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:02:57.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 57.9097ms
2025-09-03 11:02:57.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:02:57.169 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:02:57.200 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:02:57.246 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:02:57.250 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 133.4628ms
2025-09-03 11:02:57.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:02:57.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 160.4794ms
2025-09-03 11:02:57.285 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:02:57.286 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:02:57.299 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 184.3903ms
2025-09-03 11:02:57.301 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:02:57.302 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 213.5172ms
2025-09-03 11:02:58.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.881 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.883 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.885 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.887 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.889 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 9.3544ms
2025-09-03 11:02:58.890 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 9.7147ms
2025-09-03 11:02:58.891 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 10.492ms
2025-09-03 11:02:58.891 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 10.6122ms
2025-09-03 11:02:58.896 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null 0
2025-09-03 11:02:58.898 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.903 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.905 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.907 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.908 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:02:58.911 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:02:58.911 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:02:58.913 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:02:58.914 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:02:58.915 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:02:58.919 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 11:02:58.929 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:02:58.943 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:02:58.945 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:02:58.949 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:02:58.950 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:02:58.951 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 33.5193ms
2025-09-03 11:02:58.952 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:02:58.953 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 38.3506ms
2025-09-03 11:02:58.953 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 0 null 57.0923ms
2025-09-03 11:02:58.955 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:02:58.958 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:02:58.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 60.2971ms
2025-09-03 11:02:58.961 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:02:58.963 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:02:58.964 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:02:58.965 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:02:58.968 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 11:02:58.971 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 54.8965ms
2025-09-03 11:02:58.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:02:58.974 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:02:58.976 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:02:58.977 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 75.9196ms
2025-09-03 11:02:58.978 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8202ms
2025-09-03 11:02:58.981 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:02:58.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 23.9549ms
2025-09-03 11:03:08.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 11:03:08.827 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:08.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.2584ms
2025-09-03 11:03:08.832 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 11:03:08.835 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:08.837 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 11:03:08.840 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 11:03:08.861 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 11:03:08.875 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 11:03:08.914 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 11:03:08.994 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 11:03:09.004 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 11:03:09.015 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 11:03:09.017 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 11:03:09.018 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.020 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 177.9602ms
2025-09-03 11:03:09.021 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 11:03:09.022 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 189.902ms
2025-09-03 11:03:09.025 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:03:09.027 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8291ms
2025-09-03 11:03:09.031 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:03:09.033 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.034 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.035 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:03:09.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:03:09.041 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.042 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4293ms
2025-09-03 11:03:09.043 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7573ms
2025-09-03 11:03:09.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:03:09.065 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.067 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.068 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:03:09.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:03:09.077 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0832ms
2025-09-03 11:03:09.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8891ms
2025-09-03 11:03:09.087 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:03:09.090 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.091 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.092 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:03:09.096 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:03:09.100 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.102 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1904ms
2025-09-03 11:03:09.103 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.9888ms
2025-09-03 11:03:09.136 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:03:09.139 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.140 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.142 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:03:09.148 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:03:09.152 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.154 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.3083ms
2025-09-03 11:03:09.156 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.889ms
2025-09-03 11:03:09.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:03:09.186 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:03:09.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:03:09.188 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:03:09.188 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.188 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:03:09.191 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.193 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.196 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.197 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.6927ms
2025-09-03 11:03:09.199 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.200 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.4537ms
2025-09-03 11:03:09.201 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 14.2062ms
2025-09-03 11:03:09.206 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.602ms
2025-09-03 11:03:09.210 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:03:09.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:03:09.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:03:09.220 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:03:09.222 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.224 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:09.226 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.227 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:03:09.227 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:03:09.229 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0347ms
2025-09-03 11:03:09.229 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:09.230 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:09.232 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:03:09.233 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:03:09.237 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 49.6001ms
2025-09-03 11:03:09.243 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:03:09.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:03:09.250 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:03:09.252 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:09.253 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:03:09.255 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 21.3991ms
2025-09-03 11:03:09.258 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:03:09.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 45.9492ms
2025-09-03 11:03:09.261 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:09.264 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 29.1237ms
2025-09-03 11:03:09.265 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:03:09.266 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 50.4123ms
2025-09-03 11:03:13.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:03:13.032 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:13.033 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.3387ms
2025-09-03 11:03:13.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:03:13.035 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:03:13.038 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:13.040 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:13.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.035ms
2025-09-03 11:03:13.041 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:03:13.042 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:03:13.047 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:13.048 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:13.049 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:03:13.051 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:03:13.051 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:13.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:03:13.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:03:13.063 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:03:13.065 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:03:13.065 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:13.069 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 18.4685ms
2025-09-03 11:03:13.069 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:03:13.070 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:03:13.071 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 15.8502ms
2025-09-03 11:03:13.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 36.3998ms
2025-09-03 11:03:13.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:03:13.076 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 34.5182ms
2025-09-03 11:03:15.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.255 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.256 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.259 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.260 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 9.4547ms
2025-09-03 11:03:15.262 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 9.7164ms
2025-09-03 11:03:15.262 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 10.2232ms
2025-09-03 11:03:15.263 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 10.541ms
2025-09-03 11:03:15.265 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null 0
2025-09-03 11:03:15.275 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:15.277 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:15.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:03:15.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.284 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:03:15.285 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.287 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.288 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.6112ms
2025-09-03 11:03:15.288 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:15.289 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:15.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:15.291 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:15.292 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:15.293 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 0 null 27.209ms
2025-09-03 11:03:15.294 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 11:03:15.297 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:03:15.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:15.306 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:15.308 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.5681ms
2025-09-03 11:03:15.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:03:15.310 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:15.312 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:15.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 30.0011ms
2025-09-03 11:03:15.313 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:15.316 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:15.318 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 11:03:15.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:15.325 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:15.327 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.7722ms
2025-09-03 11:03:15.328 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:15.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 19.404ms
2025-09-03 11:03:15.342 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:15.344 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 48.7667ms
2025-09-03 11:03:15.345 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:15.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 63.3735ms
2025-09-03 11:03:16.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:16.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:16.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:16.957 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:16.959 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.961 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.962 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.964 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.7827ms
2025-09-03 11:03:16.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.2491ms
2025-09-03 11:03:16.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.8442ms
2025-09-03 11:03:16.967 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 10.4655ms
2025-09-03 11:03:16.970 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null 0
2025-09-03 11:03:16.979 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.980 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:16.981 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:16.985 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:03:16.986 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:16.986 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:16.989 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:03:16.991 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.993 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:16.994 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 11.2564ms
2025-09-03 11:03:16.994 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:16.995 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:16.996 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:16.996 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:16.997 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:16.998 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 0 null 28.3868ms
2025-09-03 11:03:17.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:03:17.003 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 11:03:17.011 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:17.013 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:17.014 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:17.015 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 15.7371ms
2025-09-03 11:03:17.016 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.655ms
2025-09-03 11:03:17.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:03:17.017 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:17.018 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:17.020 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 34.6159ms
2025-09-03 11:03:17.022 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 35.6887ms
2025-09-03 11:03:17.023 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:17.028 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:17.030 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 11:03:17.033 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:17.036 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:17.037 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.6866ms
2025-09-03 11:03:17.038 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:17.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.8089ms
2025-09-03 11:03:17.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:17.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:17.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:17.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:17.957 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.959 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.961 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.962 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 9.2953ms
2025-09-03 11:03:17.964 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 9.8298ms
2025-09-03 11:03:17.964 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 10.5099ms
2025-09-03 11:03:17.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 10.9752ms
2025-09-03 11:03:17.968 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null 0
2025-09-03 11:03:17.977 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.978 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:17.978 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:17.982 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:03:17.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:17.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:17.986 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:03:17.987 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.989 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:17.990 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 10.2111ms
2025-09-03 11:03:17.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:17.991 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:17.992 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:17.993 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:17.994 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:17.994 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 0 null 26.9362ms
2025-09-03 11:03:17.999 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 11:03:17.998 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:03:18.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:18.007 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:18.008 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:18.009 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.2703ms
2025-09-03 11:03:18.010 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.3798ms
2025-09-03 11:03:18.011 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 11:03:18.011 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:18.012 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.014 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.014 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 30.5618ms
2025-09-03 11:03:18.015 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 31.3727ms
2025-09-03 11:03:18.016 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.021 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:18.023 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 11:03:18.026 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:18.029 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:18.030 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.7461ms
2025-09-03 11:03:18.031 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 21.6756ms
2025-09-03 11:03:18.845 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.845 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.845 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.845 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.847 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.850 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.851 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.853 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 9.2329ms
2025-09-03 11:03:18.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 10.6128ms
2025-09-03 11:03:18.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 9.7606ms
2025-09-03 11:03:18.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 11.1663ms
2025-09-03 11:03:18.862 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.864 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - null 0
2025-09-03 11:03:18.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.869 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.871 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.873 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:18.875 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:18.875 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.876 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:18.877 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:18.878 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:18.882 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:03:18.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:03:18.887 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 11:03:18.889 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:18.890 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:03:18.893 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 14.119ms
2025-09-03 11:03:18.893 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:18.895 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 14.0362ms
2025-09-03 11:03:18.896 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:18.898 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:18.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:18.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 37.5831ms
2025-09-03 11:03:18.900 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.8016ms
2025-09-03 11:03:18.901 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 0 null 36.9748ms
2025-09-03 11:03:18.903 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:03:18.904 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.909 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:18.910 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 43.1071ms
2025-09-03 11:03:18.911 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.914 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:18.915 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 11:03:18.918 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:18.921 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:18.923 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.9525ms
2025-09-03 11:03:18.924 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:18.925 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 21.6103ms
2025-09-03 11:03:19.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.640 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.642 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.644 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.644 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 9.8442ms
2025-09-03 11:03:19.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 10.1707ms
2025-09-03 11:03:19.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 10.8957ms
2025-09-03 11:03:19.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 11.1863ms
2025-09-03 11:03:19.649 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null 0
2025-09-03 11:03:19.658 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:19.660 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:19.663 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:03:19.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.667 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:03:19.669 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.670 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.671 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.7516ms
2025-09-03 11:03:19.672 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:19.673 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:19.673 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:19.674 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:19.675 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:19.676 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 0 null 27.1737ms
2025-09-03 11:03:19.681 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 11:03:19.679 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:03:19.685 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:19.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:19.689 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:19.690 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.4052ms
2025-09-03 11:03:19.691 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.899ms
2025-09-03 11:03:19.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:03:19.692 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:19.693 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:19.695 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:19.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 30.527ms
2025-09-03 11:03:19.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 31.4534ms
2025-09-03 11:03:19.697 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:19.702 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:19.704 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 11:03:19.707 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:19.711 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:19.712 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0245ms
2025-09-03 11:03:19.713 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:19.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 21.9073ms
2025-09-03 11:03:20.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.532 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.534 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.537 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.539 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.540 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 10.2442ms
2025-09-03 11:03:20.540 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 10.5839ms
2025-09-03 11:03:20.541 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 11.3597ms
2025-09-03 11:03:20.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 11.7931ms
2025-09-03 11:03:20.544 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null 0
2025-09-03 11:03:20.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.554 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:20.555 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:20.558 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:03:20.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.562 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:03:20.563 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.565 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.566 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.525ms
2025-09-03 11:03:20.566 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:20.567 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:20.568 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:03:20.568 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:20.569 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:03:20.570 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 0 null 26.2439ms
2025-09-03 11:03:20.572 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 11:03:20.575 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:03:20.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:20.583 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:03:20.584 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:20.585 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.0216ms
2025-09-03 11:03:20.586 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.3574ms
2025-09-03 11:03:20.586 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:03:20.587 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:03:20.588 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:20.590 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:03:20.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 30.6996ms
2025-09-03 11:03:20.591 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 31.6986ms
2025-09-03 11:03:20.592 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:20.597 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:03:20.599 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 11:03:20.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:03:20.605 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:03:20.606 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.7116ms
2025-09-03 11:03:20.607 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:03:20.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 21.6155ms
2025-09-03 11:05:41.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 11:05:41.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 14.5637ms
2025-09-03 11:05:41.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 11:05:41.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 11:05:41.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.9419ms
2025-09-03 11:05:41.922 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.5522ms
2025-09-03 11:05:42.079 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 11:05:42.167 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.0457ms
2025-09-03 11:23:48.196 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.223 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.223 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 30.8147ms
2025-09-03 11:23:48.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 28.1888ms
2025-09-03 11:23:48.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.241 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.243 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.246 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:48.301 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:48.304 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.306 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 58.8258ms
2025-09-03 11:23:48.307 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.307 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.309 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 76.1715ms
2025-09-03 11:23:48.311 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.314 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:48.317 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:48.320 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.321 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0311ms
2025-09-03 11:23:48.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.322 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.324 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.325 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.0548ms
2025-09-03 11:23:48.326 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.329 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:48.332 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:48.335 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.337 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2407ms
2025-09-03 11:23:48.337 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.340 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.340 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4808ms
2025-09-03 11:23:48.341 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.344 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:48.349 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:48.351 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.352 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4502ms
2025-09-03 11:23:48.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.354 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.9426ms
2025-09-03 11:23:48.404 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:23:48.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:23:48.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:23:48.422 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.412 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.404 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:23:48.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 20.2454ms
2025-09-03 11:23:48.426 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.427 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 23.6687ms
2025-09-03 11:23:48.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.419 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:23:48.434 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:23:48.438 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 31.7413ms
2025-09-03 11:23:48.441 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:23:48.443 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.446 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.447 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 42.7724ms
2025-09-03 11:23:48.449 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.452 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:23:48.456 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.456 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.456 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 37.2554ms
2025-09-03 11:23:48.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:23:48.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 23.1129ms
2025-09-03 11:23:48.463 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:48.464 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 23.2527ms
2025-09-03 11:23:48.473 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:23:48.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 22.4975ms
2025-09-03 11:23:48.470 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.467 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:23:48.476 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:48.483 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:23:48.486 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.489 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:23:48.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:23:48.492 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.494 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.496 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.497 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:23:48.499 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.501 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.502 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 27.5865ms
2025-09-03 11:23:48.503 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.503 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:23:48.505 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.507 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:23:48.513 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.518 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:23:48.513 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.512 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:23:48.520 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 31.1071ms
2025-09-03 11:23:48.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 38.7092ms
2025-09-03 11:23:48.513 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.507 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ELCnxWTSYeMO2yhMAdLePg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:23:48.531 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:23:48.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:48.535 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:23:48.536 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 69.1687ms
2025-09-03 11:23:48.538 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 127.1894ms
2025-09-03 11:23:48.540 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.543 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.545 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.547 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.555 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:23:48.556 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 46.685ms
2025-09-03 11:23:48.557 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:23:48.558 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:23:48.562 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:48.565 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:48.564 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.571 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 35.3413ms
2025-09-03 11:23:48.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 107.3731ms
2025-09-03 11:23:48.574 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:23:48.572 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:48.582 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:23:48.585 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.588 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=XiGsg0B5sy4sgMcXQOMq8w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:23:48.591 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:23:48.596 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.591 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.3276ms
2025-09-03 11:23:48.602 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:23:48.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:23:48.606 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:23:48.604 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:48.619 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:48.620 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:23:48.621 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 89.2376ms
2025-09-03 11:23:48.623 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=WTgT3ffacbgqLd9taCkGyA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:23:48.625 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:23:48.632 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.624 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 35.1025ms
2025-09-03 11:23:48.635 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:23:48.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:23:48.638 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 122.7328ms
2025-09-03 11:23:48.640 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:23:48.641 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 83.3324ms
2025-09-03 11:23:48.642 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:23:48.645 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.651 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=44o1J_VwVf-nJw1bd0tFog&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:23:48.651 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 178.1827ms
2025-09-03 11:23:48.655 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:48.652 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:23:48.660 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:23:48.661 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:23:48.667 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:23:48.672 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:23:48.675 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:23:48.676 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:23:48.678 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 10.7692ms
2025-09-03 11:23:48.679 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:23:48.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 40.9662ms
2025-09-03 11:23:54.681 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:23:54.681 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:23:54.682 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=44o1J_VwVf-nJw1bd0tFog&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 6031.4253ms
2025-09-03 11:23:54.683 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=WTgT3ffacbgqLd9taCkGyA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 6060.0388ms
2025-09-03 11:23:55.281 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:55.283 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.284 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.692ms
2025-09-03 11:23:55.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:55.289 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.290 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:55.291 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:55.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:55.300 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:55.301 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2108ms
2025-09-03 11:23:55.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:55.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4543ms
2025-09-03 11:23:55.356 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:55.360 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.362 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:55.364 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:55.370 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:55.375 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:55.377 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6661ms
2025-09-03 11:23:55.379 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:55.381 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.5575ms
2025-09-03 11:23:55.429 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:23:55.429 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:23:55.429 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:23:55.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:23:55.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:23:55.432 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.435 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.437 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.440 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.442 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.443 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.3476ms
2025-09-03 11:23:55.444 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.961ms
2025-09-03 11:23:55.445 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 15.538ms
2025-09-03 11:23:55.446 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 16.1427ms
2025-09-03 11:23:55.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:55.450 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:23:55.453 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:23:55.456 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:23:55.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:23:55.461 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:23:55.467 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.469 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.472 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.481 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:23:55.482 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:55.475 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.479 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:55.484 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:23:55.486 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:55.490 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:23:55.487 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:55.488 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:23:55.489 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:23:55.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=BRK0VfZagPcVWD6KDibbOw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:23:55.491 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.8632ms
2025-09-03 11:23:55.493 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:23:55.494 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.0678ms
2025-09-03 11:23:55.500 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:23:55.499 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.503 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:23:55.495 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:23:55.496 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 45.8014ms
2025-09-03 11:23:55.507 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 77.4578ms
2025-09-03 11:23:55.508 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:23:55.511 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:23:55.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:23:55.522 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:23:55.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:23:55.528 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 34.8569ms
2025-09-03 11:23:55.531 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:23:55.531 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:23:55.533 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 21.1211ms
2025-09-03 11:23:55.534 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 77.9726ms
2025-09-03 11:23:55.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=aErOr9gnH5xz06DWIZM2Ng&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:23:55.535 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:23:55.540 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:23:55.541 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 81.5212ms
2025-09-03 11:23:55.542 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:30:46.949 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:30:46.949 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:30:46.949 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:30:46.951 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:30:46.953 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ELCnxWTSYeMO2yhMAdLePg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 418432.7167ms
2025-09-03 11:30:46.954 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=BRK0VfZagPcVWD6KDibbOw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 411463.3363ms
2025-09-03 11:30:46.956 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=aErOr9gnH5xz06DWIZM2Ng&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 411421.8217ms
2025-09-03 11:30:46.957 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=XiGsg0B5sy4sgMcXQOMq8w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 418369.5283ms
2025-09-03 11:40:46.000 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:40:46.045 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:40:46.169 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:46.214 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 213.6228ms
2025-09-03 11:40:46.251 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:40:46.191 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:46.277 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:46.281 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 236.0341ms
2025-09-03 11:40:46.290 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:46.346 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:40:46.348 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:46.359 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:46.360 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 108.654ms
2025-09-03 11:40:46.363 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:46.413 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:46.416 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 70.0613ms
2025-09-03 11:40:46.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ECcglUOajViG6PICMLhKaA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:40:46.464 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:46.467 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:40:46.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJQgFB9jYii7MQVZcEMjXQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:40:46.516 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:46.517 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:40:48.197 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:40:48.198 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:40:48.200 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:48.202 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:48.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.8886ms
2025-09-03 11:40:48.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.252ms
2025-09-03 11:40:48.208 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:40:48.210 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:40:48.213 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:48.215 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:48.216 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:48.216 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:48.218 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:48.219 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:40:48.220 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.8086ms
2025-09-03 11:40:48.221 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.1637ms
2025-09-03 11:40:48.221 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=7AEYx_p8mEmkvONP8lRHiw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:40:48.229 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:48.230 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:40:48.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=D19nfXwAWfwcWJ0RGicMVw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:40:48.255 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:40:48.256 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:43:39.477 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:43:39.477 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:43:39.478 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJQgFB9jYii7MQVZcEMjXQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 172964.839ms
2025-09-03 11:43:39.479 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ECcglUOajViG6PICMLhKaA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 173020.2232ms
2025-09-03 11:43:39.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:43:39.761 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5205ms
2025-09-03 11:43:39.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:43:39.768 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.769 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:43:39.770 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:43:39.844 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:43:39.847 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:43:39.848 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 76.7839ms
2025-09-03 11:43:39.850 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:43:39.851 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 85.8741ms
2025-09-03 11:43:39.860 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:43:39.862 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.863 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:43:39.864 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:43:39.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:43:39.870 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:43:39.871 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2267ms
2025-09-03 11:43:39.872 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:43:39.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.682ms
2025-09-03 11:43:39.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:43:39.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:43:39.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:43:39.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:43:39.912 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:43:39.918 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.920 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.922 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.924 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.927 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.927 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 18.5423ms
2025-09-03 11:43:39.928 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 17.423ms
2025-09-03 11:43:39.929 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 18.4018ms
2025-09-03 11:43:39.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 18.3438ms
2025-09-03 11:43:39.931 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:43:39.933 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:43:39.937 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:43:39.939 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:43:39.948 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:43:39.949 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:43:39.951 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.954 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.958 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:43:39.965 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:43:39.963 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:43:39.959 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.962 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:43:39.965 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:39.966 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:43:39.969 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:43:39.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:43:39.977 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 37.5037ms
2025-09-03 11:43:39.979 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.7288ms
2025-09-03 11:43:39.969 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:43:39.970 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:43:39.972 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=6PJ-NjaOzMxgtSiB7A_tpg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:43:39.986 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:39.987 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:43:39.988 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:39.988 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 55.0932ms
2025-09-03 11:43:39.990 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:39.993 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 80.3001ms
2025-09-03 11:43:39.993 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:43:39.994 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:43:39.998 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:43:40.001 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 28.3251ms
2025-09-03 11:43:40.007 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:43:40.007 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:43:40.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 72.5761ms
2025-09-03 11:43:40.011 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:43:40.015 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:40.017 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 22.3419ms
2025-09-03 11:43:40.018 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:43:40.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hn6HMG_hjhB-uqu-oKS2Mg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:43:40.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 71.235ms
2025-09-03 11:43:40.021 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:40.024 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:43:41.105 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.108 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.109 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.111 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.113 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.113 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.1186ms
2025-09-03 11:43:41.114 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.509ms
2025-09-03 11:43:41.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.9138ms
2025-09-03 11:43:41.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 9.3219ms
2025-09-03 11:43:41.118 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null 0
2025-09-03 11:43:41.122 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.125 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.126 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.128 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.130 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.130 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:41.131 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:41.132 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:41.135 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:41.135 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:41.138 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:41.140 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:41.144 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 11:43:41.146 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:41.148 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 11.4166ms
2025-09-03 11:43:41.148 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:41.150 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:41.152 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:41.153 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 0 null 34.6804ms
2025-09-03 11:43:41.155 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.4552ms
2025-09-03 11:43:41.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 11:43:41.157 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:41.159 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:41.160 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 35.2882ms
2025-09-03 11:43:41.161 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:41.164 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:41.166 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 11:43:41.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:41.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:41.173 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.4909ms
2025-09-03 11:43:41.174 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:41.175 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 18.4072ms
2025-09-03 11:43:41.212 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:41.215 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:41.219 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 79.5962ms
2025-09-03 11:43:41.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:41.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 99.2746ms
2025-09-03 11:43:41.916 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__contactId_0='0876f654-a362-420f-a912-6bce793436a5', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:41.998 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p1='d225a11a-5dab-4768-baad-6036616eabad', @p0='2025-09-03T06:13:41.9078425Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:42.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:42.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:44.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.290 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.292 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.293 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.295 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.296 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 7.9793ms
2025-09-03 11:43:44.296 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.373ms
2025-09-03 11:43:44.297 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 9.005ms
2025-09-03 11:43:44.298 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 9.4046ms
2025-09-03 11:43:44.302 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null 0
2025-09-03 11:43:44.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.308 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.310 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.311 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:44.311 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:44.312 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:44.313 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:44.316 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:44.319 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 11:43:44.319 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:44.320 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:44.325 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.326 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:44.327 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 12.3268ms
2025-09-03 11:43:44.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:44.329 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.37ms
2025-09-03 11:43:44.329 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 11:43:44.330 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:44.331 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:44.332 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:44.333 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:44.336 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 32.0559ms
2025-09-03 11:43:44.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:44.334 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 0 null 31.9855ms
2025-09-03 11:43:44.339 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:44.343 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:44.346 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:44.347 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.2416ms
2025-09-03 11:43:44.348 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 11:43:44.349 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:44.351 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 32.791ms
2025-09-03 11:43:44.353 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:44.358 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:44.359 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.6879ms
2025-09-03 11:43:44.360 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:44.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 31.4838ms
2025-09-03 11:43:45.097 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='1b52f26e-9fad-4233-a6bb-57603945f8d6', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:45.119 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='f824024c-3e88-4f0d-b01e-1856899a4a57', @p0='2025-09-03T06:13:45.0964303Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:45.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:45.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:45.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.281 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.283 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.284 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.286 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.287 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.0331ms
2025-09-03 11:43:45.287 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.4288ms
2025-09-03 11:43:45.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.9779ms
2025-09-03 11:43:45.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 9.3846ms
2025-09-03 11:43:45.291 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null 0
2025-09-03 11:43:45.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.299 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.301 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.303 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.304 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:45.304 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:45.305 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:45.305 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:45.306 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:45.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:45.307 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:45.314 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:45.315 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:45.316 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 11:43:45.318 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:45.318 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 10.0313ms
2025-09-03 11:43:45.321 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:45.322 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.6314ms
2025-09-03 11:43:45.323 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:45.325 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:45.325 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:45.326 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 0 null 35.4365ms
2025-09-03 11:43:45.327 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.9929ms
2025-09-03 11:43:45.328 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 32.5486ms
2025-09-03 11:43:45.331 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:45.334 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 11:43:45.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 36.5884ms
2025-09-03 11:43:45.336 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:45.339 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:45.340 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:45.341 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 11:43:45.344 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:45.347 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:45.348 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.8083ms
2025-09-03 11:43:45.349 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:45.350 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 16.0606ms
2025-09-03 11:43:46.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:46.085 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T06:13:46.0800001Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:46.087 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:46.091 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:46.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.336 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.337 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.339 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.340 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.5099ms
2025-09-03 11:43:46.340 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.9202ms
2025-09-03 11:43:46.341 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 8.432ms
2025-09-03 11:43:46.342 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 8.91ms
2025-09-03 11:43:46.344 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null 0
2025-09-03 11:43:46.353 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.354 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:46.354 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:46.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:46.361 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:46.361 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 5.8217ms
2025-09-03 11:43:46.362 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.362 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.363 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:46.364 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.366 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.367 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 0 null 22.8867ms
2025-09-03 11:43:46.368 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:46.368 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:46.371 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:46.372 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:46.376 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:46.377 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 11:43:46.379 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:46.382 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.3236ms
2025-09-03 11:43:46.382 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:46.384 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:46.386 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:46.386 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 24.4932ms
2025-09-03 11:43:46.387 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8893ms
2025-09-03 11:43:46.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:46.391 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:46.393 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:46.393 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 31.5899ms
2025-09-03 11:43:46.394 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:46.398 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:46.399 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 11:43:46.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:46.405 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:46.407 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.6107ms
2025-09-03 11:43:46.408 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:46.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 18.7912ms
2025-09-03 11:43:47.146 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:47.167 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T06:13:47.1451746Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:47.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:47.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:48.218 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.218 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.218 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.218 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.220 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.222 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.223 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.225 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.2135ms
2025-09-03 11:43:48.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.6802ms
2025-09-03 11:43:48.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 9.3106ms
2025-09-03 11:43:48.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 9.8263ms
2025-09-03 11:43:48.233 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null 0
2025-09-03 11:43:48.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.237 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.239 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.242 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.243 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:48.243 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:48.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:48.245 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:48.246 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:48.250 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:48.247 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:48.252 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 11:43:48.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:48.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:48.253 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:48.261 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:48.262 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:48.263 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 14.4635ms
2025-09-03 11:43:48.264 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.2688ms
2025-09-03 11:43:48.265 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.6139ms
2025-09-03 11:43:48.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 11:43:48.266 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:48.267 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:48.267 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:48.269 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:48.270 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 0 null 37.4428ms
2025-09-03 11:43:48.271 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 33.8718ms
2025-09-03 11:43:48.272 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 36.8722ms
2025-09-03 11:43:48.272 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:48.280 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:48.281 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 11:43:48.284 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:48.286 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:48.287 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.4132ms
2025-09-03 11:43:48.288 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:48.289 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 23.709ms
2025-09-03 11:43:49.027 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='63faf7a5-4506-431d-884c-cb0a363fa7ac', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:49.061 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='6e2bc4e4-cc53-4f9d-8d76-bd2b8a08f3aa', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='63faf7a5-4506-431d-884c-cb0a363fa7ac', @p3='2025-09-03T06:13:49.0255030Z' (DbType = DateTime), @p4='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ContactReads" ("Id", "BusinessId", "ContactId", "LastReadAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-03 11:43:49.064 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:49.067 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:49.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.332 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.333 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.335 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.337 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.337 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.782ms
2025-09-03 11:43:49.338 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.3333ms
2025-09-03 11:43:49.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.7778ms
2025-09-03 11:43:49.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 9.1904ms
2025-09-03 11:43:49.342 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - null 0
2025-09-03 11:43:49.348 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.351 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.353 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.355 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.357 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.358 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:49.358 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:49.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:49.360 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:49.361 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:49.362 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:49.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:49.367 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 11:43:49.370 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:49.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:49.372 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:49.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:49.378 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:49.378 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 14.8179ms
2025-09-03 11:43:49.379 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.9024ms
2025-09-03 11:43:49.380 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.5409ms
2025-09-03 11:43:49.381 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 11:43:49.381 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:49.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:49.383 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:49.385 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:49.386 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 0 null 43.8642ms
2025-09-03 11:43:49.386 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 35.5547ms
2025-09-03 11:43:49.387 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 39.3948ms
2025-09-03 11:43:49.388 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:49.395 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:49.397 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 11:43:49.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:49.403 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:49.404 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.0136ms
2025-09-03 11:43:49.405 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:49.406 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 25.147ms
2025-09-03 11:43:50.129 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.132 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.134 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.136 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.137 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.7377ms
2025-09-03 11:43:50.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.0977ms
2025-09-03 11:43:50.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.4882ms
2025-09-03 11:43:50.140 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.9683ms
2025-09-03 11:43:50.145 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null 0
2025-09-03 11:43:50.153 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.154 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:50.154 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:50.157 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:50.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.161 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:50.162 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.164 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.165 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 8.975ms
2025-09-03 11:43:50.165 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:50.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:50.167 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:50.168 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:50.168 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:50.169 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 0 null 24.3769ms
2025-09-03 11:43:50.174 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:50.170 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 11:43:50.180 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:50.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:50.182 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.6857ms
2025-09-03 11:43:50.184 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:50.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:50.186 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 15.6284ms
2025-09-03 11:43:50.187 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 26.8093ms
2025-09-03 11:43:50.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 11:43:50.188 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:50.193 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:50.194 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 34.2578ms
2025-09-03 11:43:50.195 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:50.198 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:50.199 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 11:43:50.202 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:50.205 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:50.206 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.7886ms
2025-09-03 11:43:50.207 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:50.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 20.5625ms
2025-09-03 11:43:50.940 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:50.963 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='26b8b9a2-5624-40ed-a659-65de71d03d20', @p3='2025-09-03T06:13:50.9387401Z' (DbType = DateTime), @p4='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ContactReads" ("Id", "BusinessId", "ContactId", "LastReadAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-03 11:43:50.966 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:50.970 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:52.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:52.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:52.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:52.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:52.964 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.966 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.968 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.969 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.970 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 8.4438ms
2025-09-03 11:43:52.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 8.8813ms
2025-09-03 11:43:52.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 9.2013ms
2025-09-03 11:43:52.972 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 9.9215ms
2025-09-03 11:43:52.975 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null 0
2025-09-03 11:43:52.984 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.984 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:52.985 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:52.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:52.991 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:52.992 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 5.7314ms
2025-09-03 11:43:52.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:52.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:52.993 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:52.995 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.997 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:52.998 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 0 null 22.9019ms
2025-09-03 11:43:52.999 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:52.999 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:53.002 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:53.003 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:53.005 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 11:43:53.009 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:53.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:53.014 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:53.015 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:53.016 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.4594ms
2025-09-03 11:43:53.017 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.7523ms
2025-09-03 11:43:53.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 11:43:53.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:53.019 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:53.021 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 28.8543ms
2025-09-03 11:43:53.022 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 29.8801ms
2025-09-03 11:43:53.023 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:53.029 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:53.031 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 11:43:53.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:53.036 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:53.038 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.1832ms
2025-09-03 11:43:53.039 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:53.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 22.2521ms
2025-09-03 11:43:53.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='8aac7c57-6699-4511-897b-4121b407eb1c', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:53.778 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='1f1fe451-ef35-4ca5-9754-e73a2bda5c12', @p0='2025-09-03T06:13:53.7736362Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:53.782 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:53.786 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:53.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:53.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:53.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:53.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:53.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.799 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.801 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.803 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.803 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 9.4198ms
2025-09-03 11:43:53.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 10.0498ms
2025-09-03 11:43:53.805 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 10.7996ms
2025-09-03 11:43:53.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 11.6327ms
2025-09-03 11:43:53.810 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null 0
2025-09-03 11:43:53.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:53.820 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:53.822 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.825 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.827 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:53.828 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:53.828 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:53.829 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:53.830 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:53.831 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:53.832 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:53.837 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 11:43:53.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:53.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:53.848 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:53.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:53.851 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 17.4581ms
2025-09-03 11:43:53.852 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.9195ms
2025-09-03 11:43:53.854 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:53.855 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:53.856 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 0 null 45.7639ms
2025-09-03 11:43:53.857 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 37.3876ms
2025-09-03 11:43:54.020 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:54.022 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:54.024 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 187.0943ms
2025-09-03 11:43:54.025 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.025 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 11:43:54.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 209.6274ms
2025-09-03 11:43:54.029 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.033 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.034 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:54.036 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 11:43:54.040 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:54.043 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:54.045 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.9604ms
2025-09-03 11:43:54.046 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.047 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 21.9543ms
2025-09-03 11:43:54.595 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='880f8355-31f3-4950-93ef-6b9bf88f7db2', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:54.599 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='f8f7fde2-aa48-48e4-9b76-ab8e33a6c743', @p0='2025-09-03T06:13:54.5938575Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:54.603 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:54.608 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:43:54.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.767 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.769 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.772 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.774 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 10.2638ms
2025-09-03 11:43:54.776 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 10.8792ms
2025-09-03 11:43:54.776 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 11.3699ms
2025-09-03 11:43:54.777 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 12.0076ms
2025-09-03 11:43:54.780 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null 0
2025-09-03 11:43:54.786 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.789 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.791 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.793 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.795 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.796 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:54.797 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.798 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:54.799 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:54.800 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:54.805 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:54.801 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:54.807 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 11:43:54.808 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:54.812 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:54.814 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 11.7811ms
2025-09-03 11:43:54.816 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:54.818 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:54.819 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:54.821 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:54.823 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.9588ms
2025-09-03 11:43:54.824 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 0 null 43.5465ms
2025-09-03 11:43:54.825 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 18.8709ms
2025-09-03 11:43:54.826 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:54.829 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 11:43:54.830 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 41.8697ms
2025-09-03 11:43:54.833 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:54.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 47.9677ms
2025-09-03 11:43:54.838 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.841 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:54.843 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 11:43:54.847 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:54.851 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:54.852 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.6317ms
2025-09-03 11:43:54.853 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:54.854 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 25.4539ms
2025-09-03 11:43:55.443 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.444 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.444 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.444 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.446 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.448 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.450 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.452 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.455 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 10.9194ms
2025-09-03 11:43:55.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 9.5856ms
2025-09-03 11:43:55.454 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 10.2265ms
2025-09-03 11:43:55.452 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 9.0455ms
2025-09-03 11:43:55.458 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.466 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null 0
2025-09-03 11:43:55.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.470 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.472 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.473 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:55.473 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:55.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:55.475 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:55.476 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:55.481 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 11:43:55.477 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:43:55.483 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 11:43:55.485 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:43:55.488 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 11:43:55.491 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.6542ms
2025-09-03 11:43:55.492 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:55.495 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 11:43:55.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 11:43:55.499 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:55.500 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 13.3174ms
2025-09-03 11:43:55.501 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 42.6419ms
2025-09-03 11:43:55.502 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 19.7035ms
2025-09-03 11:43:55.503 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 11:43:55.507 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 11:43:55.508 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:55.509 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 0 null 43.7521ms
2025-09-03 11:43:55.512 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:43:55.513 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 50.2104ms
2025-09-03 11:43:55.518 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:55.523 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:43:55.525 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 11:43:55.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 11:43:55.533 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 11:43:55.534 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.46ms
2025-09-03 11:43:55.536 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 11:43:55.537 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 30.4256ms
2025-09-03 11:43:56.254 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 11:43:56.258 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T06:13:56.2527131Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 11:43:56.261 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:43:56.265 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 11:44:15.975 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:44:15.975 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:44:15.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hn6HMG_hjhB-uqu-oKS2Mg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 35957.6785ms
2025-09-03 11:44:15.977 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=6PJ-NjaOzMxgtSiB7A_tpg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 36005.0942ms
2025-09-03 11:44:16.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:16.532 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.1527ms
2025-09-03 11:44:16.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:16.548 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.549 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:16.551 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:44:16.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:44:16.560 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:16.562 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3817ms
2025-09-03 11:44:16.563 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:16.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8993ms
2025-09-03 11:44:16.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:16.700 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:16.705 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:44:16.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:44:16.716 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:16.718 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.841ms
2025-09-03 11:44:16.720 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:16.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.3379ms
2025-09-03 11:44:16.790 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:44:16.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:44:16.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:44:16.791 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:16.792 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:44:16.793 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.798 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.801 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.804 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 15.3619ms
2025-09-03 11:44:16.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 15.7346ms
2025-09-03 11:44:16.808 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 16.5314ms
2025-09-03 11:44:16.809 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:16.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.7052ms
2025-09-03 11:44:16.813 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:44:16.817 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:44:16.821 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:44:16.822 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:44:16.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:44:16.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:44:16.830 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.834 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.836 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.844 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.846 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:16.847 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:44:16.848 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:16.849 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:16.849 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:44:16.851 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0836ms
2025-09-03 11:44:16.852 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:44:16.853 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:16.857 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:16.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:44:16.856 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:44:16.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 72.742ms
2025-09-03 11:44:16.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=GzYhwGpEP8WIgPpp5tZfmg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:44:16.861 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 43.7387ms
2025-09-03 11:44:16.854 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:16.868 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:44:16.870 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:44:16.877 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.885 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:16.888 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:44:16.889 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:44:16.881 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 59.9174ms
2025-09-03 11:44:16.893 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:44:16.890 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 31.2413ms
2025-09-03 11:44:16.901 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:44:16.902 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:44:16.905 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 35.407ms
2025-09-03 11:44:16.907 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 93.4719ms
2025-09-03 11:44:16.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=-EKGjUv5AqJYdMjQnwmEdQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:44:16.908 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:44:16.914 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:16.915 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 88.9103ms
2025-09-03 11:44:16.917 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:44:17.798 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:44:17.800 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=-EKGjUv5AqJYdMjQnwmEdQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 893.0925ms
2025-09-03 11:44:17.802 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:44:17.805 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=GzYhwGpEP8WIgPpp5tZfmg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 940.9131ms
2025-09-03 11:44:22.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:44:22.268 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.269 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 2.9562ms
2025-09-03 11:44:22.271 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:44:22.271 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:44:22.273 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:44:22.274 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:44:22.274 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.277 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.278 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.281 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.281 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 10.4238ms
2025-09-03 11:44:22.283 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 9.979ms
2025-09-03 11:44:22.282 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.6026ms
2025-09-03 11:44:22.284 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:22.288 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:44:22.289 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:44:22.292 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:44:22.293 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:22.295 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eusto-Q3v3JYPLwPfJkjWw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:44:22.297 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.299 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.300 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 26.3906ms
2025-09-03 11:44:22.301 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:44:22.303 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.304 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:44:22.305 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:22.309 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:44:22.309 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:44:22.310 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:44:22.311 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:22.319 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:44:22.314 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:44:22.323 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:44:22.320 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 28.3892ms
2025-09-03 11:44:22.326 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:44:22.327 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hWw7IOp5CaIyM4--yhCyGA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:44:22.328 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:44:22.334 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:22.335 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:22.336 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:44:22.337 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 24.3923ms
2025-09-03 11:44:22.338 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:44:22.339 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 19.9438ms
2025-09-03 11:44:22.340 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:44:22.344 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:44:22.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 57.8638ms
2025-09-03 11:44:22.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 57.2969ms
2025-09-03 11:44:43.408 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:44:43.408 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 11:44:43.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eusto-Q3v3JYPLwPfJkjWw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 21120.3317ms
2025-09-03 11:44:43.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hWw7IOp5CaIyM4--yhCyGA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 101 null null 21090.44ms
2025-09-03 11:44:43.570 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:43.573 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.573 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6726ms
2025-09-03 11:44:43.577 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:43.580 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.581 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:43.582 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:44:43.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:44:43.590 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:43.592 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.751ms
2025-09-03 11:44:43.593 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:43.595 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5364ms
2025-09-03 11:44:43.659 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:43.662 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.664 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:43.665 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:44:43.671 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:44:43.675 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:43.677 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3346ms
2025-09-03 11:44:43.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:43.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.6356ms
2025-09-03 11:44:43.716 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:44:43.717 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 11:44:43.718 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 11:44:43.718 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 11:44:43.718 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:44:43.720 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.722 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.725 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.727 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.730 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.035ms
2025-09-03 11:44:43.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 13.8551ms
2025-09-03 11:44:43.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:43.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 15.0886ms
2025-09-03 11:44:43.734 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 16.0083ms
2025-09-03 11:44:43.737 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:44:43.752 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.741 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 11:44:43.744 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 11:44:43.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 11:44:43.759 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 11:44:43.758 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.754 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:43.740 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 11:44:43.763 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.766 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:43.768 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:44:43.769 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:43.774 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.7738ms
2025-09-03 11:44:43.777 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2accH_AEt9zx1ti-HIH4fQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:44:43.773 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:44:43.775 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 11:44:43.777 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 39.4678ms
2025-09-03 11:44:43.787 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 11:44:43.784 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 11:44:43.799 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 11:44:43.795 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:44:43.788 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 11:44:43.803 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 11:44:43.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 81.8783ms
2025-09-03 11:44:43.772 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.807 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 11:44:43.808 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 18.5704ms
2025-09-03 11:44:43.812 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:43.815 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 11:44:43.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 11:44:43.818 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 11:44:43.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 74.7568ms
2025-09-03 11:44:43.822 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 11:44:43.823 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 82.6455ms
2025-09-03 11:44:43.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=3QisejTRHoSMtbBFrZT4bQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 11:44:43.828 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 11:44:43.834 +05:30 [INF] CORS policy execution successful.
2025-09-03 11:44:43.835 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 28.6998ms
2025-09-03 11:44:43.836 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 11:44:43.838 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 11:44:43.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 95.5242ms
2025-09-03 12:00:42.691 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 12:00:42.725 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 12:00:42.738 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 12:00:43.423 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 12:00:43.889 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 12:00:43.906 +05:30 [INF] ClickLogWorker started
2025-09-03 12:00:44.074 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 12:00:44.075 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 12:00:44.077 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 12:00:44.077 +05:30 [INF] Hosting environment: Development
2025-09-03 12:00:44.078 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 12:00:44.086 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 12:00:44.103 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__cutoff_0='2025-08-27T06:30:42.8199149Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 12:00:44.962 +05:30 [INF] ClickLogWorker stopped
2025-09-03 12:00:46.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 12:00:46.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 160.7974ms
2025-09-03 12:00:46.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 12:00:46.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7782ms
2025-09-03 12:00:46.420 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 12:00:46.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.4703ms
2025-09-03 12:00:46.622 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 12:00:46.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 212.7154ms
2025-09-03 12:00:54.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.259 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 12:00:54.307 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.308 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.308 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.308 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.312 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 57.9933ms
2025-09-03 12:00:54.312 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 57.8396ms
2025-09-03 12:00:54.312 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 57.9828ms
2025-09-03 12:00:54.312 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 58.0314ms
2025-09-03 12:00:54.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.324 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - null 0
2025-09-03 12:00:54.326 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 12:00:54.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:00:54.441 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:00:54.455 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:00:54.455 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:00:54.455 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:00:54.469 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:00:54.537 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-09-03 12:00:54.558 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-03 12:00:54.563 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 100.9942ms
2025-09-03 12:00:54.565 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-09-03 12:00:54.570 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 0 null 245.9843ms
2025-09-03 12:00:54.583 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:00:54.605 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:00:54.721 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:00:54.741 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:00:54.751 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 293.9358ms
2025-09-03 12:00:54.752 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 291.2013ms
2025-09-03 12:00:54.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:00:54.753 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:00:54.754 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:00:54.757 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:00:54.757 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 431.5165ms
2025-09-03 12:00:54.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 436.6589ms
2025-09-03 12:00:54.761 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:00:54.765 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:00:54.768 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:00:54.775 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:00:54.779 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:00:54.780 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.3969ms
2025-09-03 12:00:54.782 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:00:54.783 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 30.1363ms
2025-09-03 12:01:01.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:01.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:01.905 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.906 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.907 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.6209ms
2025-09-03 12:01:01.908 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.4082ms
2025-09-03 12:01:01.911 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:01.914 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:01.916 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.918 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.924 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.924 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.928 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.928 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.929 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 17.8831ms
2025-09-03 12:01:01.930 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 16.0368ms
2025-09-03 12:01:01.934 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=QTzgWxpckyUcCq8ZY4FJDg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:01.938 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.940 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:01.943 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:01.944 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=QTzgWxpckyUcCq8ZY4FJDg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 9.6336ms
2025-09-03 12:01:01.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:01.953 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.34ms
2025-09-03 12:01:01.956 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:01.958 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.959 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.960 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.962 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 5.4792ms
2025-09-03 12:01:01.962 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=8rAbPXCp9v_nX0FB1B1TTQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:01.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=7gX9QLaKzTMudHwuz-S9GQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:01.967 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.969 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.969 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:01.970 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:01.971 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:01.971 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:01.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=8rAbPXCp9v_nX0FB1B1TTQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 9.9058ms
2025-09-03 12:01:01.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=7gX9QLaKzTMudHwuz-S9GQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 8.3572ms
2025-09-03 12:01:01.978 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:01.979 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:01.981 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.982 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.983 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.0179ms
2025-09-03 12:01:01.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.8511ms
2025-09-03 12:01:01.986 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:01.989 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:01.991 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.993 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:01.994 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.994 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.995 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.996 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:01.996 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.2245ms
2025-09-03 12:01:01.997 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.0241ms
2025-09-03 12:01:02.022 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=YOXrixj2MAa3N_fEFuVqmg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:02.022 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062021 - null null
2025-09-03 12:01:02.025 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.026 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.027 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:02.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062021 - 204 null null 4.9742ms
2025-09-03 12:01:02.028 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:02.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062021 - null null
2025-09-03 12:01:02.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=YOXrixj2MAa3N_fEFuVqmg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 8.9966ms
2025-09-03 12:01:02.034 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.036 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.037 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.039 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.7921ms
2025-09-03 12:01:02.043 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.045 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.046 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.047 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.048 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 5.0869ms
2025-09-03 12:01:02.050 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062048 - null null
2025-09-03 12:01:02.052 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062021 - 200 0 application/octet-stream 21.3075ms
2025-09-03 12:01:02.054 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw - null null
2025-09-03 12:01:02.057 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062052 - null null
2025-09-03 12:01:02.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062048 - 204 null null 6.4823ms
2025-09-03 12:01:02.059 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.061 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062048 - null null
2025-09-03 12:01:02.064 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw - 204 null null 8.5313ms
2025-09-03 12:01:02.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062052 - 204 null null 8.0866ms
2025-09-03 12:01:02.067 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.070 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062052 - null null
2025-09-03 12:01:02.072 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw - text/plain;charset=UTF-8 32
2025-09-03 12:01:02.073 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.074 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.076 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.078 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.078 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.079 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.080 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062048 - 200 0 application/octet-stream 15.9047ms
2025-09-03 12:01:02.083 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q - null null
2025-09-03 12:01:02.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062080 - null null
2025-09-03 12:01:02.088 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.088 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.090 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q - 204 null null 8.2966ms
2025-09-03 12:01:02.091 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw - 200 0 text/plain 19.528ms
2025-09-03 12:01:02.092 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062080 - 204 null null 6.4869ms
2025-09-03 12:01:02.092 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.095 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q - text/plain;charset=UTF-8 32
2025-09-03 12:01:02.101 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062080 - null null
2025-09-03 12:01:02.103 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062052 - 200 3 application/octet-stream 31.7774ms
2025-09-03 12:01:02.106 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.107 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.109 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062094 - null null
2025-09-03 12:01:02.110 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.111 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.112 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.114 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.114 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q - 200 0 text/plain 19.5949ms
2025-09-03 12:01:02.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062094 - 204 null null 5.926ms
2025-09-03 12:01:02.117 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062080 - 200 3 application/octet-stream 16.347ms
2025-09-03 12:01:02.119 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062115 - null null
2025-09-03 12:01:02.123 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062094 - null null
2025-09-03 12:01:02.128 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.130 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.131 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062115 - 204 null null 11.5199ms
2025-09-03 12:01:02.132 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.135 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062115 - null null
2025-09-03 12:01:02.139 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.140 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.186 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.186 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.189 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.191 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.192 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.2791ms
2025-09-03 12:01:02.192 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.9022ms
2025-09-03 12:01:02.195 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.198 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.200 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.202 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.203 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.203 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.204 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.204 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.206 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.5059ms
2025-09-03 12:01:02.207 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.0319ms
2025-09-03 12:01:02.255 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=zyiRD66idI4zPftF68szyw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:02.257 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.258 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:02.258 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:02.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=zyiRD66idI4zPftF68szyw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 4.5874ms
2025-09-03 12:01:02.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.264 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.265 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 2.7107ms
2025-09-03 12:01:02.268 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.269 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.270 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.271 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.273 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 5.1699ms
2025-09-03 12:01:02.273 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=lUwwGfzFsqhSekaaWNxABg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:02.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=5G9LjaMHBoD4ji33FizxrQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:02.277 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.279 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.280 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:02.280 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:02.281 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:02.282 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:02.283 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=lUwwGfzFsqhSekaaWNxABg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 9.8382ms
2025-09-03 12:01:02.284 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=5G9LjaMHBoD4ji33FizxrQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 8.1197ms
2025-09-03 12:01:02.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.290 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.292 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.293 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.5423ms
2025-09-03 12:01:02.293 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.5553ms
2025-09-03 12:01:02.295 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.298 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.301 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.302 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.303 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.303 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.304 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.305 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.5882ms
2025-09-03 12:01:02.306 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.1422ms
2025-09-03 12:01:02.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oIh_auxumpL5hIqPRxA5ZQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:02.310 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062305 - null null
2025-09-03 12:01:02.312 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.314 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.315 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:02.315 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062305 - 204 null null 5.071ms
2025-09-03 12:01:02.316 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:02.318 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062305 - null null
2025-09-03 12:01:02.319 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oIh_auxumpL5hIqPRxA5ZQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 10.8327ms
2025-09-03 12:01:02.321 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.324 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:02.324 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.326 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.327 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.328 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.0037ms
2025-09-03 12:01:02.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062305 - 200 0 application/octet-stream 10.0616ms
2025-09-03 12:01:02.331 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - null null
2025-09-03 12:01:02.332 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:02.334 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062328 - null null
2025-09-03 12:01:02.337 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.339 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.341 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.342 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - 204 null null 11.3977ms
2025-09-03 12:01:02.343 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.344 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062328 - 204 null null 9.3126ms
2025-09-03 12:01:02.346 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - text/plain;charset=UTF-8 32
2025-09-03 12:01:02.348 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:02.353 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.354 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 22.3166ms
2025-09-03 12:01:02.355 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.358 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062350 - null null
2025-09-03 12:01:02.359 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.361 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.362 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - 200 0 text/plain 15.7639ms
2025-09-03 12:01:02.362 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062328 - null null
2025-09-03 12:01:02.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062350 - 204 null null 5.3435ms
2025-09-03 12:01:02.370 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.372 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062350 - null null
2025-09-03 12:01:02.373 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.375 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.376 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.377 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062328 - 200 3 application/octet-stream 16.0455ms
2025-09-03 12:01:02.380 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062378 - null null
2025-09-03 12:01:02.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - null null
2025-09-03 12:01:02.385 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062350 - 200 0 application/octet-stream 12.2371ms
2025-09-03 12:01:02.387 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.390 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.393 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062381 - null null
2025-09-03 12:01:02.394 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062378 - 204 null null 9.9419ms
2025-09-03 12:01:02.394 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - 204 null null 10.5208ms
2025-09-03 12:01:02.397 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.400 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - text/plain;charset=UTF-8 32
2025-09-03 12:01:02.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062378 - null null
2025-09-03 12:01:02.404 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062381 - 204 null null 11.3881ms
2025-09-03 12:01:02.407 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.409 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.411 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062381 - null null
2025-09-03 12:01:02.413 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.413 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.416 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.415 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.420 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - 200 0 text/plain 19.3088ms
2025-09-03 12:01:02.421 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:02.425 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:02.426 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062381 - 200 3 application/octet-stream 14.2484ms
2025-09-03 12:01:02.429 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062425 - null null
2025-09-03 12:01:02.431 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.433 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062425 - 204 null null 3.5694ms
2025-09-03 12:01:02.436 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062425 - null null
2025-09-03 12:01:02.438 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:02.439 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:31.694 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 12:01:31.701 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 6.5378ms
2025-09-03 12:01:31.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 12:01:31.755 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 12:01:31.760 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.742ms
2025-09-03 12:01:31.768 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.5142ms
2025-09-03 12:01:31.850 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 12:01:31.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 63.6478ms
2025-09-03 12:01:45.349 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:45.349 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:45.352 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UY-aOyCUfO0MbVp559PO-Q&_=1756881062115 - 499 null null 43217.5339ms
2025-09-03 12:01:45.352 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Yly6MWFaWFFZTnRoyg1pw&_=1756881062094 - 499 null null 43229.339ms
2025-09-03 12:01:46.135 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:01:46.140 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.141 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.8634ms
2025-09-03 12:01:46.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:01:46.160 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.162 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:01:46.170 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:01:46.231 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 12:01:46.315 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:01:46.339 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:01:46.355 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 183.4952ms
2025-09-03 12:01:46.357 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:01:46.358 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 207.3156ms
2025-09-03 12:01:46.368 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:01:46.372 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.373 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:01:46.374 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:01:46.383 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:01:46.386 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:01:46.387 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4524ms
2025-09-03 12:01:46.389 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:01:46.390 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.7307ms
2025-09-03 12:01:46.436 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:46.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:01:46.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:46.439 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:01:46.447 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.450 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.454 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.457 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 22.7457ms
2025-09-03 12:01:46.459 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:01:46.458 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 22.0967ms
2025-09-03 12:01:46.465 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 25.2073ms
2025-09-03 12:01:46.470 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:46.471 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:01:46.474 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:01:46.477 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:46.485 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.480 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.488 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:01:46.491 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.492 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.4763ms
2025-09-03 12:01:46.493 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:01:46.497 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:01:46.501 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.503 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.407ms
2025-09-03 12:01:46.504 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.508 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 37.348ms
2025-09-03 12:01:46.508 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.509 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:01:46.510 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 32.6152ms
2025-09-03 12:01:46.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:01:46.515 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:01:46.516 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 76.549ms
2025-09-03 12:01:46.523 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.527 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:01:46.528 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:01:46.535 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:01:46.546 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=4PRgHNFTCGedFXhXNDbbyg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:46.546 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:01:46.550 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.552 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:46.553 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:46.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=4PRgHNFTCGedFXhXNDbbyg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 8.5573ms
2025-09-03 12:01:46.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:46.568 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.569 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.2484ms
2025-09-03 12:01:46.574 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=bRKmeK8G_fx_EViDCS2zyg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:46.574 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:01:46.581 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:46.589 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:01:46.591 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.584 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.590 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:01:46.596 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.597 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:46.598 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:01:46.599 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.600 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:46.603 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 21.6263ms
2025-09-03 12:01:46.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=bRKmeK8G_fx_EViDCS2zyg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 31.027ms
2025-09-03 12:01:46.608 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=x3kkCvmzyXQ3hxKCeK0XJw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:46.608 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:46.614 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.617 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.618 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:46.619 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.7431ms
2025-09-03 12:01:46.620 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:46.624 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:46.625 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=x3kkCvmzyXQ3hxKCeK0XJw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 16.8426ms
2025-09-03 12:01:46.627 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:01:46.629 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.631 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 101.4893ms
2025-09-03 12:01:46.633 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:46.637 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.638 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:01:46.641 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.643 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 143.8621ms
2025-09-03 12:01:46.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.1928ms
2025-09-03 12:01:46.646 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 21.8798ms
2025-09-03 12:01:46.650 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ZjgKqFYDy0riXlsxgL_-VQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - null null
2025-09-03 12:01:46.653 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:46.659 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.661 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:01:46.661 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.662 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:01:46.665 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.666 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:01:46.667 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.668 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 131.2909ms
2025-09-03 12:01:46.668 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ZjgKqFYDy0riXlsxgL_-VQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODgxMTg5LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LhU5blIq9LyRzB5r6WqT5MxFVOObpcW0X83tfd1MO7U - 401 0 null 18.8553ms
2025-09-03 12:01:46.670 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 17.0876ms
2025-09-03 12:01:46.672 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:01:46.676 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106670 - null null
2025-09-03 12:01:46.680 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:01:46.682 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 167.9223ms
2025-09-03 12:01:46.685 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.688 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.693 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106670 - 204 null null 16.5813ms
2025-09-03 12:01:46.694 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 13.2987ms
2025-09-03 12:01:46.698 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:01:46.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106670 - null null
2025-09-03 12:01:46.703 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.705 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.707 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.707 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.708 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:01:46.710 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:46.711 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 13.3215ms
2025-09-03 12:01:46.712 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106670 - 200 0 application/octet-stream 11.5458ms
2025-09-03 12:01:46.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - null null
2025-09-03 12:01:46.716 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106711 - null null
2025-09-03 12:01:46.719 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106710 - null null
2025-09-03 12:01:46.721 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.723 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.726 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.726 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - 204 null null 11.8435ms
2025-09-03 12:01:46.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106711 - 204 null null 11.0868ms
2025-09-03 12:01:46.728 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106710 - 204 null null 9.0399ms
2025-09-03 12:01:46.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106711 - null null
2025-09-03 12:01:46.735 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - text/plain;charset=UTF-8 32
2025-09-03 12:01:46.738 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106710 - null null
2025-09-03 12:01:46.741 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.743 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.745 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.746 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.747 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.748 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.751 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:46.753 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:46.751 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:46.754 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106711 - 200 3 application/octet-stream 21.8375ms
2025-09-03 12:01:46.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106710 - 200 0 application/octet-stream 16.9435ms
2025-09-03 12:01:46.756 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - 200 0 text/plain 21.2605ms
2025-09-03 12:01:46.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106754 - null null
2025-09-03 12:01:46.768 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106754 - 204 null null 6.492ms
2025-09-03 12:01:46.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106758 - null null
2025-09-03 12:01:46.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - null null
2025-09-03 12:01:46.795 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106754 - null null
2025-09-03 12:01:46.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.799 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.801 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.801 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106758 - 204 null null 7.7796ms
2025-09-03 12:01:46.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - 204 null null 8.0768ms
2025-09-03 12:01:46.803 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.805 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - text/plain;charset=UTF-8 32
2025-09-03 12:01:46.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106758 - null null
2025-09-03 12:01:46.812 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.815 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.816 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.816 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:46.817 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:46.818 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:46.819 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - 200 0 text/plain 13.4753ms
2025-09-03 12:01:46.820 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106758 - 200 3 application/octet-stream 11.9181ms
2025-09-03 12:01:46.823 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106820 - null null
2025-09-03 12:01:46.828 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.829 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106820 - 204 null null 5.5737ms
2025-09-03 12:01:46.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106820 - null null
2025-09-03 12:01:46.834 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:46.834 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:54.565 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:54.565 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:54.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g&_=1756881106754 - 499 null null 7771.7705ms
2025-09-03 12:01:54.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - null null
2025-09-03 12:01:54.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - null null
2025-09-03 12:01:54.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ&_=1756881106820 - 499 null null 7736.54ms
2025-09-03 12:01:54.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - null null
2025-09-03 12:01:54.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - null null
2025-09-03 12:01:54.580 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.583 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.589 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.591 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.592 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - 204 null null 20.3364ms
2025-09-03 12:01:54.593 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - 204 null null 24.8396ms
2025-09-03 12:01:54.594 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - 204 null null 24.7493ms
2025-09-03 12:01:54.593 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - 204 null null 20.9748ms
2025-09-03 12:01:54.597 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - text/plain;charset=UTF-8 11
2025-09-03 12:01:54.599 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - null null
2025-09-03 12:01:54.602 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - text/plain;charset=UTF-8 11
2025-09-03 12:01:54.604 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - null null
2025-09-03 12:01:54.606 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.609 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.611 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.613 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:01:54.614 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:54.614 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:54.615 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:54.615 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:01:54.616 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:54.618 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:54.620 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - 200 0 text/plain 23.1149ms
2025-09-03 12:01:54.621 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - 200 0 text/plain 19.356ms
2025-09-03 12:01:54.623 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:54.623 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:01:54.628 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=Io4yLcbVC6pgpUH0oNknrQ - 202 0 text/plain 23.7446ms
2025-09-03 12:01:54.629 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=vT9_EHjI0Di3s7lHFhCE5g - 202 0 text/plain 29.4751ms
2025-09-03 12:02:01.523 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 12:02:01.526 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1978ms
2025-09-03 12:02:01.529 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 12:02:01.531 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.532 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 12:02:01.537 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 12:02:01.569 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 12:02:01.603 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 12:02:01.644 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 12:02:01.743 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 12:02:01.763 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 12:02:01.772 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 12:02:01.781 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 12:02:01.784 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:01.787 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 248.8268ms
2025-09-03 12:02:01.788 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 12:02:01.789 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 260.335ms
2025-09-03 12:02:01.792 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:01.794 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.794 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4438ms
2025-09-03 12:02:01.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:01.800 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.801 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.802 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:01.806 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:01.809 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:01.810 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7628ms
2025-09-03 12:02:01.811 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.812 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7223ms
2025-09-03 12:02:01.828 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:01.831 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.832 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.834 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:01.838 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:01.839 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:01.839 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:01.840 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - null null
2025-09-03 12:02:01.842 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:01.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA&_=1756881062378 - 499 null null 59439.6538ms
2025-09-03 12:02:01.855 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:01.849 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - null null
2025-09-03 12:02:01.848 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0577ms
2025-09-03 12:02:01.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - null null
2025-09-03 12:02:01.845 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - null null
2025-09-03 12:02:01.846 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.844 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg&_=1756881062425 - 499 null null 59407.877ms
2025-09-03 12:02:01.860 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.862 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.866 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.868 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - 204 null null 28.8223ms
2025-09-03 12:02:01.873 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - 204 null null 24.0429ms
2025-09-03 12:02:01.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 46.4144ms
2025-09-03 12:02:01.875 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - 204 null null 27.4562ms
2025-09-03 12:02:01.876 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - 204 null null 30.9033ms
2025-09-03 12:02:01.879 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - text/plain;charset=UTF-8 11
2025-09-03 12:02:01.880 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:01.882 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - null null
2025-09-03 12:02:01.898 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:01.899 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.888 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - null null
2025-09-03 12:02:01.891 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - text/plain;charset=UTF-8 11
2025-09-03 12:02:01.893 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.903 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:01.904 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:01.906 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.911 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6285ms
2025-09-03 12:02:01.913 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:01.920 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - 202 0 text/plain 37.837ms
2025-09-03 12:02:01.910 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:01.917 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.915 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:01.909 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.926 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:01.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 71.7461ms
2025-09-03 12:02:01.929 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:01.930 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:01.931 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - 200 0 text/plain 51.785ms
2025-09-03 12:02:01.936 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=dr9Ow-h98I2Ga0PLnR9kQg - 202 0 text/plain 48.6269ms
2025-09-03 12:02:01.938 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:01.949 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Eub_t_Y1Dv-_K5WKTf0cKA - 404 null text/plain 58.2349ms
2025-09-03 12:02:01.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:01.957 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:01.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:01.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:01.971 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:01.973 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5315ms
2025-09-03 12:02:01.974 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:01.975 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.197ms
2025-09-03 12:02:02.001 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:02.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:02.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:02.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:02:02.003 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:02:02.004 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.006 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.008 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.010 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.012 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.012 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.9814ms
2025-09-03 12:02:02.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.8307ms
2025-09-03 12:02:02.014 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:02.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.6645ms
2025-09-03 12:02:02.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 12.1469ms
2025-09-03 12:02:02.018 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:02.020 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:02.021 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:02.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:02:02.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:02.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:02:02.028 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.030 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.036 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.038 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:02.040 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.041 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.041 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.042 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:02:02.043 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7968ms
2025-09-03 12:02:02.044 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:02:02.048 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:02.045 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.046 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.047 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:02:02.049 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=btG0KzBXYDFUx_ZD_2rEGg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:02.049 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:02:02.051 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.2837ms
2025-09-03 12:02:02.057 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:02:02.052 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 33.939ms
2025-09-03 12:02:02.064 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:02.052 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 32.3158ms
2025-09-03 12:02:02.054 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:02:02.068 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:02:02.076 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:02:02.070 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:02.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=btG0KzBXYDFUx_ZD_2rEGg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 32.0144ms
2025-09-03 12:02:02.081 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:02:02.082 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:02.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:02.085 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:02:02.086 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 28.3693ms
2025-09-03 12:02:02.088 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.090 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 35.4691ms
2025-09-03 12:02:02.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:02:02.091 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.3636ms
2025-09-03 12:02:02.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=21b-uFZLF4HwwMnMUbuMmQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:02.093 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:02:02.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 67.6369ms
2025-09-03 12:02:02.096 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:02.098 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.099 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 75.7246ms
2025-09-03 12:02:02.104 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.105 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:02.108 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.109 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:02.110 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.111 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=21b-uFZLF4HwwMnMUbuMmQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 18.0281ms
2025-09-03 12:02:02.112 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 15.3481ms
2025-09-03 12:02:02.113 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:02.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hZiXnoEg87ieyFRnPjOM-A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:02.119 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.121 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.8435ms
2025-09-03 12:02:02.123 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:02.125 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:02.126 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:02.127 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.128 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hZiXnoEg87ieyFRnPjOM-A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 10.9172ms
2025-09-03 12:02:02.129 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.131 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:02.132 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.134 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.135 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.909ms
2025-09-03 12:02:02.135 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.2589ms
2025-09-03 12:02:02.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hARFd05-slWuNvrHjJolzA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:02.140 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:02.142 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.144 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.145 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:02.145 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.146 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:02.147 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hARFd05-slWuNvrHjJolzA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 10.0328ms
2025-09-03 12:02:02.149 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.6958ms
2025-09-03 12:02:02.152 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122148 - null null
2025-09-03 12:02:02.155 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:02.157 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.159 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122148 - 204 null null 7.762ms
2025-09-03 12:02:02.161 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.3816ms
2025-09-03 12:02:02.163 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:02.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122148 - null null
2025-09-03 12:02:02.169 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.171 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.172 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.173 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.174 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:02.175 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:02.176 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 13.1439ms
2025-09-03 12:02:02.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122148 - 200 0 application/octet-stream 11.6102ms
2025-09-03 12:02:02.178 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw - null null
2025-09-03 12:02:02.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122176 - null null
2025-09-03 12:02:02.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122175 - null null
2025-09-03 12:02:02.188 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.191 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.193 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.194 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw - 204 null null 16.5449ms
2025-09-03 12:02:02.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122176 - 204 null null 14.7951ms
2025-09-03 12:02:02.196 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122175 - 204 null null 12.5683ms
2025-09-03 12:02:02.201 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122175 - null null
2025-09-03 12:02:02.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122176 - null null
2025-09-03 12:02:02.208 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw - text/plain;charset=UTF-8 32
2025-09-03 12:02:02.211 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.214 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.217 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.219 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.220 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.223 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:02.221 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.227 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122175 - 200 0 application/octet-stream 26.3967ms
2025-09-03 12:02:02.229 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:02.229 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:02.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw - null null
2025-09-03 12:02:02.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122225 - null null
2025-09-03 12:02:02.234 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw - 200 0 text/plain 26.1792ms
2025-09-03 12:02:02.236 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122176 - 200 3 application/octet-stream 31.2568ms
2025-09-03 12:02:02.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.243 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122232 - null null
2025-09-03 12:02:02.252 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw - 204 null null 21.2687ms
2025-09-03 12:02:02.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122225 - 204 null null 19.9462ms
2025-09-03 12:02:02.256 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.260 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw - text/plain;charset=UTF-8 32
2025-09-03 12:02:02.263 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122225 - null null
2025-09-03 12:02:02.264 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122232 - 204 null null 13.2153ms
2025-09-03 12:02:02.267 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.270 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.273 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122232 - null null
2025-09-03 12:02:02.274 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.275 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.278 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:02.277 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.280 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:02.281 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw - 200 0 text/plain 21.1586ms
2025-09-03 12:02:02.282 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:02.283 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122225 - 200 3 application/octet-stream 19.9363ms
2025-09-03 12:02:02.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122281 - null null
2025-09-03 12:02:02.294 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.295 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122281 - 204 null null 8.7332ms
2025-09-03 12:02:02.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122281 - null null
2025-09-03 12:02:02.301 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:02.302 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.617 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:06.619 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 2.9765ms
2025-09-03 12:02:06.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:02:06.627 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.628 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:02:06.629 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:02:06.631 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:02:06.631 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:06.632 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:02:06.633 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:06.635 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:02:06.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.642 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.643 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:02:06.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.5617ms
2025-09-03 12:02:06.645 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:02:06.646 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.647 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:02:06.650 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:06.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:02:06.651 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:02:06.657 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=OA8qR6ZzGzxZ0sTvwvUO1A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:06.652 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.658 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.662 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:02:06.662 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 30.8798ms
2025-09-03 12:02:06.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.666 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 32.8146ms
2025-09-03 12:02:06.666 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.669 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:02:06.669 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:06.670 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:06.673 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.673 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 48.6281ms
2025-09-03 12:02:06.674 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 21.1668ms
2025-09-03 12:02:06.675 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:06.676 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 26.0335ms
2025-09-03 12:02:06.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:02:06.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=OA8qR6ZzGzxZ0sTvwvUO1A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 22.6689ms
2025-09-03 12:02:06.683 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:06.683 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 51.9684ms
2025-09-03 12:02:06.687 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.690 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.9168ms
2025-09-03 12:02:06.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dlGK7ASZlg3WVB1AYnJ0Zg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:06.692 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:06.694 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.696 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.697 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:06.697 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.698 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:06.699 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dlGK7ASZlg3WVB1AYnJ0Zg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 7.9589ms
2025-09-03 12:02:06.701 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.114ms
2025-09-03 12:02:06.702 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:06.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=zLnTHTxo1Su5x-P-gtm9tA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:06.707 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.709 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.709 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.0648ms
2025-09-03 12:02:06.710 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:06.712 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:06.713 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:06.715 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=zLnTHTxo1Su5x-P-gtm9tA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 10.3826ms
2025-09-03 12:02:06.716 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.719 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:06.720 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.721 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.722 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.7736ms
2025-09-03 12:02:06.723 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.7871ms
2025-09-03 12:02:06.725 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Z8SzpsRSBqSts5ktPef8FA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - null null
2025-09-03 12:02:06.727 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:06.729 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.731 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.731 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:02:06.732 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.733 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:02:06.734 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Z8SzpsRSBqSts5ktPef8FA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0NzIxLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.tugSJQrFvrSmPGcf4kDfgNEwMp1Xk8VFiGX3VwztUvE - 401 0 null 9.6481ms
2025-09-03 12:02:06.735 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.2817ms
2025-09-03 12:02:06.738 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126735 - null null
2025-09-03 12:02:06.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:02:06.742 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.743 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126735 - 204 null null 5.9721ms
2025-09-03 12:02:06.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.5211ms
2025-09-03 12:02:06.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126735 - null null
2025-09-03 12:02:06.749 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:02:06.751 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.753 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.753 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.754 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.755 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:06.756 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:02:06.756 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126735 - 200 0 application/octet-stream 9.8777ms
2025-09-03 12:02:06.757 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.1233ms
2025-09-03 12:02:06.758 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126756 - null null
2025-09-03 12:02:06.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA - null null
2025-09-03 12:02:06.762 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126756 - null null
2025-09-03 12:02:06.763 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.765 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.767 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.768 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126756 - 204 null null 9.9013ms
2025-09-03 12:02:06.768 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA - 204 null null 8.969ms
2025-09-03 12:02:06.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126756 - 204 null null 7.4375ms
2025-09-03 12:02:06.771 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA - text/plain;charset=UTF-8 32
2025-09-03 12:02:06.773 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126756 - null null
2025-09-03 12:02:06.776 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126756 - null null
2025-09-03 12:02:06.777 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.779 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.781 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.782 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.782 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.783 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.785 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:06.784 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:06.786 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:06.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126756 - 200 0 application/octet-stream 12.8929ms
2025-09-03 12:02:06.787 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA - 200 0 text/plain 15.7269ms
2025-09-03 12:02:06.788 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126756 - 200 3 application/octet-stream 12.5456ms
2025-09-03 12:02:06.790 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126787 - null null
2025-09-03 12:02:06.792 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126787 - null null
2025-09-03 12:02:06.795 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw - null null
2025-09-03 12:02:06.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.799 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.800 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.801 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126787 - 204 null null 10.4854ms
2025-09-03 12:02:06.801 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126787 - 204 null null 9.0111ms
2025-09-03 12:02:06.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw - 204 null null 7.5612ms
2025-09-03 12:02:06.804 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw - text/plain;charset=UTF-8 32
2025-09-03 12:02:06.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126787 - null null
2025-09-03 12:02:06.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126787 - null null
2025-09-03 12:02:06.810 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.812 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.815 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.815 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.816 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.817 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:06.816 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:06.820 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw - 200 0 text/plain 15.4227ms
2025-09-03 12:02:06.821 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:06.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126787 - 200 3 application/octet-stream 15.1129ms
2025-09-03 12:02:06.826 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126821 - null null
2025-09-03 12:02:06.828 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126821 - 204 null null 2.3645ms
2025-09-03 12:02:06.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126821 - null null
2025-09-03 12:02:06.833 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:06.834 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:02:28.726 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:28.726 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:28.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=piacwPuweCxygON9Pa6Fiw&_=1756881126821 - 499 null null 21896.9312ms
2025-09-03 12:02:28.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m0WNedJAILvps5hXXgG3eA&_=1756881126787 - 499 null null 21922.2035ms
2025-09-03 12:02:32.649 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:32.649 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:02:32.650 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kJr6UfT8LtwIevBFRak-Cw&_=1756881122232 - 499 null null 30377.4412ms
2025-09-03 12:02:32.651 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FYs4UpLDo0NajusOj1M0dw&_=1756881122281 - 499 null null 30353.1477ms
2025-09-03 12:02:47.442 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:47.445 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:47.446 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2018ms
2025-09-03 12:02:47.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:47.452 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:47.453 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:47.454 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:47.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:47.462 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:47.464 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1642ms
2025-09-03 12:02:47.465 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:47.467 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8695ms
2025-09-03 12:02:47.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:47.562 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:47.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:47.564 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:47.572 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:47.578 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:47.579 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.3055ms
2025-09-03 12:02:47.581 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:47.584 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.7302ms
2025-09-03 12:02:55.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 12:02:55.935 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:55.936 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1098ms
2025-09-03 12:02:55.939 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 12:02:55.941 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:55.942 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 12:02:55.943 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 12:02:55.948 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 12:02:55.951 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 12:02:55.956 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 12:02:55.962 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 12:02:55.964 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 12:02:55.965 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 12:02:55.966 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 12:02:55.967 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:55.968 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 23.7536ms
2025-09-03 12:02:55.969 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 12:02:55.970 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 31.0911ms
2025-09-03 12:02:55.972 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:55.975 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:55.976 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4271ms
2025-09-03 12:02:55.978 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:55.980 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:55.981 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:55.982 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:55.985 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:55.988 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:55.989 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9624ms
2025-09-03 12:02:55.990 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:55.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6707ms
2025-09-03 12:02:56.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:56.008 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:56.009 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:56.010 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:56.014 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:56.018 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:56.020 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9566ms
2025-09-03 12:02:56.021 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:56.022 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4067ms
2025-09-03 12:02:56.099 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:02:56.101 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:02:56.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:56.104 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:02:56.108 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:02:56.111 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:02:56.112 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1034ms
2025-09-03 12:02:56.113 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:02:56.114 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6565ms
2025-09-03 12:03:01.988 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:03:01.991 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:03:01.989 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:03:01.991 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:03:01.992 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:01.994 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:01.996 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:01.998 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:01.998 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.0991ms
2025-09-03 12:03:01.999 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.2945ms
2025-09-03 12:03:02.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 10.7743ms
2025-09-03 12:03:02.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 9.5622ms
2025-09-03 12:03:02.004 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:03:02.006 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:03:02.009 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:03:02.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:03:02.014 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.015 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.017 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.020 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.021 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.021 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:03:02.022 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.023 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:03:02.023 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.024 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:03:02.028 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=qJNI5JwlVG5IyOU9gcqTOw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:03:02.026 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:03:02.027 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 23.6014ms
2025-09-03 12:03:02.025 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.035 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:03:02.038 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.040 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:03:02.046 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:03:02.044 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 34.5545ms
2025-09-03 12:03:02.049 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:03:02.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:03:02.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:03:02.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=qJNI5JwlVG5IyOU9gcqTOw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 26.9432ms
2025-09-03 12:03:02.058 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:03:02.058 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:03:02.060 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:03:02.063 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 29.8552ms
2025-09-03 12:03:02.065 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.065 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:03:02.066 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:03:02.067 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.9835ms
2025-09-03 12:03:02.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=a_i3YDa9GUdZtvNEUQuOVA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:03:02.069 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 29.6607ms
2025-09-03 12:03:02.070 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 63.5269ms
2025-09-03 12:03:02.072 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:03:02.075 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.076 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:03:02.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.081 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:03:02.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 69.9002ms
2025-09-03 12:03:02.082 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.083 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:03:02.087 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.088 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=a_i3YDa9GUdZtvNEUQuOVA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 19.1855ms
2025-09-03 12:03:02.089 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 16.3484ms
2025-09-03 12:03:02.092 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:03:02.095 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_UzQ8QX_LaSPenA1XiIrfA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:03:02.097 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.100 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.100 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.4228ms
2025-09-03 12:03:02.101 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:03:02.105 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:03:02.105 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:03:02.107 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_UzQ8QX_LaSPenA1XiIrfA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 12.7905ms
2025-09-03 12:03:02.109 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:03:02.112 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.114 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.115 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.1622ms
2025-09-03 12:03:02.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.2072ms
2025-09-03 12:03:02.118 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=w_ZsmbKxA7vNU9S9VDmFbQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:03:02.120 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:03:02.122 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.124 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.124 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:03:02.125 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.126 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:03:02.126 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.127 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=w_ZsmbKxA7vNU9S9VDmFbQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 9.5313ms
2025-09-03 12:03:02.128 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 7.8518ms
2025-09-03 12:03:02.131 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182128 - null null
2025-09-03 12:03:02.133 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:03:02.135 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.137 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.137 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182128 - 204 null null 6.6217ms
2025-09-03 12:03:02.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.0549ms
2025-09-03 12:03:02.140 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:03:02.142 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182128 - null null
2025-09-03 12:03:02.144 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.146 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.146 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.147 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.148 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:03:02.149 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:03:02.150 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.647ms
2025-09-03 12:03:02.151 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182128 - 200 0 application/octet-stream 8.3318ms
2025-09-03 12:03:02.156 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182149 - null null
2025-09-03 12:03:02.157 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182151 - null null
2025-09-03 12:03:02.157 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw - null null
2025-09-03 12:03:02.158 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.160 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.162 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182149 - 204 null null 6.4628ms
2025-09-03 12:03:02.164 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw - 204 null null 6.602ms
2025-09-03 12:03:02.163 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182151 - 204 null null 6.0455ms
2025-09-03 12:03:02.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182151 - null null
2025-09-03 12:03:02.168 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw - text/plain;charset=UTF-8 32
2025-09-03 12:03:02.171 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182149 - null null
2025-09-03 12:03:02.173 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.174 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.176 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.177 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.177 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.178 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.181 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:03:02.182 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:03:02.181 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:03:02.183 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw - 200 0 text/plain 14.4406ms
2025-09-03 12:03:02.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182149 - 200 0 application/octet-stream 12.9611ms
2025-09-03 12:03:02.190 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182182 - null null
2025-09-03 12:03:02.185 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182151 - 200 3 application/octet-stream 18.8524ms
2025-09-03 12:03:02.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg - null null
2025-09-03 12:03:02.193 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.196 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182183 - null null
2025-09-03 12:03:02.198 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.199 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182182 - 204 null null 9.1965ms
2025-09-03 12:03:02.201 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg - 204 null null 10.391ms
2025-09-03 12:03:02.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182182 - null null
2025-09-03 12:03:02.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182183 - 204 null null 9.2843ms
2025-09-03 12:03:02.208 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg - text/plain;charset=UTF-8 32
2025-09-03 12:03:02.210 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182183 - null null
2025-09-03 12:03:02.214 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.215 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.216 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.217 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.220 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:03:02.220 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:03:02.222 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:03:02.222 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg - 200 0 text/plain 14.4766ms
2025-09-03 12:03:02.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182183 - 200 3 application/octet-stream 11.1788ms
2025-09-03 12:03:02.226 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182223 - null null
2025-09-03 12:03:02.230 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182223 - 204 null null 4.7686ms
2025-09-03 12:03:02.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182223 - null null
2025-09-03 12:03:02.235 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:03:02.236 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:04:32.223 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:04:32.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881182182 - 200 0 text/plain 90019.8037ms
2025-09-03 12:04:32.239 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:04:32.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881182223 - 200 0 text/plain 90006.8723ms
2025-09-03 12:04:32.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881272259 - null null
2025-09-03 12:04:32.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881272260 - null null
2025-09-03 12:04:32.264 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:04:32.266 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:04:32.266 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881272259 - 204 null null 4.1379ms
2025-09-03 12:04:32.267 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881272260 - 204 null null 4.4465ms
2025-09-03 12:04:32.272 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881272260 - null null
2025-09-03 12:04:32.277 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881272259 - null null
2025-09-03 12:04:32.278 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:04:32.280 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:04:32.280 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:04:32.281 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:05:57.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 12:05:57.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 7.7702ms
2025-09-03 12:05:57.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 12:05:57.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 12:05:57.694 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.8415ms
2025-09-03 12:05:57.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.7217ms
2025-09-03 12:05:58.164 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 12:05:58.274 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 110.525ms
2025-09-03 12:05:59.258 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:05:59.258 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:05:59.261 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=prdaWEKHJ0JsxMjzJTvasg&_=1756881272260 - 499 null null 86988.9811ms
2025-09-03 12:05:59.261 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=oBLf9Xfs6iunw0YxSi1Vjw&_=1756881272259 - 499 null null 86984.1468ms
2025-09-03 12:05:59.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:05:59.915 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:05:59.916 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.4379ms
2025-09-03 12:05:59.927 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:05:59.938 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:05:59.940 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:05:59.947 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:06:00.149 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:06:00.151 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:06:00.154 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 205.1131ms
2025-09-03 12:06:00.156 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:06:00.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 229.4566ms
2025-09-03 12:06:00.164 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:06:00.166 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.167 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:06:00.168 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:06:00.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:06:00.176 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:06:00.177 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5949ms
2025-09-03 12:06:00.180 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:06:00.181 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5799ms
2025-09-03 12:06:00.234 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:06:00.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:06:00.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:06:00.236 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:06:00.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 22.4582ms
2025-09-03 12:06:00.256 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:06:00.266 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.275 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:06:00.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:06:00.271 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.279 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.280 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 42.8747ms
2025-09-03 12:06:00.284 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.285 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:06:00.286 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 50.7379ms
2025-09-03 12:06:00.298 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:06:00.293 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.292 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:06:00.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 49.8321ms
2025-09-03 12:06:00.302 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:06:00.305 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:06:00.306 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.310 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.316 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:06:00.317 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kxtjIOriREir_dSee6i5GQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:06:00.326 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 30.6521ms
2025-09-03 12:06:00.327 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 52.2581ms
2025-09-03 12:06:00.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:06:00.329 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.332 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.335 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:06:00.340 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.341 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:06:00.342 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:06:00.342 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:06:00.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 105.7809ms
2025-09-03 12:06:00.352 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:06:00.345 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 42.8506ms
2025-09-03 12:06:00.349 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:06:00.347 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:06:00.362 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:06:00.364 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:06:00.365 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kxtjIOriREir_dSee6i5GQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 48.0239ms
2025-09-03 12:06:00.369 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:06:00.373 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:06:00.374 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:06:00.379 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 29.9142ms
2025-09-03 12:06:00.379 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S8Rlb0DU4IjkUMdzRluzvg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:06:00.382 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.385 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:06:00.386 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:06:00.390 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.391 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 18.1832ms
2025-09-03 12:06:00.392 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:06:00.394 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 101.8473ms
2025-09-03 12:06:00.394 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:06:00.398 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:06:00.404 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:06:00.404 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 40.5658ms
2025-09-03 12:06:00.407 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.408 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S8Rlb0DU4IjkUMdzRluzvg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 29.3768ms
2025-09-03 12:06:00.410 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:06:00.412 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.415 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:06:00.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 104.446ms
2025-09-03 12:06:00.418 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.421 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.425 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 27.1431ms
2025-09-03 12:06:00.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.7684ms
2025-09-03 12:06:00.433 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=upxTnCv6pgvaRqBezJZ2mQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:06:00.433 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:06:00.436 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.438 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.439 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:06:00.440 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.441 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:06:00.442 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.444 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=upxTnCv6pgvaRqBezJZ2mQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 10.9663ms
2025-09-03 12:06:00.445 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.945ms
2025-09-03 12:06:00.450 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=grDDQzj53InadlcBDjI37w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:06:00.454 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:06:00.456 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.458 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.459 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:06:00.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.0652ms
2025-09-03 12:06:00.462 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:06:00.465 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:06:00.466 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=grDDQzj53InadlcBDjI37w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 15.6105ms
2025-09-03 12:06:00.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.471 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:06:00.472 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.475 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.476 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.1579ms
2025-09-03 12:06:00.478 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 12.8684ms
2025-09-03 12:06:00.501 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:06:00.502 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360500 - null null
2025-09-03 12:06:00.503 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.505 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.506 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.506 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360500 - 204 null null 4.1306ms
2025-09-03 12:06:00.507 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:06:00.511 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360500 - null null
2025-09-03 12:06:00.512 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.2657ms
2025-09-03 12:06:00.514 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360509 - null null
2025-09-03 12:06:00.517 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.519 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.521 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:06:00.521 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360509 - 204 null null 4.7027ms
2025-09-03 12:06:00.522 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360500 - 200 0 application/octet-stream 11.3343ms
2025-09-03 12:06:00.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360509 - null null
2025-09-03 12:06:00.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ - null null
2025-09-03 12:06:00.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360523 - null null
2025-09-03 12:06:00.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.536 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.539 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.540 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.541 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ - 204 null null 11.728ms
2025-09-03 12:06:00.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360523 - 204 null null 11.4665ms
2025-09-03 12:06:00.545 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:06:00.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360509 - 200 0 application/octet-stream 24.7948ms
2025-09-03 12:06:00.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360523 - null null
2025-09-03 12:06:00.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360553 - null null
2025-09-03 12:06:00.556 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ - text/plain;charset=UTF-8 32
2025-09-03 12:06:00.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg - null null
2025-09-03 12:06:00.559 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.561 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.564 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.567 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.568 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.568 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360553 - 204 null null 12.4767ms
2025-09-03 12:06:00.570 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg - 204 null null 13.6245ms
2025-09-03 12:06:00.569 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.575 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360553 - null null
2025-09-03 12:06:00.579 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg - text/plain;charset=UTF-8 32
2025-09-03 12:06:00.580 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:06:00.580 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:06:00.583 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.586 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360523 - 200 3 application/octet-stream 33.9115ms
2025-09-03 12:06:00.588 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ - 200 0 text/plain 31.1423ms
2025-09-03 12:06:00.589 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.589 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360582 - null null
2025-09-03 12:06:00.600 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:06:00.600 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:06:00.603 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.604 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg - 200 0 text/plain 25.0064ms
2025-09-03 12:06:00.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360553 - 200 3 application/octet-stream 29.578ms
2025-09-03 12:06:00.606 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360582 - 204 null null 12.6533ms
2025-09-03 12:06:00.612 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360601 - null null
2025-09-03 12:06:00.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=wVcSuydAgzLGJAUvZnWmJQ&_=1756881360582 - null null
2025-09-03 12:06:00.617 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.620 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360601 - 204 null null 8.2949ms
2025-09-03 12:06:00.621 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:06:00.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=R5SldgGsvb3nWjlpqPL7Mg&_=1756881360601 - null null
2025-09-03 12:06:00.629 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:06:00.630 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:07:23.368 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 12:07:23.402 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 12:07:23.414 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 12:07:24.119 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 12:07:24.572 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 12:07:24.589 +05:30 [INF] ClickLogWorker started
2025-09-03 12:07:24.735 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 12:07:24.737 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 12:07:24.741 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 12:07:24.742 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 12:07:24.744 +05:30 [INF] Hosting environment: Development
2025-09-03 12:07:24.745 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 12:07:24.759 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[@__cutoff_0='2025-08-27T06:37:23.4984757Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 12:07:25.631 +05:30 [INF] ClickLogWorker stopped
2025-09-03 12:07:26.865 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 12:07:27.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 151.0288ms
2025-09-03 12:07:27.034 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 12:07:27.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.3946ms
2025-09-03 12:07:27.103 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 12:07:27.139 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.9485ms
2025-09-03 12:07:27.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 12:07:27.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 219.747ms
2025-09-03 12:07:31.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:07:31.860 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 12:07:31.917 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:31.927 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 71.0402ms
2025-09-03 12:07:31.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:07:31.943 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.106 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:07:32.122 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:07:32.257 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 12:07:32.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:07:32.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:07:32.376 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 249.408ms
2025-09-03 12:07:32.378 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:07:32.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 451.683ms
2025-09-03 12:07:32.387 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:07:32.390 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.393 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:07:32.395 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:07:32.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:07:32.407 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:07:32.408 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8471ms
2025-09-03 12:07:32.410 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:07:32.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.2438ms
2025-09-03 12:07:32.450 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:07:32.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:07:32.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:07:32.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:07:32.452 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:07:32.465 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.457 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.472 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.475 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.476 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 20.1681ms
2025-09-03 12:07:32.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 27.6954ms
2025-09-03 12:07:32.480 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:07:32.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 23.5462ms
2025-09-03 12:07:32.479 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 27.3115ms
2025-09-03 12:07:32.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:07:32.494 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:07:32.494 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:07:32.496 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:07:32.509 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.500 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:07:32.507 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.511 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:07:32.516 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.518 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.520 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:07:32.521 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:07:32.522 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:07:32.523 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:07:32.524 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:07:32.527 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 25.6065ms
2025-09-03 12:07:32.530 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:07:32.531 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:07:32.531 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:07:32.532 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:07:32.536 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.3013ms
2025-09-03 12:07:32.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=eoGubTmMFL4FTTPmD1HlPg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:07:32.532 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:07:32.542 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.5421ms
2025-09-03 12:07:32.545 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 89.9222ms
2025-09-03 12:07:32.545 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:07:32.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.566 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:07:32.572 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:07:32.599 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=gL9s6BNZ9SkKZd6ls597hQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:07:32.603 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:07:32.615 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:07:32.616 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:07:32.655 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:07:32.700 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:07:32.706 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 152.1877ms
2025-09-03 12:07:32.707 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:07:32.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 212.7536ms
2025-09-03 12:07:32.742 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:07:32.743 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:07:32.757 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 222.8826ms
2025-09-03 12:07:32.758 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:07:32.759 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 265.6622ms
2025-09-03 12:08:20.427 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 12:08:20.472 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 12:08:20.486 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 12:08:21.163 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 12:08:21.639 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 12:08:21.656 +05:30 [INF] ClickLogWorker started
2025-09-03 12:08:21.808 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 12:08:21.809 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 12:08:21.813 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 12:08:21.814 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 12:08:21.815 +05:30 [INF] Hosting environment: Development
2025-09-03 12:08:21.816 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 12:08:21.826 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[@__cutoff_0='2025-08-27T06:38:20.5709995Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 12:08:22.699 +05:30 [INF] ClickLogWorker stopped
2025-09-03 12:08:23.204 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:08:23.204 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:08:23.223 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 12:08:23.262 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.262 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 68.5945ms
2025-09-03 12:08:23.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 68.5946ms
2025-09-03 12:08:23.273 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:08:23.274 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:08:23.279 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.279 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.403 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.403 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.412 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.412 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.413 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 140.6428ms
2025-09-03 12:08:23.414 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 140.4686ms
2025-09-03 12:08:23.416 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kyrfrSxYJMVc_AC5eRLJSQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:08:23.426 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.430 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:08:23.434 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:08:23.435 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=kyrfrSxYJMVc_AC5eRLJSQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 19.3524ms
2025-09-03 12:08:23.439 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:08:23.441 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.0181ms
2025-09-03 12:08:23.446 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:08:23.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=jNsJNNbB9LrhJQjko7svWg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:08:23.449 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.452 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.453 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.453 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:08:23.454 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.455 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:08:23.456 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.8641ms
2025-09-03 12:08:23.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=jNsJNNbB9LrhJQjko7svWg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 7.783ms
2025-09-03 12:08:23.459 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:08:23.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=6PgEyUCIkllFJ-TkP7m87w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:08:23.465 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.467 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.467 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.01ms
2025-09-03 12:08:23.468 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:08:23.471 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:08:23.471 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:08:23.473 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=6PgEyUCIkllFJ-TkP7m87w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 14.2816ms
2025-09-03 12:08:23.475 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.478 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:08:23.479 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.481 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.482 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.4812ms
2025-09-03 12:08:23.483 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.7868ms
2025-09-03 12:08:23.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=5r40W9Q3rN8sWER_W8Xb4w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:08:23.488 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:08:23.490 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.492 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.492 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:08:23.493 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.494 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:08:23.495 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=5r40W9Q3rN8sWER_W8Xb4w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 10.3374ms
2025-09-03 12:08:23.497 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.2179ms
2025-09-03 12:08:23.500 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503496 - null null
2025-09-03 12:08:23.502 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:08:23.504 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.506 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503496 - 204 null null 6.7636ms
2025-09-03 12:08:23.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.3112ms
2025-09-03 12:08:23.510 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:08:23.513 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503496 - null null
2025-09-03 12:08:23.515 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.516 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.517 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.518 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.519 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:08:23.520 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.3661ms
2025-09-03 12:08:23.523 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503520 - null null
2025-09-03 12:08:23.526 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503520 - 204 null null 3.3865ms
2025-09-03 12:08:23.528 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:08:23.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503529 - null null
2025-09-03 12:08:23.533 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g - null null
2025-09-03 12:08:23.532 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503496 - 200 0 application/octet-stream 19.0719ms
2025-09-03 12:08:23.534 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.536 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.539 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503520 - null null
2025-09-03 12:08:23.540 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503529 - 204 null null 8.2959ms
2025-09-03 12:08:23.540 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g - 204 null null 7.6861ms
2025-09-03 12:08:23.543 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.545 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g - text/plain;charset=UTF-8 32
2025-09-03 12:08:23.548 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503529 - null null
2025-09-03 12:08:23.549 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.550 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.554 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:08:23.554 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.555 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503520 - 200 0 application/octet-stream 17.5418ms
2025-09-03 12:08:23.558 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg - null null
2025-09-03 12:08:23.562 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:08:23.565 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.567 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g - 200 0 text/plain 21.6882ms
2025-09-03 12:08:23.571 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg - 204 null null 12.519ms
2025-09-03 12:08:23.562 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503555 - null null
2025-09-03 12:08:23.572 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:08:23.578 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg - text/plain;charset=UTF-8 32
2025-09-03 12:08:23.580 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.582 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503529 - 200 3 application/octet-stream 34.3333ms
2025-09-03 12:08:23.583 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.584 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503555 - 204 null null 22.4544ms
2025-09-03 12:08:23.588 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503568 - null null
2025-09-03 12:08:23.589 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503555 - null null
2025-09-03 12:08:23.593 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.594 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:08:23.597 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503568 - 204 null null 9.3253ms
2025-09-03 12:08:23.596 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.598 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg - 200 0 text/plain 20.7051ms
2025-09-03 12:08:23.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503568 - null null
2025-09-03 12:08:23.602 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.608 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.609 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:08:23.610 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:23.611 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503555 - 200 3 application/octet-stream 19.9875ms
2025-09-03 12:08:23.617 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503611 - null null
2025-09-03 12:08:23.619 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503611 - 204 null null 3.7187ms
2025-09-03 12:08:23.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503611 - null null
2025-09-03 12:08:23.626 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:08:23.627 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:08:24.090 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 12:08:24.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 151.8083ms
2025-09-03 12:08:24.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 12:08:24.274 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.94ms
2025-09-03 12:08:24.333 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 12:08:24.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.2892ms
2025-09-03 12:08:24.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 12:08:24.753 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 221.2018ms
2025-09-03 12:09:05.200 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.200 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.202 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=cRHW3LvrcWUEJRUxshhK-g&_=1756881503568 - 499 null null 41600.8356ms
2025-09-03 12:09:05.202 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=KVgy-nduFhGhsOENMl36yg&_=1756881503611 - 499 null null 41578.7576ms
2025-09-03 12:09:05.337 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:05.341 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2745ms
2025-09-03 12:09:05.348 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:05.357 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:05.373 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:09:05.488 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 12:09:05.545 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:09:05.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:05.574 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 197.1405ms
2025-09-03 12:09:05.575 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:05.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 230.4028ms
2025-09-03 12:09:05.582 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:05.585 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:05.587 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:09:05.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:09:05.598 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:05.600 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8643ms
2025-09-03 12:09:05.601 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:05.603 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4678ms
2025-09-03 12:09:05.637 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:05.640 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:09:05.640 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:09:05.647 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.650 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:05.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 20.8223ms
2025-09-03 12:09:05.659 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 18.9054ms
2025-09-03 12:09:05.657 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.640 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:05.666 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:09:05.672 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:05.672 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 32.729ms
2025-09-03 12:09:05.675 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.676 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:05.679 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.689 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:09:05.690 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 50.1592ms
2025-09-03 12:09:05.691 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:09:05.681 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.693 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:09:05.699 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.701 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:05.704 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.707 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:09:05.709 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:09:05.713 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.713 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:09:05.714 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.718 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:05.718 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=1KJrUuGyNVfL-Rhs4H7bgg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:09:05.719 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.719 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:09:05.721 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 49.336ms
2025-09-03 12:09:05.723 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.6147ms
2025-09-03 12:09:05.725 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.733 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:09:05.736 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:09:05.726 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.736 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:05.734 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:05.742 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 40.5094ms
2025-09-03 12:09:05.743 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:05.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 98.5597ms
2025-09-03 12:09:05.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=1KJrUuGyNVfL-Rhs4H7bgg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 29.6353ms
2025-09-03 12:09:05.761 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=IhVHZt_NrXlPFLh_yfMR-g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:09:05.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:05.765 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.767 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.768 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:05.770 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:09:05.770 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.2582ms
2025-09-03 12:09:05.771 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:05.777 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:05.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=IhVHZt_NrXlPFLh_yfMR-g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 16.2028ms
2025-09-03 12:09:05.781 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.781 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:05.785 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.787 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.788 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.789 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.5661ms
2025-09-03 12:09:05.790 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 13.2033ms
2025-09-03 12:09:05.793 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:05.796 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=o4ZJ3yRfvOtGatb_VOukww&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:09:05.798 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.801 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.802 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.802 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:05.804 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.804 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:05.806 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 13.187ms
2025-09-03 12:09:05.809 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=o4ZJ3yRfvOtGatb_VOukww&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 12.5814ms
2025-09-03 12:09:05.810 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:09:05.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=U26eqM94qPpZ1I-QEGrdFA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - null null
2025-09-03 12:09:05.817 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:05.823 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.825 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.826 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:05.827 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 9.383ms
2025-09-03 12:09:05.828 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:05.831 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:05.832 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=U26eqM94qPpZ1I-QEGrdFA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg0Nzc1LCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.LBCc5Ri3H0oGXHFZi4SqzlOjDL4FWEGihG48GwypMxA - 401 0 null 18.5044ms
2025-09-03 12:09:05.835 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.838 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:05.839 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.841 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.843 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.844 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.7448ms
2025-09-03 12:09:05.845 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 14.1361ms
2025-09-03 12:09:05.849 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:05.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545844 - null null
2025-09-03 12:09:05.853 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:05.854 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.857 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.859 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545844 - 204 null null 8.3089ms
2025-09-03 12:09:05.862 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:05.862 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 141.8329ms
2025-09-03 12:09:05.865 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545844 - null null
2025-09-03 12:09:05.866 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 17.349ms
2025-09-03 12:09:05.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:09:05.870 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.873 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545863 - null null
2025-09-03 12:09:05.874 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 205.0508ms
2025-09-03 12:09:05.875 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.877 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.882 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.883 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545863 - 204 null null 9.8666ms
2025-09-03 12:09:05.884 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545844 - 200 0 application/octet-stream 18.4717ms
2025-09-03 12:09:05.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - null null
2025-09-03 12:09:05.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545863 - null null
2025-09-03 12:09:05.890 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545884 - null null
2025-09-03 12:09:05.893 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.895 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.898 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.898 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - 204 null null 12.2134ms
2025-09-03 12:09:05.900 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.900 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545884 - 204 null null 10.2888ms
2025-09-03 12:09:05.904 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - text/plain;charset=UTF-8 32
2025-09-03 12:09:05.905 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - null null
2025-09-03 12:09:05.909 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545884 - null null
2025-09-03 12:09:05.912 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545863 - 200 0 application/octet-stream 26.0725ms
2025-09-03 12:09:05.916 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.919 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.920 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.924 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545906 - null null
2025-09-03 12:09:05.924 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:09:05.925 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - 204 null null 15.8329ms
2025-09-03 12:09:05.929 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.926 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.930 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:09:05.926 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.934 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - text/plain;charset=UTF-8 32
2025-09-03 12:09:05.935 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545906 - 204 null null 10.8235ms
2025-09-03 12:09:05.936 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - 200 0 text/plain 32.1041ms
2025-09-03 12:09:05.938 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.940 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545884 - 200 3 application/octet-stream 39.1784ms
2025-09-03 12:09:05.949 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.952 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545939 - null null
2025-09-03 12:09:05.953 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545906 - null null
2025-09-03 12:09:05.956 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.957 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - 200 0 text/plain 23.4334ms
2025-09-03 12:09:05.958 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 229.4266ms
2025-09-03 12:09:05.960 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.960 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545939 - 204 null null 8.2734ms
2025-09-03 12:09:05.965 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:09:05.966 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545939 - null null
2025-09-03 12:09:05.969 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 280.3327ms
2025-09-03 12:09:05.970 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:05.973 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545906 - 200 3 application/octet-stream 22.5013ms
2025-09-03 12:09:05.978 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:05.981 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545975 - null null
2025-09-03 12:09:05.985 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.986 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545975 - 204 null null 5.2291ms
2025-09-03 12:09:05.989 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545975 - null null
2025-09-03 12:09:05.991 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:05.992 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:18.370 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:18.370 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:18.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ&_=1756881545939 - 499 null null 12403.4489ms
2025-09-03 12:09:18.373 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A&_=1756881545975 - 499 null null 12383.8253ms
2025-09-03 12:09:18.379 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - null null
2025-09-03 12:09:18.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - null null
2025-09-03 12:09:18.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - null null
2025-09-03 12:09:18.380 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - null null
2025-09-03 12:09:18.382 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.384 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.386 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.388 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - 204 null null 10.0402ms
2025-09-03 12:09:18.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - 204 null null 7.4111ms
2025-09-03 12:09:18.390 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - 204 null null 8.6717ms
2025-09-03 12:09:18.391 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - 204 null null 10.4889ms
2025-09-03 12:09:18.404 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - text/plain;charset=UTF-8 11
2025-09-03 12:09:18.405 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - text/plain;charset=UTF-8 11
2025-09-03 12:09:18.405 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - null null
2025-09-03 12:09:18.405 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - null null
2025-09-03 12:09:18.408 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.410 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.412 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.414 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:18.415 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:18.415 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:18.416 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:18.417 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:18.418 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:18.419 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:18.426 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - 200 0 text/plain 21.3873ms
2025-09-03 12:09:18.427 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - 200 0 text/plain 21.9549ms
2025-09-03 12:09:18.430 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:18.430 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:18.434 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=CF-bqPK2DVDK3wHArOkjGQ - 202 0 text/plain 28.9882ms
2025-09-03 12:09:18.435 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=opNHZ1lKxKnyNlLSlwER8A - 202 0 text/plain 29.8174ms
2025-09-03 12:09:22.849 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 12:09:22.851 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:22.852 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.7042ms
2025-09-03 12:09:22.855 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 12:09:22.858 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:22.859 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 12:09:22.863 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 12:09:22.882 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 12:09:22.903 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 12:09:22.944 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 12:09:23.028 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 12:09:23.037 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 12:09:23.046 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 12:09:23.048 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 12:09:23.050 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:23.052 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 187.5522ms
2025-09-03 12:09:23.053 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 12:09:23.054 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 198.8398ms
2025-09-03 12:09:23.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:23.059 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:23.059 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9139ms
2025-09-03 12:09:23.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:23.064 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:23.065 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:23.066 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:09:23.070 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:09:23.073 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:23.075 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4992ms
2025-09-03 12:09:23.076 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:23.077 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2232ms
2025-09-03 12:09:23.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:23.095 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:23.097 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:23.098 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:09:23.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:09:23.108 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:23.110 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.3745ms
2025-09-03 12:09:23.112 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:23.113 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9652ms
2025-09-03 12:09:23.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:09:23.176 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:23.177 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:23.179 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:09:23.187 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:09:23.191 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:23.194 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.0273ms
2025-09-03 12:09:23.196 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:09:23.198 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.1702ms
2025-09-03 12:09:26.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:26.964 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.6907ms
2025-09-03 12:09:26.973 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:09:26.973 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:26.975 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.977 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.977 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:09:26.978 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 5.471ms
2025-09-03 12:09:26.979 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.0529ms
2025-09-03 12:09:26.979 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:26.981 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:09:26.986 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:26.988 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.989 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 11.8503ms
2025-09-03 12:09:26.991 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.993 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:26.995 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:26.998 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:09:26.999 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:09:27.001 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.003 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.000 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.004 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=6dfX0abE_0pNQLovKr4jGQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:09:27.004 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:09:27.005 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 26.1414ms
2025-09-03 12:09:27.006 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:09:27.007 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.009 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.012 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:09:27.015 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:09:27.018 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:27.023 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:09:27.024 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:27.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:09:27.017 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 30.5079ms
2025-09-03 12:09:27.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=6dfX0abE_0pNQLovKr4jGQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 401 0 null 25.3791ms
2025-09-03 12:09:27.030 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:09:27.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:09:27.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:27.039 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:09:27.043 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.045 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 34.4347ms
2025-09-03 12:09:27.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hOj2X1gh8HUblFk6aj3kVQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:09:27.046 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.4997ms
2025-09-03 12:09:27.046 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:09:27.047 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:09:27.050 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.052 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:27.054 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 32.4561ms
2025-09-03 12:09:27.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 71.0057ms
2025-09-03 12:09:27.055 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:27.057 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:09:27.062 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:27.063 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.064 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 65.5234ms
2025-09-03 12:09:27.064 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hOj2X1gh8HUblFk6aj3kVQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 401 0 null 19.1045ms
2025-09-03 12:09:27.066 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=HFEcd2bgcYBOpl-0tUA-hA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:09:27.072 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 19.8703ms
2025-09-03 12:09:27.075 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.078 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:27.079 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:27.081 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.082 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:27.083 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.1323ms
2025-09-03 12:09:27.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=HFEcd2bgcYBOpl-0tUA-hA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 401 0 null 13.4257ms
2025-09-03 12:09:27.088 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:27.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:27.093 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.096 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.097 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.3267ms
2025-09-03 12:09:27.098 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.101 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:27.102 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 14.5818ms
2025-09-03 12:09:27.105 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=irDyrrZVsPNMWo_QfJb6_Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:09:27.108 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.110 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.112 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.112 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 12:09:27.113 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.9418ms
2025-09-03 12:09:27.114 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 12:09:27.117 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567113 - null null
2025-09-03 12:09:27.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=irDyrrZVsPNMWo_QfJb6_Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 401 0 null 10.8347ms
2025-09-03 12:09:27.121 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.124 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:09:27.124 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567113 - 204 null null 7.2425ms
2025-09-03 12:09:27.127 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.130 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567113 - null null
2025-09-03 12:09:27.131 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.9926ms
2025-09-03 12:09:27.133 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.136 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:09:27.137 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.139 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.140 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:27.141 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.142 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567113 - 200 0 application/octet-stream 12.2321ms
2025-09-03 12:09:27.143 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:09:27.143 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A - null null
2025-09-03 12:09:27.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567142 - null null
2025-09-03 12:09:27.148 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.5753ms
2025-09-03 12:09:27.150 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.152 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.155 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567145 - null null
2025-09-03 12:09:27.156 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A - 204 null null 12.5278ms
2025-09-03 12:09:27.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567142 - 204 null null 9.8883ms
2025-09-03 12:09:27.159 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.162 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A - text/plain;charset=UTF-8 32
2025-09-03 12:09:27.165 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567142 - null null
2025-09-03 12:09:27.166 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567145 - 204 null null 10.9328ms
2025-09-03 12:09:27.168 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.171 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567145 - null null
2025-09-03 12:09:27.174 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.175 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.179 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:27.177 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.181 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:27.182 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A - 200 0 text/plain 19.1576ms
2025-09-03 12:09:27.183 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567142 - 200 3 application/octet-stream 18.2819ms
2025-09-03 12:09:27.189 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:27.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567186 - null null
2025-09-03 12:09:27.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567145 - 200 0 application/octet-stream 21.7521ms
2025-09-03 12:09:27.198 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.203 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567200 - null null
2025-09-03 12:09:27.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567186 - 204 null null 12.0408ms
2025-09-03 12:09:27.204 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q - null null
2025-09-03 12:09:27.207 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.215 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Q0hMoVwntNRyWxeKUkvh9A&_=1756881567186 - null null
2025-09-03 12:09:27.219 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567200 - 204 null null 16.6691ms
2025-09-03 12:09:27.224 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.225 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q - 204 null null 21.1183ms
2025-09-03 12:09:27.229 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567200 - null null
2025-09-03 12:09:27.231 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.234 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q - text/plain;charset=UTF-8 32
2025-09-03 12:09:27.237 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.242 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.243 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.244 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:27.248 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:27.248 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:09:27.250 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q - 200 0 text/plain 15.6733ms
2025-09-03 12:09:27.251 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567200 - 200 3 application/octet-stream 21.6697ms
2025-09-03 12:09:27.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567253 - null null
2025-09-03 12:09:27.261 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.263 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567253 - 204 null null 4.5002ms
2025-09-03 12:09:27.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=X-Wo6SCoOV95mpsSaNFp0Q&_=1756881567253 - null null
2025-09-03 12:09:27.269 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:09:27.270 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:09:59.460 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 12:09:59.495 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 12:09:59.506 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 12:10:00.348 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 12:10:01.015 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 12:10:01.039 +05:30 [INF] ClickLogWorker started
2025-09-03 12:10:01.246 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 12:10:01.247 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 12:10:01.249 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 12:10:01.250 +05:30 [INF] Hosting environment: Development
2025-09-03 12:10:01.251 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 12:10:01.273 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 12:10:01.296 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__cutoff_0='2025-08-27T06:39:59.5904313Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 12:10:01.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:10:01.504 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:10:01.516 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 12:10:01.556 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:01.556 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:01.562 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 57.1543ms
2025-09-03 12:10:01.562 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 76.4507ms
2025-09-03 12:10:01.568 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:10:01.569 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:10:01.573 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:01.573 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:01.711 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:01.711 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:01.716 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:01.716 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:01.718 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 150.0052ms
2025-09-03 12:10:01.718 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 149.395ms
2025-09-03 12:10:01.721 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=RwfvNO3-u0HKSWs-yEou3w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:10:01.731 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:01.735 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:10:01.760 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ccSLLMBYQcDGDMOnYKfKmA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:10:01.766 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:01.768 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:10:02.092 +05:30 [INF] ClickLogWorker stopped
2025-09-03 12:10:03.761 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 12:10:03.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 148.0966ms
2025-09-03 12:10:03.937 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 12:10:03.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.4448ms
2025-09-03 12:10:04.006 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 12:10:04.045 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.7033ms
2025-09-03 12:10:04.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 12:10:04.561 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.0551ms
2025-09-03 12:10:12.032 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:10:12.032 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:10:12.034 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=RwfvNO3-u0HKSWs-yEou3w&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 10313.3947ms
2025-09-03 12:10:12.034 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ccSLLMBYQcDGDMOnYKfKmA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 10274.3822ms
2025-09-03 12:10:12.247 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:10:12.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.778ms
2025-09-03 12:10:12.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:10:12.268 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.270 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:10:12.295 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:10:12.485 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 12:10:12.578 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:10:12.589 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:10:12.611 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 297.98ms
2025-09-03 12:10:12.613 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:10:12.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 361.7563ms
2025-09-03 12:10:12.622 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:10:12.626 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.627 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:10:12.630 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:10:12.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:10:12.646 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:10:12.647 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.1106ms
2025-09-03 12:10:12.649 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:10:12.651 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.1633ms
2025-09-03 12:10:12.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:10:12.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:10:12.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:10:12.695 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:10:12.698 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.701 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:10:12.696 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.704 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.705 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.2104ms
2025-09-03 12:10:12.706 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 14.3772ms
2025-09-03 12:10:12.716 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.719 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 29.294ms
2025-09-03 12:10:12.723 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 28.3347ms
2025-09-03 12:10:12.727 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:10:12.731 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:10:12.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:10:12.736 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:10:12.741 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:10:12.746 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.747 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.748 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:10:12.752 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.757 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.761 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:12.757 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:12.757 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:10:12.767 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:12.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:10:12.767 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:10:12.764 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:10:12.771 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 39.8654ms
2025-09-03 12:10:12.775 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:10:12.776 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:10:12.776 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:10:12.777 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 40.3243ms
2025-09-03 12:10:12.778 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=c3VuuX6WmcWgDhmssIz6Zw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:10:12.786 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 27.3202ms
2025-09-03 12:10:12.787 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:10:12.794 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.795 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:10:12.798 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:10:12.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 104.4719ms
2025-09-03 12:10:12.801 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:10:12.822 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=q7aJhZDB9r8WMi8-oKt2fQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:10:12.828 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:10:12.830 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:10:12.854 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:10:12.883 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:10:13.383 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:10:13.389 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 604.3954ms
2025-09-03 12:10:13.391 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:10:13.392 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 651.2917ms
2025-09-03 12:10:13.429 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:10:13.430 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:10:13.445 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 662.4632ms
2025-09-03 12:10:13.446 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:10:13.448 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 720.3858ms
2025-09-03 12:22:24.692 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:22:24.694 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=c3VuuX6WmcWgDhmssIz6Zw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 731916.0993ms
2025-09-03 12:22:24.698 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:22:24.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=q7aJhZDB9r8WMi8-oKt2fQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 731878.2768ms
2025-09-03 12:22:25.591 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 12:22:25.593 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:22:25.594 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.7289ms
2025-09-03 12:22:25.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 12:22:25.601 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:22:25.603 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 12:22:25.608 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 12:22:25.683 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 12:22:25.702 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-03 12:22:25.710 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 100.232ms
2025-09-03 12:22:25.711 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 12:22:25.712 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 114.0596ms
2025-09-03 12:22:29.658 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-03 12:22:29.661 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:22:29.662 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.5423ms
2025-09-03 12:22:29.665 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 629
2025-09-03 12:22:29.667 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:22:29.669 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 12:22:29.673 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 12:22:29.691 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-09-03 12:22:29.710 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__providerNorm_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND lower(w."Provider") = @__providerNorm_1
LIMIT 1
2025-09-03 12:22:29.773 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPbeKFbKstMLhpBZBLrWwvnL1qlE0OoGIcaSiZBJKkC5js4LJ2FnHV44TfH0dKzggv2ZAcuj1I3HUGYnPnwQhG4ZAZBSjO2nKkJUnyXCYkP1rguKEVMvGLEDJbtrxvG7Tn8JyJgLEkcXeq9B2yHG3DHdopSeJVVHqruVZAGXSE5P1Oc3t3xZCqc2VMnv1ggloPRk5XMuRH8Cb7WFeuDvgaVRykLZCgAZBgOyIM0bOS67kadvFRNSfeNQZDZD' (Nullable = false), @p1='2025-09-03T06:52:29.7124098Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-03 12:22:29.782 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:22:29.784 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 109.1405ms
2025-09-03 12:22:29.785 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 12:22:29.786 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 120.9016ms
2025-09-03 12:22:30.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-03 12:22:30.613 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:22:30.614 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.5432ms
2025-09-03 12:22:30.618 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 459
2025-09-03 12:22:30.620 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:22:30.622 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 12:22:30.625 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 12:22:30.633 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 12:22:30.636 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 12:22:32.334 +05:30 [INF] Received HTTP response headers after 1694.7908ms - 200
2025-09-03 12:22:32.336 +05:30 [INF] End processing HTTP request after 1703.6862ms - 200
2025-09-03 12:22:32.340 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:22:32.342 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1714.778ms
2025-09-03 12:22:32.343 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 12:22:32.343 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1725.5905ms
2025-09-03 12:42:07.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:42:07.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:42:07.065 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:42:07.065 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:42:07.070 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.073 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 27.1555ms
2025-09-03 12:42:07.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 26.4015ms
2025-09-03 12:42:07.076 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.079 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.095 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:42:07.098 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:42:07.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 33.7647ms
2025-09-03 12:42:07.100 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 34.6242ms
2025-09-03 12:42:07.102 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.105 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.108 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:42:07.111 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:42:07.112 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:42:07.113 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:42:07.115 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.117 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.118 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:42:07.120 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:42:07.122 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 27.5021ms
2025-09-03 12:42:07.121 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:42:07.128 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:42:07.121 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:42:07.123 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=lMDVtlpAQZtGOPlSD-V7nA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:42:07.132 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:42:07.134 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:42:07.142 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.145 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 33.5226ms
2025-09-03 12:42:07.147 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:42:07.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=PMa9wauvdn0zR05ZoG2nig&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:42:07.177 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:07.178 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:42:07.243 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:42:07.243 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:42:07.249 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:42:07.250 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:42:07.252 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:42:07.254 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 126.2233ms
2025-09-03 12:42:07.255 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:42:07.256 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:42:07.257 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 113.989ms
2025-09-03 12:42:07.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 160.5357ms
2025-09-03 12:42:07.260 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:42:07.264 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 155.96ms
2025-09-03 12:42:09.005 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:42:09.005 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:42:09.005 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:42:09.008 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:09.010 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:09.012 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:09.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.2128ms
2025-09-03 12:42:09.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.6714ms
2025-09-03 12:42:09.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.2981ms
2025-09-03 12:42:09.034 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:42:09.034 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:42:09.036 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:09.038 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:09.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:42:09.039 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:09.043 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:42:09.043 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:42:09.048 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:42:09.064 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:42:09.065 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:42:09.068 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:42:09.073 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 27.885ms
2025-09-03 12:42:09.075 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:42:09.075 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:09.077 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:09.078 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 44.3397ms
2025-09-03 12:42:09.079 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:09.083 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:42:09.086 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:42:09.086 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:42:09.091 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:42:09.094 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 49.6778ms
2025-09-03 12:42:09.094 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:42:09.095 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:42:09.097 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.3988ms
2025-09-03 12:42:09.098 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 63.7179ms
2025-09-03 12:42:09.099 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:09.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 29.7189ms
2025-09-03 12:42:09.821 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:42:09.835 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:12:09.8155950Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:42:09.844 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:42:09.852 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:42:11.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:42:11.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:42:11.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:42:11.149 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:11.151 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:11.153 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:11.153 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 6.1862ms
2025-09-03 12:42:11.154 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 6.7198ms
2025-09-03 12:42:11.155 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.4985ms
2025-09-03 12:42:11.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:42:11.163 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:42:11.165 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:11.167 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:11.168 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:42:11.168 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:11.169 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:42:11.169 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:42:11.173 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:42:11.175 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:42:11.178 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:42:11.181 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:42:11.183 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.082ms
2025-09-03 12:42:11.184 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:11.184 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:42:11.185 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 21.5538ms
2025-09-03 12:42:11.187 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:42:11.190 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:11.191 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:42:11.193 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:42:11.197 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:42:11.201 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:42:11.203 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.6285ms
2025-09-03 12:42:11.204 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:42:11.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 21.8709ms
2025-09-03 12:42:11.225 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:42:11.226 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 55.5413ms
2025-09-03 12:42:11.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:42:11.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 68.6099ms
2025-09-03 12:42:11.952 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='491ee04c-27c4-49e4-9bb8-ef8892951090', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:42:11.974 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='be0b9193-d7aa-42a0-920a-2ee1a60c3470', @p0='2025-09-03T07:12:11.9510586Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:42:11.977 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:42:11.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:44:06.189 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:44:06.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:44:06.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:44:06.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:44:06.193 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=PMa9wauvdn0zR05ZoG2nig&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 119019.2827ms
2025-09-03 12:44:06.195 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.197 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.199 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 11.6565ms
2025-09-03 12:44:06.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 12.3557ms
2025-09-03 12:44:06.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 12.5007ms
2025-09-03 12:44:06.206 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:44:06.209 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:44:06.211 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:44:06.213 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.215 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.217 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.218 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:44:06.218 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:44:06.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:44:06.220 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:44:06.220 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:44:06.222 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 15.7126ms
2025-09-03 12:44:06.221 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:44:06.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m4Y6f3GnYQ59Fkg4avgKBg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:44:06.228 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:44:06.235 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:44:06.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:44:06.234 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:06.240 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:44:06.241 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:44:06.242 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:44:06.242 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.9849ms
2025-09-03 12:44:06.243 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 16.9239ms
2025-09-03 12:44:06.247 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:44:06.248 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:44:06.249 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 37.906ms
2025-09-03 12:44:06.250 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 40.9927ms
2025-09-03 12:44:07.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='491ee04c-27c4-49e4-9bb8-ef8892951090', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:44:07.198 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p1='be0b9193-d7aa-42a0-920a-2ee1a60c3470', @p0='2025-09-03T07:14:07.1790509Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:44:07.201 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:44:07.204 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:44:49.204 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:44:49.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:44:49.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=m4Y6f3GnYQ59Fkg4avgKBg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 42986.6811ms
2025-09-03 12:44:49.207 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:44:49.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:44:49.225 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=lMDVtlpAQZtGOPlSD-V7nA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 162102.2059ms
2025-09-03 12:44:49.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:44:49.229 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:44:49.216 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.237 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.238 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 30.6763ms
2025-09-03 12:44:49.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.241 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 31.9929ms
2025-09-03 12:44:49.242 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 35.2046ms
2025-09-03 12:44:49.246 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:44:49.247 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 40.1079ms
2025-09-03 12:44:49.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:44:49.254 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:44:49.257 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:44:49.263 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.267 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.268 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:44:49.271 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.272 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:44:49.273 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:44:49.275 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:44:49.275 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:44:49.277 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:44:49.280 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 33.4062ms
2025-09-03 12:44:49.278 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:44:49.281 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:44:49.284 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=8YIr-LwR63Z35PE6LZh2zw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:44:49.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:44:49.291 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 36.1516ms
2025-09-03 12:44:49.293 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:44:49.296 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.300 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:44:49.306 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:44:49.307 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:44:49.310 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:44:49.311 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:44:49.315 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 32.1632ms
2025-09-03 12:44:49.317 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:44:49.318 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:44:49.320 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 27.3465ms
2025-09-03 12:44:49.321 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 70.2301ms
2025-09-03 12:44:49.322 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:44:49.326 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 65.7733ms
2025-09-03 12:44:49.328 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=QrD-sF6GX1NqKOJVsmCIJw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:44:49.333 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:44:49.334 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:45:48.211 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:45:48.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:45:48.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:45:48.216 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=8YIr-LwR63Z35PE6LZh2zw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 58932.4425ms
2025-09-03 12:45:48.211 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:45:48.224 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.226 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:45:48.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:45:48.234 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=QrD-sF6GX1NqKOJVsmCIJw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 58906.5508ms
2025-09-03 12:45:48.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 21.0981ms
2025-09-03 12:45:48.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 21.7467ms
2025-09-03 12:45:48.238 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.245 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:45:48.248 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:45:48.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 33.646ms
2025-09-03 12:45:48.250 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 30.2325ms
2025-09-03 12:45:48.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.254 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:45:48.259 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:45:48.261 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:45:48.261 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:45:48.263 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.266 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.266 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:45:48.267 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:45:48.268 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:45:48.269 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:45:48.270 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=1s7fawNQotpqWgaGUMW7aQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:45:48.270 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 25.19ms
2025-09-03 12:45:48.271 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 22.9052ms
2025-09-03 12:45:48.272 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:45:48.273 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:45:48.285 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:45:48.286 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:45:48.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:45:48.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:45:48.275 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.295 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:45:48.296 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:45:48.296 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:45:48.298 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 15.5807ms
2025-09-03 12:45:48.299 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:45:48.304 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:45:48.305 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 20.0975ms
2025-09-03 12:45:48.306 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 49.11ms
2025-09-03 12:45:48.307 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:45:48.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 51.5237ms
2025-09-03 12:45:48.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Zd9dE8_3zDqGR4JtOSAHzw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:45:48.317 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:45:48.319 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:46:33.189 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:46:33.189 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:46:33.189 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:46:33.189 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:46:33.189 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:46:33.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:46:33.197 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.198 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Zd9dE8_3zDqGR4JtOSAHzw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 44885.7286ms
2025-09-03 12:46:33.208 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 19.5487ms
2025-09-03 12:46:33.201 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.204 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=1s7fawNQotpqWgaGUMW7aQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 44935.0164ms
2025-09-03 12:46:33.207 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.219 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:46:33.219 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 30.7881ms
2025-09-03 12:46:33.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 30.9328ms
2025-09-03 12:46:33.224 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 33.501ms
2025-09-03 12:46:33.227 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.230 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:46:33.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:46:33.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:46:33.236 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:33.238 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.242 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.243 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:33.244 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:33.247 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=VPvwXPEzmG_wPMMJF5aJiQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:46:33.244 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:46:33.245 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:46:33.246 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 27.4849ms
2025-09-03 12:46:33.247 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:33.250 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.251 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:33.252 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:33.255 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 25.4754ms
2025-09-03 12:46:33.256 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:46:33.258 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:46:33.262 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:46:33.272 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:46:33.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:33.277 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:46:33.279 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:46:33.279 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:33.281 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 21.0785ms
2025-09-03 12:46:33.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Rwm_2gJeykAri9DpR-THA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:46:33.282 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 24.3246ms
2025-09-03 12:46:33.284 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:46:33.286 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:33.287 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:46:33.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 53.3414ms
2025-09-03 12:46:33.289 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:46:33.290 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 57.7616ms
2025-09-03 12:46:36.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:36.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:36.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:36.913 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:36.915 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:36.918 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:36.919 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 7.9629ms
2025-09-03 12:46:36.919 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.3055ms
2025-09-03 12:46:36.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.668ms
2025-09-03 12:46:36.926 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:36.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:36.931 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:36.933 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:36.934 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:36.935 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:36.936 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:36.937 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:36.941 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:36.942 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 12:46:36.946 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:36.948 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:36.949 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.9091ms
2025-09-03 12:46:36.953 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:36.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:36.955 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.7643ms
2025-09-03 12:46:36.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:36.956 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 30.0128ms
2025-09-03 12:46:36.957 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:36.960 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:36.964 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 35.3318ms
2025-09-03 12:46:36.965 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:36.969 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:36.971 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 12:46:36.975 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:36.979 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:36.981 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.1832ms
2025-09-03 12:46:36.983 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:36.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 28.1609ms
2025-09-03 12:46:37.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='1b52f26e-9fad-4233-a6bb-57603945f8d6', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:37.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='f824024c-3e88-4f0d-b01e-1856899a4a57', @p0='2025-09-03T07:16:37.7093949Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:46:37.718 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:37.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:46:38.019 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:46:38.020 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:46:38.020 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:46:38.021 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:38.023 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:38.025 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:38.026 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 6.9455ms
2025-09-03 12:46:38.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.0569ms
2025-09-03 12:46:38.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.4524ms
2025-09-03 12:46:38.032 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:46:38.034 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:46:38.036 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:38.038 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:38.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:38.039 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:38.040 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:38.041 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:38.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:38.046 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:46:38.048 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:38.050 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.0956ms
2025-09-03 12:46:38.050 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:38.052 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:38.054 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:38.054 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.2008ms
2025-09-03 12:46:38.055 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.6683ms
2025-09-03 12:46:38.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:46:38.059 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:38.062 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:38.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 28.313ms
2025-09-03 12:46:38.064 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:38.068 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:38.070 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:46:38.076 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:38.079 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:38.081 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.2874ms
2025-09-03 12:46:38.082 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:38.083 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 25.2378ms
2025-09-03 12:46:38.827 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:38.850 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:16:38.8254547Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:46:38.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:38.858 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:46:39.967 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:46:39.967 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:46:39.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_Rwm_2gJeykAri9DpR-THA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 6695.3487ms
2025-09-03 12:46:39.979 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=VPvwXPEzmG_wPMMJF5aJiQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 6731.3975ms
2025-09-03 12:46:40.623 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:46:40.626 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.627 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1605ms
2025-09-03 12:46:40.630 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:46:40.633 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.634 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:46:40.635 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:46:40.642 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:46:40.644 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:46:40.646 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.1468ms
2025-09-03 12:46:40.648 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:46:40.649 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.8197ms
2025-09-03 12:46:40.697 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:46:40.700 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.702 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:46:40.704 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:46:40.710 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:46:40.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:46:40.717 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5296ms
2025-09-03 12:46:40.720 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:46:40.722 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.6716ms
2025-09-03 12:46:40.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:46:40.771 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:46:40.771 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:46:40.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:46:40.773 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:46:40.774 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.777 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.780 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.782 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.785 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.786 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 15.4688ms
2025-09-03 12:46:40.786 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 15.7711ms
2025-09-03 12:46:40.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 16.287ms
2025-09-03 12:46:40.788 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 17.6421ms
2025-09-03 12:46:40.789 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:46:40.793 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:46:40.796 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:46:40.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:46:40.803 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:46:40.809 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:46:40.812 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.814 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.826 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:46:40.829 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:40.817 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.826 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:40.820 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.831 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:46:40.832 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:40.833 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:46:40.834 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:46:40.835 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:46:40.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=qYaoVz19vstC_TyfUdqT7A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:46:40.837 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.1394ms
2025-09-03 12:46:40.838 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.3847ms
2025-09-03 12:46:40.839 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:40.840 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 47.0335ms
2025-09-03 12:46:40.841 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:40.844 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.846 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:46:40.856 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:46:40.850 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:46:40.860 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 87.0184ms
2025-09-03 12:46:40.867 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:46:40.858 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:46:40.873 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:46:40.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:40.878 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:40.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=QcAnCKJYuvn7gg-inwtH-g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:46:40.883 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 32.8416ms
2025-09-03 12:46:40.883 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:46:40.886 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:40.888 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:46:40.890 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 34.2569ms
2025-09-03 12:46:40.891 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:46:40.892 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 92.584ms
2025-09-03 12:46:40.893 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:46:40.902 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 98.3021ms
2025-09-03 12:46:42.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:42.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:42.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:42.075 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:42.077 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:42.079 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:42.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 6.5534ms
2025-09-03 12:46:42.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 6.9382ms
2025-09-03 12:46:42.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 7.4216ms
2025-09-03 12:46:42.085 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:42.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:42.089 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:42.091 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:42.092 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:42.092 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:42.093 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:42.094 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:42.095 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 12:46:42.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:42.101 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:42.103 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:42.105 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:42.106 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.6344ms
2025-09-03 12:46:42.107 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.7352ms
2025-09-03 12:46:42.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:46:42.108 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:42.109 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:42.111 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:42.112 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 24.2447ms
2025-09-03 12:46:42.113 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 27.6438ms
2025-09-03 12:46:42.114 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:42.120 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:42.122 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 12:46:42.127 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:42.131 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:42.133 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.6264ms
2025-09-03 12:46:42.135 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:42.136 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 29.0794ms
2025-09-03 12:46:42.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='1b52f26e-9fad-4233-a6bb-57603945f8d6', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:42.883 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='f824024c-3e88-4f0d-b01e-1856899a4a57', @p0='2025-09-03T07:16:42.8604561Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:46:42.886 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:42.890 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:46:43.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:46:43.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:46:43.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:46:43.467 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:43.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:43.470 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:43.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 6.5747ms
2025-09-03 12:46:43.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 7.1816ms
2025-09-03 12:46:43.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 7.7037ms
2025-09-03 12:46:43.477 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:46:43.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:46:43.481 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:43.483 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:43.484 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:43.484 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:43.485 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:43.486 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:43.490 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:43.492 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 12:46:43.493 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:43.495 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.4311ms
2025-09-03 12:46:43.495 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:43.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:43.499 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:43.500 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 22.5106ms
2025-09-03 12:46:43.501 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8204ms
2025-09-03 12:46:43.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:46:43.504 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:43.506 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:43.507 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 27.8216ms
2025-09-03 12:46:43.508 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:43.512 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:43.515 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 12:46:43.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:43.523 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:43.524 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.0891ms
2025-09-03 12:46:43.526 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:43.527 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 23.6312ms
2025-09-03 12:46:44.271 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='63faf7a5-4506-431d-884c-cb0a363fa7ac', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:44.292 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='6e2bc4e4-cc53-4f9d-8d76-bd2b8a08f3aa', @p0='2025-09-03T07:16:44.2704991Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:46:44.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:44.299 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:46:44.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:44.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:44.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:44.518 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:44.520 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:44.522 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:44.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 6.6592ms
2025-09-03 12:46:44.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.04ms
2025-09-03 12:46:44.524 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.5466ms
2025-09-03 12:46:44.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:44.530 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:44.532 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:44.534 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:44.535 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:44.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:44.536 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:44.537 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:44.539 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 12:46:44.542 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:44.544 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:44.548 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:44.549 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:44.550 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.4204ms
2025-09-03 12:46:44.551 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.7132ms
2025-09-03 12:46:44.552 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:44.552 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:44.553 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:44.555 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:44.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 25.9305ms
2025-09-03 12:46:44.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 28.8878ms
2025-09-03 12:46:44.558 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:44.563 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:44.565 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 12:46:44.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:44.571 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:44.572 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.6687ms
2025-09-03 12:46:44.573 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:44.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 22.6547ms
2025-09-03 12:46:45.321 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:45.342 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T07:16:45.3200005Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:46:45.345 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:45.350 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:46:45.388 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 12:46:45.388 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 12:46:45.388 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 12:46:45.390 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:45.392 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:45.394 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:45.395 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 6.6516ms
2025-09-03 12:46:45.395 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 7.2013ms
2025-09-03 12:46:45.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 7.7584ms
2025-09-03 12:46:45.401 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 12:46:45.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 12:46:45.406 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:45.407 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:45.408 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:45.409 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:45.409 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:45.410 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:45.414 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:45.416 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 12:46:45.418 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:45.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:45.421 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.1577ms
2025-09-03 12:46:45.424 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:45.424 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:45.426 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.2798ms
2025-09-03 12:46:45.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 12:46:45.427 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 25.6384ms
2025-09-03 12:46:45.428 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:45.430 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:45.434 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 30.5838ms
2025-09-03 12:46:45.435 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:45.439 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:45.442 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 12:46:45.445 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:45.448 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:45.449 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.4753ms
2025-09-03 12:46:45.451 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:45.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 25.4112ms
2025-09-03 12:46:46.199 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__contactId_0='867c9c9b-f85e-4572-9bbd-4447b44597b7', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:46.236 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d0eb7b47-42bd-4bb4-abb0-23d69b7b2f4d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='867c9c9b-f85e-4572-9bbd-4447b44597b7', @p3='2025-09-03T07:16:46.1950512Z' (DbType = DateTime), @p4='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ContactReads" ("Id", "BusinessId", "ContactId", "LastReadAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-03 12:46:46.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:46.249 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:46:46.494 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:46.494 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:46.497 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:46.499 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:46.500 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:46.501 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:46.502 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:46.503 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:46:46.505 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 12:46:46.509 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:46:46.514 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:46.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:46:46.519 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:46.521 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 14.1087ms
2025-09-03 12:46:46.522 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 17.657ms
2025-09-03 12:46:46.523 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 12:46:46.524 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:46:46.525 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:46.527 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:46:46.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 34.0489ms
2025-09-03 12:46:46.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 35.1499ms
2025-09-03 12:46:46.531 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:46.538 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:46:46.541 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 12:46:46.544 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:46:46.549 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:46:46.551 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.2824ms
2025-09-03 12:46:46.552 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:46:46.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 30.7753ms
2025-09-03 12:46:47.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:46:47.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T07:16:47.3018776Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:46:47.309 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:46:47.313 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:48:25.075 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:48:25.076 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:48:25.080 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=qYaoVz19vstC_TyfUdqT7A&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 104243.767ms
2025-09-03 12:48:25.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=QcAnCKJYuvn7gg-inwtH-g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 104199.1746ms
2025-09-03 12:48:25.666 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:48:25.668 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.669 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.329ms
2025-09-03 12:48:25.672 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:48:25.675 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.676 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:48:25.677 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:48:25.764 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:48:25.766 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:48:25.767 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 88.7198ms
2025-09-03 12:48:25.769 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:48:25.770 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 97.5937ms
2025-09-03 12:48:25.779 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:48:25.781 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.782 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:48:25.783 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:48:25.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:48:25.790 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:48:25.791 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3756ms
2025-09-03 12:48:25.793 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:48:25.794 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.769ms
2025-09-03 12:48:25.835 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:48:25.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:48:25.838 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:48:25.838 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.838 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:48:25.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:48:25.844 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.845 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 9.5062ms
2025-09-03 12:48:25.841 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.852 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.854 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 17.0105ms
2025-09-03 12:48:25.858 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:48:25.859 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:48:25.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 21.6516ms
2025-09-03 12:48:25.861 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 22.1548ms
2025-09-03 12:48:25.868 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:48:25.872 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.873 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:48:25.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:48:25.880 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:48:25.882 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.883 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:48:25.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:48:25.890 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.893 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.894 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:48:25.895 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:48:25.899 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:48:25.902 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vyVyHbldJVeS_T4mZu0Rlw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:48:25.904 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:25.898 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:48:25.900 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:48:25.902 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 43.5834ms
2025-09-03 12:48:25.898 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:48:25.911 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.913 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:48:25.913 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:48:25.921 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:48:25.926 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:48:25.914 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 46.0512ms
2025-09-03 12:48:25.920 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 34.9476ms
2025-09-03 12:48:25.942 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:48:25.945 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:48:25.947 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=bodWchO6OKGsswMmqJ3Ulw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:48:25.947 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:48:25.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 111.041ms
2025-09-03 12:48:25.951 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:25.953 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 40.2717ms
2025-09-03 12:48:25.958 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:48:25.959 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:48:25.964 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 84.034ms
2025-09-03 12:48:26.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:48:26.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:48:26.009 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:48:26.011 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 84.1065ms
2025-09-03 12:48:26.012 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:48:26.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 136.6839ms
2025-09-03 12:48:27.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:48:27.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:48:27.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:48:27.398 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:27.400 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:27.402 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:27.402 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 6.6602ms
2025-09-03 12:48:27.403 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.1201ms
2025-09-03 12:48:27.403 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.618ms
2025-09-03 12:48:27.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:48:27.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:48:27.412 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:27.414 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:27.415 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:27.415 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:48:27.416 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:27.417 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:48:27.418 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:48:27.423 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:48:27.424 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:48:27.427 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:48:27.428 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:48:27.429 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.1663ms
2025-09-03 12:48:27.430 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.4055ms
2025-09-03 12:48:27.431 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:48:27.431 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:48:27.432 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:27.434 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:27.434 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 24.2388ms
2025-09-03 12:48:27.435 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 27.1524ms
2025-09-03 12:48:27.436 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:27.441 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:27.443 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:48:27.446 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:48:27.448 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:48:27.449 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.7733ms
2025-09-03 12:48:27.450 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:27.451 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 20.1546ms
2025-09-03 12:48:28.193 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='491ee04c-27c4-49e4-9bb8-ef8892951090', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:48:28.215 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='be0b9193-d7aa-42a0-920a-2ee1a60c3470', @p0='2025-09-03T07:18:28.1919332Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:48:28.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:48:28.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:48:31.141 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:48:31.141 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:48:31.141 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:48:31.143 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:31.145 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:31.147 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:31.148 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 6.9096ms
2025-09-03 12:48:31.148 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.3227ms
2025-09-03 12:48:31.149 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.7634ms
2025-09-03 12:48:31.154 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:48:31.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:48:31.158 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:31.159 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:31.160 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:31.161 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:48:31.161 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:31.162 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:48:31.164 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:48:31.168 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:48:31.169 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:48:31.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:48:31.173 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:48:31.174 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.6025ms
2025-09-03 12:48:31.175 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.0386ms
2025-09-03 12:48:31.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:48:31.176 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:48:31.177 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:31.179 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:31.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 24.11ms
2025-09-03 12:48:31.181 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 27.2877ms
2025-09-03 12:48:31.182 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:31.187 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:31.189 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:48:31.192 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:48:31.195 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:48:31.196 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.6159ms
2025-09-03 12:48:31.198 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:31.198 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.5195ms
2025-09-03 12:48:31.952 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:48:31.976 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:18:31.9509083Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:48:31.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:48:31.982 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:48:34.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:48:34.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:48:34.904 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:48:34.905 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:34.907 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:34.909 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:34.909 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.7306ms
2025-09-03 12:48:34.910 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.1011ms
2025-09-03 12:48:34.911 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 6.6256ms
2025-09-03 12:48:34.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:48:34.919 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:34.920 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:34.921 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:34.922 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:48:34.925 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:48:34.928 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:48:34.929 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.7122ms
2025-09-03 12:48:34.930 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:34.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:48:34.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:48:34.931 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 15.5258ms
2025-09-03 12:48:34.933 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:34.935 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:48:34.938 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:48:34.938 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:34.939 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:48:34.940 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:48:34.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:48:34.945 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:48:34.947 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:48:34.949 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:48:34.951 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.9911ms
2025-09-03 12:48:34.953 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:48:34.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:48:34.954 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.4466ms
2025-09-03 12:48:34.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 25.0109ms
2025-09-03 12:48:34.956 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:48:34.960 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 29.4165ms
2025-09-03 12:48:35.717 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='0876f654-a362-420f-a912-6bce793436a5', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:48:35.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='d225a11a-5dab-4768-baad-6036616eabad', @p0='2025-09-03T07:18:35.7153579Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:48:35.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:48:35.728 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:50:37.293 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:50:37.301 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=vyVyHbldJVeS_T4mZu0Rlw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 131399.5153ms
2025-09-03 12:50:37.303 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:50:37.306 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=bodWchO6OKGsswMmqJ3Ulw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 131359.3935ms
2025-09-03 12:50:37.449 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:50:37.452 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.526ms
2025-09-03 12:50:37.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:50:37.458 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.459 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:50:37.460 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:50:37.463 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:50:37.466 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:50:37.468 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6239ms
2025-09-03 12:50:37.469 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:50:37.471 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2382ms
2025-09-03 12:50:37.495 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:50:37.501 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.502 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:50:37.503 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:50:37.508 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:50:37.511 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:50:37.513 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4299ms
2025-09-03 12:50:37.514 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:50:37.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.1528ms
2025-09-03 12:50:37.543 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:50:37.543 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:50:37.544 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:50:37.544 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:50:37.544 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:50:37.546 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.548 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.550 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.554 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 12.7354ms
2025-09-03 12:50:37.555 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.6643ms
2025-09-03 12:50:37.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 12.1578ms
2025-09-03 12:50:37.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.1098ms
2025-09-03 12:50:37.562 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:50:37.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:50:37.567 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:50:37.572 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:50:37.575 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:50:37.576 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:50:37.578 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.581 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.586 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.589 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:50:37.592 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:50:37.584 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:50:37.593 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:50:37.592 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:50:37.594 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:50:37.595 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:50:37.597 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:50:37.597 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=c7KeeZfb462RbkGfbzY89Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:50:37.599 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:50:37.600 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:50:37.605 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.601 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 33.3228ms
2025-09-03 12:50:37.608 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:50:37.618 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:50:37.602 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:50:37.625 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:50:37.628 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 55.8505ms
2025-09-03 12:50:37.603 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6761ms
2025-09-03 12:50:37.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:50:37.629 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:50:37.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:50:37.636 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 37.7058ms
2025-09-03 12:50:37.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:50:37.638 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=WxJJRRf4WmJULdQkEeS02Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:50:37.640 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:50:37.640 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:50:37.641 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 96.7178ms
2025-09-03 12:50:37.643 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:37.644 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 32.0095ms
2025-09-03 12:50:37.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 80.7182ms
2025-09-03 12:50:37.648 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:50:37.649 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:50:37.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 79.7094ms
2025-09-03 12:50:38.995 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:50:38.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:50:38.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:50:38.998 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:39.000 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:39.001 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:39.002 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 6.5752ms
2025-09-03 12:50:39.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 6.9814ms
2025-09-03 12:50:39.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.4294ms
2025-09-03 12:50:39.007 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:50:39.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:50:39.012 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:39.013 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:39.014 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:50:39.014 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:50:39.015 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:50:39.016 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:50:39.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:50:39.020 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:50:39.022 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:50:39.024 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:50:39.025 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.4813ms
2025-09-03 12:50:39.028 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:50:39.028 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:50:39.029 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.9084ms
2025-09-03 12:50:39.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:50:39.030 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.7245ms
2025-09-03 12:50:39.031 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:50:39.033 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:50:39.036 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 26.6297ms
2025-09-03 12:50:39.037 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:50:39.040 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:50:39.041 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:50:39.044 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:50:39.047 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:50:39.048 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.3153ms
2025-09-03 12:50:39.049 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:50:39.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 19.9229ms
2025-09-03 12:50:39.795 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:50:39.817 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:20:39.7942248Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:50:39.821 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:50:39.825 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:55:13.206 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:55:13.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=WxJJRRf4WmJULdQkEeS02Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 275570.3659ms
2025-09-03 12:55:13.213 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:55:13.213 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:55:13.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:55:13.225 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.228 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.233 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.234 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 20.7041ms
2025-09-03 12:55:13.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 21.715ms
2025-09-03 12:55:13.236 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 21.8288ms
2025-09-03 12:55:13.296 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:55:13.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:55:13.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:55:13.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.303 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.306 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.308 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:55:13.309 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:55:13.310 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:55:13.311 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:55:13.313 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:55:13.314 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:55:13.315 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 19.6306ms
2025-09-03 12:55:13.318 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:55:13.333 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=xB7gjorr_IjBC_65XAaocQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:55:13.351 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:55:13.352 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:55:13.400 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:55:13.402 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:55:13.403 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 83.3097ms
2025-09-03 12:55:13.405 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:55:13.406 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 106.2891ms
2025-09-03 12:55:13.419 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:55:13.421 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:55:13.422 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 104.8734ms
2025-09-03 12:55:13.424 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:55:13.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 125.2845ms
2025-09-03 12:55:15.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 12:55:15.218 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:25:15.1943737Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 12:55:15.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:55:15.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 12:56:28.241 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:56:28.241 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:56:28.245 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=c7KeeZfb462RbkGfbzY89Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 350647.6921ms
2025-09-03 12:56:28.246 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=xB7gjorr_IjBC_65XAaocQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 74912.8997ms
2025-09-03 12:56:40.195 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:56:40.197 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.198 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9346ms
2025-09-03 12:56:40.200 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:56:40.202 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.203 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:56:40.204 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:56:40.208 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:56:40.211 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:56:40.212 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1455ms
2025-09-03 12:56:40.213 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:56:40.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.4147ms
2025-09-03 12:56:40.218 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:56:40.220 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.221 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:56:40.222 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:56:40.225 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:56:40.227 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:56:40.228 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3586ms
2025-09-03 12:56:40.230 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:56:40.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3146ms
2025-09-03 12:56:40.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:56:40.287 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:56:40.290 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.287 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:56:40.292 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:56:40.294 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.295 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.6208ms
2025-09-03 12:56:40.302 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.303 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 15.7826ms
2025-09-03 12:56:40.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.289 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 12:56:40.311 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:56:40.311 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 19.0497ms
2025-09-03 12:56:40.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:56:40.314 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 27.2153ms
2025-09-03 12:56:40.316 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.318 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.320 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:56:40.322 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.324 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:56:40.325 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:56:40.327 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:56:40.328 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.329 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:56:40.331 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.331 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 12:56:40.333 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:56:40.334 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:40.337 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:40.332 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:56:40.345 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:56:40.347 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 36.7333ms
2025-09-03 12:56:40.335 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:56:40.338 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 12:56:40.336 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=yy0tSCuVRiks8LHluHDxtw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:56:40.347 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:56:40.360 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:56:40.363 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:56:40.365 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.369 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:56:40.369 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 44.2285ms
2025-09-03 12:56:40.370 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 33.6963ms
2025-09-03 12:56:40.371 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:56:40.374 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:56:40.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 12:56:40.382 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 36.1162ms
2025-09-03 12:56:40.384 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 94.6494ms
2025-09-03 12:56:40.385 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:56:40.389 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 68.8769ms
2025-09-03 12:56:40.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f7RK1Sda_FGe0GnM_NdT6Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:56:40.395 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:40.396 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:56:40.522 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:56:40.524 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:56:40.525 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:40.526 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 182.1805ms
2025-09-03 12:56:40.528 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:56:40.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 214.869ms
2025-09-03 12:56:42.535 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:42.536 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:42.536 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:42.538 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:42.540 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:42.542 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:42.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 6.8147ms
2025-09-03 12:56:42.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.154ms
2025-09-03 12:56:42.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.6142ms
2025-09-03 12:56:42.548 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:42.550 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:42.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:42.554 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:42.554 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:42.555 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:42.556 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:42.557 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:42.558 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:56:42.564 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:42.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:42.568 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:42.569 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:42.570 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.2413ms
2025-09-03 12:56:42.571 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.7556ms
2025-09-03 12:56:42.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:42.572 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:42.573 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:42.575 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:42.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 25.6989ms
2025-09-03 12:56:42.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 28.7553ms
2025-09-03 12:56:42.577 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:42.582 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:42.583 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:56:42.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:42.589 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:42.590 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.0974ms
2025-09-03 12:56:42.591 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:42.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 20.8136ms
2025-09-03 12:56:45.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:45.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:45.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:45.253 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:45.256 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:45.258 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:45.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.757ms
2025-09-03 12:56:45.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.239ms
2025-09-03 12:56:45.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.891ms
2025-09-03 12:56:45.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:45.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:45.268 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:45.270 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:45.271 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:45.271 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:45.272 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:45.273 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:45.275 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:56:45.278 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:45.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:45.282 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:45.284 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:45.285 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.3858ms
2025-09-03 12:56:45.286 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.6901ms
2025-09-03 12:56:45.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:45.287 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:45.288 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:45.290 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:45.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 24.1597ms
2025-09-03 12:56:45.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 27.0034ms
2025-09-03 12:56:45.292 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:45.297 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:45.299 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:56:45.301 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:45.304 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:45.306 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.9173ms
2025-09-03 12:56:45.307 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:45.308 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 20.6958ms
2025-09-03 12:56:46.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:46.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:46.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:46.493 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:46.495 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:46.497 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:46.498 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.9905ms
2025-09-03 12:56:46.499 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.5873ms
2025-09-03 12:56:46.499 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.1211ms
2025-09-03 12:56:46.508 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:46.508 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:46.510 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:46.512 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:46.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:46.513 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:46.514 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:46.514 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:46.518 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:46.519 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 12:56:46.524 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:46.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:46.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:46.528 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.4255ms
2025-09-03 12:56:46.529 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.2228ms
2025-09-03 12:56:46.529 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:46.530 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:46.531 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:46.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:46.533 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.1579ms
2025-09-03 12:56:46.534 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.9969ms
2025-09-03 12:56:46.535 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:46.540 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:46.542 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 12:56:46.544 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:46.547 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:46.548 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.2524ms
2025-09-03 12:56:46.549 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:46.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 20.0485ms
2025-09-03 12:56:47.325 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:47.325 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:47.325 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:47.327 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:47.329 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:47.331 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:47.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 6.8423ms
2025-09-03 12:56:47.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.2404ms
2025-09-03 12:56:47.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.6498ms
2025-09-03 12:56:47.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:47.340 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:47.342 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:47.343 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:47.344 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:47.344 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:47.345 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:47.346 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:47.347 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:56:47.350 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:47.354 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:47.355 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:47.357 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:47.357 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.1927ms
2025-09-03 12:56:47.358 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.3295ms
2025-09-03 12:56:47.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:47.359 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:47.360 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:47.362 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:47.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 22.7225ms
2025-09-03 12:56:47.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 25.8261ms
2025-09-03 12:56:47.364 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:47.369 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:47.371 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:56:47.374 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:47.376 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:47.377 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.6283ms
2025-09-03 12:56:47.378 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:47.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 19.9418ms
2025-09-03 12:56:48.050 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:48.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:48.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:48.053 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.055 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.057 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.058 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.7199ms
2025-09-03 12:56:48.059 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.3879ms
2025-09-03 12:56:48.060 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.9689ms
2025-09-03 12:56:48.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:48.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:48.079 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.081 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.082 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.082 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:48.083 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:48.084 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:48.085 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 12:56:48.088 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:48.091 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:48.093 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:48.094 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:48.095 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8494ms
2025-09-03 12:56:48.096 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.2181ms
2025-09-03 12:56:48.097 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:48.097 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:48.098 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.100 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 23.3163ms
2025-09-03 12:56:48.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 24.1426ms
2025-09-03 12:56:48.102 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.107 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:48.109 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 12:56:48.111 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:48.114 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:48.115 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.133ms
2025-09-03 12:56:48.116 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 19.626ms
2025-09-03 12:56:48.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:56:48.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:56:48.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:56:48.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.798 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.801 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 7.4179ms
2025-09-03 12:56:48.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.0025ms
2025-09-03 12:56:48.803 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.5315ms
2025-09-03 12:56:48.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:56:48.810 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:56:48.811 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.813 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:48.814 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.815 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:48.816 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:48.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:48.821 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 12:56:48.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:48.825 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:48.826 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.679ms
2025-09-03 12:56:48.829 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:48.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:48.830 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.3098ms
2025-09-03 12:56:48.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 12:56:48.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 23.3481ms
2025-09-03 12:56:48.832 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.834 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:48.837 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 27.2203ms
2025-09-03 12:56:48.838 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.840 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:48.842 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 12:56:48.844 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:48.847 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:48.848 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.3863ms
2025-09-03 12:56:48.849 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:48.850 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 18.7305ms
2025-09-03 12:56:50.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:50.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:50.027 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:50.029 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:50.030 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:50.030 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.031 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:50.032 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:50.036 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:50.038 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 12:56:50.040 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:50.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:50.042 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.0231ms
2025-09-03 12:56:50.045 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:50.046 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:50.047 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.1567ms
2025-09-03 12:56:50.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 12:56:50.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 23.2179ms
2025-09-03 12:56:50.049 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.051 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:50.054 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 29.6158ms
2025-09-03 12:56:50.055 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.057 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:50.059 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 12:56:50.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:50.064 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:50.065 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.66ms
2025-09-03 12:56:50.066 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.067 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 20.0325ms
2025-09-03 12:56:50.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:50.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:50.770 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:50.773 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:50.774 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:50.774 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.775 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:50.776 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:50.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:50.781 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:56:50.783 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:50.785 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.2495ms
2025-09-03 12:56:50.786 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:50.788 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:50.790 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:50.790 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 23.0063ms
2025-09-03 12:56:50.791 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0943ms
2025-09-03 12:56:50.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:50.794 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:50.797 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 29.7509ms
2025-09-03 12:56:50.798 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.801 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:50.802 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:56:50.805 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:50.808 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:50.809 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.1152ms
2025-09-03 12:56:50.810 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:50.811 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 17.6537ms
2025-09-03 12:56:51.539 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:51.539 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:51.540 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:51.542 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:51.544 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:51.546 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:51.546 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.217ms
2025-09-03 12:56:51.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.7788ms
2025-09-03 12:56:51.548 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.3428ms
2025-09-03 12:56:51.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:51.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:51.557 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:51.559 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:51.559 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:51.560 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:51.561 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:51.561 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:51.563 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 12:56:51.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:51.570 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:51.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:51.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:51.574 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.1651ms
2025-09-03 12:56:51.574 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 12:56:51.575 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.9317ms
2025-09-03 12:56:51.576 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:51.578 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:51.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:51.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.985ms
2025-09-03 12:56:51.580 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:51.581 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.1887ms
2025-09-03 12:56:51.584 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:51.588 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 12:56:51.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:51.593 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:51.594 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.7265ms
2025-09-03 12:56:51.595 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:51.596 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 21.4823ms
2025-09-03 12:56:52.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:56:52.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:56:52.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:56:52.188 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.190 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.192 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 7.6143ms
2025-09-03 12:56:52.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.0296ms
2025-09-03 12:56:52.194 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.5867ms
2025-09-03 12:56:52.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:56:52.201 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:56:52.203 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.205 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.206 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.206 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:52.207 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:52.208 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:52.209 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 12:56:52.212 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:52.216 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:52.217 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:52.218 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:52.219 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8709ms
2025-09-03 12:56:52.220 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0525ms
2025-09-03 12:56:52.221 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 12:56:52.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:52.222 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.224 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 23.1653ms
2025-09-03 12:56:52.225 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 26.8348ms
2025-09-03 12:56:52.226 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.231 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:52.233 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 12:56:52.236 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:52.239 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:52.240 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.6919ms
2025-09-03 12:56:52.241 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.241 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 20.6981ms
2025-09-03 12:56:52.922 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:52.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:52.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:52.925 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.927 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.929 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.929 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.1116ms
2025-09-03 12:56:52.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.6687ms
2025-09-03 12:56:52.931 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.4848ms
2025-09-03 12:56:52.937 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:52.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:52.941 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.943 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.943 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.944 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:52.944 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:52.945 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:52.947 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:56:52.950 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:52.954 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:52.955 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:52.957 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:52.958 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.0185ms
2025-09-03 12:56:52.958 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.0949ms
2025-09-03 12:56:52.960 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:52.960 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:52.961 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.962 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.2775ms
2025-09-03 12:56:52.964 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:52.965 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 28.292ms
2025-09-03 12:56:52.969 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.972 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:52.974 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:56:52.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:52.980 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:52.982 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.4297ms
2025-09-03 12:56:52.984 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:52.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 25.337ms
2025-09-03 12:56:53.854 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:53.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:53.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:53.857 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:53.859 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:53.861 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:53.862 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.255ms
2025-09-03 12:56:53.862 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.6586ms
2025-09-03 12:56:53.863 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.054ms
2025-09-03 12:56:53.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:53.871 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:53.873 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:53.875 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:53.876 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:53.876 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:53.877 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:53.878 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:53.882 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:53.883 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:56:53.886 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:53.888 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:53.889 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.4556ms
2025-09-03 12:56:53.892 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:53.892 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:53.893 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.7989ms
2025-09-03 12:56:53.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 12:56:53.894 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 26.1015ms
2025-09-03 12:56:53.895 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:53.898 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:53.902 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 30.9023ms
2025-09-03 12:56:53.902 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:53.905 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:53.907 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 12:56:53.910 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:53.912 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:53.914 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.8876ms
2025-09-03 12:56:53.915 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:53.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 21.8083ms
2025-09-03 12:56:54.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:54.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:54.820 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:54.822 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:54.823 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:54.823 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:54.824 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:54.825 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:54.829 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:54.830 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:56:54.832 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:54.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:54.835 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.6369ms
2025-09-03 12:56:54.837 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:54.838 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:54.839 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.7747ms
2025-09-03 12:56:54.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 12:56:54.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.5177ms
2025-09-03 12:56:54.841 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:54.842 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:54.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 28.1609ms
2025-09-03 12:56:54.846 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:54.850 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:54.852 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 12:56:54.855 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:54.858 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:54.859 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.3033ms
2025-09-03 12:56:54.860 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:54.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 21.6499ms
2025-09-03 12:56:55.777 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:55.777 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:55.777 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:55.779 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:55.782 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:55.784 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:55.785 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.7693ms
2025-09-03 12:56:55.785 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 8.4498ms
2025-09-03 12:56:55.786 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 9.0651ms
2025-09-03 12:56:55.791 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:55.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:55.795 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:55.797 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:55.798 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:55.798 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:55.799 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:55.800 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:56:55.801 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:56:55.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:56:55.807 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:55.808 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:56:55.810 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:55.811 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.7967ms
2025-09-03 12:56:55.812 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0825ms
2025-09-03 12:56:55.813 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:56:55.813 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:56:55.814 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:55.816 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:56:55.817 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 23.8403ms
2025-09-03 12:56:55.817 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 26.8286ms
2025-09-03 12:56:55.818 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:55.823 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:56:55.824 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:56:55.827 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:56:55.830 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:56:55.831 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.7603ms
2025-09-03 12:56:55.832 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:56:55.833 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 19.9693ms
2025-09-03 12:59:30.230 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:59:30.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:59:30.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 12:59:30.251 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.236 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=yy0tSCuVRiks8LHluHDxtw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 169899.6307ms
2025-09-03 12:59:30.255 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 21.8184ms
2025-09-03 12:59:30.254 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.230 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 12:59:30.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 12:59:30.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:59:30.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:59:30.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:59:30.265 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:59:30.265 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 31.8291ms
2025-09-03 12:59:30.266 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f7RK1Sda_FGe0GnM_NdT6Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 169873.8714ms
2025-09-03 12:59:30.268 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.277 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.280 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:59:30.270 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.272 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.276 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.283 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 50.2486ms
2025-09-03 12:59:30.284 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 18.9252ms
2025-09-03 12:59:30.286 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.286 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 46.2627ms
2025-09-03 12:59:30.287 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 46.9449ms
2025-09-03 12:59:30.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 38.9136ms
2025-09-03 12:59:30.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 12:59:30.293 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 12:59:30.294 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:59:30.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:59:30.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 12:59:30.305 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.307 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:59:30.303 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.309 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.301 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:59:30.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FP1nnELsA3tRx7oKU4Emjw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:59:30.311 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.312 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 12:59:30.312 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 32.4875ms
2025-09-03 12:59:30.313 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:59:30.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:59:30.315 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.317 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.318 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:59:30.319 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 12:59:30.322 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:59:30.323 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:59:30.324 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:59:30.326 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 33.3187ms
2025-09-03 12:59:30.331 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 12:59:30.325 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:59:30.328 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 12:59:30.336 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:59:30.325 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 12:59:30.342 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 12:59:30.342 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.9097ms
2025-09-03 12:59:30.330 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:59:30.347 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 12:59:30.349 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 12:59:30.349 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 12:59:30.353 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 12:59:30.354 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 12:59:30.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 58.637ms
2025-09-03 12:59:30.351 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:59:30.357 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=OTKpW4soCRPTI_bnll5kUg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 12:59:30.359 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 30.8936ms
2025-09-03 12:59:30.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:59:30.358 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 12:59:30.366 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.367 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 12:59:30.369 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:59:30.370 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 25.9269ms
2025-09-03 12:59:30.371 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 12:59:30.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 81.7426ms
2025-09-03 12:59:30.373 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 22.6352ms
2025-09-03 12:59:30.375 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 12:59:30.380 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 12:59:30.381 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:59:30.382 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 82.8165ms
2025-09-03 12:59:30.384 +05:30 [INF] CORS policy execution successful.
2025-09-03 12:59:30.385 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 83.5837ms
2025-09-03 12:59:30.388 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:59:30.392 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 12:59:30.394 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 12:59:30.397 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 12:59:30.400 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 12:59:30.401 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.799ms
2025-09-03 12:59:30.403 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 12:59:30.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 24.2115ms
2025-09-03 13:01:15.228 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:01:15.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:01:15.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:01:15.228 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:01:15.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:01:15.233 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=FP1nnELsA3tRx7oKU4Emjw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 104922.4975ms
2025-09-03 13:01:15.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:01:15.247 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.249 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.250 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=OTKpW4soCRPTI_bnll5kUg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 104893.7948ms
2025-09-03 13:01:15.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 29.974ms
2025-09-03 13:01:15.262 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 30.6537ms
2025-09-03 13:01:15.260 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.236 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:15.243 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:15.265 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 34.0435ms
2025-09-03 13:01:15.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:15.270 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:01:15.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 37.8432ms
2025-09-03 13:01:15.274 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.275 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.277 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:01:15.279 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.287 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 19.4334ms
2025-09-03 13:01:15.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:01:15.284 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 47.2157ms
2025-09-03 13:01:15.284 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 41.778ms
2025-09-03 13:01:15.286 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.281 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.290 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:15.291 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.293 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:01:15.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:15.296 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:01:15.297 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:01:15.299 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.300 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:01:15.302 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.304 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.305 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:01:15.306 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:01:15.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:15.308 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:15.309 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:01:15.309 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:15.310 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 32.4884ms
2025-09-03 13:01:15.311 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 40.7851ms
2025-09-03 13:01:15.312 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:15.314 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:01:15.315 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:15.315 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:15.341 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:15.351 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dyJ1EgLmVgRiRQE59ZcsYQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 13:01:15.354 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.355 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:01:15.374 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=P4T7Xtzq89EzO8SSTDgPvg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - null null
2025-09-03 13:01:15.377 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.378 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:01:15.416 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:15.418 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:15.420 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 97.9144ms
2025-09-03 13:01:15.422 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:15.423 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 133.1789ms
2025-09-03 13:01:15.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:01:15.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:01:15.462 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:01:15.463 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 129.4389ms
2025-09-03 13:01:15.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:01:15.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 171.7981ms
2025-09-03 13:01:15.482 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:15.485 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:15.486 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 146.0835ms
2025-09-03 13:01:15.486 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:15.487 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:15.489 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:15.490 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 194.7548ms
2025-09-03 13:01:15.491 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:15.495 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:15.496 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:15.501 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:15.504 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:15.506 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.9308ms
2025-09-03 13:01:15.507 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:15.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 23.2572ms
2025-09-03 13:01:15.542 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:01:15.545 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:01:15.545 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:15.547 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 233.2173ms
2025-09-03 13:01:15.548 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:01:15.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 265.5113ms
2025-09-03 13:01:17.649 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:17.649 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:17.650 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:17.652 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:17.654 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:17.656 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:17.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 7.6334ms
2025-09-03 13:01:17.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.1756ms
2025-09-03 13:01:17.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.7656ms
2025-09-03 13:01:17.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:17.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:17.667 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:17.668 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:17.669 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:17.670 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:17.671 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:17.671 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:17.673 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 13:01:17.676 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:17.679 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:17.680 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:17.682 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:17.683 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.6005ms
2025-09-03 13:01:17.684 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.7853ms
2025-09-03 13:01:17.684 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:17.685 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:17.686 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:17.688 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:17.688 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 23.4761ms
2025-09-03 13:01:17.689 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 26.3261ms
2025-09-03 13:01:17.690 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:17.695 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:17.696 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 13:01:17.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:17.702 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:17.703 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.4543ms
2025-09-03 13:01:17.704 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:17.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 20.3175ms
2025-09-03 13:01:18.717 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:18.717 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:18.720 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:18.723 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:18.723 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:18.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:18.725 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:18.726 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:18.727 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:18.731 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:18.732 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:18.736 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:18.737 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:18.738 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.094ms
2025-09-03 13:01:18.739 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.3702ms
2025-09-03 13:01:18.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:18.740 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:18.741 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:18.743 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:18.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 26.2947ms
2025-09-03 13:01:18.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 27.1539ms
2025-09-03 13:01:18.745 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:18.751 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:18.752 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:18.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:18.758 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:18.759 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.187ms
2025-09-03 13:01:18.760 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:18.761 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 20.9742ms
2025-09-03 13:01:19.645 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:19.645 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:19.646 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:19.647 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:19.649 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:19.651 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:19.652 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 6.9146ms
2025-09-03 13:01:19.653 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.2909ms
2025-09-03 13:01:19.653 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.8401ms
2025-09-03 13:01:19.659 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:19.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:19.663 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:19.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:19.666 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:19.666 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:19.667 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:19.668 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:19.674 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:19.674 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:01:19.676 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:19.678 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:19.679 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.9067ms
2025-09-03 13:01:19.681 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:19.682 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:19.683 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8515ms
2025-09-03 13:01:19.684 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:19.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 25.539ms
2025-09-03 13:01:19.685 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:19.687 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:19.690 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 29.2604ms
2025-09-03 13:01:19.691 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:19.695 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:19.696 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:01:19.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:19.702 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:19.703 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.2769ms
2025-09-03 13:01:19.704 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:19.705 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 21.5096ms
2025-09-03 13:01:20.281 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:20.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:20.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:20.286 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:20.288 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:20.290 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:20.291 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 9.1736ms
2025-09-03 13:01:20.291 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 9.6943ms
2025-09-03 13:01:20.292 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 10.1984ms
2025-09-03 13:01:20.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:20.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:20.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:20.303 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:20.303 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:20.304 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:20.305 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:20.305 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:20.307 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:01:20.311 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:20.311 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:20.315 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:20.317 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:20.318 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.3137ms
2025-09-03 13:01:20.319 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.5698ms
2025-09-03 13:01:20.320 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:20.320 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:20.321 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:20.323 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:20.323 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 24.9624ms
2025-09-03 13:01:20.324 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 27.8258ms
2025-09-03 13:01:20.325 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:20.330 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:20.331 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:01:20.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:20.337 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:20.338 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5857ms
2025-09-03 13:01:20.339 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:20.339 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 19.6644ms
2025-09-03 13:01:21.063 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:01:21.063 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:01:21.063 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:01:21.065 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.068 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.070 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.070 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.9654ms
2025-09-03 13:01:21.071 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.5118ms
2025-09-03 13:01:21.072 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 9.0578ms
2025-09-03 13:01:21.076 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:01:21.078 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:01:21.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.082 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.082 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.083 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:21.084 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:21.085 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:21.087 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 13:01:21.090 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:21.091 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:21.096 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:21.096 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:21.097 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.7986ms
2025-09-03 13:01:21.098 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.8987ms
2025-09-03 13:01:21.099 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:01:21.099 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:21.101 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.103 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.103 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 25.1433ms
2025-09-03 13:01:21.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 28.1056ms
2025-09-03 13:01:21.105 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.110 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:21.111 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 13:01:21.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:21.117 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:21.118 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5251ms
2025-09-03 13:01:21.119 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.120 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 21.0231ms
2025-09-03 13:01:21.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:01:21.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:01:21.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:01:21.693 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.695 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.697 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.8942ms
2025-09-03 13:01:21.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.0297ms
2025-09-03 13:01:21.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.693ms
2025-09-03 13:01:21.703 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:01:21.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:01:21.709 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.711 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.712 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:21.712 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.713 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:21.713 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:21.718 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:21.719 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:01:21.720 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:21.723 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:21.724 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8343ms
2025-09-03 13:01:21.726 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:21.727 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:21.727 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.6374ms
2025-09-03 13:01:21.728 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:01:21.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 25.3018ms
2025-09-03 13:01:21.729 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.731 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:21.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 29.0197ms
2025-09-03 13:01:21.735 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.738 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:21.739 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:01:21.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:21.744 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:21.745 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.3121ms
2025-09-03 13:01:21.746 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:21.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 18.7782ms
2025-09-03 13:01:22.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:22.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:22.326 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.328 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:22.330 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:22.330 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:22.331 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:22.336 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:22.338 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 13:01:22.339 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:22.341 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.1244ms
2025-09-03 13:01:22.342 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:22.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:22.345 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:22.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 21.6199ms
2025-09-03 13:01:22.347 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.2677ms
2025-09-03 13:01:22.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:01:22.350 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:22.352 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.353 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 29.1215ms
2025-09-03 13:01:22.354 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:22.357 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:22.359 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 13:01:22.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:22.364 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:22.365 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5179ms
2025-09-03 13:01:22.366 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:22.367 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 17.9702ms
2025-09-03 13:01:22.971 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:22.971 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:22.971 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:22.973 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.975 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.977 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.978 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.8841ms
2025-09-03 13:01:22.979 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.484ms
2025-09-03 13:01:22.979 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.9901ms
2025-09-03 13:01:22.985 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:22.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:22.989 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.990 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:22.991 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:22.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:22.992 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:22.993 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:22.994 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:01:22.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:23.001 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:23.005 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:23.005 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:23.006 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.1757ms
2025-09-03 13:01:23.007 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.423ms
2025-09-03 13:01:23.008 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:23.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:23.009 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.011 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 24.6235ms
2025-09-03 13:01:23.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.7431ms
2025-09-03 13:01:23.013 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.018 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:23.020 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:01:23.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:23.025 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:23.026 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.1665ms
2025-09-03 13:01:23.027 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.028 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 19.4995ms
2025-09-03 13:01:23.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:23.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:23.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:23.706 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.707 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.709 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.710 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.0225ms
2025-09-03 13:01:23.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.6166ms
2025-09-03 13:01:23.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 8.153ms
2025-09-03 13:01:23.717 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:23.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:23.721 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.723 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.723 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:23.725 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:23.725 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:23.727 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:23.730 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:23.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:23.735 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:23.737 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:23.738 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.7864ms
2025-09-03 13:01:23.739 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.9951ms
2025-09-03 13:01:23.739 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:23.740 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:23.740 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.742 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:23.743 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 23.5621ms
2025-09-03 13:01:23.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 26.5846ms
2025-09-03 13:01:23.744 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.749 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:23.751 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:23.754 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:23.757 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:23.757 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.6538ms
2025-09-03 13:01:23.758 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:23.759 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 19.9793ms
2025-09-03 13:01:24.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:24.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:24.412 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:24.414 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:24.415 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:24.416 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:24.417 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:24.418 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:24.419 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:01:24.422 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:24.425 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:24.427 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:24.429 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:24.430 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.6487ms
2025-09-03 13:01:24.431 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.0098ms
2025-09-03 13:01:24.432 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:01:24.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:24.433 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:24.435 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:24.435 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 25.6511ms
2025-09-03 13:01:24.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 26.4536ms
2025-09-03 13:01:24.437 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:24.442 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:24.443 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:01:24.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:24.449 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:24.450 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.6739ms
2025-09-03 13:01:24.451 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:24.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 19.7795ms
2025-09-03 13:01:25.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:25.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:25.067 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:25.069 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:25.069 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:25.070 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:25.071 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:25.072 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:25.073 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:01:25.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:25.080 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:25.082 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:25.083 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:25.084 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.3047ms
2025-09-03 13:01:25.085 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.825ms
2025-09-03 13:01:25.086 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:01:25.086 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:25.087 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:25.089 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:25.089 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 25.2184ms
2025-09-03 13:01:25.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 26.0595ms
2025-09-03 13:01:25.091 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:25.096 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:25.098 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:01:25.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:25.103 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:25.104 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5351ms
2025-09-03 13:01:25.105 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:25.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 20.5318ms
2025-09-03 13:01:38.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:38.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:38.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:38.630 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:38.632 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:38.634 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:38.634 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.9274ms
2025-09-03 13:01:38.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.54ms
2025-09-03 13:01:38.636 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.0525ms
2025-09-03 13:01:38.641 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:38.643 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:38.645 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:38.648 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:38.649 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:38.649 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:38.650 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:38.650 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:38.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:38.655 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:01:38.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:38.662 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:38.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:38.664 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.4787ms
2025-09-03 13:01:38.665 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8403ms
2025-09-03 13:01:38.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:01:38.666 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:38.667 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:38.669 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:38.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.5199ms
2025-09-03 13:01:38.670 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.4048ms
2025-09-03 13:01:38.671 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:38.677 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:38.678 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:01:38.680 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:38.683 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:38.684 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.2249ms
2025-09-03 13:01:38.685 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:38.686 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 20.3718ms
2025-09-03 13:01:50.110 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:50.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:50.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:50.113 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:50.115 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:50.117 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:50.117 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.2278ms
2025-09-03 13:01:50.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.5853ms
2025-09-03 13:01:50.119 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 8.1926ms
2025-09-03 13:01:50.123 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:50.125 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:50.127 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:50.129 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:50.130 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:50.130 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:50.131 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:50.132 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:01:50.133 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:50.136 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:01:50.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:50.140 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:01:50.142 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:50.143 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.5551ms
2025-09-03 13:01:50.144 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.906ms
2025-09-03 13:01:50.145 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:01:50.145 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:01:50.146 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:50.148 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:01:50.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 22.8626ms
2025-09-03 13:01:50.149 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 25.8703ms
2025-09-03 13:01:50.150 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:50.155 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:01:50.156 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:01:50.159 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:01:50.162 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:01:50.163 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.0838ms
2025-09-03 13:01:50.164 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:01:50.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 20.3391ms
2025-09-03 13:02:26.812 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:02:26.813 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:02:26.813 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:02:26.815 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:26.817 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:26.821 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:26.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 8.6003ms
2025-09-03 13:02:26.822 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 9.2622ms
2025-09-03 13:02:26.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 204 null null 10.0624ms
2025-09-03 13:02:26.829 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:02:26.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:02:26.834 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:26.836 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:26.837 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:26.837 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:26.838 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:26.839 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:02:26.841 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 13:02:26.844 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:02:26.847 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:26.849 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:02:26.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:26.851 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.1787ms
2025-09-03 13:02:26.852 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.8371ms
2025-09-03 13:02:26.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - null null
2025-09-03 13:02:26.853 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:26.854 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:26.856 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:26.857 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 25.0057ms
2025-09-03 13:02:26.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 29.2664ms
2025-09-03 13:02:26.859 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:26.864 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:26.866 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="1b52f26e-9fad-4233-a6bb-57603945f8d6"
2025-09-03 13:02:26.869 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='1b52f26e-9fad-4233-a6bb-57603945f8d6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:26.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:26.873 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.7245ms
2025-09-03 13:02:26.874 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:26.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/1b52f26e-9fad-4233-a6bb-57603945f8d6 - 200 null application/json; charset=utf-8 21.8864ms
2025-09-03 13:02:27.444 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:02:27.444 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:02:27.444 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:02:27.446 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:27.449 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:27.451 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:27.451 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8018ms
2025-09-03 13:02:27.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.7976ms
2025-09-03 13:02:27.452 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.2877ms
2025-09-03 13:02:27.461 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:02:27.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:02:27.466 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:27.467 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:27.468 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:27.468 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:27.469 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:02:27.470 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:27.474 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:02:27.475 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:02:27.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:27.480 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:02:27.482 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:27.483 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.6569ms
2025-09-03 13:02:27.484 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.6749ms
2025-09-03 13:02:27.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:02:27.485 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:27.486 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:27.488 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:27.489 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.0608ms
2025-09-03 13:02:27.490 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 26.6058ms
2025-09-03 13:02:27.491 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:27.495 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:27.497 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:02:27.501 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:27.503 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:27.504 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.442ms
2025-09-03 13:02:27.505 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:27.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 21.4876ms
2025-09-03 13:02:28.034 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:02:28.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:02:28.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:02:28.037 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.039 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.041 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.041 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 6.919ms
2025-09-03 13:02:28.042 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.4883ms
2025-09-03 13:02:28.043 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.0183ms
2025-09-03 13:02:28.048 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:02:28.050 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:02:28.052 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.054 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.054 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.055 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:28.056 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:28.056 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:02:28.058 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:02:28.061 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:02:28.064 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:28.065 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:02:28.067 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:28.067 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.6445ms
2025-09-03 13:02:28.068 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.9123ms
2025-09-03 13:02:28.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:02:28.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:28.070 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.072 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 22.4959ms
2025-09-03 13:02:28.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 25.6019ms
2025-09-03 13:02:28.074 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.080 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:28.081 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:02:28.084 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:28.087 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:28.088 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5245ms
2025-09-03 13:02:28.089 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 20.3278ms
2025-09-03 13:02:28.689 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:02:28.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:02:28.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:02:28.692 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.694 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.697 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.1748ms
2025-09-03 13:02:28.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.9191ms
2025-09-03 13:02:28.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 9.5423ms
2025-09-03 13:02:28.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:02:28.706 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:02:28.708 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.710 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:28.711 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.711 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:02:28.712 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:28.716 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:02:28.716 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:02:28.719 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:28.722 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:02:28.723 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:28.724 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.0858ms
2025-09-03 13:02:28.725 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.1025ms
2025-09-03 13:02:28.727 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.726 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:02:28.725 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:02:28.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 21.4051ms
2025-09-03 13:02:28.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 24.4339ms
2025-09-03 13:02:28.731 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:02:28.736 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.737 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:02:28.739 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:02:28.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:02:28.744 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:02:28.745 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.168ms
2025-09-03 13:02:28.746 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:02:28.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 21.1006ms
2025-09-03 13:03:02.006 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='63faf7a5-4506-431d-884c-cb0a363fa7ac', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:02.022 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p1='6e2bc4e4-cc53-4f9d-8d76-bd2b8a08f3aa', @p0='2025-09-03T07:33:02.0047922Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:02.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:02.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:04.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:04.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:04.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:04.296 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:04.298 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:04.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:04.301 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.2028ms
2025-09-03 13:03:04.301 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.6593ms
2025-09-03 13:03:04.302 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 8.2227ms
2025-09-03 13:03:04.307 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:04.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:04.311 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:04.312 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:04.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:04.313 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:04.314 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:04.315 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:04.319 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:04.320 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:03:04.322 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:04.324 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:04.324 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.3072ms
2025-09-03 13:03:04.327 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:04.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:04.328 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.2449ms
2025-09-03 13:03:04.329 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:04.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 22.5967ms
2025-09-03 13:03:04.330 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:04.332 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:04.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 25.983ms
2025-09-03 13:03:04.336 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:04.339 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:04.340 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:03:04.343 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:04.345 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:04.346 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.1029ms
2025-09-03 13:03:04.347 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:04.348 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 18.922ms
2025-09-03 13:03:05.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='491ee04c-27c4-49e4-9bb8-ef8892951090', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:05.106 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='be0b9193-d7aa-42a0-920a-2ee1a60c3470', @p0='2025-09-03T07:33:05.1000927Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:05.109 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:05.112 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:05.166 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:05.166 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:05.166 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:05.168 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:05.170 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:05.172 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:05.173 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.9701ms
2025-09-03 13:03:05.174 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.4111ms
2025-09-03 13:03:05.174 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8821ms
2025-09-03 13:03:05.179 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:05.181 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:05.183 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:05.185 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:05.186 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:05.186 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:05.187 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:05.188 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:05.192 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:03:05.192 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:05.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:05.199 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:05.199 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:05.200 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.3934ms
2025-09-03 13:03:05.201 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.6753ms
2025-09-03 13:03:05.202 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:05.202 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:05.203 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:05.205 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:05.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.2805ms
2025-09-03 13:03:05.207 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.8443ms
2025-09-03 13:03:05.208 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:05.213 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:05.214 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:03:05.218 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:05.221 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:05.222 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.8317ms
2025-09-03 13:03:05.223 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:05.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 21.6583ms
2025-09-03 13:03:05.967 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:05.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T07:33:05.9660240Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:05.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:05.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:06.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:03:06.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:03:06.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:03:06.296 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:06.298 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:06.300 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:06.300 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 6.682ms
2025-09-03 13:03:06.301 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.1561ms
2025-09-03 13:03:06.302 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.6982ms
2025-09-03 13:03:06.306 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:03:06.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:03:06.310 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:06.312 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:06.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:06.313 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:06.314 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:06.315 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:06.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:06.320 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:03:06.321 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:06.324 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.5289ms
2025-09-03 13:03:06.324 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:06.325 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:06.327 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:06.328 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 21.2944ms
2025-09-03 13:03:06.329 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.7286ms
2025-09-03 13:03:06.331 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:03:06.332 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:06.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:06.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 25.9375ms
2025-09-03 13:03:06.335 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:06.338 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:06.340 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:03:06.343 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:06.346 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:06.347 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.1309ms
2025-09-03 13:03:06.348 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:06.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 18.045ms
2025-09-03 13:03:07.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:07.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T07:33:07.0929670Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:07.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:07.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:07.877 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:07.878 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:07.878 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:07.880 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:07.882 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:07.885 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:07.885 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 7.8952ms
2025-09-03 13:03:07.886 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 8.4555ms
2025-09-03 13:03:07.887 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 9.0848ms
2025-09-03 13:03:07.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:07.893 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:07.895 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:07.897 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:07.897 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:07.898 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:07.899 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:07.900 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:07.901 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 13:03:07.904 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:07.907 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:07.909 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:07.910 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:07.911 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.7859ms
2025-09-03 13:03:07.912 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0574ms
2025-09-03 13:03:07.913 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:07.913 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:07.914 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:07.916 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:07.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 23.4277ms
2025-09-03 13:03:07.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 26.2978ms
2025-09-03 13:03:07.918 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:07.923 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:07.924 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 13:03:07.927 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:07.929 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:07.930 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.0122ms
2025-09-03 13:03:07.931 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:07.932 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 19.6676ms
2025-09-03 13:03:08.679 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='867c9c9b-f85e-4572-9bbd-4447b44597b7', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:08.701 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='d0eb7b47-42bd-4bb4-abb0-23d69b7b2f4d', @p0='2025-09-03T07:33:08.6782981Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:08.704 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:08.708 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:08.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:08.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:08.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:08.873 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:08.875 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:08.877 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:08.878 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.191ms
2025-09-03 13:03:08.879 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.8025ms
2025-09-03 13:03:08.880 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.3287ms
2025-09-03 13:03:08.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:08.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:08.888 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:08.890 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:08.890 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:08.891 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:08.892 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:08.892 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:08.894 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:03:08.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:08.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:08.901 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:08.903 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:08.903 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8192ms
2025-09-03 13:03:08.904 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.983ms
2025-09-03 13:03:08.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:08.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:08.906 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:08.908 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:08.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.1519ms
2025-09-03 13:03:08.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 25.0417ms
2025-09-03 13:03:08.910 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:08.915 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:08.917 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:03:08.919 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:08.922 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:08.923 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.4536ms
2025-09-03 13:03:08.924 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:08.925 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 19.9222ms
2025-09-03 13:03:09.680 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:09.697 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:33:09.6794856Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:09.701 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:09.705 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:11.307 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:03:11.308 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:03:11.308 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:03:11.314 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:11.316 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:11.318 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:11.318 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 10.9769ms
2025-09-03 13:03:11.319 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 10.7139ms
2025-09-03 13:03:11.320 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 11.9538ms
2025-09-03 13:03:11.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:03:11.326 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:03:11.328 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:11.330 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:11.331 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:11.331 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:11.332 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:11.333 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:11.334 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:03:11.338 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:11.340 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:11.343 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:11.344 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:11.345 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.243ms
2025-09-03 13:03:11.346 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.7816ms
2025-09-03 13:03:11.347 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:11.348 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:11.348 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 22.3567ms
2025-09-03 13:03:11.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 25.196ms
2025-09-03 13:03:11.364 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:03:11.367 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:11.368 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:11.369 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:11.371 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:03:11.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:11.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:11.378 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.2696ms
2025-09-03 13:03:11.379 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:11.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 15.3617ms
2025-09-03 13:03:12.110 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:12.133 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T07:33:12.1094234Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:12.137 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:12.141 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:12.154 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:12.154 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:12.156 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.158 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.158 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.159 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:12.160 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:12.160 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:12.162 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 13:03:12.166 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:12.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:12.170 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:12.171 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:12.172 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8259ms
2025-09-03 13:03:12.173 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.2998ms
2025-09-03 13:03:12.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:12.174 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:12.175 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.177 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.177 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 23.4055ms
2025-09-03 13:03:12.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 24.4101ms
2025-09-03 13:03:12.179 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.185 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:12.187 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 13:03:12.190 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:12.192 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:12.193 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5639ms
2025-09-03 13:03:12.194 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 21.3244ms
2025-09-03 13:03:12.865 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:12.865 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:12.865 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:12.867 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.870 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.872 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.0915ms
2025-09-03 13:03:12.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 8.664ms
2025-09-03 13:03:12.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 9.1167ms
2025-09-03 13:03:12.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:12.881 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:12.883 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.885 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.885 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.886 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:12.887 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:12.887 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:12.889 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:03:12.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:12.895 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:12.896 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:12.898 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:12.899 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.218ms
2025-09-03 13:03:12.900 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.3874ms
2025-09-03 13:03:12.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:12.901 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:12.902 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.904 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:12.904 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 23.049ms
2025-09-03 13:03:12.905 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 26.0673ms
2025-09-03 13:03:12.906 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.911 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:12.913 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:03:12.916 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:12.918 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:12.919 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.2251ms
2025-09-03 13:03:12.921 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:12.921 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 21.0201ms
2025-09-03 13:03:13.676 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='63faf7a5-4506-431d-884c-cb0a363fa7ac', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:13.697 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='6e2bc4e4-cc53-4f9d-8d76-bd2b8a08f3aa', @p0='2025-09-03T07:33:13.6743023Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:13.702 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:13.706 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:13.827 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:13.827 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:13.827 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:13.829 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:13.831 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:13.833 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:13.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.3844ms
2025-09-03 13:03:13.835 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.8688ms
2025-09-03 13:03:13.836 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.3724ms
2025-09-03 13:03:13.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:13.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:13.844 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:13.847 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:13.847 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:13.848 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:13.849 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:13.849 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:13.851 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:03:13.854 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:13.856 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:13.858 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:13.860 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:13.861 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.9857ms
2025-09-03 13:03:13.862 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.2523ms
2025-09-03 13:03:13.862 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:13.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:13.864 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:13.865 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:13.866 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 23.6879ms
2025-09-03 13:03:13.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 26.7338ms
2025-09-03 13:03:13.867 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:13.872 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:13.874 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:03:13.876 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:13.879 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:13.880 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.5187ms
2025-09-03 13:03:13.881 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:13.882 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 19.4454ms
2025-09-03 13:03:15.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='56c274a5-365e-436d-a078-77d72139367f', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:15.220 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='be3fdbf6-22da-49f8-b56a-1241ce132d79', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='56c274a5-365e-436d-a078-77d72139367f', @p3='2025-09-03T07:33:15.1951045Z' (DbType = DateTime), @p4='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ContactReads" ("Id", "BusinessId", "ContactId", "LastReadAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-03 13:03:15.224 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:15.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:34.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:34.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:34.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:34.023 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:34.025 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:34.026 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:34.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 6.1914ms
2025-09-03 13:03:34.028 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 6.7273ms
2025-09-03 13:03:34.028 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 7.2115ms
2025-09-03 13:03:34.034 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:34.036 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:34.037 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:34.039 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:34.040 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:34.040 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:34.041 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:34.042 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:34.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:34.047 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 13:03:34.048 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:34.050 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.5402ms
2025-09-03 13:03:34.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:34.052 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:34.054 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:34.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 21.028ms
2025-09-03 13:03:34.056 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.6841ms
2025-09-03 13:03:34.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:34.059 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:34.061 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:34.062 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 26.0641ms
2025-09-03 13:03:34.062 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:34.065 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:34.067 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 13:03:34.070 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:34.073 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:34.074 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.8916ms
2025-09-03 13:03:34.075 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:34.075 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 17.3323ms
2025-09-03 13:03:34.828 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='880f8355-31f3-4950-93ef-6b9bf88f7db2', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:34.832 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='f8f7fde2-aa48-48e4-9b76-ab8e33a6c743', @p0='2025-09-03T07:33:34.8271019Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:34.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:34.839 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:37.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:37.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:37.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:37.968 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:37.970 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:37.972 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:37.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 7.3483ms
2025-09-03 13:03:37.974 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.02ms
2025-09-03 13:03:37.975 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.6495ms
2025-09-03 13:03:37.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:37.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:37.984 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:37.985 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:37.986 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:37.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:37.987 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:37.988 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:37.989 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:03:37.993 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:37.996 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:37.998 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:38.000 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:38.001 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.1565ms
2025-09-03 13:03:38.002 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.7512ms
2025-09-03 13:03:38.003 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:03:38.003 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:38.004 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:38.006 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:38.007 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 25.1419ms
2025-09-03 13:03:38.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 28.1367ms
2025-09-03 13:03:38.009 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:38.014 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:38.015 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:03:38.018 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:38.021 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:38.022 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.8516ms
2025-09-03 13:03:38.023 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:38.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 21.5516ms
2025-09-03 13:03:38.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='56c274a5-365e-436d-a078-77d72139367f', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:38.797 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='be3fdbf6-22da-49f8-b56a-1241ce132d79', @p0='2025-09-03T07:33:38.7742164Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:38.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:38.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:40.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:40.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:40.724 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:40.726 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:40.728 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:40.730 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:40.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 7.7726ms
2025-09-03 13:03:40.732 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 8.2814ms
2025-09-03 13:03:40.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 204 null null 8.4479ms
2025-09-03 13:03:40.738 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:40.741 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:40.743 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:40.745 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:40.745 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:40.746 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:40.747 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:40.747 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:40.749 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 13:03:40.752 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:40.755 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:40.756 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:40.758 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:40.759 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8844ms
2025-09-03 13:03:40.760 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.1513ms
2025-09-03 13:03:40.760 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - null null
2025-09-03 13:03:40.761 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:40.761 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:40.763 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:40.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 23.0938ms
2025-09-03 13:03:40.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 26.4395ms
2025-09-03 13:03:40.765 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:40.771 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:40.772 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-09-03 13:03:40.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='867c9c9b-f85e-4572-9bbd-4447b44597b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:40.778 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:40.779 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.1183ms
2025-09-03 13:03:40.780 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:40.781 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/867c9c9b-f85e-4572-9bbd-4447b44597b7 - 200 null application/json; charset=utf-8 20.947ms
2025-09-03 13:03:41.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:41.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:41.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:41.480 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:41.482 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:41.484 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:41.485 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 7.4522ms
2025-09-03 13:03:41.485 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 8.1315ms
2025-09-03 13:03:41.486 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 8.6951ms
2025-09-03 13:03:41.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:41.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:41.495 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:41.497 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:41.497 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:41.498 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:41.498 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:41.499 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:41.501 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 13:03:41.504 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:41.506 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:41.509 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:41.511 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:41.511 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.7831ms
2025-09-03 13:03:41.512 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.9711ms
2025-09-03 13:03:41.513 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:03:41.513 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:41.514 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:41.516 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:41.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 23.5106ms
2025-09-03 13:03:41.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 26.4907ms
2025-09-03 13:03:41.518 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:41.523 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:41.525 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 13:03:41.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:41.531 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:41.532 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.8653ms
2025-09-03 13:03:41.533 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:41.533 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 20.4199ms
2025-09-03 13:03:42.285 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='880f8355-31f3-4950-93ef-6b9bf88f7db2', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:42.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='f8f7fde2-aa48-48e4-9b76-ab8e33a6c743', @p0='2025-09-03T07:33:42.2842275Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:42.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:42.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:42.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:03:42.456 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:03:42.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:03:42.458 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:42.460 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:42.462 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:42.462 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 6.7733ms
2025-09-03 13:03:42.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 6.233ms
2025-09-03 13:03:42.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 6.6307ms
2025-09-03 13:03:42.468 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:03:42.470 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:03:42.472 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:42.474 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:42.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:42.475 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:42.476 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:42.477 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:42.480 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:42.482 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 13:03:42.484 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:42.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:42.487 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.7128ms
2025-09-03 13:03:42.489 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:42.489 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:42.490 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.2529ms
2025-09-03 13:03:42.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:03:42.491 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 23.5523ms
2025-09-03 13:03:42.492 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:42.494 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:42.497 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 26.6921ms
2025-09-03 13:03:42.497 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:42.500 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:42.502 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 13:03:42.505 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:42.507 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:42.508 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.0072ms
2025-09-03 13:03:42.509 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:42.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 19.2529ms
2025-09-03 13:03:43.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='8aac7c57-6699-4511-897b-4121b407eb1c', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:43.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='1f1fe451-ef35-4ca5-9754-e73a2bda5c12', @p0='2025-09-03T07:33:43.2717504Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:43.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:43.284 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:43.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:43.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:43.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:43.394 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:43.396 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:43.398 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:43.399 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.1808ms
2025-09-03 13:03:43.400 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 7.7296ms
2025-09-03 13:03:43.400 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 8.1734ms
2025-09-03 13:03:43.405 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:43.407 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:43.409 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:43.411 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:43.411 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:43.412 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:43.412 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:43.413 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:43.415 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:03:43.417 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:43.421 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:43.422 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:43.424 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:43.424 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.8529ms
2025-09-03 13:03:43.425 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0172ms
2025-09-03 13:03:43.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:03:43.426 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:43.427 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:43.429 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:43.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 22.3874ms
2025-09-03 13:03:43.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 25.4879ms
2025-09-03 13:03:43.431 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:43.436 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:43.438 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:03:43.441 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:43.444 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:43.445 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.0445ms
2025-09-03 13:03:43.446 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:43.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 20.4296ms
2025-09-03 13:03:44.202 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='491ee04c-27c4-49e4-9bb8-ef8892951090', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:44.225 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='be0b9193-d7aa-42a0-920a-2ee1a60c3470', @p0='2025-09-03T07:33:44.2013788Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:44.229 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:44.233 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:44.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:44.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:44.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:44.244 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:44.246 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:44.248 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:44.248 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 5.9728ms
2025-09-03 13:03:44.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.4078ms
2025-09-03 13:03:44.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.8536ms
2025-09-03 13:03:44.254 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:44.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:44.258 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:44.260 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:44.261 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:44.261 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:44.262 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:44.263 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:44.264 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:03:44.267 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:44.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:44.273 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:44.273 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:44.274 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.2583ms
2025-09-03 13:03:44.275 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:03:44.275 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.158ms
2025-09-03 13:03:44.276 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:44.278 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:44.279 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:44.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.2188ms
2025-09-03 13:03:44.280 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:44.281 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 24.1366ms
2025-09-03 13:03:44.284 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:44.287 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:03:44.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:44.293 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:44.294 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.455ms
2025-09-03 13:03:44.294 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:44.295 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 20.6121ms
2025-09-03 13:03:45.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:45.074 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T07:33:45.0523935Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:45.077 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:45.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:46.866 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:46.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:46.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:46.869 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:46.871 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:46.873 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:46.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.2896ms
2025-09-03 13:03:46.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.719ms
2025-09-03 13:03:46.875 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.0727ms
2025-09-03 13:03:46.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:46.881 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:46.883 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:46.885 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:46.886 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:46.886 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:46.887 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:46.888 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:46.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:46.893 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:03:46.894 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:46.896 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:46.897 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.4534ms
2025-09-03 13:03:46.899 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:46.900 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:46.901 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.0234ms
2025-09-03 13:03:46.902 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:03:46.902 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 22.5737ms
2025-09-03 13:03:46.903 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:46.905 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:46.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 27.5294ms
2025-09-03 13:03:46.910 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:46.913 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:46.914 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:03:46.917 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:46.919 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:46.921 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.9652ms
2025-09-03 13:03:46.922 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:46.924 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 21.8169ms
2025-09-03 13:03:47.679 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:47.699 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:33:47.6782181Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:47.702 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:47.706 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:52.100 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:03:52.100 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:03:52.101 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:03:52.103 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:52.105 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:52.107 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:52.108 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.2535ms
2025-09-03 13:03:52.108 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 204 null null 7.8514ms
2025-09-03 13:03:52.109 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 204 null null 8.399ms
2025-09-03 13:03:52.114 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:03:52.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:03:52.118 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:52.120 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:52.120 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:52.121 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:52.122 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:52.122 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:52.124 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 13:03:52.128 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:52.131 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:52.134 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:52.135 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:52.136 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.8829ms
2025-09-03 13:03:52.137 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.4782ms
2025-09-03 13:03:52.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - null null
2025-09-03 13:03:52.139 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:52.140 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:52.141 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:52.142 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 26.0361ms
2025-09-03 13:03:52.143 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 29.3586ms
2025-09-03 13:03:52.144 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:52.149 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:52.151 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="0876f654-a362-420f-a912-6bce793436a5"
2025-09-03 13:03:52.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='0876f654-a362-420f-a912-6bce793436a5'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:52.156 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:52.157 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.3493ms
2025-09-03 13:03:52.158 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:52.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/0876f654-a362-420f-a912-6bce793436a5 - 200 null application/json; charset=utf-8 20.4481ms
2025-09-03 13:03:52.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='0876f654-a362-420f-a912-6bce793436a5', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:52.924 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='d225a11a-5dab-4768-baad-6036616eabad', @p0='2025-09-03T07:33:52.9001270Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:52.927 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:52.932 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:03:53.309 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:53.309 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:53.310 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:53.312 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:53.314 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:53.316 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:53.316 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 6.9136ms
2025-09-03 13:03:53.317 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 7.289ms
2025-09-03 13:03:53.317 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 7.7991ms
2025-09-03 13:03:53.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:53.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:53.326 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:53.327 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:53.328 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:53.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:53.330 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:53.331 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:03:53.332 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:03:53.335 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:03:53.338 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:53.339 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:03:53.341 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:53.342 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.495ms
2025-09-03 13:03:53.343 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.7353ms
2025-09-03 13:03:53.343 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-09-03 13:03:53.344 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:03:53.345 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:53.347 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:03:53.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 23.405ms
2025-09-03 13:03:53.348 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 26.4738ms
2025-09-03 13:03:53.349 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:53.354 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:03:53.355 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-09-03 13:03:53.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:03:53.361 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:03:53.362 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.9898ms
2025-09-03 13:03:53.363 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:03:53.364 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 20.4087ms
2025-09-03 13:03:54.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='63faf7a5-4506-431d-884c-cb0a363fa7ac', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:03:54.124 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='6e2bc4e4-cc53-4f9d-8d76-bd2b8a08f3aa', @p0='2025-09-03T07:33:54.1192712Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:03:54.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:03:54.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:10:00.178 +05:30 [INF] Request starting HTTP/1.1 GET http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=281464649&hub.verify_token=xbytechat-secret-token - null null
2025-09-03 13:10:00.181 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-03 13:10:00.183 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:10:00.189 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-09-03 13:10:00.190 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-03 13:10:00.191 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 5.7523ms
2025-09-03 13:10:00.192 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-03 13:10:00.193 +05:30 [INF] Request finished HTTP/1.1 GET http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=281464649&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 15.2033ms
2025-09-03 13:10:51.725 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:10:51.725 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:10:51.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dyJ1EgLmVgRiRQE59ZcsYQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 576398.0872ms
2025-09-03 13:10:51.750 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=P4T7Xtzq89EzO8SSTDgPvg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg1MTYzLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9._0crP0mFhlR4g4uYV_Im_tfvTbc2vQ9Zl5ToBrGq6Gg - 101 null null 576375.9637ms
2025-09-03 13:10:52.680 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 13:10:52.683 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:10:52.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.1765ms
2025-09-03 13:10:52.697 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 13:10:52.699 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:10:52.703 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 07:39:23 AM', Current time (UTC): '03-09-2025 07:40:52 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-03 13:10:52.746 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 07:39:23 AM', Current time (UTC): '03-09-2025 07:40:52 AM'.
2025-09-03 13:10:52.748 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:10:52.753 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:10:52.754 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 401 0 null 57.1457ms
2025-09-03 13:11:00.016 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 13:11:00.018 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:00.019 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4802ms
2025-09-03 13:11:00.022 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 13:11:00.025 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:00.026 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 13:11:00.029 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 13:11:00.039 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 13:11:00.106 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 13:11:00.145 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 13:11:00.241 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 13:11:00.252 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 13:11:00.264 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 13:11:00.265 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 13:11:00.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:00.269 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 238.4311ms
2025-09-03 13:11:00.270 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 13:11:00.271 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 249.1361ms
2025-09-03 13:11:00.275 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:11:00.278 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:00.278 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5682ms
2025-09-03 13:11:00.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:11:00.284 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:00.285 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:11:00.286 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:11:00.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 13:11:00.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:11:00.296 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:00.297 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6887ms
2025-09-03 13:11:00.298 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:11:00.299 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4679ms
2025-09-03 13:11:00.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:11:00.319 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:00.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:11:00.321 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:11:00.325 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:11:00.329 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:00.331 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4308ms
2025-09-03 13:11:00.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:11:00.333 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1523ms
2025-09-03 13:11:00.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:11:00.425 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:00.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:11:00.428 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:11:00.432 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:11:00.436 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:00.438 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.758ms
2025-09-03 13:11:00.440 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:11:00.441 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0155ms
2025-09-03 13:11:02.378 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 13:11:02.380 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:02.382 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.302ms
2025-09-03 13:11:02.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 13:11:02.387 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:02.388 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 13:11:02.389 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 13:11:02.392 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 13:11:02.395 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-03 13:11:02.396 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 6.0431ms
2025-09-03 13:11:02.397 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 13:11:02.398 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 13.208ms
2025-09-03 13:11:06.842 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-03 13:11:06.844 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:06.845 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 2.9794ms
2025-09-03 13:11:06.847 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 627
2025-09-03 13:11:06.849 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:06.850 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 13:11:06.851 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 13:11:06.853 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-09-03 13:11:06.873 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__providerNorm_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND lower(w."Provider") = @__providerNorm_1
LIMIT 1
2025-09-03 13:11:06.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPXrvjNyZBwuo3PR4C50qYQrXKSEF0PSjtZAJVoiWIqqjQAokH8QPySHiW6jYuzyc8cXyce7396qS9EtGJwzc956FxgBSQFp6Y4AdLOEKNok2lcHUpnqkacbI5vhr1MyIn8LZCaJ3uzXHALGFuCs1JARVZBXUPZCfYJAcdU2jiRGmUy4wZBdZCNPcFfSXAPO5W6J20tzhbsj38juxnYOSyXhCffebezcWMbvm39Kc8W9c5sR8OM6XwZDZD' (Nullable = false), @p1='2025-09-03T07:41:06.8757120Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-03 13:11:06.879 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:06.880 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 27.5129ms
2025-09-03 13:11:06.881 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 13:11:06.882 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 34.8359ms
2025-09-03 13:11:07.680 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-03 13:11:07.683 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:07.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.0507ms
2025-09-03 13:11:07.687 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 457
2025-09-03 13:11:07.690 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:07.691 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 13:11:07.692 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 13:11:07.694 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 13:11:07.695 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 13:11:08.779 +05:30 [INF] Received HTTP response headers after 1083.3687ms - 200
2025-09-03 13:11:08.780 +05:30 [INF] End processing HTTP request after 1086.824ms - 200
2025-09-03 13:11:08.782 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:08.783 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1090.0916ms
2025-09-03 13:11:08.784 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 13:11:08.785 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1097.8891ms
2025-09-03 13:11:12.968 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:11:12.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:11:12.974 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:11:12.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:11:12.976 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:12.978 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:12.980 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:12.982 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:12.983 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.4821ms
2025-09-03 13:11:12.983 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 13.1039ms
2025-09-03 13:11:12.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 9.5143ms
2025-09-03 13:11:12.985 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.169ms
2025-09-03 13:11:12.987 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:11:12.989 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:11:12.992 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:11:12.994 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:11:12.996 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:12.998 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:13.000 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:13.002 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:13.003 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:11:13.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:11:13.004 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:11:13.004 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:11:13.005 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:11:13.006 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:11:13.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Ufrp3MXoDn1x76f9WTlSsw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:11:13.016 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:11:13.008 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 21.391ms
2025-09-03 13:11:13.023 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:11:13.007 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:11:13.008 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:11:13.019 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:13.026 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:11:13.027 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:11:13.027 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 32.8271ms
2025-09-03 13:11:13.034 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:11:13.029 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 14.3527ms
2025-09-03 13:11:13.028 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:11:13.037 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:11:13.038 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:11:13.041 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:11:13.042 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 52.8917ms
2025-09-03 13:11:13.044 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 17.7333ms
2025-09-03 13:11:13.047 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:11:13.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 56.1507ms
2025-09-03 13:11:13.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=HKW-Oi4lPGLo0ASj5seocw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:11:13.063 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:13.063 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:11:14.633 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:11:14.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:11:14.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:11:14.636 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:14.638 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:14.640 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:14.640 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.9256ms
2025-09-03 13:11:14.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.4272ms
2025-09-03 13:11:14.642 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.7946ms
2025-09-03 13:11:14.646 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:11:14.649 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:11:14.651 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:14.653 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:14.654 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:11:14.654 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:11:14.655 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:11:14.656 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:11:14.657 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:11:14.661 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:11:14.667 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:11:14.668 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8171ms
2025-09-03 13:11:14.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:11:14.669 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:11:14.671 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:11:14.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.3345ms
2025-09-03 13:11:14.673 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:11:14.676 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:11:14.677 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:11:14.681 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:11:14.683 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:11:14.684 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.2757ms
2025-09-03 13:11:14.686 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:11:14.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 17.8347ms
2025-09-03 13:11:14.722 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:11:14.726 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:11:14.727 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 68.4585ms
2025-09-03 13:11:14.728 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:11:14.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 80.3418ms
2025-09-03 13:11:15.428 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:11:15.432 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T07:41:15.4267563Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:11:15.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:11:15.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:14:31.650 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:14:31.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 10.1873ms
2025-09-03 13:14:31.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:14:31.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:14:31.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.6403ms
2025-09-03 13:14:31.766 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.1185ms
2025-09-03 13:14:55.577 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 13:14:55.611 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 13:14:55.623 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 13:14:56.331 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 13:14:56.814 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 13:14:56.832 +05:30 [INF] ClickLogWorker started
2025-09-03 13:14:57.027 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 13:14:57.028 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 13:14:57.032 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 13:14:57.032 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 13:14:57.033 +05:30 [INF] Hosting environment: Development
2025-09-03 13:14:57.034 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 13:14:57.041 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[@__cutoff_0='2025-08-27T07:44:55.7160112Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 13:14:57.895 +05:30 [INF] ClickLogWorker stopped
2025-09-03 13:14:59.080 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:14:59.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 141.3862ms
2025-09-03 13:14:59.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:14:59.247 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.7513ms
2025-09-03 13:14:59.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:14:59.345 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.1476ms
2025-09-03 13:14:59.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:14:59.751 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.7182ms
2025-09-03 13:15:03.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:15:03.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:15:03.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:15:03.243 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 13:15:03.330 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:03.330 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:03.330 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:03.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 95.2386ms
2025-09-03 13:15:03.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 95.6182ms
2025-09-03 13:15:03.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 95.6175ms
2025-09-03 13:15:03.342 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:15:03.344 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:15:03.350 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:03.350 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:03.449 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:03.449 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:03.463 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:15:03.463 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:03.472 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:15:03.565 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:15:03.572 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:03.631 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:03.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:15:03.654 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 186.5642ms
2025-09-03 13:15:03.655 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:03.656 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:03.659 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:03.661 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:03.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 319.4444ms
2025-09-03 13:15:03.664 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:15:03.670 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:03.673 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:03.675 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.9238ms
2025-09-03 13:15:03.677 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:03.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 25.2609ms
2025-09-03 13:15:03.682 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:15:03.688 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 222.8293ms
2025-09-03 13:15:03.689 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:03.690 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 346.1912ms
2025-09-03 13:15:06.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:06.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:06.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:06.691 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:06.693 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:06.695 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:06.696 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.3881ms
2025-09-03 13:15:06.697 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 9.0895ms
2025-09-03 13:15:06.697 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 9.4496ms
2025-09-03 13:15:06.702 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:06.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:06.706 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:06.708 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:06.709 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:06.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:06.710 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:06.711 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:15:06.714 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:15:06.719 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:06.720 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:15:06.724 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:06.726 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:15:06.727 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.2993ms
2025-09-03 13:15:06.727 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:06.728 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 14.342ms
2025-09-03 13:15:06.728 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:06.730 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:06.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:06.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 30.0895ms
2025-09-03 13:15:06.733 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:06.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 29.4676ms
2025-09-03 13:15:06.737 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:06.741 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:15:06.745 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:06.749 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:06.750 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.3168ms
2025-09-03 13:15:06.751 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:06.752 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 24.6421ms
2025-09-03 13:15:10.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:10.322 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.323 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.2429ms
2025-09-03 13:15:10.326 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:10.328 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.333 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:10.339 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:15:10.353 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 13:15:10.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:15:10.383 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:10.390 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 49.2668ms
2025-09-03 13:15:10.391 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:10.392 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 66.6486ms
2025-09-03 13:15:10.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:10.411 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.413 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:10.414 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:15:10.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:15:10.423 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:10.425 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4595ms
2025-09-03 13:15:10.426 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:10.427 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.4655ms
2025-09-03 13:15:10.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:10.464 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:15:10.463 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:15:10.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:10.464 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:10.465 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.467 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.469 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.472 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.474 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 12.8518ms
2025-09-03 13:15:10.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 12.034ms
2025-09-03 13:15:10.476 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 13.2639ms
2025-09-03 13:15:10.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.6387ms
2025-09-03 13:15:10.479 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:10.481 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:10.483 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:10.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:15:10.488 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:15:10.489 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:15:10.492 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.494 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.496 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.499 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.502 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.503 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.504 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:15:10.505 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:15:10.508 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:15:10.514 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:15:10.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:10.515 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.515 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.520 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 37.5463ms
2025-09-03 13:15:10.515 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:10.522 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=GP3o7_DM-ceaLNb7R2qY1g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:10.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.473ms
2025-09-03 13:15:10.534 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:15:10.530 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.530 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:15:10.519 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.7866ms
2025-09-03 13:15:10.540 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:10.541 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:10.544 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 79.6906ms
2025-09-03 13:15:10.546 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:10.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=GP3o7_DM-ceaLNb7R2qY1g&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 27.1103ms
2025-09-03 13:15:10.559 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:15:10.565 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:15:10.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=aQV0aOqUpXMPRX63vE2xAw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:10.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:10.572 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.575 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.576 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:10.576 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.7901ms
2025-09-03 13:15:10.577 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:10.581 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:10.581 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:10.582 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=aQV0aOqUpXMPRX63vE2xAw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 14.8162ms
2025-09-03 13:15:10.584 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:10.584 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.590 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 72.459ms
2025-09-03 13:15:10.592 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.593 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:15:10.595 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.1675ms
2025-09-03 13:15:10.597 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 112.401ms
2025-09-03 13:15:10.601 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:10.602 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:15:10.602 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 21.1985ms
2025-09-03 13:15:10.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=XhEHeg0mPvUt0BIOsMG7Gw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:10.608 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.609 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:15:10.613 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.614 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.616 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:10.617 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.617 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:10.619 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 17.7559ms
2025-09-03 13:15:10.619 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 91.1753ms
2025-09-03 13:15:10.619 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=XhEHeg0mPvUt0BIOsMG7Gw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 13.9831ms
2025-09-03 13:15:10.623 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=lbLDcoX7hpjqJLTNgVybPA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:10.623 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:15:10.626 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:10.628 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.629 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 140.7876ms
2025-09-03 13:15:10.631 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.632 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:10.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.5919ms
2025-09-03 13:15:10.636 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:10.638 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:10.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=lbLDcoX7hpjqJLTNgVybPA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 16.5162ms
2025-09-03 13:15:10.641 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.644 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:10.645 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.646 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.647 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.648 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.9149ms
2025-09-03 13:15:10.648 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.1447ms
2025-09-03 13:15:10.651 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:10.654 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510648 - null null
2025-09-03 13:15:10.656 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.658 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.659 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.659 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510648 - 204 null null 5.3503ms
2025-09-03 13:15:10.660 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:10.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510648 - null null
2025-09-03 13:15:10.663 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 12.4204ms
2025-09-03 13:15:10.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.668 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510661 - null null
2025-09-03 13:15:10.669 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.671 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.672 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510661 - 204 null null 4.4034ms
2025-09-03 13:15:10.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510661 - null null
2025-09-03 13:15:10.677 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.678 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.682 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:10.682 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:10.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510648 - 200 0 application/octet-stream 20.8697ms
2025-09-03 13:15:10.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510661 - 200 0 application/octet-stream 9.6121ms
2025-09-03 13:15:10.687 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510684 - null null
2025-09-03 13:15:10.687 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - null null
2025-09-03 13:15:10.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw - null null
2025-09-03 13:15:10.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510683 - null null
2025-09-03 13:15:10.693 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.695 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.697 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.699 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510684 - 204 null null 12.9573ms
2025-09-03 13:15:10.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - 204 null null 13.5426ms
2025-09-03 13:15:10.701 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw - 204 null null 12.7648ms
2025-09-03 13:15:10.702 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510683 - 204 null null 10.5077ms
2025-09-03 13:15:10.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510683 - null null
2025-09-03 13:15:10.707 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510684 - null null
2025-09-03 13:15:10.710 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - text/plain;charset=UTF-8 32
2025-09-03 13:15:10.712 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw - text/plain;charset=UTF-8 32
2025-09-03 13:15:10.714 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.716 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.718 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.721 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.722 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.722 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.723 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.724 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.734 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:10.734 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:10.736 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw - 200 0 text/plain 23.4763ms
2025-09-03 13:15:10.737 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - 200 0 text/plain 26.9158ms
2025-09-03 13:15:10.739 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:10.739 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:10.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510683 - 200 3 application/octet-stream 39.6096ms
2025-09-03 13:15:10.745 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510684 - 200 3 application/octet-stream 37.8123ms
2025-09-03 13:15:10.748 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510741 - null null
2025-09-03 13:15:10.752 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510740 - null null
2025-09-03 13:15:10.754 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.756 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.757 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510741 - 204 null null 8.7205ms
2025-09-03 13:15:10.758 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510740 - 204 null null 5.782ms
2025-09-03 13:15:10.760 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510740 - null null
2025-09-03 13:15:10.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510741 - null null
2025-09-03 13:15:10.765 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.767 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:10.767 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:10.768 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:12.316 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:12.316 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:12.316 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:12.319 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:12.320 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:12.322 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:12.323 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.2949ms
2025-09-03 13:15:12.323 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 7.7511ms
2025-09-03 13:15:12.324 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 204 null null 8.4215ms
2025-09-03 13:15:12.328 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:12.331 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:12.333 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:12.334 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:12.335 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:12.336 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:12.336 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:15:12.337 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:12.340 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:15:12.341 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:15:12.345 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:12.348 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:15:12.349 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:12.350 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.3884ms
2025-09-03 13:15:12.351 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.1405ms
2025-09-03 13:15:12.353 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - null null
2025-09-03 13:15:12.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:12.354 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:12.356 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:12.357 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 28.3008ms
2025-09-03 13:15:12.357 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 26.7135ms
2025-09-03 13:15:12.358 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:12.363 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:12.365 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="132f271b-f223-426d-adc9-9a000f447b36"
2025-09-03 13:15:12.368 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='132f271b-f223-426d-adc9-9a000f447b36'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:12.371 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:12.372 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0677ms
2025-09-03 13:15:12.373 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:12.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/132f271b-f223-426d-adc9-9a000f447b36 - 200 null application/json; charset=utf-8 21.4459ms
2025-09-03 13:15:13.110 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - null null
2025-09-03 13:15:13.112 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.113 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - 204 null null 3.0729ms
2025-09-03 13:15:13.116 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - text/plain;charset=UTF-8 105
2025-09-03 13:15:13.118 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.120 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:13.121 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:13.122 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - 200 0 text/plain 6.1357ms
2025-09-03 13:15:13.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='132f271b-f223-426d-adc9-9a000f447b36', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:15:13.190 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='1996d4f9-d78e-42b0-a685-86338454011e', @p0='2025-09-03T07:45:13.1324734Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:15:13.205 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:15:13.212 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:15:13.216 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:13.216 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:13.218 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885510740 - 200 221 application/octet-stream 2457.1691ms
2025-09-03 13:15:13.218 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885510741 - 200 221 application/octet-stream 2455.4912ms
2025-09-03 13:15:13.221 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513218 - null null
2025-09-03 13:15:13.223 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885513218 - null null
2025-09-03 13:15:13.225 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.226 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513218 - 204 null null 6.0427ms
2025-09-03 13:15:13.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885513218 - 204 null null 4.5013ms
2025-09-03 13:15:13.230 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885513218 - null null
2025-09-03 13:15:13.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513218 - null null
2025-09-03 13:15:13.234 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.236 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.237 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:13.237 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:13.239 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:13.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513218 - 200 44 application/octet-stream 8.2136ms
2025-09-03 13:15:13.243 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513240 - null null
2025-09-03 13:15:13.245 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513240 - 204 null null 2.4095ms
2025-09-03 13:15:13.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513240 - null null
2025-09-03 13:15:13.249 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:13.250 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:17.366 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:15:17.366 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:15:17.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:15:17.369 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:17.371 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:17.373 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:17.374 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.1115ms
2025-09-03 13:15:17.375 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.4287ms
2025-09-03 13:15:17.376 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.181ms
2025-09-03 13:15:17.381 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:15:17.384 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:15:17.387 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:17.389 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:17.390 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:17.390 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:17.391 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:17.392 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:15:17.394 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:15:17.399 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:15:17.401 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:17.406 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:17.408 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.2917ms
2025-09-03 13:15:17.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:15:17.409 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:17.409 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:15:17.412 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:17.415 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 19.8217ms
2025-09-03 13:15:17.413 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 31.5995ms
2025-09-03 13:15:17.415 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:17.416 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:15:17.419 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:17.420 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 36.1189ms
2025-09-03 13:15:17.422 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:15:17.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:15:17.432 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:15:17.433 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.1092ms
2025-09-03 13:15:17.434 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:15:17.435 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 26.5013ms
2025-09-03 13:15:18.177 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - null null
2025-09-03 13:15:18.180 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.180 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - 204 null null 3.5052ms
2025-09-03 13:15:18.183 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - text/plain;charset=UTF-8 105
2025-09-03 13:15:18.185 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.187 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:18.188 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:18.189 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ - 200 0 text/plain 5.3735ms
2025-09-03 13:15:18.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:15:18.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T07:45:18.1888903Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:15:18.202 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:15:18.206 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:15:18.209 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:18.209 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:18.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885513218 - 200 221 application/octet-stream 4980.1473ms
2025-09-03 13:15:18.211 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885513240 - 200 221 application/octet-stream 4963.3395ms
2025-09-03 13:15:18.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518211 - null null
2025-09-03 13:15:18.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885518210 - null null
2025-09-03 13:15:18.219 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.221 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518211 - 204 null null 7.7418ms
2025-09-03 13:15:18.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885518210 - 204 null null 5.9118ms
2025-09-03 13:15:18.225 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885518210 - null null
2025-09-03 13:15:18.228 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518211 - null null
2025-09-03 13:15:18.231 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.233 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.234 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:18.234 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:18.237 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:18.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518211 - 200 44 application/octet-stream 10.2057ms
2025-09-03 13:15:18.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518238 - null null
2025-09-03 13:15:18.244 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518238 - 204 null null 3.3526ms
2025-09-03 13:15:18.247 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518238 - null null
2025-09-03 13:15:18.250 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:18.250 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:46.075 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 467
2025-09-03 13:15:46.078 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:15:46.080 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:15:46.108 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDAxNjJCQ0YzN0I0NTI5MzVBNQA=","timestamp":"1756885546","text":{"body":"hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:15:46.111 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:15:46.112 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:46.115 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 33.2432ms
2025-09-03 13:15:46.120 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:15:46.121 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 45.9605ms
2025-09-03 13:15:46.228 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDAxNjJCQ0YzN0I0NTI5MzVBNQA=","timestamp":"1756885546","text":{"body":"hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:15:46.230 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:15:46.247 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:15:46.249 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:15:56.039 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.039 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=exTE8VZWlwxc0sGdDjqulw&_=1756885518210 - 499 null null 37815.1389ms
2025-09-03 13:15:56.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=16IRQJXYeunUgeKWGpwUEQ&_=1756885518238 - 499 null null 37793.5383ms
2025-09-03 13:15:56.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:56.186 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.187 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3063ms
2025-09-03 13:15:56.189 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:56.191 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.192 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:56.193 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:15:56.199 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:15:56.201 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:56.203 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9575ms
2025-09-03 13:15:56.204 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:56.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7531ms
2025-09-03 13:15:56.230 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:56.233 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.234 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:56.235 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:15:56.239 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:15:56.242 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:56.243 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0757ms
2025-09-03 13:15:56.244 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:56.245 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6307ms
2025-09-03 13:15:56.269 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:56.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:15:56.271 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:15:56.270 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:56.278 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.271 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:15:56.281 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.283 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.285 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.286 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 16.294ms
2025-09-03 13:15:56.292 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:56.293 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 21.6844ms
2025-09-03 13:15:56.293 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 23.7413ms
2025-09-03 13:15:56.288 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.296 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:56.296 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:15:56.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:15:56.301 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:56.304 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.302 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 31.2284ms
2025-09-03 13:15:56.309 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:15:56.311 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.314 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.315 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.319 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:15:56.321 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:56.322 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.321 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:15:56.323 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.325 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.329 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.7118ms
2025-09-03 13:15:56.326 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=VPr68odKdd_naMV-yrkQTw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:56.331 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.331 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:15:56.333 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 37.0648ms
2025-09-03 13:15:56.338 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 36.3174ms
2025-09-03 13:15:56.334 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:15:56.334 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:15:56.337 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.341 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:15:56.348 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:15:56.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:15:56.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 73.5084ms
2025-09-03 13:15:56.350 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:56.355 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:15:56.357 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:15:56.359 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:56.362 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 22.9724ms
2025-09-03 13:15:56.363 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:15:56.365 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=VPr68odKdd_naMV-yrkQTw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 38.657ms
2025-09-03 13:15:56.366 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:15:56.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:56.370 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:15:56.373 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 74.985ms
2025-09-03 13:15:56.376 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.376 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=VyJJBOnyc4Ph91wFr48rrw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:56.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:15:56.380 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.8199ms
2025-09-03 13:15:56.382 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.383 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 28.8496ms
2025-09-03 13:15:56.385 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:56.386 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:56.387 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:15:56.389 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.390 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:56.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 71.9991ms
2025-09-03 13:15:56.392 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.392 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=VyJJBOnyc4Ph91wFr48rrw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 15.87ms
2025-09-03 13:15:56.395 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:56.399 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 13.3997ms
2025-09-03 13:15:56.401 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=SQsrfFQfZz5DrAkvKYUT9Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:56.404 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.0183ms
2025-09-03 13:15:56.406 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.408 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:56.409 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:56.411 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.412 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:56.412 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.413 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=SQsrfFQfZz5DrAkvKYUT9Q&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 9.7516ms
2025-09-03 13:15:56.414 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.418 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.2765ms
2025-09-03 13:15:56.421 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:56.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=SsmH7uH_Q7eic2mtnDDTyg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - null null
2025-09-03 13:15:56.423 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.425 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.9242ms
2025-09-03 13:15:56.426 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:15:56.429 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:56.429 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:15:56.431 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=SsmH7uH_Q7eic2mtnDDTyg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg4ODYwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.DcCiHn0WfhSSWHi57dV3ghOBJG2PuKCvb8yrDQ9yaAU - 401 0 null 11.0534ms
2025-09-03 13:15:56.434 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:15:56.437 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.439 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.440 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.4818ms
2025-09-03 13:15:56.441 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.2143ms
2025-09-03 13:15:56.443 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556438 - null null
2025-09-03 13:15:56.445 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:15:56.447 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.449 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.450 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556438 - 204 null null 6.9139ms
2025-09-03 13:15:56.451 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.453 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556438 - null null
2025-09-03 13:15:56.454 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:15:56.456 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.457 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.2584ms
2025-09-03 13:15:56.457 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.460 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556455 - null null
2025-09-03 13:15:56.461 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.463 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.463 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - null null
2025-09-03 13:15:56.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556438 - 200 0 application/octet-stream 10.5496ms
2025-09-03 13:15:56.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556455 - 204 null null 4.6668ms
2025-09-03 13:15:56.466 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.469 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556461 - null null
2025-09-03 13:15:56.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556455 - null null
2025-09-03 13:15:56.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - 204 null null 8.3434ms
2025-09-03 13:15:56.473 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.475 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.477 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - text/plain;charset=UTF-8 32
2025-09-03 13:15:56.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556461 - 204 null null 9.131ms
2025-09-03 13:15:56.479 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.480 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556461 - null null
2025-09-03 13:15:56.484 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.484 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.486 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - null null
2025-09-03 13:15:56.486 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.487 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.488 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556455 - 200 0 application/octet-stream 17.113ms
2025-09-03 13:15:56.490 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.491 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.491 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - 200 0 text/plain 14.2248ms
2025-09-03 13:15:56.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556485 - null null
2025-09-03 13:15:56.494 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 204 null null 7.9447ms
2025-09-03 13:15:56.495 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.500 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.502 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - text/plain;charset=UTF-8 32
2025-09-03 13:15:56.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556461 - 200 3 application/octet-stream 20.4716ms
2025-09-03 13:15:56.503 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556485 - 204 null null 9.8488ms
2025-09-03 13:15:56.505 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.508 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556496 - null null
2025-09-03 13:15:56.510 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556485 - null null
2025-09-03 13:15:56.511 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.512 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.515 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.514 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556496 - 204 null null 8.0892ms
2025-09-03 13:15:56.517 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 200 0 text/plain 14.7872ms
2025-09-03 13:15:56.518 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556496 - null null
2025-09-03 13:15:56.525 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:15:56.527 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556485 - 200 3 application/octet-stream 18.0614ms
2025-09-03 13:15:56.529 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:15:56.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556526 - null null
2025-09-03 13:15:56.536 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.537 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556526 - 204 null null 5.2167ms
2025-09-03 13:15:56.540 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556526 - null null
2025-09-03 13:15:56.542 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:15:56.542 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:02.978 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:16:02.978 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:16:02.978 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:16:02.980 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:02.982 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:02.984 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:02.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.9758ms
2025-09-03 13:16:02.985 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.1892ms
2025-09-03 13:16:02.986 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.6258ms
2025-09-03 13:16:02.990 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:16:02.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:16:02.995 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:02.997 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:02.997 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:02.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:16:02.999 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:02.999 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:16:03.001 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:16:03.005 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:16:03.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:16:03.012 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:16:03.013 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:16:03.013 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.4485ms
2025-09-03 13:16:03.014 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:16:03.014 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.4923ms
2025-09-03 13:16:03.015 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:03.017 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:16:03.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.3214ms
2025-09-03 13:16:03.019 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:03.020 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.3917ms
2025-09-03 13:16:03.023 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:03.027 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:16:03.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:16:03.033 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:16:03.034 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.106ms
2025-09-03 13:16:03.036 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:03.036 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.5205ms
2025-09-03 13:16:03.778 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - null null
2025-09-03 13:16:03.781 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.781 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 204 null null 3.0934ms
2025-09-03 13:16:03.784 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - text/plain;charset=UTF-8 105
2025-09-03 13:16:03.786 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.787 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:03.788 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:03.789 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 200 0 text/plain 5.1882ms
2025-09-03 13:16:03.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:16:03.815 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T07:46:03.7890249Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:16:03.819 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:16:03.822 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:16:03.824 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:03.824 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:03.825 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885556526 - 200 221 application/octet-stream 7285.7789ms
2025-09-03 13:16:03.826 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885556496 - 200 221 application/octet-stream 7306.0967ms
2025-09-03 13:16:03.829 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885563826 - null null
2025-09-03 13:16:03.831 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563826 - null null
2025-09-03 13:16:03.833 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.835 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.835 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885563826 - 204 null null 6.0662ms
2025-09-03 13:16:03.836 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563826 - 204 null null 4.5232ms
2025-09-03 13:16:03.838 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563826 - null null
2025-09-03 13:16:03.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885563826 - null null
2025-09-03 13:16:03.842 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.845 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.845 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:03.846 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:03.847 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:03.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563826 - 200 44 application/octet-stream 10.9522ms
2025-09-03 13:16:03.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563848 - null null
2025-09-03 13:16:03.853 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563848 - 204 null null 2.3243ms
2025-09-03 13:16:03.856 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563848 - null null
2025-09-03 13:16:03.858 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:03.858 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:05.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - null null
2025-09-03 13:16:05.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - null null
2025-09-03 13:16:05.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - null null
2025-09-03 13:16:05.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - null null
2025-09-03 13:16:05.923 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.925 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.928 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.931 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.931 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 204 null null 11.8069ms
2025-09-03 13:16:05.932 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - 204 null null 11.335ms
2025-09-03 13:16:05.932 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 204 null null 11.4976ms
2025-09-03 13:16:05.933 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - 204 null null 10.2598ms
2025-09-03 13:16:05.940 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:05.943 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:05.944 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q&_=1756885563848 - 499 null null 2088.174ms
2025-09-03 13:16:05.945 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA&_=1756885563826 - 499 null null 2104.6453ms
2025-09-03 13:16:05.949 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - text/plain;charset=UTF-8 11
2025-09-03 13:16:05.949 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - text/plain;charset=UTF-8 11
2025-09-03 13:16:05.950 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - null null
2025-09-03 13:16:05.950 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - null null
2025-09-03 13:16:05.953 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.955 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.957 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.959 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:05.960 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:05.960 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:05.961 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:05.962 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:05.963 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:05.963 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:05.966 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - 200 0 text/plain 16.9289ms
2025-09-03 13:16:05.967 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:05.967 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:05.967 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 200 0 text/plain 18.5202ms
2025-09-03 13:16:05.971 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=s2wzvZNZLHH-Y96WSSRMmA - 202 0 text/plain 20.8413ms
2025-09-03 13:16:05.972 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/hubs/inbox?id=fjtUoUQwHsC2WfmgtqyV8Q - 202 0 text/plain 21.7068ms
2025-09-03 13:16:12.711 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 13:16:12.713 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:12.714 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5086ms
2025-09-03 13:16:12.717 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 13:16:12.720 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:12.722 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 13:16:12.725 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 13:16:12.739 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 13:16:12.751 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 13:16:12.789 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 13:16:12.900 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 13:16:12.908 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 13:16:12.916 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 13:16:12.917 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 13:16:12.918 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:12.920 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 193.8961ms
2025-09-03 13:16:12.922 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 13:16:12.923 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 205.3158ms
2025-09-03 13:16:12.926 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:12.928 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:12.928 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8679ms
2025-09-03 13:16:12.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:12.932 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:12.933 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:12.934 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:16:12.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:16:12.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:12.942 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7534ms
2025-09-03 13:16:12.943 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:12.944 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.6668ms
2025-09-03 13:16:12.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:12.958 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:12.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:12.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:16:12.964 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:16:12.967 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:12.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0544ms
2025-09-03 13:16:12.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:12.971 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0951ms
2025-09-03 13:16:13.022 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:13.024 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:13.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:13.026 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:16:13.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:16:13.034 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:13.035 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3857ms
2025-09-03 13:16:13.036 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:13.038 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0049ms
2025-09-03 13:16:17.984 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:17.987 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:17.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.6425ms
2025-09-03 13:16:17.992 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:16:17.994 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:17.995 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 2.8858ms
2025-09-03 13:16:17.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:17.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:16:17.999 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:18.000 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:16:18.000 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.002 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.004 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.006 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.9667ms
2025-09-03 13:16:18.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 11.389ms
2025-09-03 13:16:18.008 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.009 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:16:18.011 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:16:18.013 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:18.014 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.016 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:18.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CIq3Riv5bNYdZcNP0nl8Yw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:18.018 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.021 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.021 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 22.6315ms
2025-09-03 13:16:18.023 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:16:18.025 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:16:18.026 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.031 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:16:18.030 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:18.036 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:16:18.032 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:16:18.034 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.037 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:16:18.039 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 25.7672ms
2025-09-03 13:16:18.036 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:18.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:16:18.042 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 19.4719ms
2025-09-03 13:16:18.045 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=CIq3Riv5bNYdZcNP0nl8Yw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 26.3074ms
2025-09-03 13:16:18.048 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:18.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:16:18.049 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:16:18.053 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.056 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:18.056 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 55.7554ms
2025-09-03 13:16:18.056 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.9443ms
2025-09-03 13:16:18.057 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Uxt9rEflK0Wn0wiBJfqZxA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:18.058 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 19.7862ms
2025-09-03 13:16:18.062 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:18.064 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.065 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:16:18.067 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.068 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:18.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 57.4667ms
2025-09-03 13:16:18.069 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.070 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:18.073 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Uxt9rEflK0Wn0wiBJfqZxA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 16.5087ms
2025-09-03 13:16:18.074 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 12.3077ms
2025-09-03 13:16:18.076 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:18.079 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fm6wy7D5NU03j9KsUiE1PQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:18.081 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.083 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.2399ms
2025-09-03 13:16:18.085 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:18.087 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:18.088 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:18.091 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=fm6wy7D5NU03j9KsUiE1PQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 12.1723ms
2025-09-03 13:16:18.092 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.095 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:18.095 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.097 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.098 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.5325ms
2025-09-03 13:16:18.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.9718ms
2025-09-03 13:16:18.101 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=stscu09PRGh-0GErRv0PBw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:18.103 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:18.105 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.107 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.108 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:18.108 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.109 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:18.110 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=stscu09PRGh-0GErRv0PBw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 9.4882ms
2025-09-03 13:16:18.111 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 8.0594ms
2025-09-03 13:16:18.117 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578114 - null null
2025-09-03 13:16:18.118 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:18.119 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.121 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578114 - 204 null null 4.4116ms
2025-09-03 13:16:18.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.6399ms
2025-09-03 13:16:18.124 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:18.126 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578114 - null null
2025-09-03 13:16:18.128 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.130 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.131 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.131 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.132 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:18.133 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:18.134 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 9.6706ms
2025-09-03 13:16:18.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578114 - 200 0 application/octet-stream 8.5343ms
2025-09-03 13:16:18.136 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA - null null
2025-09-03 13:16:18.137 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578134 - null null
2025-09-03 13:16:18.139 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578133 - null null
2025-09-03 13:16:18.141 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.143 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.144 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.145 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA - 204 null null 9.3093ms
2025-09-03 13:16:18.146 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578134 - 204 null null 8.3563ms
2025-09-03 13:16:18.146 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578133 - 204 null null 6.8734ms
2025-09-03 13:16:18.149 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA - text/plain;charset=UTF-8 32
2025-09-03 13:16:18.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578134 - null null
2025-09-03 13:16:18.153 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578133 - null null
2025-09-03 13:16:18.155 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.157 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.158 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.159 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.160 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.161 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:18.160 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.162 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:18.163 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA - 200 0 text/plain 14.1195ms
2025-09-03 13:16:18.164 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:18.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578134 - 200 3 application/octet-stream 13.7731ms
2025-09-03 13:16:18.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578133 - 200 0 application/octet-stream 15.4562ms
2025-09-03 13:16:18.169 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578167 - null null
2025-09-03 13:16:18.171 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - null null
2025-09-03 13:16:18.173 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578163 - null null
2025-09-03 13:16:18.175 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.176 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.178 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.179 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578167 - 204 null null 10.0795ms
2025-09-03 13:16:18.180 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - 204 null null 8.8762ms
2025-09-03 13:16:18.181 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578163 - 204 null null 7.4729ms
2025-09-03 13:16:18.184 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578163 - null null
2025-09-03 13:16:18.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578167 - null null
2025-09-03 13:16:18.189 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - text/plain;charset=UTF-8 32
2025-09-03 13:16:18.191 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.192 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.194 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.195 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.195 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.196 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:18.201 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:18.201 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:18.202 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - 200 0 text/plain 13.4834ms
2025-09-03 13:16:18.203 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578167 - 200 3 application/octet-stream 16.5583ms
2025-09-03 13:16:18.208 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578206 - null null
2025-09-03 13:16:18.210 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.211 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578206 - 204 null null 2.961ms
2025-09-03 13:16:18.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578206 - null null
2025-09-03 13:16:18.215 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:18.216 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:24.819 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:24.819 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:24.821 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:24.823 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:24.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:24.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 5.8358ms
2025-09-03 13:16:24.825 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 6.3483ms
2025-09-03 13:16:24.827 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:24.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:24.832 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.1686ms
2025-09-03 13:16:24.834 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:24.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:24.837 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:24.839 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:24.840 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:24.840 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:16:24.842 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:16:24.843 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:16:24.846 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:16:24.850 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:16:24.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:16:24.854 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:16:24.854 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.373ms
2025-09-03 13:16:24.855 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:24.855 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.3312ms
2025-09-03 13:16:24.856 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:24.858 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:24.859 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:16:24.860 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 27.8526ms
2025-09-03 13:16:24.860 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:24.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 24.3395ms
2025-09-03 13:16:24.864 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:24.867 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:16:24.870 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:16:24.873 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:16:24.874 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.0519ms
2025-09-03 13:16:24.875 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:24.876 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 21.5819ms
2025-09-03 13:16:25.608 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - null null
2025-09-03 13:16:25.610 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.611 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - 204 null null 3.5446ms
2025-09-03 13:16:25.614 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - text/plain;charset=UTF-8 105
2025-09-03 13:16:25.616 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.617 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:25.618 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:25.619 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA - 200 0 text/plain 4.926ms
2025-09-03 13:16:25.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:16:25.627 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T07:46:25.6185839Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:16:25.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:16:25.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:16:25.636 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:25.636 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:25.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885578163 - 200 221 application/octet-stream 7453.0996ms
2025-09-03 13:16:25.638 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885578206 - 200 221 application/octet-stream 7425.1118ms
2025-09-03 13:16:25.641 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585638 - null null
2025-09-03 13:16:25.643 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885585638 - null null
2025-09-03 13:16:25.645 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.647 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.648 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585638 - 204 null null 6.927ms
2025-09-03 13:16:25.648 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885585638 - 204 null null 4.8207ms
2025-09-03 13:16:25.651 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885585638 - null null
2025-09-03 13:16:25.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585638 - null null
2025-09-03 13:16:25.655 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.657 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.658 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:25.658 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:25.661 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:25.662 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585638 - 200 44 application/octet-stream 9.1903ms
2025-09-03 13:16:25.665 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585662 - null null
2025-09-03 13:16:25.666 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.667 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585662 - 204 null null 2.3399ms
2025-09-03 13:16:25.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585662 - null null
2025-09-03 13:16:25.671 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:25.672 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:40.585 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 13:16:40.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:40.590 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:16:40.592 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQUQ2NjE5MENDMzYwOUYyMTAwRDNGNkI0OTJFMjc4ODgA","timestamp":"1756885601","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:40.593 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:16:40.594 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:40.595 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQUQ2NjE5MENDMzYwOUYyMTAwRDNGNkI0OTJFMjc4ODgA","timestamp":"1756885601","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:40.596 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.4395ms
2025-09-03 13:16:40.596 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:16:40.597 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:40.599 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.8901ms
2025-09-03 13:16:40.601 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:16:40.605 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:16:42.234 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 481
2025-09-03 13:16:42.237 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:42.238 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:16:42.241 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDYwQjQ2M0Y3NkQyQkZDMzZCM0M1ODExODMzQjdFNDkA","timestamp":"1756885603","text":{"body":"Bhgg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:42.242 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:16:42.243 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:42.245 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3072ms
2025-09-03 13:16:42.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:42.247 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.8951ms
2025-09-03 13:16:42.250 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDYwQjQ2M0Y3NkQyQkZDMzZCM0M1ODExODMzQjdFNDkA","timestamp":"1756885603","text":{"body":"Bhgg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:42.251 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:16:42.255 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:16:42.257 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:16:43.627 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 481
2025-09-03 13:16:43.630 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:43.631 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:16:43.633 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEY1RjEwQTEwMTZBNDM1NkEwNzRGQTBFMTdEQ0IxRUMA","timestamp":"1756885604","text":{"body":"Vvgg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:43.634 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:16:43.634 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEY1RjEwQTEwMTZBNDM1NkEwNzRGQTBFMTdEQ0IxRUMA","timestamp":"1756885604","text":{"body":"Vvgg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:43.635 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:43.636 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:16:43.637 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6585ms
2025-09-03 13:16:43.640 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:43.640 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:16:43.641 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.0345ms
2025-09-03 13:16:43.643 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:16:45.696 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 481
2025-09-03 13:16:45.698 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:45.699 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:16:45.701 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNEFGQjVCNTZGNThGRjBDRUUyQUEwQjFCNDg2NkEzOUUA","timestamp":"1756885606","text":{"body":"Ggfg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:45.703 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:16:45.703 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNEFGQjVCNTZGNThGRjBDRUUyQUEwQjFCNDg2NkEzOUUA","timestamp":"1756885606","text":{"body":"Ggfg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:16:45.703 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:45.704 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:16:45.705 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0976ms
2025-09-03 13:16:45.708 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:16:45.708 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:16:45.709 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.8621ms
2025-09-03 13:16:45.711 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:16:46.505 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:46.505 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:46.507 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=S7YDLr8OzdHVa0JQNymGRA&_=1756885585662 - 499 null null 20837.3377ms
2025-09-03 13:16:46.507 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=2IRRHK6RJtg46sKlQxrpbA&_=1756885585638 - 499 null null 20856.7717ms
2025-09-03 13:16:46.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:46.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.638 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3679ms
2025-09-03 13:16:46.642 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:46.645 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.646 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:46.646 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:16:46.651 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:16:46.654 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:46.655 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.359ms
2025-09-03 13:16:46.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:46.658 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8955ms
2025-09-03 13:16:46.717 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:46.720 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.721 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:46.722 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:16:46.728 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:16:46.732 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:46.733 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5308ms
2025-09-03 13:16:46.734 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:46.736 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.9986ms
2025-09-03 13:16:46.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:46.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:16:46.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:16:46.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:46.766 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:16:46.767 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.769 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.771 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.776 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.777 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 13.02ms
2025-09-03 13:16:46.777 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 12.1224ms
2025-09-03 13:16:46.774 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.778 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 14.0264ms
2025-09-03 13:16:46.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:46.782 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:46.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:16:46.785 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 20.5718ms
2025-09-03 13:16:46.787 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:16:46.788 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:16:46.791 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.796 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.810 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:16:46.804 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.807 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.801 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:46.813 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:16:46.814 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:46.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:16:46.816 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.819 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUTKkeZpwHddZx0z-w5xaQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:46.820 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:46.821 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.6141ms
2025-09-03 13:16:46.822 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:16:46.823 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.9816ms
2025-09-03 13:16:46.831 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:16:46.828 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.830 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:16:46.824 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.839 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 73.1342ms
2025-09-03 13:16:46.844 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:16:46.840 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:46.844 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.834 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:16:46.850 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:16:46.850 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:46.852 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 50.973ms
2025-09-03 13:16:46.856 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:16:46.856 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:16:46.857 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUTKkeZpwHddZx0z-w5xaQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 37.7798ms
2025-09-03 13:16:46.861 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:46.864 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:16:46.865 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 35.3089ms
2025-09-03 13:16:46.869 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=GR5zoqOnNaL0HEfyE9cpMQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:46.871 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.872 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 39.7087ms
2025-09-03 13:16:46.874 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:16:46.877 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.877 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 16.3125ms
2025-09-03 13:16:46.879 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:16:46.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 96.3989ms
2025-09-03 13:16:46.881 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:46.884 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:46.885 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 97.9687ms
2025-09-03 13:16:46.889 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:46.892 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=GR5zoqOnNaL0HEfyE9cpMQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 26.7104ms
2025-09-03 13:16:46.897 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.899 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:46.901 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.903 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.904 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 20.1828ms
2025-09-03 13:16:46.905 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 6.5451ms
2025-09-03 13:16:46.908 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=gurii3zgIIJfsa3BHNTDQw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:46.911 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:46.914 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.916 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.917 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:46.918 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.919 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:46.920 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.921 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=gurii3zgIIJfsa3BHNTDQw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 12.5333ms
2025-09-03 13:16:46.922 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.3911ms
2025-09-03 13:16:46.926 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:46.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=qEdURFu1srAi4FqIEYW_WQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:16:46.931 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.934 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.935 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.4419ms
2025-09-03 13:16:46.936 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:16:46.939 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:46.939 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:16:46.942 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=qEdURFu1srAi4FqIEYW_WQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 14.3484ms
2025-09-03 13:16:46.944 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.948 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:16:46.949 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.952 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.953 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 14.1708ms
2025-09-03 13:16:46.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.6765ms
2025-09-03 13:16:46.957 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606950 - null null
2025-09-03 13:16:46.960 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:16:46.962 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.965 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606950 - 204 null null 9.1676ms
2025-09-03 13:16:46.967 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.970 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606950 - null null
2025-09-03 13:16:46.971 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:16:46.973 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.974 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 14.5213ms
2025-09-03 13:16:46.975 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:46.978 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885606972 - null null
2025-09-03 13:16:46.980 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:46.982 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.983 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ - null null
2025-09-03 13:16:46.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606950 - 200 0 application/octet-stream 13.3877ms
2025-09-03 13:16:46.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885606972 - 204 null null 5.7638ms
2025-09-03 13:16:46.986 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.990 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606981 - null null
2025-09-03 13:16:46.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885606972 - null null
2025-09-03 13:16:46.994 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ - 204 null null 10.9437ms
2025-09-03 13:16:46.996 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:46.999 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.002 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ - text/plain;charset=UTF-8 32
2025-09-03 13:16:47.002 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606981 - 204 null null 12.8193ms
2025-09-03 13:16:47.003 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:47.005 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.011 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:47.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606981 - null null
2025-09-03 13:16:47.012 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:47.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885606972 - 200 0 application/octet-stream 19.9221ms
2025-09-03 13:16:47.017 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:47.014 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - null null
2025-09-03 13:16:47.016 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607012 - null null
2025-09-03 13:16:47.022 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ - 200 0 text/plain 20.4037ms
2025-09-03 13:16:47.026 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.027 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:47.029 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - 204 null null 19.7101ms
2025-09-03 13:16:47.035 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:47.036 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607012 - 204 null null 15.3554ms
2025-09-03 13:16:47.040 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - text/plain;charset=UTF-8 32
2025-09-03 13:16:47.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885606981 - 200 3 application/octet-stream 31.8935ms
2025-09-03 13:16:47.044 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885607036 - null null
2025-09-03 13:16:47.047 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.050 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607012 - null null
2025-09-03 13:16:47.053 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.053 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:47.056 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885607036 - 204 null null 12.2861ms
2025-09-03 13:16:47.058 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:47.059 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:47.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885607036 - null null
2025-09-03 13:16:47.063 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - 200 0 text/plain 23.2694ms
2025-09-03 13:16:47.064 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:47.067 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607012 - 200 3 application/octet-stream 20.8668ms
2025-09-03 13:16:47.072 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:47.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607065 - null null
2025-09-03 13:16:47.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607065 - 204 null null 5.717ms
2025-09-03 13:16:47.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607065 - null null
2025-09-03 13:16:47.086 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:47.087 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:50.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:50.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:50.633 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:50.635 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:50.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:50.639 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:50.640 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.347ms
2025-09-03 13:16:50.640 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.7105ms
2025-09-03 13:16:50.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.1701ms
2025-09-03 13:16:50.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:50.647 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:50.649 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:50.651 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:50.651 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:50.652 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:16:50.653 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:50.654 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:16:50.655 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:16:50.659 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:16:50.661 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:16:50.664 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:16:50.666 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:16:50.667 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.3135ms
2025-09-03 13:16:50.668 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.5902ms
2025-09-03 13:16:50.668 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:16:50.669 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:16:50.670 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:50.672 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:50.673 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 25.283ms
2025-09-03 13:16:50.673 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 28.3069ms
2025-09-03 13:16:50.674 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:50.679 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:16:50.681 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:16:50.684 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:16:50.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:16:50.689 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.9872ms
2025-09-03 13:16:50.690 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:16:50.691 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 22.6468ms
2025-09-03 13:16:51.426 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - null null
2025-09-03 13:16:51.428 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.428 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - 204 null null 2.6641ms
2025-09-03 13:16:51.431 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - text/plain;charset=UTF-8 105
2025-09-03 13:16:51.433 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.433 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:51.434 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:51.435 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ - 200 0 text/plain 4.3744ms
2025-09-03 13:16:51.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:16:51.459 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T07:46:51.4348042Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:16:51.463 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:16:51.466 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:16:51.468 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:51.468 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:51.469 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885607036 - 200 221 application/octet-stream 4406.5868ms
2025-09-03 13:16:51.469 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885607065 - 200 221 application/octet-stream 4385.5429ms
2025-09-03 13:16:51.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611469 - null null
2025-09-03 13:16:51.475 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885611469 - null null
2025-09-03 13:16:51.477 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.478 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.479 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611469 - 204 null null 6.8966ms
2025-09-03 13:16:51.480 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885611469 - 204 null null 4.5964ms
2025-09-03 13:16:51.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885611469 - null null
2025-09-03 13:16:51.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611469 - null null
2025-09-03 13:16:51.486 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.488 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.488 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:51.489 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:16:51.492 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:16:51.493 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611469 - 200 44 application/octet-stream 8.6162ms
2025-09-03 13:16:51.495 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611493 - null null
2025-09-03 13:16:51.497 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611493 - 204 null null 2.3389ms
2025-09-03 13:16:51.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611493 - null null
2025-09-03 13:16:51.501 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:16:51.502 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:19.741 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 13:17:19.743 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:19.744 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:17:19.746 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"sent","timestamp":"1756885640","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","expiration_timestamp":"1756885640","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:17:19.747 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:17:19.748 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"sent","timestamp":"1756885640","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","expiration_timestamp":"1756885640","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:17:19.748 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:19.751 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.4821ms
2025-09-03 13:17:19.752 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:19.753 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.4689ms
2025-09-03 13:17:19.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:17:19.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:17:19.771 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 13:17:19.772 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:17:19.790 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:17:19.792 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==
2025-09-03 13:17:19.798 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:17:19.799 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA== (legacy)
2025-09-03 13:17:20.001 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:17:20.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:20.004 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:17:20.006 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"delivered","timestamp":"1756885641","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:17:20.007 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:17:20.007 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"delivered","timestamp":"1756885641","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:17:20.007 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:20.009 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:17:20.009 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9419ms
2025-09-03 13:17:20.012 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:17:20.012 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:20.017 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==
2025-09-03 13:17:20.018 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.1094ms
2025-09-03 13:17:20.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:17:20.024 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA== (legacy)
2025-09-03 13:17:23.841 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 577
2025-09-03 13:17:23.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:23.845 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:17:23.847 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"read","timestamp":"1756885644","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:17:23.849 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:17:23.849 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"read","timestamp":"1756885644","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:17:23.850 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:23.850 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:17:23.852 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6056ms
2025-09-03 13:17:23.855 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:17:23.855 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:23.863 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==
2025-09-03 13:17:23.864 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.5704ms
2025-09-03 13:17:23.866 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:17:23.870 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA== (legacy)
2025-09-03 13:17:30.588 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:30.588 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:30.589 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=f3x0Yhhwv8yP-UZLbuLonQ&_=1756885611469 - 499 null null 39106.8731ms
2025-09-03 13:17:30.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=_TRz50-l6YdFJ1J_RpOYjQ&_=1756885611493 - 499 null null 39090.2462ms
2025-09-03 13:17:30.708 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:17:30.711 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1553ms
2025-09-03 13:17:30.714 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:17:30.716 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.716 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:17:30.717 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:17:30.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:17:30.725 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:30.727 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9736ms
2025-09-03 13:17:30.728 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:17:30.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8769ms
2025-09-03 13:17:30.752 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:17:30.755 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.756 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:17:30.757 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:17:30.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:17:30.765 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:30.766 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.36ms
2025-09-03 13:17:30.768 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:17:30.769 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2111ms
2025-09-03 13:17:30.797 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:17:30.801 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:17:30.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:17:30.799 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:17:30.798 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:17:30.808 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.813 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.815 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.818 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.820 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 23.2311ms
2025-09-03 13:17:30.822 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:17:30.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 24.0118ms
2025-09-03 13:17:30.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 25.9889ms
2025-09-03 13:17:30.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 20.8426ms
2025-09-03 13:17:30.829 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:17:30.830 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:17:30.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:17:30.838 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:17:30.835 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:17:30.841 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.844 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:17:30.847 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.849 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.851 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.852 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.853 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:30.854 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:17:30.855 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:17:30.855 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.860 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:17:30.859 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:17:30.861 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ifypePCnCia6xD13YIt1dA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:17:30.861 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.857 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.864 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:17:30.858 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.5689ms
2025-09-03 13:17:30.867 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:17:30.869 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.869 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 34.281ms
2025-09-03 13:17:30.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:17:30.876 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:17:30.870 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 41.5944ms
2025-09-03 13:17:30.878 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:17:30.874 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:17:30.883 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:17:30.884 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:17:30.888 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:17:30.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 87.653ms
2025-09-03 13:17:30.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=ifypePCnCia6xD13YIt1dA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 28.5673ms
2025-09-03 13:17:30.891 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 28.5489ms
2025-09-03 13:17:30.892 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:17:30.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:17:30.899 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 32.8955ms
2025-09-03 13:17:30.900 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 62.0883ms
2025-09-03 13:17:30.901 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:17:30.903 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=9UcISUy8AIMkgG6vDXxJfg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:17:30.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 73.3556ms
2025-09-03 13:17:30.908 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:17:30.912 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:17:30.915 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.915 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:17:30.916 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.4621ms
2025-09-03 13:17:30.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=9UcISUy8AIMkgG6vDXxJfg&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 13.9006ms
2025-09-03 13:17:30.920 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:17:30.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:17:30.941 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.941 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.943 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.944 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 22.6465ms
2025-09-03 13:17:30.945 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.950 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 29.5951ms
2025-09-03 13:17:30.953 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:17:30.956 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.957 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.958 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UJlhoA3ugQW2xrQzhXQ8pw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:17:30.959 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.962 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.963 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 10.1028ms
2025-09-03 13:17:30.964 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:17:30.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=rLP_QBCeXmnvo85pM30Wbw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:17:30.968 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:17:30.971 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=UJlhoA3ugQW2xrQzhXQ8pw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 14.1055ms
2025-09-03 13:17:30.972 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:17:30.976 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:17:30.976 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:17:30.979 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.980 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=rLP_QBCeXmnvo85pM30Wbw&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 401 0 null 11.9518ms
2025-09-03 13:17:30.980 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.6944ms
2025-09-03 13:17:30.984 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:17:30.986 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:17:30.988 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.990 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.991 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.6034ms
2025-09-03 13:17:30.992 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.994 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:17:30.995 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:30.997 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:30.998 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 12.329ms
2025-09-03 13:17:30.999 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:31.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885650997 - null null
2025-09-03 13:17:31.002 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:17:31.005 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.006 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 11.2714ms
2025-09-03 13:17:31.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885650997 - 204 null null 4.9404ms
2025-09-03 13:17:31.009 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651005 - null null
2025-09-03 13:17:31.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885650997 - null null
2025-09-03 13:17:31.014 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.016 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.017 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651005 - 204 null null 7.2023ms
2025-09-03 13:17:31.017 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.020 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651005 - null null
2025-09-03 13:17:31.021 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:31.023 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.024 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA - null null
2025-09-03 13:17:31.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885650997 - 200 0 application/octet-stream 11.9668ms
2025-09-03 13:17:31.025 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.027 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651022 - null null
2025-09-03 13:17:31.030 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:31.031 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA - 204 null null 7.1302ms
2025-09-03 13:17:31.033 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - null null
2025-09-03 13:17:31.033 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.034 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651005 - 200 0 application/octet-stream 14.2697ms
2025-09-03 13:17:31.036 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA - text/plain;charset=UTF-8 32
2025-09-03 13:17:31.038 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651022 - 204 null null 9.916ms
2025-09-03 13:17:31.042 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651031 - null null
2025-09-03 13:17:31.044 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.044 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - 204 null null 11.3669ms
2025-09-03 13:17:31.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651022 - null null
2025-09-03 13:17:31.049 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.049 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.052 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - text/plain;charset=UTF-8 32
2025-09-03 13:17:31.054 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.054 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651031 - 204 null null 12.3789ms
2025-09-03 13:17:31.055 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:31.057 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.058 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651031 - null null
2025-09-03 13:17:31.061 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA - 200 0 text/plain 25.0061ms
2025-09-03 13:17:31.062 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.063 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:31.065 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.068 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:31.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651022 - 200 3 application/octet-stream 22.3344ms
2025-09-03 13:17:31.070 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.071 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - 200 0 text/plain 19.2876ms
2025-09-03 13:17:31.074 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651064 - null null
2025-09-03 13:17:31.075 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:31.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651031 - 200 3 application/octet-stream 20.0779ms
2025-09-03 13:17:31.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651064 - 204 null null 7.6028ms
2025-09-03 13:17:31.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651079 - null null
2025-09-03 13:17:31.086 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651064 - null null
2025-09-03 13:17:31.088 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.091 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.091 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651079 - 204 null null 7.3879ms
2025-09-03 13:17:31.092 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:31.094 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651079 - null null
2025-09-03 13:17:31.098 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:31.099 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:34.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:17:34.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:17:34.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:17:34.850 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:34.852 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:34.854 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:34.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 6.9153ms
2025-09-03 13:17:34.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.2556ms
2025-09-03 13:17:34.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.7171ms
2025-09-03 13:17:34.860 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:17:34.862 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:17:34.864 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:34.866 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:34.867 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:17:34.867 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:17:34.868 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:17:34.869 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:17:34.870 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:17:34.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:17:34.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:17:34.880 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:17:34.881 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:17:34.882 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.6533ms
2025-09-03 13:17:34.883 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.113ms
2025-09-03 13:17:34.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:17:34.884 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:17:34.885 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:17:34.887 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:34.888 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 25.534ms
2025-09-03 13:17:34.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 28.5543ms
2025-09-03 13:17:34.890 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:17:34.894 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:17:34.896 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:17:34.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:17:34.903 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:17:34.904 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.2848ms
2025-09-03 13:17:34.905 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:17:34.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 22.2508ms
2025-09-03 13:17:35.640 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - null null
2025-09-03 13:17:35.643 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.644 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - 204 null null 3.7577ms
2025-09-03 13:17:35.648 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - text/plain;charset=UTF-8 105
2025-09-03 13:17:35.650 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.651 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:35.652 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:35.653 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA - 200 0 text/plain 5.6815ms
2025-09-03 13:17:35.655 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:17:35.678 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T07:47:35.6529583Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:17:35.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:17:35.685 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:17:35.687 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:35.687 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:35.688 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885651064 - 200 221 application/octet-stream 4601.9027ms
2025-09-03 13:17:35.689 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885651079 - 200 221 application/octet-stream 4594.6041ms
2025-09-03 13:17:35.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655691 - null null
2025-09-03 13:17:35.694 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885655690 - null null
2025-09-03 13:17:35.695 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.697 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655691 - 204 null null 6.0132ms
2025-09-03 13:17:35.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885655690 - 204 null null 4.7234ms
2025-09-03 13:17:35.700 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655691 - null null
2025-09-03 13:17:35.703 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885655690 - null null
2025-09-03 13:17:35.705 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.706 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.707 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:35.708 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:35.708 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:17:35.711 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655691 - 200 44 application/octet-stream 10.4452ms
2025-09-03 13:17:35.713 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655709 - null null
2025-09-03 13:17:35.715 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655709 - 204 null null 2.3983ms
2025-09-03 13:17:35.718 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655709 - null null
2025-09-03 13:17:35.720 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:17:35.721 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:17:39.432 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 13:17:39.435 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:39.436 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:17:39.465 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 26.9086ms
2025-09-03 13:17:39.466 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:17:39.515 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 422
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 13:17:39.562 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 130.0768ms
2025-09-03 13:18:07.619 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 13:18:07.622 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:18:07.623 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:18:07.625 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0U4QzhFNUQzMjE5NjgyNTUwMTkwNEE1MTJGRTA0NDYA","timestamp":"1756885648","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:18:07.626 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:18:07.626 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0U4QzhFNUQzMjE5NjgyNTUwMTkwNEE1MTJGRTA0NDYA","timestamp":"1756885648","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:18:07.627 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:18:07.628 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:18:07.629 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6364ms
2025-09-03 13:18:07.632 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:18:07.632 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:18:07.636 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.6471ms
2025-09-03 13:18:07.638 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:18:08.532 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 577
2025-09-03 13:18:08.534 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:18:08.535 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:18:08.536 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"read","timestamp":"1756885644","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:18:08.537 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:18:08.538 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==","status":"read","timestamp":"1756885644","recipient_id":"918974005240","conversation":{"id":"4b2e2b9741cbc535c56a98d1bc54cc94","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:18:08.538 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:18:08.539 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:18:08.540 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9803ms
2025-09-03 13:18:08.543 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:18:08.543 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:18:08.545 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA==
2025-09-03 13:18:08.546 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.4082ms
2025-09-03 13:18:08.549 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:18:08.552 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUExNTU4NTk3N0Y5QTdENEZDAA== (legacy)
2025-09-03 13:19:05.713 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:19:05.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885655690 - 200 0 text/plain 90011.8473ms
2025-09-03 13:19:05.719 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885745717 - null null
2025-09-03 13:19:05.721 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:19:05.721 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885745717 - 204 null null 2.8843ms
2025-09-03 13:19:05.724 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885745717 - null null
2025-09-03 13:19:05.726 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:19:05.727 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:19:05.729 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:19:05.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885655709 - 200 0 text/plain 90012.7079ms
2025-09-03 13:19:05.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885745731 - null null
2025-09-03 13:19:05.735 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:19:05.736 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885745731 - 204 null null 2.5462ms
2025-09-03 13:19:05.738 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885745731 - null null
2025-09-03 13:19:05.740 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:19:05.740 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:20:35.740 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:20:35.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885745717 - 200 0 text/plain 90017.0749ms
2025-09-03 13:20:35.744 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:20:35.745 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885835743 - null null
2025-09-03 13:20:35.746 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885745731 - 200 0 text/plain 90007.9526ms
2025-09-03 13:20:35.748 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:20:35.754 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885835747 - null null
2025-09-03 13:20:35.755 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885835743 - 204 null null 9.7204ms
2025-09-03 13:20:35.757 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:20:35.760 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=hNfA0dEXc-6jdLaZ8QweeA&_=1756885835743 - null null
2025-09-03 13:20:35.761 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885835747 - 204 null null 6.2169ms
2025-09-03 13:20:35.762 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:20:35.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=dUd265TmtQWm0oVbyJl8PA&_=1756885835747 - null null
2025-09-03 13:20:35.765 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:20:35.767 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:20:35.769 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:21:40.688 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 13:21:40.724 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 13:21:40.735 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 13:21:41.486 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 13:21:42.048 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 13:21:42.074 +05:30 [INF] ClickLogWorker started
2025-09-03 13:21:42.328 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 13:21:42.329 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 13:21:42.334 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 13:21:42.336 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 13:21:42.337 +05:30 [INF] Hosting environment: Development
2025-09-03 13:21:42.338 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 13:21:42.357 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__cutoff_0='2025-08-27T07:51:40.8116252Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 13:21:43.127 +05:30 [INF] ClickLogWorker stopped
2025-09-03 13:21:44.286 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:21:44.460 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 180.7461ms
2025-09-03 13:21:44.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:21:44.501 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.996ms
2025-09-03 13:21:44.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:21:44.625 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.2948ms
2025-09-03 13:21:44.855 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:21:45.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 218.7228ms
2025-09-03 13:21:53.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:21:53.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:21:53.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:21:53.410 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 13:21:53.455 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:53.455 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:53.455 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:53.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 52.5835ms
2025-09-03 13:21:53.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 52.5834ms
2025-09-03 13:21:53.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 52.5835ms
2025-09-03 13:21:53.466 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:21:53.473 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:21:53.483 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:53.483 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:53.584 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:21:53.584 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:53.597 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:53.597 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:21:53.609 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 13:21:53.708 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:21:53.720 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:21:53.792 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:21:53.818 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-09-03 13:21:53.821 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 218.2367ms
2025-09-03 13:21:53.821 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:53.823 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:53.826 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:53.828 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:53.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 362.3582ms
2025-09-03 13:21:53.832 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-09-03 13:21:53.841 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:21:53.845 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:21:53.847 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 16.5113ms
2025-09-03 13:21:53.849 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:53.850 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 32.0883ms
2025-09-03 13:21:53.854 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:21:53.861 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 259.9264ms
2025-09-03 13:21:53.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:21:53.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 391.3589ms
2025-09-03 13:21:54.138 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:21:54.138 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:21:54.140 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:21:54.141 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:54.148 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:54.153 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:54.154 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 15.595ms
2025-09-03 13:21:54.155 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 16.4613ms
2025-09-03 13:21:54.156 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 15.7797ms
2025-09-03 13:21:54.165 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:21:54.170 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:21:54.173 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:54.176 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:54.177 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:21:54.178 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:54.180 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:21:54.182 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:54.193 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:21:54.195 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 13:21:54.198 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:21:54.201 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 16.5899ms
2025-09-03 13:21:54.202 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:21:54.204 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:21:54.207 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:21:54.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 42.3923ms
2025-09-03 13:21:54.209 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 21.52ms
2025-09-03 13:21:54.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-09-03 13:21:54.214 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:54.217 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:54.218 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 48.2941ms
2025-09-03 13:21:54.219 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:54.223 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:54.225 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-09-03 13:21:54.230 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:21:54.234 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:21:54.236 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.1761ms
2025-09-03 13:21:54.237 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:54.239 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 25.8351ms
2025-09-03 13:21:56.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:21:56.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:21:56.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:21:56.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:56.083 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:56.086 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:56.086 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 9.3561ms
2025-09-03 13:21:56.087 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 10.4697ms
2025-09-03 13:21:56.088 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 11.3323ms
2025-09-03 13:21:56.094 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:21:56.098 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:21:56.100 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:56.102 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:56.103 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:21:56.103 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:56.104 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:21:56.105 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:56.108 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:21:56.113 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:21:56.113 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:21:56.117 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:21:56.120 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.886ms
2025-09-03 13:21:56.120 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:21:56.121 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:56.122 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:21:56.123 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:56.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 26.2987ms
2025-09-03 13:21:56.126 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 19.3432ms
2025-09-03 13:21:56.126 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:56.130 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:21:56.130 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:56.131 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 37.1931ms
2025-09-03 13:21:56.133 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:21:56.139 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:21:56.142 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:21:56.143 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.523ms
2025-09-03 13:21:56.144 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:21:56.146 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 25.3533ms
2025-09-03 13:21:58.303 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:21:58.306 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5202ms
2025-09-03 13:21:58.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:21:58.313 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.318 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:21:58.322 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:21:58.336 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 13:21:58.367 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:21:58.371 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:21:58.380 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 56.5927ms
2025-09-03 13:21:58.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:21:58.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 72.7881ms
2025-09-03 13:21:58.396 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:21:58.399 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.402 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:21:58.403 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:21:58.409 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:21:58.413 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:21:58.415 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2099ms
2025-09-03 13:21:58.416 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:21:58.418 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.5998ms
2025-09-03 13:21:58.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:21:58.458 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:21:58.458 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:21:58.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:21:58.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:21:58.460 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.463 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.465 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.470 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 14.6248ms
2025-09-03 13:21:58.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 13.9267ms
2025-09-03 13:21:58.473 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 15.409ms
2025-09-03 13:21:58.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 16.9443ms
2025-09-03 13:21:58.477 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:21:58.478 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:21:58.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:21:58.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:21:58.489 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:21:58.490 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:21:58.496 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.499 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.503 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.506 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.511 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:21:58.511 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:21:58.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:21:58.515 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:21:58.514 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:21:58.522 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:21:58.523 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:21:58.523 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:21:58.528 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 49.723ms
2025-09-03 13:21:58.523 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:21:58.524 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:21:58.529 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Y_pMj9qSnRmaLD-w1kpeKQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:21:58.530 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:21:58.536 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 27.5172ms
2025-09-03 13:21:58.542 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.545 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:21:58.546 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:21:58.538 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 49.0019ms
2025-09-03 13:21:58.550 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:21:58.553 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 94.3919ms
2025-09-03 13:21:58.567 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:21:58.582 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:21:58.588 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=09UNF8Hppc7gzFmQ2QEZpA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:21:58.592 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:21:58.595 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:21:58.604 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:21:58.612 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 80.9788ms
2025-09-03 13:21:58.614 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:21:58.615 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 131.0958ms
2025-09-03 13:21:58.621 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:21:58.623 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:21:58.628 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 101.5081ms
2025-09-03 13:21:58.630 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:21:58.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 149.9572ms
2025-09-03 13:22:01.300 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:22:01.300 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:22:01.300 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:22:01.302 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:01.304 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:01.306 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:01.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.3216ms
2025-09-03 13:22:01.308 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.9868ms
2025-09-03 13:22:01.308 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.5449ms
2025-09-03 13:22:01.313 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:22:01.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:22:01.318 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:01.320 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:01.321 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:01.321 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:01.322 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:22:01.323 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:01.326 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:22:01.328 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:22:01.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:01.335 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:22:01.335 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:01.337 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.452ms
2025-09-03 13:22:01.337 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.7439ms
2025-09-03 13:22:01.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:22:01.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:01.339 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:01.342 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:01.342 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 29.0378ms
2025-09-03 13:22:01.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 27.5914ms
2025-09-03 13:22:01.344 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:01.350 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:01.352 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:22:01.355 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:01.359 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:01.360 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0704ms
2025-09-03 13:22:01.361 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:01.362 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 24.1164ms
2025-09-03 13:22:02.109 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:22:02.174 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T07:52:02.1041179Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:22:02.187 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:22:02.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:22:08.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:22:08.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:22:08.518 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:22:08.520 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:08.523 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:08.525 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:08.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.2834ms
2025-09-03 13:22:08.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 204 null null 8.8284ms
2025-09-03 13:22:08.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 204 null null 9.3257ms
2025-09-03 13:22:08.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:22:08.535 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:22:08.537 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:08.539 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:08.540 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:08.540 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:08.541 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:08.542 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:22:08.544 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:22:08.548 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:22:08.550 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:08.553 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:22:08.555 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:08.555 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.3659ms
2025-09-03 13:22:08.557 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.9487ms
2025-09-03 13:22:08.557 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - null null
2025-09-03 13:22:08.558 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:08.559 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:08.561 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:08.561 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 26.7274ms
2025-09-03 13:22:08.562 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 30.4623ms
2025-09-03 13:22:08.563 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:08.569 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:08.571 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="56c274a5-365e-436d-a078-77d72139367f"
2025-09-03 13:22:08.581 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='56c274a5-365e-436d-a078-77d72139367f'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:08.585 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:08.586 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 15.3667ms
2025-09-03 13:22:08.587 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:08.588 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/56c274a5-365e-436d-a078-77d72139367f - 200 null application/json; charset=utf-8 30.7185ms
2025-09-03 13:22:09.333 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='56c274a5-365e-436d-a078-77d72139367f', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:22:09.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='be3fdbf6-22da-49f8-b56a-1241ce132d79', @p0='2025-09-03T07:52:09.3309511Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:22:09.342 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:22:09.347 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:22:10.164 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:22:10.164 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:22:10.164 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:22:10.167 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:10.169 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:10.171 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:10.172 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.3801ms
2025-09-03 13:22:10.172 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.9918ms
2025-09-03 13:22:10.173 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 8.5484ms
2025-09-03 13:22:10.178 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:22:10.180 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:22:10.182 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:10.185 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:10.186 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:10.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:10.188 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:10.189 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:22:10.191 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:22:10.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:22:10.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:10.201 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:22:10.202 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:10.203 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.6407ms
2025-09-03 13:22:10.204 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.7721ms
2025-09-03 13:22:10.204 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:22:10.205 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:10.206 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:10.208 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:10.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 28.4388ms
2025-09-03 13:22:10.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 31.7208ms
2025-09-03 13:22:10.210 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:10.216 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:10.218 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:22:10.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:10.224 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:10.226 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.1233ms
2025-09-03 13:22:10.227 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:10.228 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 23.5657ms
2025-09-03 13:22:10.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:22:10.990 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T07:52:10.9661595Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:22:10.994 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:22:10.998 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:22:11.461 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-09-03 13:22:11.461 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-09-03 13:22:11.461 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-09-03 13:22:11.463 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:11.466 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:11.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:11.469 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 8.4306ms
2025-09-03 13:22:11.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 9.0299ms
2025-09-03 13:22:11.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 9.8178ms
2025-09-03 13:22:11.476 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-09-03 13:22:11.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-09-03 13:22:11.481 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:11.484 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:11.484 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:11.485 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:11.486 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:11.486 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:22:11.488 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac"
2025-09-03 13:22:11.492 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:22:11.495 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:11.498 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:22:11.500 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:11.501 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.6745ms
2025-09-03 13:22:11.502 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.5783ms
2025-09-03 13:22:11.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-09-03 13:22:11.504 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:22:11.505 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:11.507 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:22:11.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 null application/json; charset=utf-8 29.208ms
2025-09-03 13:22:11.509 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 null application/json; charset=utf-8 32.5659ms
2025-09-03 13:22:11.510 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:11.516 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:22:11.518 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac"
2025-09-03 13:22:11.522 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:22:11.525 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:22:11.526 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.4483ms
2025-09-03 13:22:11.528 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:22:11.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 null application/json; charset=utf-8 25.3931ms
2025-09-03 13:22:12.267 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__contactId_0='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:22:12.299 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='267da212-c0d1-4ec3-af2f-77026db153e2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @p3='2025-09-03T07:52:12.2644126Z' (DbType = DateTime), @p4='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ContactReads" ("Id", "BusinessId", "ContactId", "LastReadAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-03 13:22:12.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:22:12.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:23:36.377 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:23:36.377 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:23:36.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Y_pMj9qSnRmaLD-w1kpeKQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 101 null null 97850.4978ms
2025-09-03 13:23:36.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=09UNF8Hppc7gzFmQ2QEZpA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 101 null null 97791.8261ms
2025-09-03 13:23:36.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:23:36.854 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:36.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5937ms
2025-09-03 13:23:36.859 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:23:36.862 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:36.864 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:23:36.866 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:23:36.873 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:23:36.878 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:23:36.880 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.2721ms
2025-09-03 13:23:36.882 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:23:36.883 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.6824ms
2025-09-03 13:23:36.974 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:23:36.978 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:36.979 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:23:36.981 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:23:36.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:23:36.998 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:23:37.001 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.4532ms
2025-09-03 13:23:37.004 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:23:37.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.8656ms
2025-09-03 13:23:37.062 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:23:37.062 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-09-03 13:23:37.063 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:23:37.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:23:37.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:23:37.072 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.075 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.077 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.079 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.082 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.083 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 21.0342ms
2025-09-03 13:23:37.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 21.6315ms
2025-09-03 13:23:37.086 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 21.5364ms
2025-09-03 13:23:37.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 21.3989ms
2025-09-03 13:23:37.087 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:23:37.090 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:23:37.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:23:37.096 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:23:37.099 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null 0
2025-09-03 13:23:37.100 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:23:37.103 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.105 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.107 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:23:37.110 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.114 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:23:37.117 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:23:37.115 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:23:37.119 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:23:37.121 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:23:37.122 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:23:37.131 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:23:37.141 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:23:37.123 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:23:37.142 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=u_iCLvgVjCAyBUvfCkMDpA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:23:37.147 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:23:37.142 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 43.1344ms
2025-09-03 13:23:37.145 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 200 316 application/json 48.9459ms
2025-09-03 13:23:37.131 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:23:37.126 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:23:37.150 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.153 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:23:37.162 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:23:37.162 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 50.7353ms
2025-09-03 13:23:37.163 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:23:37.165 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:23:37.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:23:37.173 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 33.8314ms
2025-09-03 13:23:37.175 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 110.7222ms
2025-09-03 13:23:37.168 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:23:37.177 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:23:37.182 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 53.6893ms
2025-09-03 13:23:37.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 89.7247ms
2025-09-03 13:23:37.184 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Xosu7x7PdI2zw-uPppvNYQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - null null
2025-09-03 13:23:37.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:23:37.194 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:37.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 105.0592ms
2025-09-03 13:23:37.197 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:23:43.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:23:43.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:23:43.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:23:43.963 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:43.965 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:43.967 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:43.968 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 7.7118ms
2025-09-03 13:23:43.969 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.4048ms
2025-09-03 13:23:43.970 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 8.8971ms
2025-09-03 13:23:43.975 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:23:43.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:23:43.980 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:43.981 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:43.983 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:23:43.983 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:23:43.984 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:23:43.985 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:23:43.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:23:43.990 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:23:43.993 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:23:43.995 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:23:43.996 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.7184ms
2025-09-03 13:23:43.999 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:23:43.999 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:23:44.001 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.4614ms
2025-09-03 13:23:44.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:23:44.002 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 26.5713ms
2025-09-03 13:23:44.003 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:23:44.005 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:23:44.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 31.6071ms
2025-09-03 13:23:44.010 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:23:44.013 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:23:44.015 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:23:44.019 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:23:44.022 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:23:44.023 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.036ms
2025-09-03 13:23:44.025 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:23:44.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 24.2013ms
2025-09-03 13:23:44.754 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:23:44.776 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T07:53:44.7530488Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:23:44.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:23:44.784 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:23:48.405 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-03 13:23:48.408 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:23:48.411 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:23:48.424 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMEUwOUQ2QTAyNjAxOTI0NkFCQ0NENzQzNjc1NzYwNjIA","timestamp":"1756574413","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 13:23:48.427 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:23:48.429 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:23:48.431 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 18.881ms
2025-09-03 13:23:48.433 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:23:48.434 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.8778ms
2025-09-03 13:23:48.564 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMEUwOUQ2QTAyNjAxOTI0NkFCQ0NENzQzNjc1NzYwNjIA","timestamp":"1756574413","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 13:23:48.566 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 13:23:48.572 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 13:23:48.573 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMEUwOUQ2QTAyNjAxOTI0NkFCQ0NENzQzNjc1NzYwNjIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA==, Text: Contact Sales
2025-09-03 13:23:48.581 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 13:23:48.595 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 13:23:48.600 +05:30 [WRN] ❌ No flow context on CampaignSendLog for WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA==
2025-09-03 13:23:49.514 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-03 13:23:49.518 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:23:49.519 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:23:49.522 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTlEOTE1N0U1OUUwNUUzQ0QwAA==","status":"read","timestamp":"1756733003","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:23:49.523 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:23:49.524 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:23:49.526 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTlEOTE1N0U1OUUwNUUzQ0QwAA==","status":"read","timestamp":"1756733003","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:23:49.526 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6693ms
2025-09-03 13:23:49.528 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:23:49.529 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.9563ms
2025-09-03 13:23:49.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:23:49.548 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:23:49.550 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 13:23:49.552 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:23:49.563 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTlEOTE1N0U1OUUwNUUzQ0QwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:23:49.565 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTlEOTE1N0U1OUUwNUUzQ0QwAA==
2025-09-03 13:23:49.570 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTlEOTE1N0U1OUUwNUUzQ0QwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:23:49.591 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e86257a7-8d88-4108-8746-3f77fe842393', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:23:49.594 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTlEOTE1N0U1OUUwNUUzQ0QwAA== → Read
2025-09-03 13:29:59.260 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:29:59.262 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:29:59.262 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=u_iCLvgVjCAyBUvfCkMDpA&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 101 null null 382119.8196ms
2025-09-03 13:29:59.263 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?id=Xosu7x7PdI2zw-uPppvNYQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODg5MTcyLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.CWoekKlkxUajBbi_f52gWPIcUT04sF5jKJ7hM3Xqssk - 101 null null 382079.0215ms
2025-09-03 13:30:55.187 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:30:55.192 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.7211ms
2025-09-03 13:30:55.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:30:55.200 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.201 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:30:55.202 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:30:55.261 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:30:55.263 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:30:55.265 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 61.3728ms
2025-09-03 13:30:55.266 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:30:55.267 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 68.8746ms
2025-09-03 13:30:55.273 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:30:55.275 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:30:55.277 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:30:55.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:30:55.283 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:30:55.284 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7199ms
2025-09-03 13:30:55.285 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:30:55.286 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6871ms
2025-09-03 13:30:55.354 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:30:55.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:30:55.356 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:30:55.360 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.362 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.364 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.365 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 10.702ms
2025-09-03 13:30:55.365 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 9.4538ms
2025-09-03 13:30:55.366 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:30:55.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:30:55.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:30:55.372 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:30:55.374 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.375 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:30:55.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:30:55.381 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:30:55.379 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:30:55.382 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:30:55.382 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:30:55.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:30:55.384 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:30:55.389 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:30:55.392 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.5284ms
2025-09-03 13:30:55.393 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:30:55.395 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:30:55.403 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.1506ms
2025-09-03 13:30:55.403 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:30:55.407 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 21.5117ms
2025-09-03 13:30:55.408 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:30:55.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 40.3558ms
2025-09-03 13:30:55.457 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:30:55.460 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:30:55.461 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:30:55.463 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 74.892ms
2025-09-03 13:30:55.464 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:30:55.466 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 94.6657ms
2025-09-03 13:31:01.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:31:01.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:31:01.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:31:01.321 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:31:01.323 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:31:01.325 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:31:01.326 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.3442ms
2025-09-03 13:31:01.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8395ms
2025-09-03 13:31:01.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.372ms
2025-09-03 13:31:01.332 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:31:01.334 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:31:01.336 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:31:01.338 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:31:01.339 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:31:01.339 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:31:01.340 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:31:01.341 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:31:01.344 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:31:01.346 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:31:01.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:31:01.353 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:31:01.353 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:31:01.354 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.2774ms
2025-09-03 13:31:01.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:31:01.355 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.7388ms
2025-09-03 13:31:01.356 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:31:01.358 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:31:01.358 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:31:01.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.1549ms
2025-09-03 13:31:01.360 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:31:01.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.5919ms
2025-09-03 13:31:01.364 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:31:01.367 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:31:01.371 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:31:01.373 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:31:01.375 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.3453ms
2025-09-03 13:31:01.376 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:31:01.377 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.2559ms
2025-09-03 13:31:46.949 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:31:46.960 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 11.0926ms
2025-09-03 13:31:47.008 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:31:47.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:31:47.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.5032ms
2025-09-03 13:31:47.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.6918ms
2025-09-03 13:31:47.361 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:31:47.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.6927ms
2025-09-03 13:32:06.791 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 13:32:06.824 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 13:32:06.836 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 13:32:07.583 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 13:32:08.072 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 13:32:08.090 +05:30 [INF] ClickLogWorker started
2025-09-03 13:32:08.275 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 13:32:08.276 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 13:32:08.280 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 13:32:08.281 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 13:32:08.281 +05:30 [INF] Hosting environment: Development
2025-09-03 13:32:08.282 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 13:32:08.293 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__cutoff_0='2025-08-27T08:02:06.9220823Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 13:32:09.132 +05:30 [INF] ClickLogWorker stopped
2025-09-03 13:32:10.352 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:32:10.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 139.28ms
2025-09-03 13:32:10.509 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:32:10.516 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.6549ms
2025-09-03 13:32:10.568 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:32:10.600 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.5899ms
2025-09-03 13:32:10.800 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:32:10.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 190.6979ms
2025-09-03 13:32:20.042 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:20.047 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 13:32:20.088 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 52.7498ms
2025-09-03 13:32:20.105 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:20.118 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.227 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:20.242 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:20.349 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 13:32:20.406 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:20.414 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:20.431 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 185.0049ms
2025-09-03 13:32:20.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:20.437 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 331.6062ms
2025-09-03 13:32:20.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:20.443 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:20.448 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:20.456 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:20.459 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:20.461 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.2541ms
2025-09-03 13:32:20.463 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:20.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.326ms
2025-09-03 13:32:20.505 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:20.507 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:20.507 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:20.509 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.513 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.515 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.0715ms
2025-09-03 13:32:20.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 10.4259ms
2025-09-03 13:32:20.522 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:20.522 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:20.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:20.528 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:20.528 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.532 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:20.534 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:20.535 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:20.541 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:20.544 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:20.544 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:20.545 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:20.551 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9655ms
2025-09-03 13:32:20.552 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:32:20.553 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:20.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.7002ms
2025-09-03 13:32:20.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:32:20.599 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:32:20.631 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:32:20.670 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:20.675 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 126.25ms
2025-09-03 13:32:20.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:20.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 156.2786ms
2025-09-03 13:32:20.715 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:32:20.716 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:20.731 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 184.2659ms
2025-09-03 13:32:20.733 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:20.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 208.9044ms
2025-09-03 13:32:22.581 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:22.581 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:22.581 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:22.585 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:22.587 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:22.590 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:22.590 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.0268ms
2025-09-03 13:32:22.591 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.5628ms
2025-09-03 13:32:22.592 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 10.3512ms
2025-09-03 13:32:22.597 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:22.600 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:22.602 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:22.604 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:22.605 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:22.608 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:32:22.610 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:22.612 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:22.616 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:32:22.634 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:32:22.635 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:32:22.640 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:32:22.644 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 33.122ms
2025-09-03 13:32:22.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:22.646 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:22.648 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:22.649 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 51.5319ms
2025-09-03 13:32:22.650 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:22.653 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:22.656 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:32:22.661 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:32:22.664 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:32:22.665 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.9648ms
2025-09-03 13:32:22.667 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:22.668 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.8149ms
2025-09-03 13:32:22.698 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:22.704 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 89.9601ms
2025-09-03 13:32:22.705 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:32:22.706 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 106.1174ms
2025-09-03 13:32:34.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:34.854 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3443ms
2025-09-03 13:32:34.857 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:34.859 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.860 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:34.861 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:34.865 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:34.869 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:34.870 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8879ms
2025-09-03 13:32:34.872 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:34.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0964ms
2025-09-03 13:32:34.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:34.900 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.901 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:34.902 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:34.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:34.910 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:34.911 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1503ms
2025-09-03 13:32:34.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:34.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0372ms
2025-09-03 13:32:34.941 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:34.941 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:34.941 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:34.943 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.945 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.947 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.948 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 6.7333ms
2025-09-03 13:32:34.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:34.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 7.7944ms
2025-09-03 13:32:34.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:34.952 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:34.955 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:34.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:34.956 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.962 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:34.963 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:34.964 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:34.964 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:34.965 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7468ms
2025-09-03 13:32:34.966 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:34.967 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:34.968 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:34.969 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:32:34.971 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.0045ms
2025-09-03 13:32:34.976 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:32:34.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:32:34.982 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:32:34.983 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:34.985 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:32:34.985 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 16.3853ms
2025-09-03 13:32:34.988 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:34.989 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 37.4764ms
2025-09-03 13:32:34.991 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:34.993 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 22.3715ms
2025-09-03 13:32:34.994 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:34.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 40.3108ms
2025-09-03 13:32:35.805 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:35.807 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:35.809 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:35.809 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:35.814 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:35.818 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:35.819 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9453ms
2025-09-03 13:32:35.820 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:35.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.2113ms
2025-09-03 13:32:35.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:35.830 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:35.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:35.831 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:35.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:35.840 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:35.841 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6607ms
2025-09-03 13:32:35.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:35.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5776ms
2025-09-03 13:32:35.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:35.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:35.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:35.887 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:35.889 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:35.891 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:35.892 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:35.893 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:35.894 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:35.895 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:35.895 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:35.897 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:35.901 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:32:35.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:35.907 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:32:35.913 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:35.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:32:35.923 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 24.6845ms
2025-09-03 13:32:35.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:35.926 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:35.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 44.7113ms
2025-09-03 13:32:35.929 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 24.8361ms
2025-09-03 13:32:35.934 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:35.935 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 51.721ms
2025-09-03 13:32:35.974 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:32:35.976 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:32:35.978 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:35.979 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 78.8076ms
2025-09-03 13:32:35.980 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:35.981 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 97.9504ms
2025-09-03 13:32:36.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:36.894 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:36.895 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:36.896 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:36.900 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:36.905 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:36.906 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8169ms
2025-09-03 13:32:36.907 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:36.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.5538ms
2025-09-03 13:32:36.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:36.934 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:36.936 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:36.937 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:36.943 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:36.946 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:36.947 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4142ms
2025-09-03 13:32:36.949 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:36.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7929ms
2025-09-03 13:32:36.981 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:36.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:36.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:36.986 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:36.988 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:36.990 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:36.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:36.992 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:36.992 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:36.993 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:36.994 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:36.995 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:37.000 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:37.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:32:37.008 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:37.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:32:37.001 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:32:37.012 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.1202ms
2025-09-03 13:32:37.015 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:37.016 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:32:37.020 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 16.7622ms
2025-09-03 13:32:37.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.488ms
2025-09-03 13:32:37.023 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:32:37.024 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:37.027 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:37.028 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 46.1755ms
2025-09-03 13:32:37.029 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 30.4381ms
2025-09-03 13:32:37.033 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:37.034 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 52.6113ms
2025-09-03 13:32:37.662 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:37.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:37.666 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.667 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:37.672 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:37.676 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:37.678 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4442ms
2025-09-03 13:32:37.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.681 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.8003ms
2025-09-03 13:32:37.707 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:37.712 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:37.714 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.715 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:37.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:37.725 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:37.726 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7408ms
2025-09-03 13:32:37.728 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9805ms
2025-09-03 13:32:37.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:32:37.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:32:37.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:32:37.756 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:37.758 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:37.760 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:37.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:37.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.763 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:37.763 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:37.764 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:32:37.765 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:37.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:32:37.775 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:32:37.774 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:32:37.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:32:37.783 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:32:37.785 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:37.789 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:32:37.791 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:32:37.792 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.3054ms
2025-09-03 13:32:37.793 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 26.3274ms
2025-09-03 13:32:37.795 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:37.796 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:32:37.797 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:32:37.800 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 26.1892ms
2025-09-03 13:32:37.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.4032ms
2025-09-03 13:32:37.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 48.4869ms
2025-09-03 13:32:37.803 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:32:37.810 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 56.3396ms
2025-09-03 13:32:40.657 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:40.658 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:40.658 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:40.660 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:40.662 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:40.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:40.665 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8472ms
2025-09-03 13:32:40.666 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8952ms
2025-09-03 13:32:40.666 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.2858ms
2025-09-03 13:32:40.671 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:40.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:40.676 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:40.678 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:40.679 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:32:40.679 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:40.680 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:32:40.681 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:40.684 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:32:40.686 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:32:40.690 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:32:40.693 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:32:40.693 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:32:40.695 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.1672ms
2025-09-03 13:32:40.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:32:40.696 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.6851ms
2025-09-03 13:32:40.696 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:40.698 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:32:40.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:32:40.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 26.5154ms
2025-09-03 13:32:40.701 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:40.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 30.5122ms
2025-09-03 13:32:40.705 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:32:40.709 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:32:40.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:32:40.715 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:32:40.716 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.7746ms
2025-09-03 13:32:40.717 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:32:40.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 23.2469ms
2025-09-03 13:33:17.112 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:33:17.120 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 7.2168ms
2025-09-03 13:33:17.155 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:33:17.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:33:17.160 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.7248ms
2025-09-03 13:33:17.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.7618ms
2025-09-03 13:33:17.379 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:33:17.435 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.1236ms
2025-09-03 13:33:33.874 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:33.877 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:33.878 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7625ms
2025-09-03 13:33:33.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:33.884 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:33.885 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:33.887 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:33:33.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:33:33.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:33.896 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9105ms
2025-09-03 13:33:33.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:33.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2769ms
2025-09-03 13:33:33.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:33.971 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:33.973 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:33.974 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:33:33.983 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:33:33.990 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:33.992 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.2289ms
2025-09-03 13:33:33.994 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:33.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.6618ms
2025-09-03 13:33:39.924 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 13:33:39.927 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:39.928 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4746ms
2025-09-03 13:33:39.931 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 13:33:39.935 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:39.936 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 13:33:39.940 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 13:33:39.958 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 13:33:39.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 13:33:40.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 13:33:40.125 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 13:33:40.134 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 13:33:40.144 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 13:33:40.145 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 13:33:40.148 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:40.150 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 208.8999ms
2025-09-03 13:33:40.151 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 13:33:40.152 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 221.3696ms
2025-09-03 13:33:40.155 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:40.158 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:40.159 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8189ms
2025-09-03 13:33:40.162 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:40.164 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:40.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:40.167 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:33:40.171 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:33:40.175 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:40.176 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8668ms
2025-09-03 13:33:40.177 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:40.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8262ms
2025-09-03 13:33:40.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:40.201 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:40.202 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:40.203 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:33:40.208 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:33:40.212 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:40.214 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1165ms
2025-09-03 13:33:40.215 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:40.217 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.048ms
2025-09-03 13:33:40.301 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:33:40.304 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:40.305 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:40.306 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:33:40.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:33:40.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:40.315 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5537ms
2025-09-03 13:33:40.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:33:40.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4443ms
2025-09-03 13:33:46.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:33:46.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:33:46.484 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:46.486 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:46.487 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 5.1594ms
2025-09-03 13:33:46.488 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 5.5468ms
2025-09-03 13:33:46.490 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:33:46.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:33:46.495 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:46.497 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:46.498 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:33:46.498 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:33:46.499 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:33:46.500 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:33:46.503 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:33:46.504 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:33:46.511 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:33:46.514 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:33:46.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:33:46.517 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:33:46.518 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 16.689ms
2025-09-03 13:33:46.518 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:33:46.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:33:46.520 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 16.6584ms
2025-09-03 13:33:46.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 30.7903ms
2025-09-03 13:33:46.522 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:33:46.525 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 32.3484ms
2025-09-03 13:33:49.268 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:33:49.269 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:33:49.269 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:33:49.271 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:49.273 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:49.275 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:49.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.432ms
2025-09-03 13:33:49.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8027ms
2025-09-03 13:33:49.277 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.3582ms
2025-09-03 13:33:49.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:33:49.285 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:33:49.287 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:49.289 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:49.290 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:33:49.291 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:33:49.291 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:33:49.292 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:33:49.294 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:33:49.300 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:33:49.300 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:33:49.305 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:33:49.306 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:33:49.307 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.7379ms
2025-09-03 13:33:49.308 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.0208ms
2025-09-03 13:33:49.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:33:49.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:33:49.310 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:33:49.312 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:33:49.313 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.0685ms
2025-09-03 13:33:49.314 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 31.5181ms
2025-09-03 13:33:49.314 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:33:49.320 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:33:49.322 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:33:49.326 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:33:49.329 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:33:49.330 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.3744ms
2025-09-03 13:33:49.331 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:33:49.332 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 23.6855ms
2025-09-03 13:36:43.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:36:43.667 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.668 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7269ms
2025-09-03 13:36:43.677 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:36:43.681 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.682 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:36:43.684 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:36:43.707 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:36:43.712 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:36:43.714 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 27.2972ms
2025-09-03 13:36:43.716 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:36:43.717 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.9288ms
2025-09-03 13:36:43.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:36:43.798 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.801 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:36:43.804 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:36:43.811 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:36:43.835 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:36:43.837 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 29.7346ms
2025-09-03 13:36:43.838 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:36:43.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 46.8593ms
2025-09-03 13:36:43.896 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:36:43.897 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:36:43.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:36:43.906 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.910 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.913 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 18.7043ms
2025-09-03 13:36:43.916 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 19.1759ms
2025-09-03 13:36:43.918 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:36:43.927 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:36:43.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:36:43.933 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:36:43.936 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.939 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:36:43.942 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:36:43.944 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:36:43.949 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:36:43.952 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:36:43.955 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:36:43.956 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:36:43.961 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:36:43.963 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 21.6269ms
2025-09-03 13:36:43.967 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:36:43.972 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:36:43.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:36:43.972 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:36:43.980 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:36:43.982 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:36:43.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 86.8881ms
2025-09-03 13:36:43.985 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 26.5435ms
2025-09-03 13:36:43.986 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:36:43.991 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:36:43.993 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 26.0891ms
2025-09-03 13:36:43.994 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 66.8486ms
2025-09-03 13:36:43.995 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:36:44.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 69.4567ms
2025-09-03 13:41:05.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:41:05.205 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 3.4122ms
2025-09-03 13:41:05.208 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:41:05.210 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:41:05.211 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.214 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.215 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:41:05.215 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 5.1384ms
2025-09-03 13:41:05.217 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:41:05.224 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:41:05.224 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.225 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 17.01ms
2025-09-03 13:41:05.226 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:41:05.229 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:41:05.233 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:41:05.229 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:41:05.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=GdSf-P-Of1SGJyA7-L4Ysg - null null
2025-09-03 13:41:05.236 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.236 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 19.0291ms
2025-09-03 13:41:05.238 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.240 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 10.9ms
2025-09-03 13:41:05.243 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 14.9042ms
2025-09-03 13:41:05.244 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:41:05.246 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:41:05.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:41:05.250 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.252 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:41:05.253 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:41:05.253 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:41:05.254 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:41:05.259 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:41:05.274 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=NQPIUrbkkGbBJOAy5kiSNg - null null
2025-09-03 13:41:05.277 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:05.278 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:41:05.324 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:41:05.329 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:41:05.331 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:41:05.332 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 76.519ms
2025-09-03 13:41:05.333 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:41:05.333 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 87.5ms
2025-09-03 13:41:05.343 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:41:05.345 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:41:05.346 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:41:05.347 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 89.0162ms
2025-09-03 13:41:05.348 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:41:05.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 100.7268ms
2025-09-03 13:41:52.463 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:41:52.464 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:41:52.464 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:41:52.470 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:52.472 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:52.474 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:52.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 11.3935ms
2025-09-03 13:41:52.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 11.138ms
2025-09-03 13:41:52.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 11.421ms
2025-09-03 13:41:52.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:41:52.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:41:52.484 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:52.485 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:52.486 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:41:52.487 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:41:52.488 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:41:52.489 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:41:52.490 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:41:52.495 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:41:52.496 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:41:52.499 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:41:52.500 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:41:52.500 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 9.4457ms
2025-09-03 13:41:52.501 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.3829ms
2025-09-03 13:41:52.502 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:41:52.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:41:52.503 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:41:52.504 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.2604ms
2025-09-03 13:41:52.506 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:41:52.507 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.0479ms
2025-09-03 13:41:52.509 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:41:52.512 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:41:52.514 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:41:52.518 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:41:52.520 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:41:52.521 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.7913ms
2025-09-03 13:41:52.522 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:41:52.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 20.857ms
2025-09-03 13:41:53.261 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:41:53.313 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:11:53.2568827Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:41:53.327 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:41:53.333 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:42:03.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__dto_ContactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__dto_ContactId_1
LIMIT 1
2025-09-03 13:42:03.726 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-09-03 13:42:03.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-09-03 13:42:03.734 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:42:03.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 13:42:03.783 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:42:03.785 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:42:05.163 +05:30 [INF] Received HTTP response headers after 1375.0641ms - 200
2025-09-03 13:42:05.164 +05:30 [INF] End processing HTTP request after 1381.9254ms - 200
2025-09-03 13:42:05.246 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='7fe61e37-083a-4ef2-875e-c2d593447d49', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p7='2025-09-03T08:12:05.1878197Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='Hi' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='Hi', @p18=NULL (DbType = Guid), @p19='2025-09-03T08:12:05.1878574Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 13:42:06.595 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 13:42:06.598 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:06.600 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:06.606 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==","status":"sent","timestamp":"1756887127","recipient_id":"918974005240","conversation":{"id":"e31234c3ebff57ce682f7006e10c59b7","expiration_timestamp":"1756887127","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:42:06.608 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:06.610 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:06.611 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.6823ms
2025-09-03 13:42:06.612 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:06.613 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.4405ms
2025-09-03 13:42:06.636 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:42:06.639 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:06.639 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:06.641 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==","status":"delivered","timestamp":"1756887128","recipient_id":"918974005240","conversation":{"id":"e31234c3ebff57ce682f7006e10c59b7","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:42:06.643 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:06.644 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:06.645 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.4599ms
2025-09-03 13:42:06.646 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:06.647 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10.9814ms
2025-09-03 13:42:06.703 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==","status":"sent","timestamp":"1756887127","recipient_id":"918974005240","conversation":{"id":"e31234c3ebff57ce682f7006e10c59b7","expiration_timestamp":"1756887127","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:42:06.718 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:42:06.722 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:42:06.723 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 13:42:06.725 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:42:06.736 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:42:06.738 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==
2025-09-03 13:42:06.743 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:42:06.745 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA== (legacy)
2025-09-03 13:42:06.748 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==","status":"delivered","timestamp":"1756887128","recipient_id":"918974005240","conversation":{"id":"e31234c3ebff57ce682f7006e10c59b7","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:42:06.750 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:42:06.753 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:42:06.755 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==
2025-09-03 13:42:06.756 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:42:06.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='7fe61e37-083a-4ef2-875e-c2d593447d49', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:42:06.763 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA== → Delivered
2025-09-03 13:42:08.524 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-03 13:42:08.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:08.527 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:08.530 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==","status":"read","timestamp":"1756887129","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:42:08.531 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:08.531 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:08.532 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2036ms
2025-09-03 13:42:08.534 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:08.534 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10.5616ms
2025-09-03 13:42:08.537 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==","status":"read","timestamp":"1756887129","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:42:08.538 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:42:08.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:42:08.542 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA==
2025-09-03 13:42:08.544 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:42:08.546 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='7fe61e37-083a-4ef2-875e-c2d593447d49', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:42:08.548 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTMwRTYxODNDRjFBOTYzODlDAA== → Read
2025-09-03 13:42:17.359 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-09-03 13:42:17.362 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:17.363 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:17.364 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDNCN0U2NjYwRUM3NzQ4MTUzNAA=","timestamp":"1756887138","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:17.365 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:17.365 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDNCN0U2NjYwRUM3NzQ4MTUzNAA=","timestamp":"1756887138","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:17.366 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:17.366 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:42:17.367 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.4333ms
2025-09-03 13:42:17.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:17.369 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10.2781ms
2025-09-03 13:42:17.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:42:17.382 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:42:19.162 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-09-03 13:42:19.164 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:19.165 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:19.167 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMEQyQUMzNDQ5OTA3MDA3RjRCMwA=","timestamp":"1756887140","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:19.168 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:19.168 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMEQyQUMzNDQ5OTA3MDA3RjRCMwA=","timestamp":"1756887140","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:19.169 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:19.170 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:42:19.171 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9464ms
2025-09-03 13:42:19.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:19.174 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:42:19.174 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.9835ms
2025-09-03 13:42:19.176 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:42:21.274 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-09-03 13:42:21.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:21.276 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:21.278 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDIwQTU0Mjg3RjkzRDAzOTJFRAA=","timestamp":"1756887142","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:21.279 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:21.279 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDIwQTU0Mjg3RjkzRDAzOTJFRAA=","timestamp":"1756887142","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:21.280 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:21.280 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:42:21.281 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8471ms
2025-09-03 13:42:21.283 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:21.284 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10.2836ms
2025-09-03 13:42:21.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:42:21.289 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:42:24.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:42:24.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:42:24.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:42:24.494 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:24.495 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:24.497 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:24.498 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 6.254ms
2025-09-03 13:42:24.498 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 6.6341ms
2025-09-03 13:42:24.499 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 204 null null 7.0394ms
2025-09-03 13:42:24.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:42:24.505 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:42:24.506 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:24.508 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:24.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:42:24.509 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:42:24.510 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:42:24.510 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:42:24.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:42:24.515 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:42:24.517 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:42:24.519 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:42:24.519 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.8364ms
2025-09-03 13:42:24.521 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:42:24.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:42:24.523 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.8638ms
2025-09-03 13:42:24.523 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - null null
2025-09-03 13:42:24.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 20.4462ms
2025-09-03 13:42:24.524 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:42:24.526 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:24.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 23.5775ms
2025-09-03 13:42:24.529 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:42:24.531 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:42:24.533 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="80c43c6a-508b-47ff-9360-201bfd5521d3"
2025-09-03 13:42:24.535 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='80c43c6a-508b-47ff-9360-201bfd5521d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:42:24.538 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:42:24.539 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.462ms
2025-09-03 13:42:24.540 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:42:24.541 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/80c43c6a-508b-47ff-9360-201bfd5521d3 - 200 null application/json; charset=utf-8 17.4722ms
2025-09-03 13:42:25.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='80c43c6a-508b-47ff-9360-201bfd5521d3', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:42:25.315 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='65f8bfb6-4b4e-44f7-90d5-aaab06fdadad', @p0='2025-09-03T08:12:25.2933975Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:42:25.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:42:25.320 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:42:31.368 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-09-03 13:42:31.370 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:31.371 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:31.373 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDRGMEM2MUFFQTFDRkFFQUQ5NwA=","timestamp":"1756887152","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:31.374 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:31.374 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDRGMEM2MUFFQTFDRkFFQUQ5NwA=","timestamp":"1756887152","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:31.375 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:31.376 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:42:31.377 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8934ms
2025-09-03 13:42:31.379 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:42:31.379 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:31.381 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:42:31.382 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.5687ms
2025-09-03 13:42:35.817 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:42:35.817 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:42:35.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=GdSf-P-Of1SGJyA7-L4Ysg - 101 null null 90584.2827ms
2025-09-03 13:42:35.820 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=NQPIUrbkkGbBJOAy5kiSNg - 101 null null 90545.3198ms
2025-09-03 13:42:36.393 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:36.396 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0249ms
2025-09-03 13:42:36.399 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:36.401 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.402 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:36.403 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:42:36.407 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:42:36.410 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:36.411 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2941ms
2025-09-03 13:42:36.412 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:36.413 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0429ms
2025-09-03 13:42:36.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:36.475 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.476 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:36.477 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:42:36.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:42:36.488 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:36.490 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2784ms
2025-09-03 13:42:36.492 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:36.494 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.233ms
2025-09-03 13:42:36.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:42:36.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 3.4056ms
2025-09-03 13:42:36.536 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:42:36.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:36.541 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:42:36.540 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:42:36.541 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.537 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:42:36.550 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.553 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.558 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.559 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:36.562 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:36.563 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 22.6005ms
2025-09-03 13:42:36.564 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 24.744ms
2025-09-03 13:42:36.566 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:36.566 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 29.1114ms
2025-09-03 13:42:36.568 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:42:36.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:42:36.589 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:42:36.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:42:36.580 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 43.8562ms
2025-09-03 13:42:36.591 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.594 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:36.596 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.601 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:42:36.599 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:42:36.605 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.6406ms
2025-09-03 13:42:36.605 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=cgPwjKGwd5qM2KCvT4zX4Q - null null
2025-09-03 13:42:36.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:42:36.607 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:42:36.610 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.612 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:36.614 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.615 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:42:36.616 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:42:36.622 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:42:36.619 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:42:36.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 80.7643ms
2025-09-03 13:42:36.626 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:42:36.618 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:36.629 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:42:36.636 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:42:36.637 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:36.641 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:42:36.640 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:36.644 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 27.2397ms
2025-09-03 13:42:36.642 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 42.9404ms
2025-09-03 13:42:36.644 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=wmLWUc9qZcSScvreFu4_VQ - null null
2025-09-03 13:42:36.645 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 24.4227ms
2025-09-03 13:42:36.646 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:42:36.651 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:36.652 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:42:36.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 80.6875ms
2025-09-03 13:42:36.654 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:42:36.654 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 76.2326ms
2025-09-03 13:42:55.650 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 499
2025-09-03 13:42:55.653 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:55.654 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:42:55.657 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMERFRDBDNTBBRDMwOTdBRTc4MAA=","timestamp":"1756887176","text":{"body":"This is the check for unread count"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:55.658 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:42:55.659 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMERFRDBDNTBBRDMwOTdBRTc4MAA=","timestamp":"1756887176","text":{"body":"This is the check for unread count"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:42:55.659 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:55.660 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:42:55.661 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0798ms
2025-09-03 13:42:55.664 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:42:55.664 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:42:55.665 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.0072ms
2025-09-03 13:42:55.667 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:42:59.219 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:42:59.219 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:42:59.220 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=cgPwjKGwd5qM2KCvT4zX4Q - 101 null null 22614.6639ms
2025-09-03 13:42:59.221 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=wmLWUc9qZcSScvreFu4_VQ - 101 null null 22576.2094ms
2025-09-03 13:42:59.360 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:59.362 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0261ms
2025-09-03 13:42:59.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:59.367 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.368 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:59.369 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:42:59.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:42:59.375 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:59.375 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3661ms
2025-09-03 13:42:59.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:59.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.448ms
2025-09-03 13:42:59.415 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:59.418 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.419 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:59.420 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:42:59.424 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:42:59.427 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:59.428 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1913ms
2025-09-03 13:42:59.429 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:59.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.9391ms
2025-09-03 13:42:59.447 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:42:59.449 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.450 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 2.9861ms
2025-09-03 13:42:59.450 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:42:59.451 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:42:59.453 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:42:59.453 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:42:59.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:42:59.455 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.457 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.459 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.461 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.463 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 13.6449ms
2025-09-03 13:42:59.465 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:42:59.467 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:59.465 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:59.466 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 12.3944ms
2025-09-03 13:42:59.465 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.7588ms
2025-09-03 13:42:59.475 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.475 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:42:59.476 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:59.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:42:59.482 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:59.485 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:42:59.484 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 32.6285ms
2025-09-03 13:42:59.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=n5lyAOQbEXwcz6A6jQgXhg - null null
2025-09-03 13:42:59.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:42:59.487 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.488 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:42:59.489 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:59.493 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.494 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.495 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:42:59.495 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 30.119ms
2025-09-03 13:42:59.496 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.2581ms
2025-09-03 13:42:59.497 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:42:59.497 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:42:59.501 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:42:59.498 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:42:59.504 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:42:59.505 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 51.5711ms
2025-09-03 13:42:59.506 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:42:59.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:42:59.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:42:59.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:42:59.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=bPoOOJfxIDBSSQ_wTZDaFg - null null
2025-09-03 13:42:59.518 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:42:59.520 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:42:59.521 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:42:59.522 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:42:59.523 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 15.2718ms
2025-09-03 13:42:59.523 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:42:59.524 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 17.757ms
2025-09-03 13:42:59.525 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:42:59.528 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:42:59.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 48.4261ms
2025-09-03 13:42:59.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 51.4413ms
2025-09-03 13:43:04.142 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:04.142 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:04.142 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:04.144 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:04.146 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:04.148 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:04.148 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.9374ms
2025-09-03 13:43:04.149 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.418ms
2025-09-03 13:43:04.150 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.8316ms
2025-09-03 13:43:04.154 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:04.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:04.157 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:04.159 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:04.160 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:04.160 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:43:04.161 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:43:04.162 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:43:04.163 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:43:04.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:43:04.168 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:43:04.171 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:43:04.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:43:04.173 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 8.9438ms
2025-09-03 13:43:04.174 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0068ms
2025-09-03 13:43:04.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:04.175 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:43:04.176 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:04.177 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:04.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.5112ms
2025-09-03 13:43:04.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 26.1457ms
2025-09-03 13:43:04.180 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:04.186 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:43:04.188 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:43:04.190 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:43:04.193 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:43:04.194 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.3323ms
2025-09-03 13:43:04.195 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:04.196 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 21.5298ms
2025-09-03 13:43:04.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:43:04.952 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:13:04.9302675Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:43:04.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:43:04.958 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:43:11.416 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:43:11.416 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:43:11.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=n5lyAOQbEXwcz6A6jQgXhg - 101 null null 11938.1097ms
2025-09-03 13:43:11.418 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=bPoOOJfxIDBSSQ_wTZDaFg - 101 null null 11901.2422ms
2025-09-03 13:43:11.504 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:43:11.507 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.508 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5728ms
2025-09-03 13:43:11.510 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:43:11.512 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:43:11.513 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:43:11.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:43:11.519 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:11.521 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2741ms
2025-09-03 13:43:11.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:43:11.522 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4679ms
2025-09-03 13:43:11.541 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:43:11.543 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.544 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:43:11.546 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:43:11.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:43:11.553 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:11.554 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7232ms
2025-09-03 13:43:11.555 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:43:11.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0508ms
2025-09-03 13:43:11.579 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:43:11.582 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:43:11.583 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:43:11.582 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.583 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:43:11.584 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:43:11.585 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.587 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.587 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 8.3188ms
2025-09-03 13:43:11.593 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 9.6548ms
2025-09-03 13:43:11.591 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.589 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.593 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:43:11.589 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:43:11.605 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:43:11.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:43:11.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 18.6073ms
2025-09-03 13:43:11.604 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.592 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 10.3549ms
2025-09-03 13:43:11.607 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:43:11.608 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.609 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:43:11.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:43:11.614 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:43:11.617 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=rNrGTWh2eM4zrZfU6SlvWQ - null null
2025-09-03 13:43:11.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:43:11.611 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:43:11.614 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:43:11.619 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.620 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:43:11.621 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:11.624 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:43:11.624 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 34.8825ms
2025-09-03 13:43:11.625 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:43:11.626 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:43:11.626 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:43:11.627 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.5289ms
2025-09-03 13:43:11.633 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:43:11.635 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:43:11.630 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:43:11.628 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 34.458ms
2025-09-03 13:43:11.641 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:43:11.637 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:43:11.638 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 53.2642ms
2025-09-03 13:43:11.646 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:43:11.646 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:43:11.650 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:11.650 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 24.0458ms
2025-09-03 13:43:11.651 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 11.6259ms
2025-09-03 13:43:11.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=xzEMBD5wDllVQKhQIBWVvQ - null null
2025-09-03 13:43:11.652 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:43:11.653 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:43:11.655 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:11.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 54.9213ms
2025-09-03 13:43:11.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 45.7775ms
2025-09-03 13:43:11.657 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:43:16.221 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:16.221 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:16.221 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:16.223 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:16.225 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:16.227 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:16.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.064ms
2025-09-03 13:43:16.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.4976ms
2025-09-03 13:43:16.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.8703ms
2025-09-03 13:43:16.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:16.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:16.236 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:16.238 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:16.238 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:43:16.239 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:16.240 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:43:16.240 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:43:16.244 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:43:16.245 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:43:16.247 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:43:16.248 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:43:16.249 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 7.8415ms
2025-09-03 13:43:16.251 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:43:16.251 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:43:16.252 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.3841ms
2025-09-03 13:43:16.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 21.0325ms
2025-09-03 13:43:16.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:43:16.254 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:16.258 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:43:16.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 24.3838ms
2025-09-03 13:43:16.259 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:16.262 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:43:16.263 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:43:16.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:43:16.269 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:43:16.270 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 6.8194ms
2025-09-03 13:43:16.271 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:43:16.272 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 18.4326ms
2025-09-03 13:43:16.989 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:43:17.009 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:13:16.9877268Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:43:17.012 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:43:17.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:43:23.501 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__dto_ContactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__dto_ContactId_1
LIMIT 1
2025-09-03 13:43:23.503 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-09-03 13:43:23.506 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-09-03 13:43:23.508 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:43:23.510 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 13:43:23.512 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:43:23.513 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:43:24.602 +05:30 [INF] Received HTTP response headers after 1088.0016ms - 200
2025-09-03 13:43:24.603 +05:30 [INF] End processing HTTP request after 1091.2001ms - 200
2025-09-03 13:43:24.610 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='5f661fb3-aa45-4f94-99d7-6c40457f8cec', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p7='2025-09-03T08:13:24.6047982Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='helli' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='helli', @p18=NULL (DbType = Guid), @p19='2025-09-03T08:13:24.6047984Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 13:43:26.238 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:43:26.238 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 13:43:26.239 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:43:26.241 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:26.242 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:26.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:26.245 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:43:26.246 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:43:26.246 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:43:26.248 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"delivered","timestamp":"1756887207","recipient_id":"918974005240","conversation":{"id":"b712475a6d44063c49a5cd7d4224962a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:43:26.249 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"sent","timestamp":"1756887207","recipient_id":"918974005240","conversation":{"id":"b712475a6d44063c49a5cd7d4224962a","expiration_timestamp":"1756887207","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:43:26.250 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"delivered","timestamp":"1756887207","recipient_id":"918974005240","conversation":{"id":"b712475a6d44063c49a5cd7d4224962a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:43:26.251 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:43:26.251 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"delivered","timestamp":"1756887207","recipient_id":"918974005240","conversation":{"id":"b712475a6d44063c49a5cd7d4224962a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:43:26.252 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:43:26.253 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:43:26.253 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:26.254 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:43:26.255 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:26.258 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:26.255 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:26.256 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.4815ms
2025-09-03 13:43:26.259 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.0559ms
2025-09-03 13:43:26.260 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==
2025-09-03 13:43:26.261 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.3896ms
2025-09-03 13:43:26.265 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:26.263 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:26.265 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:26.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='5f661fb3-aa45-4f94-99d7-6c40457f8cec', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:43:26.267 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.9641ms
2025-09-03 13:43:26.262 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:26.270 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA== → Delivered
2025-09-03 13:43:26.268 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.6034ms
2025-09-03 13:43:26.272 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.2704ms
2025-09-03 13:43:26.273 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"sent","timestamp":"1756887207","recipient_id":"918974005240","conversation":{"id":"b712475a6d44063c49a5cd7d4224962a","expiration_timestamp":"1756887207","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:43:26.278 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:43:26.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:26.282 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==
2025-09-03 13:43:26.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:26.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='5f661fb3-aa45-4f94-99d7-6c40457f8cec', @p0='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:43:26.288 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA== → Sent
2025-09-03 13:43:26.288 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"delivered","timestamp":"1756887207","recipient_id":"918974005240","conversation":{"id":"b712475a6d44063c49a5cd7d4224962a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:43:26.289 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:43:26.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:26.292 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==
2025-09-03 13:43:26.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:26.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='5f661fb3-aa45-4f94-99d7-6c40457f8cec', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:43:26.299 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA== → Delivered
2025-09-03 13:43:28.420 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-03 13:43:28.422 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:28.423 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:43:28.425 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"read","timestamp":"1756887209","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:43:28.426 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:43:28.426 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==","status":"read","timestamp":"1756887209","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:43:28.427 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:43:28.427 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:43:28.428 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.007ms
2025-09-03 13:43:28.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:28.431 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:43:28.433 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA==
2025-09-03 13:43:28.434 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.8651ms
2025-09-03 13:43:28.435 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:43:28.457 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='5f661fb3-aa45-4f94-99d7-6c40457f8cec', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:43:28.460 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEU0RUVEMkFBNjQ0NUFGMjJBAA== → Read
2025-09-03 13:44:12.020 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 13:44:12.059 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 13:44:12.071 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 13:44:12.763 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 13:44:13.209 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 13:44:13.229 +05:30 [INF] ClickLogWorker started
2025-09-03 13:44:13.429 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 13:44:13.430 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 13:44:13.433 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 13:44:13.434 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 13:44:13.435 +05:30 [INF] Hosting environment: Development
2025-09-03 13:44:13.436 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 13:44:13.446 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@__cutoff_0='2025-08-27T08:14:12.1568723Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 13:44:13.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:44:13.499 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 13:44:13.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:44:13.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:13.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:13.537 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 57.6788ms
2025-09-03 13:44:13.537 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 26.8488ms
2025-09-03 13:44:13.543 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:44:13.541 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:44:13.551 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:13.551 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:13.586 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:44:13.586 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:44:13.590 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:44:13.590 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:44:13.591 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 401 0 null 50.023ms
2025-09-03 13:44:13.591 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 401 0 null 50.2268ms
2025-09-03 13:44:14.262 +05:30 [INF] ClickLogWorker stopped
2025-09-03 13:44:15.473 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:44:15.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 114.1574ms
2025-09-03 13:44:15.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:44:15.619 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.9127ms
2025-09-03 13:44:15.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:44:15.695 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.3586ms
2025-09-03 13:44:15.844 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:44:16.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.3931ms
2025-09-03 13:44:26.152 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:26.156 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.9081ms
2025-09-03 13:44:26.161 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:26.168 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.245 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:26.258 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:44:26.360 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 13:44:26.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:44:26.437 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:26.457 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 194.1393ms
2025-09-03 13:44:26.458 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:26.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 303.3241ms
2025-09-03 13:44:26.468 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:26.471 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.473 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:26.474 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:44:26.484 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:44:26.488 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:26.490 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.5551ms
2025-09-03 13:44:26.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:26.492 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3699ms
2025-09-03 13:44:26.515 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:44:26.518 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.519 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:44:26.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 4.8943ms
2025-09-03 13:44:26.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:26.523 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:44:26.523 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:44:26.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:44:26.530 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.536 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.523 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.538 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.539 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:26.540 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.1467ms
2025-09-03 13:44:26.542 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:44:26.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 14.7886ms
2025-09-03 13:44:26.543 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:44:26.541 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:44:26.541 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 22.1444ms
2025-09-03 13:44:26.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:44:26.556 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.559 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:44:26.562 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:44:26.569 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:44:26.573 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:44:26.573 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.576 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 401 0 null 53.2907ms
2025-09-03 13:44:26.577 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:26.579 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:26.580 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:44:26.581 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:44:26.586 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:44:26.587 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 26.73ms
2025-09-03 13:44:26.588 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 401 0 null 46.1455ms
2025-09-03 13:44:26.593 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:26.594 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:44:26.594 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:44:26.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 77.3556ms
2025-09-03 13:44:26.605 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:44:26.615 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:44:26.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:44:26.688 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:44:26.741 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:26.746 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 146.0353ms
2025-09-03 13:44:26.748 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:44:26.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 195.8769ms
2025-09-03 13:44:26.782 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:44:26.784 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:44:26.800 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 197.8709ms
2025-09-03 13:44:26.802 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:44:26.803 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 244.2781ms
2025-09-03 13:44:28.647 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:44:28.647 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:44:28.647 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:44:28.651 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:28.652 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:28.654 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:28.655 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.2916ms
2025-09-03 13:44:28.655 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.1137ms
2025-09-03 13:44:28.656 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.6658ms
2025-09-03 13:44:28.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:44:28.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:44:28.665 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:28.667 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:28.668 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:44:28.668 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:44:28.674 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:44:28.674 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:44:28.681 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:44:28.703 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:44:28.704 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:44:28.710 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:44:28.714 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 39.2974ms
2025-09-03 13:44:28.715 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:44:28.716 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:44:28.718 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:28.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 58.314ms
2025-09-03 13:44:28.720 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:44:28.723 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:44:28.725 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:44:28.730 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:44:28.734 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:44:28.735 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.9526ms
2025-09-03 13:44:28.737 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:44:28.738 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.6506ms
2025-09-03 13:44:28.767 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:44:28.772 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 96.0261ms
2025-09-03 13:44:28.774 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:44:28.775 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 111.542ms
2025-09-03 13:44:46.094 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:44:46.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 7.0476ms
2025-09-03 13:44:46.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:44:46.161 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:44:46.167 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.0711ms
2025-09-03 13:44:46.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.708ms
2025-09-03 13:44:46.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:44:46.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1689ms
2025-09-03 13:44:52.370 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:52.378 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.379 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.6446ms
2025-09-03 13:44:52.383 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:52.393 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.394 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:52.402 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:44:52.413 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:44:52.417 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:52.423 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.2299ms
2025-09-03 13:44:52.425 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:52.427 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.8832ms
2025-09-03 13:44:52.442 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:52.446 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:52.449 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:44:52.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:44:52.458 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:52.460 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5978ms
2025-09-03 13:44:52.461 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:52.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4957ms
2025-09-03 13:44:52.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:44:52.495 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.495 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:44:52.496 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 5.3994ms
2025-09-03 13:44:52.499 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:44:52.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:44:52.499 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:44:52.503 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:44:52.500 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.511 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.506 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.508 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.514 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.515 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:44:52.516 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:44:52.523 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:44:52.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.3075ms
2025-09-03 13:44:52.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 14.3385ms
2025-09-03 13:44:52.517 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:52.514 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 19.2079ms
2025-09-03 13:44:52.527 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.528 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 401 0 null 29.1227ms
2025-09-03 13:44:52.531 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:44:52.535 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:44:52.536 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:44:52.540 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 13:44:52.548 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.552 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 13:44:52.551 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:44:52.554 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:44:52.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:44:52.557 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 401 0 null 40.6765ms
2025-09-03 13:44:52.558 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:44:52.561 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:52.565 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:44:52.568 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.8704ms
2025-09-03 13:44:52.569 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:44:52.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:44:52.571 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:44:52.576 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:44:52.580 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 81.1394ms
2025-09-03 13:44:52.587 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:44:52.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:44:52.593 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:44:52.594 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:44:52.597 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:44:52.600 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 30.2321ms
2025-09-03 13:44:52.601 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 26.1057ms
2025-09-03 13:44:52.601 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:44:52.603 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:44:52.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 72.6352ms
2025-09-03 13:44:52.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 70.4889ms
2025-09-03 13:45:11.019 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 13:45:11.057 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 13:45:11.071 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 13:45:11.802 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 13:45:12.251 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 13:45:12.271 +05:30 [INF] ClickLogWorker started
2025-09-03 13:45:12.455 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 13:45:12.455 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 13:45:12.460 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 13:45:12.461 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 13:45:12.462 +05:30 [INF] Hosting environment: Development
2025-09-03 13:45:12.463 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 13:45:12.475 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__cutoff_0='2025-08-27T08:15:11.1564442Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 13:45:13.308 +05:30 [INF] ClickLogWorker stopped
2025-09-03 13:45:14.549 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 13:45:14.668 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 128.1342ms
2025-09-03 13:45:14.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 13:45:14.701 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.418ms
2025-09-03 13:45:14.745 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 13:45:14.771 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.3231ms
2025-09-03 13:45:14.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 13:45:15.088 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.4122ms
2025-09-03 13:45:27.566 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-09-03 13:45:27.570 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 13:45:27.637 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:45:27.648 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:45:27.663 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDFBODkyREVDMjc5QUVFNUY5MgA=","timestamp":"1756887328","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:45:27.667 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:45:27.672 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:45:27.681 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 28.8726ms
2025-09-03 13:45:27.683 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:45:27.685 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 118.5828ms
2025-09-03 13:45:27.769 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDFBODkyREVDMjc5QUVFNUY5MgA=","timestamp":"1756887328","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:45:27.771 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:45:27.869 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:45:27.871 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:45:32.868 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:45:32.878 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:32.881 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.7659ms
2025-09-03 13:45:32.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:45:32.888 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:32.987 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:45:32.994 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:45:33.016 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 13:45:33.083 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:45:33.088 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:45:33.100 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 104.0433ms
2025-09-03 13:45:33.102 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:45:33.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 222.3323ms
2025-09-03 13:45:33.110 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:45:33.113 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.119 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:45:33.120 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:45:33.128 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:45:33.133 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:45:33.135 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.1683ms
2025-09-03 13:45:33.136 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:45:33.137 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.0417ms
2025-09-03 13:45:33.161 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:45:33.165 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.167 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:45:33.172 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:45:33.174 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:45:33.172 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:45:33.172 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:45:33.188 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.192 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.195 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.185 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.168 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 6.7056ms
2025-09-03 13:45:33.202 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:45:33.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 31.1944ms
2025-09-03 13:45:33.199 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 36.1782ms
2025-09-03 13:45:33.205 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:45:33.214 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:45:33.215 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:45:33.219 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 47.2602ms
2025-09-03 13:45:33.223 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:45:33.232 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:45:33.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:45:33.226 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.234 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:45:33.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=-j0rHDRE8_Ckg1Zm96iwtA - null null
2025-09-03 13:45:33.239 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 66.4132ms
2025-09-03 13:45:33.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.243 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.243 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:45:33.245 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:45:33.248 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.251 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:45:33.252 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:45:33.253 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:45:33.254 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 25.2818ms
2025-09-03 13:45:33.255 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:45:33.258 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 53.2816ms
2025-09-03 13:45:33.260 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:45:33.260 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:45:33.260 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:45:33.265 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 92.7029ms
2025-09-03 13:45:33.271 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:45:33.285 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:45:33.286 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=FX50qto0ElcLWVAfPDe6xg - null null
2025-09-03 13:45:33.295 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:33.297 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:45:33.327 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:45:33.347 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:45:33.396 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:45:33.401 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 132.2529ms
2025-09-03 13:45:33.402 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:45:33.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 170.9771ms
2025-09-03 13:45:33.441 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:45:33.443 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:45:33.464 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 196.8808ms
2025-09-03 13:45:33.465 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:45:33.467 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 243.6808ms
2025-09-03 13:45:35.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:45:35.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:45:35.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:45:35.252 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:35.254 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:35.256 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:35.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.9298ms
2025-09-03 13:45:35.258 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.5081ms
2025-09-03 13:45:35.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 10.3903ms
2025-09-03 13:45:35.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:45:35.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:45:35.270 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:35.272 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:35.273 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:45:35.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:45:35.279 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:45:35.279 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:45:35.285 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:45:35.304 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:45:35.307 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:45:35.313 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:45:35.317 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 34.9805ms
2025-09-03 13:45:35.318 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:45:35.319 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:45:35.321 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:45:35.322 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 57.7306ms
2025-09-03 13:45:35.323 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:45:35.328 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:45:35.330 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:45:35.334 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:45:35.339 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:45:35.341 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.0334ms
2025-09-03 13:45:35.343 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:45:35.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.9124ms
2025-09-03 13:45:35.380 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:45:35.389 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 109.2534ms
2025-09-03 13:45:35.391 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:45:35.392 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 124.5997ms
2025-09-03 13:45:36.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:45:36.153 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:15:36.0514220Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:45:36.169 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:45:36.179 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:45:49.102 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 476
2025-09-03 13:45:49.106 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:45:49.107 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:45:49.109 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMEIwNUI1NTNGMzk3QjRGREEwRAA=","timestamp":"1756887350","text":{"body":"KJD;LAD;dLD"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:45:49.111 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:45:49.112 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:45:49.113 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMEIwNUI1NTNGMzk3QjRGREEwRAA=","timestamp":"1756887350","text":{"body":"KJD;LAD;dLD"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:45:49.113 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8587ms
2025-09-03 13:45:49.114 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:45:49.115 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:45:49.117 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.9561ms
2025-09-03 13:45:49.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:45:49.122 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:46:02.800 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:46:02.800 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:46:02.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=-j0rHDRE8_Ckg1Zm96iwtA - 101 null null 29563.1664ms
2025-09-03 13:46:02.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=FX50qto0ElcLWVAfPDe6xg - 101 null null 29515.9605ms
2025-09-03 13:46:02.881 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:46:02.883 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.884 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3488ms
2025-09-03 13:46:02.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:46:02.889 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.890 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:46:02.891 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:46:02.895 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:46:02.898 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:46:02.900 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9735ms
2025-09-03 13:46:02.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:46:02.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.2937ms
2025-09-03 13:46:02.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:46:02.932 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.933 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:46:02.934 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:46:02.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:46:02.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:46:02.942 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7263ms
2025-09-03 13:46:02.944 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:46:02.944 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.1833ms
2025-09-03 13:46:02.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:46:02.972 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:46:02.973 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:46:02.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:46:02.973 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:46:02.974 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.976 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.978 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.980 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.982 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:02.985 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:46:02.986 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:46:02.987 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 13.6077ms
2025-09-03 13:46:02.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:46:02.983 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 12.4735ms
2025-09-03 13:46:02.983 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 11.459ms
2025-09-03 13:46:02.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.1082ms
2025-09-03 13:46:03.000 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:03.002 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:03.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:46:03.006 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:46:03.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:46:03.015 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:46:03.016 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:03.014 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:46:03.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:46:03.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=pBnmaWhZNqhZbWxIhMhC1w - null null
2025-09-03 13:46:03.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:46:03.024 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:46:03.022 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:03.023 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:46:03.026 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:46:03.028 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:03.029 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:46:03.029 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 44.4232ms
2025-09-03 13:46:03.031 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 45.1225ms
2025-09-03 13:46:03.033 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:46:03.030 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:46:03.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:46:03.045 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:46:03.032 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6218ms
2025-09-03 13:46:03.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:46:03.050 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:46:03.051 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:46:03.054 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:46:03.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:46:03.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=09iJgZXQcRWr0IuQoebyHw - null null
2025-09-03 13:46:03.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 81.4514ms
2025-09-03 13:46:03.058 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 24.3178ms
2025-09-03 13:46:03.061 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:46:03.062 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:03.065 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:46:03.066 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:46:03.067 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:46:03.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 62.5129ms
2025-09-03 13:46:03.069 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 19.8532ms
2025-09-03 13:46:03.076 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:46:03.077 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 64.1073ms
2025-09-03 13:46:04.638 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:46:04.638 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:46:04.638 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:46:04.640 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:04.642 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:04.644 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:04.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.8093ms
2025-09-03 13:46:04.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.2331ms
2025-09-03 13:46:04.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.7457ms
2025-09-03 13:46:04.650 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:46:04.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:46:04.654 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:04.656 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:04.657 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:46:04.658 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:46:04.658 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:46:04.659 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:46:04.662 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:46:04.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:46:04.667 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:46:04.672 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:46:04.672 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:46:04.673 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.9482ms
2025-09-03 13:46:04.673 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:46:04.674 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 13.6443ms
2025-09-03 13:46:04.675 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:46:04.676 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:46:04.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:46:04.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 25.6763ms
2025-09-03 13:46:04.679 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:46:04.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 29.6514ms
2025-09-03 13:46:04.682 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:46:04.686 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:46:04.689 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:46:04.692 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:46:04.693 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.5697ms
2025-09-03 13:46:04.695 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:46:04.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.2069ms
2025-09-03 13:46:05.438 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:46:05.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:16:05.4362544Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:46:05.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:46:05.452 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:47:17.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:47:17.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:47:17.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:47:17.548 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:17.550 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:17.552 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:17.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 11.2924ms
2025-09-03 13:47:17.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 11.8088ms
2025-09-03 13:47:17.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 12.5527ms
2025-09-03 13:47:17.563 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:47:17.565 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:47:17.568 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:17.569 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:17.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:47:17.570 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:47:17.571 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:47:17.572 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:47:17.574 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:47:17.578 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:47:17.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:47:17.583 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:47:17.583 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:47:17.585 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.6692ms
2025-09-03 13:47:17.585 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.8954ms
2025-09-03 13:47:17.586 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:47:17.586 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-09-03 13:47:17.587 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:47:17.588 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 25.0989ms
2025-09-03 13:47:17.590 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:17.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 25.2434ms
2025-09-03 13:47:17.594 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:47:17.596 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:47:17.598 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-09-03 13:47:17.602 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:47:17.605 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:47:17.606 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0573ms
2025-09-03 13:47:17.607 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:47:17.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 21.632ms
2025-09-03 13:47:18.345 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='a307d00b-239b-4c7b-bb16-77838875fbec', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:47:18.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='194c1b56-d199-480a-903f-fc6487cf4948', @p0='2025-09-03T08:17:18.3426942Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:47:18.353 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:47:18.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:47:22.119 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:47:22.122 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:47:22.127 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=09iJgZXQcRWr0IuQoebyHw - 101 null null 79069.8137ms
2025-09-03 13:47:22.128 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=pBnmaWhZNqhZbWxIhMhC1w - 101 null null 79102.1617ms
2025-09-03 13:47:22.244 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:47:22.247 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.248 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.491ms
2025-09-03 13:47:22.252 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:47:22.256 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:47:22.259 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:47:22.264 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:47:22.269 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:47:22.271 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4567ms
2025-09-03 13:47:22.273 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:47:22.275 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.6344ms
2025-09-03 13:47:22.293 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:47:22.299 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.300 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:47:22.302 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:47:22.308 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:47:22.312 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:47:22.314 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2055ms
2025-09-03 13:47:22.315 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:47:22.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.9487ms
2025-09-03 13:47:22.352 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:47:22.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:47:22.356 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:47:22.359 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:47:22.360 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:47:22.360 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 8.5513ms
2025-09-03 13:47:22.364 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:47:22.371 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 15.1823ms
2025-09-03 13:47:22.374 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:47:22.370 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.368 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.365 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.383 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.391 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 31.7286ms
2025-09-03 13:47:22.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 33.3052ms
2025-09-03 13:47:22.394 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:47:22.395 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:47:22.396 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:47:22.399 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:47:22.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:47:22.403 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:47:22.405 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:47:22.406 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:47:22.415 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 51.3001ms
2025-09-03 13:47:22.418 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 44.5053ms
2025-09-03 13:47:22.417 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=FVRT7Z50f_2rxq7Pmy8L0A - null null
2025-09-03 13:47:22.409 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.412 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.417 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:47:22.430 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.431 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:47:22.431 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:47:22.433 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:47:22.434 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:47:22.435 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:47:22.436 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:47:22.437 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 23.7679ms
2025-09-03 13:47:22.447 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:47:22.444 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:47:22.453 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:47:22.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=9gO8SnMYf46HzEcu2ubcRg - null null
2025-09-03 13:47:22.457 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:47:22.447 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:47:22.460 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:47:22.461 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:47:22.464 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:47:22.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 105.6104ms
2025-09-03 13:47:22.466 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 20.6061ms
2025-09-03 13:47:22.467 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:47:22.468 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:47:22.472 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:47:22.477 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 33.2944ms
2025-09-03 13:47:22.478 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 75.232ms
2025-09-03 13:47:22.479 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:47:22.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 84.9563ms
2025-09-03 13:50:00.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:50:00.361 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:50:00.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:50:00.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:50:00.365 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:50:00.362 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 6.1511ms
2025-09-03 13:50:00.371 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:50:00.372 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 15.5133ms
2025-09-03 13:50:00.374 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:50:00.375 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 18.3878ms
2025-09-03 13:50:00.380 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:50:00.382 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:50:00.383 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:50:00.384 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:50:00.385 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:50:00.386 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:50:00.387 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:50:00.388 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:50:00.392 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:50:00.396 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:50:00.397 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:50:00.399 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 12.4922ms
2025-09-03 13:50:00.400 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:50:00.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:50:00.401 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:50:00.402 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.328ms
2025-09-03 13:50:00.404 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:50:00.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 30.2452ms
2025-09-03 13:50:00.405 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:50:00.406 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:50:00.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.1854ms
2025-09-03 13:50:00.410 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:50:00.414 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:50:00.417 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:50:00.420 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:50:00.421 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.8481ms
2025-09-03 13:50:00.422 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:50:00.423 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 23.0414ms
2025-09-03 13:50:01.149 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:50:01.170 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:20:01.1468699Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:50:01.174 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:50:01.178 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:50:50.383 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-09-03 13:50:50.385 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:50:50.386 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:50:50.389 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDFBOEU4RUY3MDM1RUExRkI1MQA=","timestamp":"1756887651","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:50:50.390 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:50:50.391 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:50:50.392 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0337ms
2025-09-03 13:50:50.394 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:50:50.395 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.7931ms
2025-09-03 13:50:50.398 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDFBOEU4RUY3MDM1RUExRkI1MQA=","timestamp":"1756887651","text":{"body":"hello"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:50:50.399 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:50:50.455 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:50:50.457 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:51:27.982 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__dto_ContactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__dto_ContactId_1
LIMIT 1
2025-09-03 13:51:27.987 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-09-03 13:51:27.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-09-03 13:51:27.994 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:51:28.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 13:51:28.027 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:51:28.030 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:51:29.215 +05:30 [INF] Received HTTP response headers after 1182.7794ms - 200
2025-09-03 13:51:29.217 +05:30 [INF] End processing HTTP request after 1191.3844ms - 200
2025-09-03 13:51:29.281 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='15bc67e8-c94d-4d89-a7da-69f48ddc0c37', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p7='2025-09-03T08:21:29.2210499Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T08:21:29.2210864Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 13:51:30.420 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 13:51:30.423 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:51:30.424 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:51:30.427 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==","status":"sent","timestamp":"1756887691","recipient_id":"918974005240","conversation":{"id":"8a87c21533d3eab3fefae6cb860a6b71","expiration_timestamp":"1756887691","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:51:30.428 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:51:30.428 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==","status":"sent","timestamp":"1756887691","recipient_id":"918974005240","conversation":{"id":"8a87c21533d3eab3fefae6cb860a6b71","expiration_timestamp":"1756887691","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:51:30.429 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:30.431 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5214ms
2025-09-03 13:51:30.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:51:30.433 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.5017ms
2025-09-03 13:51:30.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:51:30.451 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:51:30.453 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 13:51:30.454 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:51:30.468 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:51:30.470 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==
2025-09-03 13:51:30.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:51:30.480 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA== (legacy)
2025-09-03 13:51:31.111 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:51:31.114 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:51:31.115 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:51:31.116 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==","status":"delivered","timestamp":"1756887692","recipient_id":"918974005240","conversation":{"id":"8a87c21533d3eab3fefae6cb860a6b71","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:51:31.118 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:51:31.118 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==","status":"delivered","timestamp":"1756887692","recipient_id":"918974005240","conversation":{"id":"8a87c21533d3eab3fefae6cb860a6b71","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:51:31.119 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:31.120 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:51:31.120 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3467ms
2025-09-03 13:51:31.124 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:51:31.124 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:51:31.125 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.4307ms
2025-09-03 13:51:31.127 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==
2025-09-03 13:51:31.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:51:31.139 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p1='15bc67e8-c94d-4d89-a7da-69f48ddc0c37', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:51:31.141 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA== → Delivered
2025-09-03 13:51:40.559 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:51:40.559 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:51:40.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=9gO8SnMYf46HzEcu2ubcRg - 101 null null 258109.5227ms
2025-09-03 13:51:40.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=FVRT7Z50f_2rxq7Pmy8L0A - 101 null null 258148.8991ms
2025-09-03 13:51:41.260 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:51:41.264 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.266 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.5566ms
2025-09-03 13:51:41.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:51:41.281 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.285 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:51:41.288 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:51:41.295 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:51:41.300 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:41.302 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6353ms
2025-09-03 13:51:41.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:51:41.305 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.3719ms
2025-09-03 13:51:41.417 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:51:41.422 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.426 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:51:41.428 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:51:41.435 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:51:41.441 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:41.442 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.7438ms
2025-09-03 13:51:41.444 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:51:41.445 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.3225ms
2025-09-03 13:51:41.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:51:41.533 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:51:41.535 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:51:41.538 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.539 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 8.2543ms
2025-09-03 13:51:41.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:51:41.545 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:51:41.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 9.2884ms
2025-09-03 13:51:41.541 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:51:41.546 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:51:41.561 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.563 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:51:41.574 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.578 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.579 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 37.4502ms
2025-09-03 13:51:41.581 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:51:41.589 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:51:41.592 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 46.6767ms
2025-09-03 13:51:41.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 33.8518ms
2025-09-03 13:51:41.585 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:51:41.588 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:51:41.582 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:51:41.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:51:41.612 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:51:41.607 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.604 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:51:41.617 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.622 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:41.623 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:51:41.628 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.1388ms
2025-09-03 13:51:41.630 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:51:41.630 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=7NwfQxx9Y9HVuNr-WW5bpQ - null null
2025-09-03 13:51:41.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:51:41.625 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 78.4842ms
2025-09-03 13:51:41.641 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:51:41.643 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:51:41.646 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 116.9654ms
2025-09-03 13:51:41.658 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:51:41.647 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:51:41.660 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:51:41.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=oIaQJkPw2z6cvElHQqQyYg - null null
2025-09-03 13:51:41.682 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:51:41.685 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:51:41.687 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:51:41.689 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:51:41.691 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 48.6063ms
2025-09-03 13:51:41.698 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:51:41.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 111.9258ms
2025-09-03 13:51:41.878 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:51:41.883 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:51:41.887 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:41.888 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 217.036ms
2025-09-03 13:51:41.890 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:51:41.891 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 288.4792ms
2025-09-03 13:51:59.473 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 490
2025-09-03 13:51:59.476 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:51:59.477 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:51:59.479 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"Dinesh Kumar"},"wa_id":"919599941808"}],"messages":[{"from":"919599941808","id":"wamid.HBgMOTE5NTk5OTQxODA4FQIAEhggQjk5NDVEMzhGMzVDMDkwRTc2NUQ3N0M1NUMwNkQzQjMA","timestamp":"1756880361","text":{"body":"Hiii"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:51:59.480 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:51:59.480 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"Dinesh Kumar"},"wa_id":"919599941808"}],"messages":[{"from":"919599941808","id":"wamid.HBgMOTE5NTk5OTQxODA4FQIAEhggQjk5NDVEMzhGMzVDMDkwRTc2NUQ3N0M1NUMwNkQzQjMA","timestamp":"1756880361","text":{"body":"Hiii"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:51:59.481 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:51:59.482 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:51:59.483 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8042ms
2025-09-03 13:51:59.486 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:51:59.488 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.5776ms
2025-09-03 13:51:59.488 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:51:59.492 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:53:14.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:53:14.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:53:14.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:53:14.634 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:53:14.636 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:53:14.638 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:53:14.639 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.641ms
2025-09-03 13:53:14.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.9487ms
2025-09-03 13:53:14.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.4469ms
2025-09-03 13:53:14.668 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:53:14.668 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:53:14.671 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:53:14.674 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:53:14.675 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:53:14.676 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:53:14.677 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:53:14.677 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:53:14.679 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:53:14.685 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:53:14.685 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:53:14.694 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:53:14.694 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:53:14.695 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 15.3099ms
2025-09-03 13:53:14.696 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 17.4653ms
2025-09-03 13:53:14.697 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:53:14.697 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:53:14.698 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:53:14.700 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:53:14.701 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 32.4302ms
2025-09-03 13:53:14.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 33.3318ms
2025-09-03 13:53:14.702 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:53:14.708 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:53:14.709 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:53:14.713 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:53:14.716 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:53:14.717 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0667ms
2025-09-03 13:53:14.718 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:53:14.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 22.2817ms
2025-09-03 13:53:15.423 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:53:15.445 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:23:15.4215369Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:53:15.449 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:53:15.452 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:53:41.508 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-03 13:53:41.511 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:53:41.512 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:53:41.514 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==","status":"read","timestamp":"1756887822","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:53:41.515 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:53:41.515 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==","status":"read","timestamp":"1756887822","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:53:41.516 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:53:41.519 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:53:41.519 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3509ms
2025-09-03 13:53:41.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 13:53:41.526 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:53:41.527 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 13:53:41.528 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.6799ms
2025-09-03 13:53:41.529 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:53:41.534 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:53:41.536 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA==
2025-09-03 13:53:41.538 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:53:41.542 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='15bc67e8-c94d-4d89-a7da-69f48ddc0c37', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:53:41.543 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUU3NUNENzM0MkVGRkY2QTdFAA== → Read
2025-09-03 13:53:49.350 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 478
2025-09-03 13:53:49.352 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:53:49.353 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:53:49.355 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDcxMTVBRkRBNTA4Q0ZCRTkyQgA=","timestamp":"1756887830","text":{"body":"check receive"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:53:49.356 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:53:49.356 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDcxMTVBRkRBNTA4Q0ZCRTkyQgA=","timestamp":"1756887830","text":{"body":"check receive"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:53:49.357 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:53:49.358 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:53:49.359 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0885ms
2025-09-03 13:53:49.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:53:49.362 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:53:49.364 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:53:49.365 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.2716ms
2025-09-03 13:54:26.731 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 477
2025-09-03 13:54:26.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:54:26.736 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:54:26.738 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMENBMDM4QkI4NzRBNzdCRjc2NAA=","timestamp":"1756887867","text":{"body":"heck receive"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:54:26.740 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:54:26.740 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMENBMDM4QkI4NzRBNzdCRjc2NAA=","timestamp":"1756887867","text":{"body":"heck receive"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:54:26.741 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:54:26.742 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:54:26.743 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8997ms
2025-09-03 13:54:26.745 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:54:26.746 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:54:26.750 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 18.4581ms
2025-09-03 13:54:26.753 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:55:17.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:55:17.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:55:17.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:55:17.634 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:17.636 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:17.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:17.638 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 10.9472ms
2025-09-03 13:55:17.640 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 12.569ms
2025-09-03 13:55:17.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 204 null null 15.4732ms
2025-09-03 13:55:17.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:55:17.655 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:55:17.657 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:17.659 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:17.660 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:17.661 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:55:17.662 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:55:17.662 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:55:17.665 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:55:17.668 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:55:17.671 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:55:17.674 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:55:17.676 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:55:17.676 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.7125ms
2025-09-03 13:55:17.678 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.3068ms
2025-09-03 13:55:17.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:55:17.680 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - null null
2025-09-03 13:55:17.680 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:17.681 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 26.2166ms
2025-09-03 13:55:17.683 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:17.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 32.1624ms
2025-09-03 13:55:17.688 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:17.691 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:55:17.693 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="491ee04c-27c4-49e4-9bb8-ef8892951090"
2025-09-03 13:55:17.696 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='491ee04c-27c4-49e4-9bb8-ef8892951090'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:55:17.699 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:55:17.701 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.0702ms
2025-09-03 13:55:17.702 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:17.703 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/491ee04c-27c4-49e4-9bb8-ef8892951090 - 200 null application/json; charset=utf-8 22.8349ms
2025-09-03 13:55:18.323 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:55:18.323 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:55:18.323 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:55:18.325 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:18.328 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:18.330 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:18.331 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.9064ms
2025-09-03 13:55:18.331 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.5039ms
2025-09-03 13:55:18.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.2817ms
2025-09-03 13:55:18.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:55:18.342 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:18.343 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:18.344 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:55:18.345 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:55:18.347 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:55:18.349 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:18.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:55:18.352 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:55:18.353 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:55:18.355 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:55:18.358 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 11.7735ms
2025-09-03 13:55:18.359 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:55:18.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:55:18.361 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:18.365 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:55:18.365 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:55:18.366 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 28.4117ms
2025-09-03 13:55:18.367 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.8257ms
2025-09-03 13:55:18.368 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:18.371 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:55:18.372 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:55:18.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.7161ms
2025-09-03 13:55:18.374 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:55:18.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:55:18.383 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:55:18.384 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 10.1543ms
2025-09-03 13:55:18.385 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:55:18.386 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 26.2167ms
2025-09-03 13:55:19.123 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:55:19.128 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:25:19.1221723Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:55:19.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:55:19.136 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 13:55:22.909 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__dto_ContactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__dto_ContactId_1
LIMIT 1
2025-09-03 13:55:22.912 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-09-03 13:55:22.914 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-09-03 13:55:22.916 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:55:22.918 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 13:55:22.920 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:55:22.921 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 13:55:23.976 +05:30 [INF] Received HTTP response headers after 1052.8672ms - 200
2025-09-03 13:55:23.977 +05:30 [INF] End processing HTTP request after 1056.868ms - 200
2025-09-03 13:55:23.982 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3831b35a-2267-4ed7-8fb4-26347c902bb7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p7='2025-09-03T08:25:23.9790718Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T08:25:23.9790720Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 13:55:25.224 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 13:55:25.226 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:25.227 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:55:25.229 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"sent","timestamp":"1756887926","recipient_id":"918974005240","conversation":{"id":"aecd015e8298e2b0bc3e9c6587952b35","expiration_timestamp":"1756887926","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:55:25.230 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:55:25.230 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"sent","timestamp":"1756887926","recipient_id":"918974005240","conversation":{"id":"aecd015e8298e2b0bc3e9c6587952b35","expiration_timestamp":"1756887926","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:55:25.231 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:55:25.232 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:55:25.233 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.403ms
2025-09-03 13:55:25.236 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:25.237 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:25.238 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.6661ms
2025-09-03 13:55:25.239 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==
2025-09-03 13:55:25.261 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:25.263 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA== (legacy)
2025-09-03 13:55:25.566 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:55:25.569 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:25.570 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:55:25.572 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"delivered","timestamp":"1756887926","recipient_id":"918974005240","conversation":{"id":"aecd015e8298e2b0bc3e9c6587952b35","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:55:25.573 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:55:25.574 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"delivered","timestamp":"1756887926","recipient_id":"918974005240","conversation":{"id":"aecd015e8298e2b0bc3e9c6587952b35","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:55:25.574 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:55:25.575 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:55:25.576 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6179ms
2025-09-03 13:55:25.580 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:25.580 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:25.585 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==
2025-09-03 13:55:25.586 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.8328ms
2025-09-03 13:55:25.588 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:25.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='3831b35a-2267-4ed7-8fb4-26347c902bb7', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:55:25.596 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA== → Delivered
2025-09-03 13:55:25.735 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 13:55:25.737 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:25.738 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:55:25.740 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"delivered","timestamp":"1756887927","recipient_id":"918974005240","conversation":{"id":"aecd015e8298e2b0bc3e9c6587952b35","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:55:25.741 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:55:25.741 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"delivered","timestamp":"1756887927","recipient_id":"918974005240","conversation":{"id":"aecd015e8298e2b0bc3e9c6587952b35","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 13:55:25.742 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:55:25.743 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:55:25.744 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8761ms
2025-09-03 13:55:25.748 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:25.748 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:25.750 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==
2025-09-03 13:55:25.751 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.5677ms
2025-09-03 13:55:25.753 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:25.757 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA== (legacy)
2025-09-03 13:55:27.988 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-03 13:55:27.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:27.992 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:55:27.994 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"read","timestamp":"1756887929","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:55:27.995 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:55:27.995 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==","status":"read","timestamp":"1756887929","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-03 13:55:27.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:55:27.997 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 13:55:27.998 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1393ms
2025-09-03 13:55:28.001 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:28.001 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:28.003 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA==
2025-09-03 13:55:28.004 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.633ms
2025-09-03 13:55:28.006 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 13:55:28.012 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='3831b35a-2267-4ed7-8fb4-26347c902bb7', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 13:55:28.014 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEZBNURDRDdDMENDRDc0ODU2AA== → Read
2025-09-03 13:55:48.528 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 13:55:48.530 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:48.531 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:55:48.533 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQjg0MTVBOTIxNTI1OUJDMTVDRjY1MTEwRTEzNjlEOTMA","timestamp":"1756887949","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:55:48.535 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:55:48.535 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQjg0MTVBOTIxNTI1OUJDMTVDRjY1MTEwRTEzNjlEOTMA","timestamp":"1756887949","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:55:48.536 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:55:48.537 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:55:48.538 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8948ms
2025-09-03 13:55:48.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:55:48.541 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:55:48.543 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:55:48.543 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.3403ms
2025-09-03 13:56:03.410 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 13:56:03.413 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:56:03.414 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:56:03.416 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjhFRDREOUY4QjNEQzJCODlDQTM2MjRDMDY4RUJGNDEA","timestamp":"1756887963","text":{"body":"Fg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:56:03.417 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:56:03.418 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjhFRDREOUY4QjNEQzJCODlDQTM2MjRDMDY4RUJGNDEA","timestamp":"1756887963","text":{"body":"Fg"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:56:03.418 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:56:03.419 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:56:03.420 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3806ms
2025-09-03 13:56:03.423 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:56:03.425 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.1602ms
2025-09-03 13:56:03.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:56:03.476 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:56:08.962 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 13:56:08.965 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:56:08.966 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 13:56:08.968 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNDI0MTREREZCNEQ3MEFDRUZDODYxRjBFRTUyNTExNzIA","timestamp":"1756887969","text":{"body":"Gt"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:56:08.970 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 13:56:08.970 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNDI0MTREREZCNEQ3MEFDRUZDODYxRjBFRTUyNTExNzIA","timestamp":"1756887969","text":{"body":"Gt"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 13:56:08.971 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:56:08.972 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 13:56:08.973 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.7205ms
2025-09-03 13:56:08.976 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 13:56:08.977 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 13:56:08.982 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 13:56:08.983 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.1791ms
2025-09-03 13:56:13.598 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:56:13.598 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 13:56:13.606 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=oIaQJkPw2z6cvElHQqQyYg - 101 null null 271925.1311ms
2025-09-03 13:56:13.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=7NwfQxx9Y9HVuNr-WW5bpQ - 101 null null 271977.575ms
2025-09-03 13:56:14.310 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:56:14.313 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.314 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.8251ms
2025-09-03 13:56:14.327 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:56:14.331 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.335 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:56:14.350 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:56:14.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:56:14.364 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:56:14.366 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3043ms
2025-09-03 13:56:14.368 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:56:14.370 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.6306ms
2025-09-03 13:56:14.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:56:14.468 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.469 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:56:14.471 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:56:14.477 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:56:14.483 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:56:14.485 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4819ms
2025-09-03 13:56:14.487 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:56:14.489 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.5166ms
2025-09-03 13:56:14.551 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:56:14.555 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.555 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 13:56:14.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 5.1ms
2025-09-03 13:56:14.560 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-03 13:56:14.560 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.560 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:56:14.561 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:56:14.565 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 13:56:14.570 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 23.0968ms
2025-09-03 13:56:14.575 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.613 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 53.1135ms
2025-09-03 13:56:14.582 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.572 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 16.4593ms
2025-09-03 13:56:14.606 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 13:56:14.578 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-03 13:56:14.622 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:56:14.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-03 13:56:14.633 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.634 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:56:14.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.638 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 13:56:14.641 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.642 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 13:56:14.649 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:56:14.643 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:56:14.650 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 13:56:14.645 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:56:14.653 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 13:56:14.654 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:56:14.655 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 94.9576ms
2025-09-03 13:56:14.670 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=2BwlDVMZGbPfCddqTOtzjw - null null
2025-09-03 13:56:14.661 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 54.6678ms
2025-09-03 13:56:14.658 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:56:14.659 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:56:14.667 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-09-03 13:56:14.681 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.686 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 38.9828ms
2025-09-03 13:56:14.688 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-09-03 13:56:14.693 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:56:14.693 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:56:14.694 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 13:56:14.704 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 13:56:14.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 143.6627ms
2025-09-03 13:56:14.711 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 47.0559ms
2025-09-03 13:56:14.716 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-03 13:56:14.717 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 89.3947ms
2025-09-03 13:56:14.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=_lyPNY8pGDKGuiYqSurZ5w - null null
2025-09-03 13:56:14.724 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:56:14.725 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 13:56:14.784 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-03 13:56:14.787 +05:30 [INF] GetAllContactsAsync returned 13 contacts
2025-09-03 13:56:14.788 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:56:14.790 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 101.9351ms
2025-09-03 13:56:14.791 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-03 13:56:14.793 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 171.5987ms
2025-09-03 13:59:08.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:59:08.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:59:08.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:59:08.155 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:59:08.157 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:59:08.159 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:59:08.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 7.4702ms
2025-09-03 13:59:08.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 9.1459ms
2025-09-03 13:59:08.161 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 8.0776ms
2025-09-03 13:59:08.171 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:59:08.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:59:08.175 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:59:08.176 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:59:08.177 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:59:08.178 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:59:08.179 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-03 13:59:08.179 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:59:08.184 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-03 13:59:08.184 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:59:08.188 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 13:59:08.191 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:59:08.193 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 12.15ms
2025-09-03 13:59:08.195 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:59:08.196 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-03 13:59:08.197 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.2532ms
2025-09-03 13:59:08.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-09-03 13:59:08.198 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 27.166ms
2025-09-03 13:59:08.199 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:59:08.201 +05:30 [INF] CORS policy execution successful.
2025-09-03 13:59:08.204 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 30.8334ms
2025-09-03 13:59:08.206 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:59:08.209 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 13:59:08.211 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-09-03 13:59:08.215 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-03 13:59:08.218 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 13:59:08.219 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.768ms
2025-09-03 13:59:08.221 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-03 13:59:08.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 23.9057ms
2025-09-03 13:59:08.942 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__contactId_0='26b8b9a2-5624-40ed-a659-65de71d03d20', @__userGuid_1='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userGuid_1
LIMIT 1
2025-09-03 13:59:08.964 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='a20f409b-4482-48e6-96f5-1f5e9a0de941', @p0='2025-09-03T08:29:08.9412762Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-03 13:59:08.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessGuid_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessGuid_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-09-03 13:59:08.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userGuid_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userGuid_0
2025-09-03 14:08:36.319 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 14:08:36.326 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=2BwlDVMZGbPfCddqTOtzjw - 101 null null 741656.0683ms
2025-09-03 14:08:36.327 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 14:08:36.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=_lyPNY8pGDKGuiYqSurZ5w - 101 null null 741610.5058ms
2025-09-03 14:32:31.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 14:32:31.713 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null null
2025-09-03 14:32:31.724 +05:30 [INF] CORS policy execution successful.
2025-09-03 14:32:31.726 +05:30 [INF] CORS policy execution successful.
2025-09-03 14:32:31.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 36.6935ms
2025-09-03 14:32:31.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 204 null null 14.4714ms
2025-09-03 14:32:31.819 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 14:32:31.822 +05:30 [INF] CORS policy execution successful.
2025-09-03 14:32:31.826 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - null 0
2025-09-03 14:32:31.826 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 14:32:31.829 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 14:32:31.829 +05:30 [INF] CORS policy execution successful.
2025-09-03 14:32:31.831 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 11.4441ms
2025-09-03 14:32:31.833 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-03 14:32:31.839 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-03 14:32:31.842 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&negotiateVersion=1 - 200 316 application/json 16.5032ms
2025-09-03 14:32:31.844 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=j1W0Lop564imOH5vFnRuUQ - null null
2025-09-03 14:32:31.854 +05:30 [INF] CORS policy execution successful.
2025-09-03 14:32:31.855 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 14:32:31.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=zI2VWZdnTqRNaV9R8O9ejQ - null null
2025-09-03 14:32:31.887 +05:30 [INF] CORS policy execution successful.
2025-09-03 14:32:31.893 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-03 14:36:15.647 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-03 14:36:15.650 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 14:36:15.651 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 14:36:15.653 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRUZFQTQ5NTMzQ0YwNEYyMkUyQzI5QjYyQjQwNDM0RDEA","timestamp":"1756572423","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-03 14:36:15.656 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 14:36:15.656 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRUZFQTQ5NTMzQ0YwNEYyMkUyQzI5QjYyQjQwNDM0RDEA","timestamp":"1756572423","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-03 14:36:15.657 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 14:36:15.658 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 14:36:15.659 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.0158ms
2025-09-03 14:36:15.661 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 14:36:15.662 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.2317ms
2025-09-03 14:36:15.668 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 14:36:15.668 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRUZFQTQ5NTMzQ0YwNEYyMkUyQzI5QjYyQjQwNDM0RDEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA==, Text: Customer Support
2025-09-03 14:36:15.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 14:36:15.747 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 14:36:15.750 +05:30 [WRN] ❌ No flow context on CampaignSendLog for WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA==
2025-09-03 14:47:00.813 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-03 14:47:00.816 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 14:47:00.817 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 14:47:00.819 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRUFCRjEzNUVDNUUwMzdFQUU5NDcxMUE0QTM4NjNGOUEA","timestamp":"1756574419","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-03 14:47:00.821 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 14:47:00.821 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRUFCRjEzNUVDNUUwMzdFQUU5NDcxMUE0QTM4NjNGOUEA","timestamp":"1756574419","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-03 14:47:00.821 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 14:47:00.822 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 14:47:00.824 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.4853ms
2025-09-03 14:47:00.825 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 14:47:00.826 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 14:47:00.826 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRUFCRjEzNUVDNUUwMzdFQUU5NDcxMUE0QTM4NjNGOUEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA==, Text: Customer Support
2025-09-03 14:47:00.828 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.2868ms
2025-09-03 14:47:00.880 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 14:47:00.885 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 14:47:00.887 +05:30 [WRN] ❌ No flow context on CampaignSendLog for WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjMzM0ZEMzAyRUQ3QUQxNkYwAA==
2025-09-03 14:48:45.942 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-03 14:48:45.944 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 14:48:45.945 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 14:48:45.947 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA==","status":"sent","timestamp":"1756733780","recipient_id":"918974005240","conversation":{"id":"2758576454c78f04ed34294d9b5635b2","expiration_timestamp":"1756733780","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 14:48:45.949 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 14:48:45.949 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA==","status":"sent","timestamp":"1756733780","recipient_id":"918974005240","conversation":{"id":"2758576454c78f04ed34294d9b5635b2","expiration_timestamp":"1756733780","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 14:48:45.949 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 14:48:45.952 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.9333ms
2025-09-03 14:48:45.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 14:48:45.954 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 14:48:45.954 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.2862ms
2025-09-03 14:48:45.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 14:48:45.961 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 14:48:45.963 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 14:48:45.966 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 14:48:46.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='0537a2e6-a3ae-4166-9a00-e551df8a0c8f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-03 14:48:46.021 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA== (legacy)
2025-09-03 15:04:33.426 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 567
2025-09-03 15:04:33.429 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 15:04:33.430 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 15:04:33.432 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==","status":"delivered","timestamp":"1756827779","recipient_id":"917082156227","conversation":{"id":"206957553a33d7e357bcb1d2f83a131e","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 15:04:33.433 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 15:04:33.434 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==","status":"delivered","timestamp":"1756827779","recipient_id":"917082156227","conversation":{"id":"206957553a33d7e357bcb1d2f83a131e","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 15:04:33.435 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 15:04:33.438 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.4474ms
2025-09-03 15:04:33.441 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 15:04:33.452 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.946ms
2025-09-03 15:04:33.505 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 15:04:33.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 15:04:33.511 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 15:04:33.513 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 15:04:33.517 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 15:04:33.520 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='d0802879-3912-4f5c-8ae8-1fc1f67f660c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-03 15:04:33.550 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p2='d0802879-3912-4f5c-8ae8-1fc1f67f660c', @p0='2025-09-02T15:42:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-03 15:04:33.555 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA== → Delivered
2025-09-03 15:13:40.841 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-03 15:13:40.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 15:13:40.845 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 15:13:40.848 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzcwRTA5MEVGOTE2Q0MwQ0MxRTRDMUI1NUE0QkI1N0MA","timestamp":"1756574573","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 15:13:40.850 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 15:13:40.850 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzcwRTA5MEVGOTE2Q0MwQ0MxRTRDMUI1NUE0QkI1N0MA","timestamp":"1756574573","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 15:13:40.850 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 15:13:40.852 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 15:13:40.853 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.7142ms
2025-09-03 15:13:40.854 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 15:13:40.856 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 15:13:40.856 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzcwRTA5MEVGOTE2Q0MwQ0MxRTRDMUI1NUE0QkI1N0MA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA==, Text: Contact Sales
2025-09-03 15:13:40.858 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.261ms
2025-09-03 15:13:40.950 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 15:13:40.958 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 15:13:40.961 +05:30 [WRN] ❌ No flow context on CampaignSendLog for WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA==
2025-09-03 15:20:17.343 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 567
2025-09-03 15:20:17.347 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 15:20:17.349 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 15:20:17.352 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTZGMDVCQjlDODExRDE1MzcxAA==","status":"delivered","timestamp":"1756827777","recipient_id":"917082156227","conversation":{"id":"010f6e0892156a89e1adb10dc3528dd0","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 15:20:17.354 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 15:20:17.355 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTZGMDVCQjlDODExRDE1MzcxAA==","status":"delivered","timestamp":"1756827777","recipient_id":"917082156227","conversation":{"id":"010f6e0892156a89e1adb10dc3528dd0","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 15:20:17.356 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 15:20:17.359 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9416ms
2025-09-03 15:20:17.363 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 15:20:17.365 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.6858ms
2025-09-03 15:20:17.459 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 15:20:17.466 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 15:20:17.469 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 15:20:17.471 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 15:20:17.477 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTZGMDVCQjlDODExRDE1MzcxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 15:20:17.480 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTZGMDVCQjlDODExRDE1MzcxAA==
2025-09-03 15:20:17.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTZGMDVCQjlDODExRDE1MzcxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 15:20:17.486 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTZGMDVCQjlDODExRDE1MzcxAA== (legacy)
2025-09-03 15:22:18.987 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 15:22:18.987 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-03 15:22:18.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=j1W0Lop564imOH5vFnRuUQ - 101 null null 2987151.4709ms
2025-09-03 15:22:18.999 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyODcwZTFkOC0wZTgwLTRiMTItODhiZC03MGE4MTEzMzA3ZDYiLCJpZCI6IjI4NzBlMWQ4LTBlODAtNGIxMi04OGJkLTcwYTgxMTMzMDdkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjg3MGUxZDgtMGU4MC00YjEyLTg4YmQtNzBhODExMzMwN2Q2IiwiZW1haWwiOiJyYXRhbkB0Y3MuY29tIiwibmFtZSI6IlRhdGEgQ29uc3VsdGFuY3kgU2VydmljZXMiLCJzdGF0dXMiOiJBY3RpdmUiLCJCdXNpbmVzc0lkIjoiYzEzYmU1OTctNmFlMi00MmJiLTlkNDMtOTI1ODE1ZjI0ZmY4IiwiYnVzaW5lc3NJZCI6ImMxM2JlNTk3LTZhZTItNDJiYi05ZDQzLTkyNTgxNWYyNGZmOCIsImNvbXBhbnlOYW1lIjoiVGF0YSBDb25zdWx0YW5jeSBTZXJ2aWNlcyIsInJvbGUiOiJidXNpbmVzcyIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImJ1c2luZXNzIiwicGxhbl9pZCI6ImIxZWQwNTI2LWFiZDAtNDcyZi1hOWVhLTViZmViZWVmZmU0MSIsInBlcm1pc3Npb25zIjoiY2FtcGFpZ24udmlldyxjcm0uY29udGFjdHMudmlldyxkYXNoYm9hcmQudmlldyxtZXNzYWdpbmcuaW5ib3gudmlldyxtZXNzYWdpbmcucmVwb3J0LnZpZXcsbWVzc2FnaW5nLnNlbmQsbWVzc2FnaW5nLnNlbmQudGVtcGxhdGUsbWVzc2FnaW5nLnNlbmQudGV4dCxtZXNzYWdpbmcuc3RhdHVzLnZpZXcscHJvZHVjdC52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsRGFzaGJvYXJkLE1lc3NhZ2luZyIsImhhc0FsbEFjY2VzcyI6ImZhbHNlIiwiZXhwIjoxNzU2ODkwMjIwLCJpc3MiOiJ4Ynl0ZWNoYXQtYXBpIiwiYXVkIjoieGJ5dGVjaGF0LWNsaWVudCJ9.w0eCD7BPfL94s-nVXWFlM0nPX-yZalqEVAgzfy6j01M&id=zI2VWZdnTqRNaV9R8O9ejQ - 101 null null 2987116.619ms
2025-09-03 15:22:20.391 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 15:22:20.395 +05:30 [INF] CORS policy execution successful.
2025-09-03 15:22:20.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 5.9484ms
2025-09-03 15:22:20.401 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 15:22:20.402 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 15:22:20.406 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 15:22:20.409 +05:30 [INF] CORS policy execution successful.
2025-09-03 15:22:20.419 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 15:22:20.524 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 102.41ms
2025-09-03 15:22:20.528 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 15:22:20.583 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 15:22:20.419 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 09:03:40 AM', Current time (UTC): '03-09-2025 09:52:20 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-03 15:22:20.629 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 09:03:40 AM', Current time (UTC): '03-09-2025 09:52:20 AM'.
2025-09-03 15:22:20.631 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 15:22:20.636 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 235.4816ms
2025-09-03 15:22:20.638 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 15:22:20.678 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 34.3313ms
2025-09-03 15:22:20.680 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 15:22:20.720 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts(String tab, Int32 page, Int32 pageSize) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 135
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 15:22:20.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 500 null application/json; charset=utf-8 328.1541ms
2025-09-03 16:17:01.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 16:17:01.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:17:01.440 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:01.446 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 21.9313ms
2025-09-03 16:17:01.447 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:01.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 16:17:01.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 95.9668ms
2025-09-03 16:17:01.524 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:01.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:17:01.530 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 09:03:40 AM', Current time (UTC): '03-09-2025 10:47:01 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-03 16:17:01.533 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:01.535 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 09:03:40 AM', Current time (UTC): '03-09-2025 10:47:01 AM'.
2025-09-03 16:17:01.536 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 09:03:40 AM', Current time (UTC): '03-09-2025 10:47:01 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-03 16:17:01.538 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:17:01.541 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '03-09-2025 09:03:40 AM', Current time (UTC): '03-09-2025 10:47:01 AM'.
2025-09-03 16:17:01.542 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 16:17:01.549 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-03 16:17:01.581 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 34.2147ms
2025-09-03 16:17:01.584 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:17:01.633 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts(String tab, Int32 page, Int32 pageSize) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 135
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 16:17:01.637 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-03 16:17:01.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 401 0 null 117.3885ms
2025-09-03 16:17:01.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 500 null application/json; charset=utf-8 127.5773ms
2025-09-03 16:17:09.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 16:17:09.199 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:09.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 10.178ms
2025-09-03 16:17:09.208 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 16:17:09.214 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:09.216 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 16:17:09.227 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 16:17:09.288 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 16:17:09.468 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 16:17:09.554 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 16:17:09.759 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 16:17:09.781 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 16:17:09.816 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 16:17:09.819 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 16:17:09.823 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:17:09.828 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 597.7129ms
2025-09-03 16:17:09.830 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 16:17:09.831 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 623.688ms
2025-09-03 16:17:09.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:17:09.845 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:09.846 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.2282ms
2025-09-03 16:17:09.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:17:09.858 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:09.860 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:17:09.861 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 16:17:09.867 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 16:17:09.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 16:17:09.878 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:17:09.879 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.0417ms
2025-09-03 16:17:09.881 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:17:09.884 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.4724ms
2025-09-03 16:17:09.904 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:17:09.908 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:09.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:17:09.913 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 16:17:09.921 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 16:17:09.927 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:17:09.929 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0389ms
2025-09-03 16:17:09.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:17:09.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.8119ms
2025-09-03 16:17:10.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:17:10.023 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:10.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:17:10.027 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 16:17:10.036 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 16:17:10.041 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:17:10.044 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.519ms
2025-09-03 16:17:10.046 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:17:10.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.3755ms
2025-09-03 16:17:19.004 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 16:17:19.005 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:17:19.008 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:19.011 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:19.012 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 8.6995ms
2025-09-03 16:17:19.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 8.1604ms
2025-09-03 16:17:19.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:17:19.023 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 16:17:19.027 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:19.031 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:17:19.032 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:17:19.033 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:17:19.036 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 16:17:19.040 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 16:17:19.044 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 16:17:19.072 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 16:17:19.078 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType77`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:17:19.085 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 16:17:19.089 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 45.0784ms
2025-09-03 16:17:19.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:17:19.095 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 75.816ms
2025-09-03 16:17:19.119 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 16:17:19.126 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:17:19.134 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 95.747ms
2025-09-03 16:17:19.136 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:17:19.138 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 114.7056ms
2025-09-03 16:17:23.188 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 16:17:23.192 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 16:17:23.194 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 16:17:23.197 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTZGMjAxNzQ4MEIwRjcxMzgwOTIyMThENTFCQjE3N0IA","timestamp":"1756825319","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 16:17:23.199 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 16:17:23.199 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTZGMjAxNzQ4MEIwRjcxMzgwOTIyMThENTFCQjE3N0IA","timestamp":"1756825319","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 16:17:23.200 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:17:23.202 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 16:17:23.203 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8856ms
2025-09-03 16:17:23.208 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 16:17:23.209 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.4973ms
2025-09-03 16:17:23.229 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 16:17:23.233 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 16:20:36.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 16:20:36.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:20:36.265 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:20:36.269 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:20:36.270 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 11.5346ms
2025-09-03 16:20:36.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 16.6222ms
2025-09-03 16:20:36.285 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 16:20:36.289 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:20:36.293 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:20:36.296 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:20:36.297 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:20:36.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:20:36.300 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 16:20:36.302 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 16:20:36.305 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 16:20:36.310 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 16:20:36.322 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType77`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:20:36.329 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 22.8522ms
2025-09-03 16:20:36.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:20:36.333 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 44.0037ms
2025-09-03 16:20:36.539 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 16:20:36.545 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 16:20:36.549 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:20:36.552 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 247.5536ms
2025-09-03 16:20:36.554 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:20:36.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 271.6141ms
2025-09-03 16:22:17.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 16:22:17.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:22:17.485 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:22:17.488 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:22:17.489 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.2753ms
2025-09-03 16:22:17.491 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 14.5883ms
2025-09-03 16:22:17.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:22:17.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 16:22:17.509 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:22:17.512 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:22:17.513 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:22:17.514 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:22:17.517 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 16:22:17.518 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 16:22:17.523 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 16:22:17.526 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 16:22:17.536 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType77`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:22:17.543 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 22.8773ms
2025-09-03 16:22:17.546 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:22:17.547 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 47.0699ms
2025-09-03 16:22:17.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 16:22:17.629 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 16:22:17.632 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:22:17.635 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 111.3935ms
2025-09-03 16:22:17.637 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:22:17.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 133.2558ms
2025-09-03 16:23:09.004 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-03 16:23:09.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 16:23:09.056 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 16:23:09.064 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTUwMEEwMDJGMjA0NjU4MTYyAA==","status":"sent","timestamp":"1756570018","recipient_id":"918974005240","conversation":{"id":"52536a08c387f5995e585f69589178ac","expiration_timestamp":"1756570018","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 16:23:09.068 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 16:23:09.068 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTUwMEEwMDJGMjA0NjU4MTYyAA==","status":"sent","timestamp":"1756570018","recipient_id":"918974005240","conversation":{"id":"52536a08c387f5995e585f69589178ac","expiration_timestamp":"1756570018","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 16:23:09.069 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType100`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:23:09.075 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 15.6539ms
2025-09-03 16:23:09.078 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 16:23:09.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 16:23:09.100 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 16:23:09.101 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 96.2893ms
2025-09-03 16:23:09.104 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 16:23:09.112 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 16:23:09.119 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTUwMEEwMDJGMjA0NjU4MTYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 16:23:09.122 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTUwMEEwMDJGMjA0NjU4MTYyAA==
2025-09-03 16:23:09.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTUwMEEwMDJGMjA0NjU4MTYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 16:23:09.129 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTUwMEEwMDJGMjA0NjU4MTYyAA== (legacy)
2025-09-03 16:57:22.489 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 16:57:22.543 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 16:57:22.561 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 16:57:23.512 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 16:57:24.165 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 16:57:24.187 +05:30 [INF] ClickLogWorker started
2025-09-03 16:57:24.469 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 16:57:24.471 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 16:57:24.475 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 16:57:24.477 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 16:57:24.477 +05:30 [INF] Hosting environment: Development
2025-09-03 16:57:24.478 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 16:57:24.497 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[@__cutoff_0='2025-08-27T11:27:22.7027883Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 16:57:25.264 +05:30 [INF] ClickLogWorker stopped
2025-09-03 16:57:26.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 16:57:26.419 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 283.5066ms
2025-09-03 16:57:26.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 16:57:26.478 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 18.6685ms
2025-09-03 16:57:26.566 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 16:57:26.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.6356ms
2025-09-03 16:57:26.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 16:57:27.158 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 300.0676ms
2025-09-03 16:57:35.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:57:35.295 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 16:57:35.352 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:35.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 69.8706ms
2025-09-03 16:57:35.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:57:35.381 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:35.587 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:57:35.617 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 16:57:35.794 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 16:57:35.904 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 16:57:35.916 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:57:35.948 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 323.7233ms
2025-09-03 16:57:35.951 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:57:35.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 594.4409ms
2025-09-03 16:57:35.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:57:35.970 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:35.978 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:57:35.988 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 16:57:36.003 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 16:57:36.009 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:57:36.011 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.8983ms
2025-09-03 16:57:36.014 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:57:36.015 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 49.5278ms
2025-09-03 16:57:36.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 16:57:36.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 16:57:36.076 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:36.080 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:36.082 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.4071ms
2025-09-03 16:57:36.085 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:57:36.087 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 16:57:36.089 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 16:57:36.095 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:36.097 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 16:57:36.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 16:57:36.108 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 16:57:36.109 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:57:36.114 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.58ms
2025-09-03 16:57:36.116 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 16:57:36.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.3803ms
2025-09-03 16:57:36.138 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 16:57:36.188 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-03 16:57:36.211 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 99.2569ms
2025-09-03 16:57:36.214 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 16:57:36.215 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 128.0227ms
2025-09-03 16:57:47.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-03 16:57:47.088 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:47.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 6.0363ms
2025-09-03 16:57:47.096 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 632
2025-09-03 16:57:47.100 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:47.103 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 16:57:47.110 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 16:57:47.146 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-09-03 16:57:47.185 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__providerNorm_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND lower(w."Provider") = @__providerNorm_1
LIMIT 1
2025-09-03 16:57:47.314 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPYiRcG1d3OYR6J2oNxoT2id2hHCQ43yZBAuMCVnnD3wZBGZCT71VvTVUsrux7GhlpiUDtIw3i25Pa487tR96SxLKDSpYoPcFtjTnZAB7wZB7fELMTykAhPQvbMmZAhkMTaHMIEcZCaoP9TXJ1BLXBssbUrmeP8FDArZCnvNZCB2sBhENjpLXonyCOY9u30IZB9lZAzpIwZCVW02RaWnlTb6V8CoQylrImQFmVGMkn1p1j11H41uwa321TgZDZD' (Nullable = false), @p1='2025-09-03T11:27:47.1926898Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-03 16:57:47.333 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:57:47.339 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 225.8504ms
2025-09-03 16:57:47.341 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 16:57:47.343 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 247.413ms
2025-09-03 16:57:48.070 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-03 16:57:48.077 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:48.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 8.614ms
2025-09-03 16:57:48.085 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 462
2025-09-03 16:57:48.089 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:48.091 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 16:57:48.148 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 16:57:48.183 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 16:57:48.187 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 16:57:50.145 +05:30 [INF] Received HTTP response headers after 1950.7604ms - 200
2025-09-03 16:57:50.149 +05:30 [INF] End processing HTTP request after 1967.2855ms - 200
2025-09-03 16:57:50.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:57:50.160 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2008.9047ms
2025-09-03 16:57:50.162 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 16:57:50.164 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2079.2735ms
2025-09-03 16:57:56.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 16:57:56.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:57:56.359 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:56.363 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:56.364 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 17.6472ms
2025-09-03 16:57:56.365 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 14.5893ms
2025-09-03 16:57:56.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 16:57:56.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 16:57:56.383 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:56.385 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:57:56.388 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:57:56.393 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:57:56.395 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 16:57:56.399 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 16:57:56.405 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 16:57:56.433 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 16:57:56.438 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 16:57:56.453 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 50.8307ms
2025-09-03 16:57:56.455 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 16:57:56.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 86.634ms
2025-09-03 16:57:56.468 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 16:57:56.566 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 16:57:56.697 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:57:56.716 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 317.4183ms
2025-09-03 16:57:56.718 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 16:57:56.720 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 342.1967ms
2025-09-03 16:58:19.926 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 16:58:19.931 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:58:19.932 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 6.4424ms
2025-09-03 16:58:19.945 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 77
2025-09-03 16:58:19.950 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:58:19.952 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 16:58:19.961 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 16:58:19.994 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+911234567890'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 16:58:20.006 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 16:58:20.019 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 16:58:20.023 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 16:58:20.806 +05:30 [INF] Received HTTP response headers after 781.4997ms - 400
2025-09-03 16:58:20.808 +05:30 [INF] End processing HTTP request after 789.4061ms - 400
2025-09-03 16:58:20.811 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AH4tSlicegDTqkHUbRVetYB"}}
2025-09-03 16:58:20.942 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p0='a439db3f-91b7-4a08-8d6c-1b6b47270d28', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:28:20.8153759Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AH4tSlicegDTqkHUbRVetYB"}}', @p15='+911234567890' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:28:20.8154452Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 16:58:20.947 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:58:20.954 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 989.0302ms
2025-09-03 16:58:20.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 16:58:20.958 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1013.3059ms
2025-09-03 16:58:43.841 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 16:58:43.845 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:58:43.847 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 6.4326ms
2025-09-03 16:58:43.854 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 16:58:43.858 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:58:43.860 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 16:58:43.862 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 16:58:43.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+911234567890'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 16:58:43.889 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 16:58:43.893 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 16:58:43.895 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 16:58:44.672 +05:30 [INF] Received HTTP response headers after 775.5638ms - 400
2025-09-03 16:58:44.674 +05:30 [INF] End processing HTTP request after 780.7049ms - 400
2025-09-03 16:58:44.675 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"ATLa5Xge0kBhSn7gqRHRbJZ"}}
2025-09-03 16:58:44.699 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='8042e062-64af-480d-9ab2-66e02e481200', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:28:44.6778197Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"ATLa5Xge0kBhSn7gqRHRbJZ"}}', @p15='+911234567890' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:28:44.6778198Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 16:58:44.703 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:58:44.706 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 841.3274ms
2025-09-03 16:58:44.708 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 16:58:44.709 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 855.37ms
2025-09-03 16:59:31.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 16:59:31.956 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:59:31.957 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 6.391ms
2025-09-03 16:59:31.963 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 16:59:31.968 +05:30 [INF] CORS policy execution successful.
2025-09-03 16:59:31.971 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 16:59:31.972 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 16:59:31.989 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+911234567890'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 16:59:31.996 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 16:59:32.001 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 16:59:32.003 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 16:59:33.205 +05:30 [INF] Received HTTP response headers after 1200.0138ms - 400
2025-09-03 16:59:33.207 +05:30 [INF] End processing HTTP request after 1206.3967ms - 400
2025-09-03 16:59:33.209 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AJqBlh7Kqsz3AK1mMmRsQP3"}}
2025-09-03 16:59:33.216 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='30537f25-25db-4f15-80b8-b761cee266bd', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:29:33.2118222Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AJqBlh7Kqsz3AK1mMmRsQP3"}}', @p15='+911234567890' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:29:33.2118223Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 16:59:33.220 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 16:59:33.222 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1245.9655ms
2025-09-03 16:59:33.224 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 16:59:33.226 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1263.1211ms
2025-09-03 17:00:19.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 17:00:19.438 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:00:19.439 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 15.3905ms
2025-09-03 17:00:19.452 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 17:00:19.456 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:00:19.460 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:00:19.463 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 17:00:19.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 17:00:19.481 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 17:00:19.490 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:00:19.492 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:00:20.715 +05:30 [INF] Received HTTP response headers after 1219.2374ms - 200
2025-09-03 17:00:20.718 +05:30 [INF] End processing HTTP request after 1228.0043ms - 200
2025-09-03 17:00:20.745 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='061a4f38-25a4-4211-9432-a8cc990c22ad', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:30:20.7415772Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:30:20.7415773Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 17:00:20.749 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:00:20.751 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1285.5565ms
2025-09-03 17:00:20.754 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:00:20.756 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1303.725ms
2025-09-03 17:00:21.859 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 17:00:21.864 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:21.868 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:00:21.881 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==","status":"sent","timestamp":"1756899023","recipient_id":"918974005240","conversation":{"id":"8efc353faaa40e1cfd0961d777f19fb3","expiration_timestamp":"1756899023","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:21.885 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:00:21.888 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:00:21.893 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 22.5306ms
2025-09-03 17:00:21.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:21.897 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 38.3514ms
2025-09-03 17:00:22.109 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==","status":"sent","timestamp":"1756899023","recipient_id":"918974005240","conversation":{"id":"8efc353faaa40e1cfd0961d777f19fb3","expiration_timestamp":"1756899023","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:22.137 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 17:00:22.150 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 17:00:22.153 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 17:00:22.158 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:00:22.203 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:22.209 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==
2025-09-03 17:00:22.227 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:22.233 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA== (legacy)
2025-09-03 17:00:22.260 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 17:00:22.267 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:22.269 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:00:22.273 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==","status":"delivered","timestamp":"1756899023","recipient_id":"918974005240","conversation":{"id":"8efc353faaa40e1cfd0961d777f19fb3","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:22.278 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:00:22.280 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:00:22.285 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.2609ms
2025-09-03 17:00:22.286 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==","status":"delivered","timestamp":"1756899023","recipient_id":"918974005240","conversation":{"id":"8efc353faaa40e1cfd0961d777f19fb3","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:22.291 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:22.295 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:00:22.296 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 36.5418ms
2025-09-03 17:00:22.304 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:22.313 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA==
2025-09-03 17:00:22.317 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:22.326 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='061a4f38-25a4-4211-9432-a8cc990c22ad', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 17:00:22.330 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTMxMjE4RDgwN0U0MTJFNzhGAA== → Delivered
2025-09-03 17:00:40.866 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 17:00:40.870 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:00:40.871 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 5.8685ms
2025-09-03 17:00:40.878 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 17:00:40.882 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:00:40.884 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:00:40.886 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 17:00:40.896 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 17:00:40.903 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 17:00:40.907 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:00:40.909 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:00:42.631 +05:30 [INF] Received HTTP response headers after 1720.1204ms - 200
2025-09-03 17:00:42.634 +05:30 [INF] End processing HTTP request after 1727.1187ms - 200
2025-09-03 17:00:42.657 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='2c3dbedb-1455-4fc9-92ab-bfb8e6a5a66e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:30:42.6364105Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:30:42.6364106Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 17:00:42.660 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:00:42.663 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1774.1729ms
2025-09-03 17:00:42.665 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:00:42.667 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1788.7896ms
2025-09-03 17:00:42.672 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 17:00:42.676 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:00:42.679 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:00:42.680 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 17:00:42.686 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+913456734534'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 17:00:42.696 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 17:00:42.700 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:00:42.702 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:00:43.350 +05:30 [INF] Received HTTP response headers after 645.6419ms - 400
2025-09-03 17:00:43.352 +05:30 [INF] End processing HTTP request after 651.7121ms - 400
2025-09-03 17:00:43.353 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AOmvtYoRsOdsm3ACjYcD7iD"}}
2025-09-03 17:00:43.359 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='6ccaf539-2e39-44ea-921c-234ff573cfb7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:30:43.3554082Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AOmvtYoRsOdsm3ACjYcD7iD"}}', @p15='+913456734534' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:30:43.3554083Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 17:00:43.362 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:00:43.364 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 682.0593ms
2025-09-03 17:00:43.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:00:43.369 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 697.6527ms
2025-09-03 17:00:43.585 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 17:00:43.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:43.592 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:00:43.597 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==","status":"sent","timestamp":"1756899044","recipient_id":"918974005240","conversation":{"id":"0abb9a79c369a9179ffa37d55ce8b05e","expiration_timestamp":"1756899044","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:43.599 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:00:43.601 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:00:43.603 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.6506ms
2025-09-03 17:00:43.605 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:43.607 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.5607ms
2025-09-03 17:00:43.613 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==","status":"sent","timestamp":"1756899044","recipient_id":"918974005240","conversation":{"id":"0abb9a79c369a9179ffa37d55ce8b05e","expiration_timestamp":"1756899044","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:43.614 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:00:43.621 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:43.625 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==
2025-09-03 17:00:43.630 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:43.633 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA== (legacy)
2025-09-03 17:00:43.854 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 17:00:43.854 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 17:00:43.859 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:43.862 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:43.864 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:00:43.866 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:00:43.869 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==","status":"delivered","timestamp":"1756899045","recipient_id":"918974005240","conversation":{"id":"0abb9a79c369a9179ffa37d55ce8b05e","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:43.871 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==","status":"delivered","timestamp":"1756899045","recipient_id":"918974005240","conversation":{"id":"0abb9a79c369a9179ffa37d55ce8b05e","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:43.873 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:00:43.874 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==","status":"delivered","timestamp":"1756899045","recipient_id":"918974005240","conversation":{"id":"0abb9a79c369a9179ffa37d55ce8b05e","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:43.877 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:00:43.877 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:00:43.878 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:00:43.879 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:00:43.881 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.33ms
2025-09-03 17:00:43.887 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:43.887 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 16.036ms
2025-09-03 17:00:43.901 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:43.904 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==
2025-09-03 17:00:43.906 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:00:43.908 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 53.4648ms
2025-09-03 17:00:43.912 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:43.912 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 58.0868ms
2025-09-03 17:00:43.924 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='2c3dbedb-1455-4fc9-92ab-bfb8e6a5a66e', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 17:00:43.930 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA== → Delivered
2025-09-03 17:00:43.933 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==","status":"delivered","timestamp":"1756899045","recipient_id":"918974005240","conversation":{"id":"0abb9a79c369a9179ffa37d55ce8b05e","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:00:43.935 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:00:43.941 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:43.945 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA==
2025-09-03 17:00:43.948 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:00:43.951 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjMyQjlGOUM3NUQyM0QxQzE4AA== (legacy)
2025-09-03 17:01:32.180 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 17:01:32.196 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:01:32.198 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 17.5023ms
2025-09-03 17:01:32.212 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 17:01:32.216 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:01:32.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:01:32.223 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 17:01:32.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 17:01:32.239 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 17:01:32.249 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:01:32.251 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:01:33.217 +05:30 [INF] Received HTTP response headers after 964.073ms - 200
2025-09-03 17:01:33.219 +05:30 [INF] End processing HTTP request after 970.157ms - 200
2025-09-03 17:01:33.224 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e693c28a-34c2-4faa-9d4f-e3e571712c62', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:31:33.2209643Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:31:33.2209644Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 17:01:33.226 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:01:33.228 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1002.2522ms
2025-09-03 17:01:33.230 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:01:33.231 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1019.8451ms
2025-09-03 17:01:33.236 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 17:01:33.239 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:01:33.241 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:01:33.242 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 17:01:33.248 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+913456734534'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 17:01:33.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 17:01:33.264 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:01:33.265 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 17:01:33.832 +05:30 [INF] Received HTTP response headers after 564.648ms - 400
2025-09-03 17:01:33.834 +05:30 [INF] End processing HTTP request after 570.5719ms - 400
2025-09-03 17:01:33.836 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AA2CcTY5KOAH2VPQwiI1HpE"}}
2025-09-03 17:01:33.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='702bddc1-a57c-4d5e-ad95-48e353d7d948', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T11:31:33.8380484Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AA2CcTY5KOAH2VPQwiI1HpE"}}', @p15='+913456734534' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T11:31:33.8380484Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 17:01:33.845 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:01:33.847 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 602.9956ms
2025-09-03 17:01:33.849 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:01:33.850 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 614.4469ms
2025-09-03 17:01:34.366 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 17:01:34.369 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:01:34.371 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:01:34.374 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==","status":"sent","timestamp":"1756899095","recipient_id":"918974005240","conversation":{"id":"53174c30b45b63e6a9e34bbf1de5e1e3","expiration_timestamp":"1756899095","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:01:34.376 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:01:34.376 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==","status":"sent","timestamp":"1756899095","recipient_id":"918974005240","conversation":{"id":"53174c30b45b63e6a9e34bbf1de5e1e3","expiration_timestamp":"1756899095","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:01:34.377 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:01:34.378 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:01:34.380 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.6102ms
2025-09-03 17:01:34.389 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:01:34.389 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:01:34.393 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==
2025-09-03 17:01:34.394 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.5321ms
2025-09-03 17:01:34.400 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:01:34.412 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA== (legacy)
2025-09-03 17:01:34.777 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 17:01:34.780 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:01:34.782 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:01:34.785 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==","status":"delivered","timestamp":"1756899095","recipient_id":"918974005240","conversation":{"id":"53174c30b45b63e6a9e34bbf1de5e1e3","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:01:34.787 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:01:34.788 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==","status":"delivered","timestamp":"1756899095","recipient_id":"918974005240","conversation":{"id":"53174c30b45b63e6a9e34bbf1de5e1e3","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:01:34.788 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:01:34.790 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:01:34.791 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1509ms
2025-09-03 17:01:34.796 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:01:34.797 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:01:34.800 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==
2025-09-03 17:01:34.801 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.6789ms
2025-09-03 17:01:34.805 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:01:34.812 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e693c28a-34c2-4faa-9d4f-e3e571712c62', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 17:01:34.816 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA== → Delivered
2025-09-03 17:01:34.819 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 17:01:34.822 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:01:34.824 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:01:34.826 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==","status":"delivered","timestamp":"1756899096","recipient_id":"918974005240","conversation":{"id":"53174c30b45b63e6a9e34bbf1de5e1e3","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:01:34.828 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:01:34.829 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==","status":"delivered","timestamp":"1756899096","recipient_id":"918974005240","conversation":{"id":"53174c30b45b63e6a9e34bbf1de5e1e3","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:01:34.830 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:01:34.831 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:01:34.833 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1682ms
2025-09-03 17:01:34.838 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:01:34.838 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:01:34.840 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.0785ms
2025-09-03 17:01:34.843 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA==
2025-09-03 17:01:34.851 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:01:34.853 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjc4MDUxNjFERDI3QTMyNThEAA== (legacy)
2025-09-03 17:01:54.983 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 17:01:54.988 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:01:54.989 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 5.534ms
2025-09-03 17:01:54.993 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 17:01:54.996 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:01:54.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 17:01:55.001 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 17:02:25.389 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 17:33:46.683 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 17:33:46.740 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 17:33:46.765 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 17:33:47.893 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 17:33:48.721 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 17:33:48.745 +05:30 [INF] ClickLogWorker started
2025-09-03 17:33:49.023 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 17:33:49.043 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 17:33:49.045 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 17:33:49.047 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 17:33:49.049 +05:30 [INF] Hosting environment: Development
2025-09-03 17:33:49.051 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 17:33:49.059 +05:30 [INF] Executed DbCommand (124ms) [Parameters=[@__cutoff_0='2025-08-27T12:03:46.8977301Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 17:33:49.804 +05:30 [INF] ClickLogWorker stopped
2025-09-03 17:33:50.476 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 17:33:50.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 234.6835ms
2025-09-03 17:33:50.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 17:33:50.746 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.2769ms
2025-09-03 17:33:50.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 17:33:50.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.1491ms
2025-09-03 17:33:51.079 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 17:33:51.392 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 313.6793ms
2025-09-03 17:34:02.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 17:34:02.620 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 17:34:02.688 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:02.694 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 81.6563ms
2025-09-03 17:34:02.700 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 17:34:02.718 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:02.801 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 17:34:02.828 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 17:34:02.925 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 17:34:03.059 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 17:34:03.208 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 17:34:03.382 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 17:34:03.396 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 17:34:03.462 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 17:34:03.465 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 17:34:03.476 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:34:03.489 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 651.958ms
2025-09-03 17:34:03.493 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 17:34:03.501 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 800.9257ms
2025-09-03 17:34:03.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:34:03.516 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:03.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.8823ms
2025-09-03 17:34:03.523 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:34:03.528 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:03.580 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:34:03.587 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:34:03.608 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 17:34:03.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:34:03.661 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:34:03.675 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 84.5803ms
2025-09-03 17:34:03.678 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:34:03.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 156.557ms
2025-09-03 17:34:03.700 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:34:03.706 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:03.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:34:03.716 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:34:03.729 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:34:03.735 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:34:03.737 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.2306ms
2025-09-03 17:34:03.740 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:34:03.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.0581ms
2025-09-03 17:34:03.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:34:03.840 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:03.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:34:03.846 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:34:03.856 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:34:03.863 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:34:03.866 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.4129ms
2025-09-03 17:34:03.869 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:34:03.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.7915ms
2025-09-03 17:34:08.124 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-03 17:34:08.129 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:34:08.134 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:34:08.146 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDk4NDhEMTZBNzY2MEJGODRFODQ5MkE5MDQ3QzM0NUQA","timestamp":"1756825270","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 17:34:08.151 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:34:08.154 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:34:08.159 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 21.5738ms
2025-09-03 17:34:08.163 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:34:08.164 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 40.7474ms
2025-09-03 17:34:08.400 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDk4NDhEMTZBNzY2MEJGODRFODQ5MkE5MDQ3QzM0NUQA","timestamp":"1756825270","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-03 17:34:08.404 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-03 17:34:08.434 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-09-03 17:34:08.438 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-03 17:34:08.890 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:34:08.895 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:08.897 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 6.4309ms
2025-09-03 17:34:08.902 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:34:08.907 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:34:08.913 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:34:08.921 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:34:08.931 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 17:34:08.969 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 17:34:09.033 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 17:34:09.145 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:34:09.175 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 251.0718ms
2025-09-03 17:34:09.178 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:34:09.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 277.2533ms
2025-09-03 17:34:09.219 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 17:34:09.223 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:34:09.229 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 17:34:09.311 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 78.7716ms
2025-09-03 17:34:09.314 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:34:09.356 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 17:34:09.441 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 222.2901ms
2025-09-03 17:34:19.545 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 130
2025-09-03 17:34:19.549 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:34:19.551 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:34:19.553 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:34:19.560 +05:30 [INF] Route matched with {action = "AddContact", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddContact(xbytechat.api.CRM.Dtos.ContactDto) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:34:19.631 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api) in 67.962ms
2025-09-03 17:34:19.633 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:34:19.682 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.AddContact(ContactDto dto) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 17:34:19.694 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 500 null application/json; charset=utf-8 149.5851ms
2025-09-03 17:34:22.432 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 130
2025-09-03 17:34:22.436 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:34:22.437 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:34:22.439 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:34:22.440 +05:30 [INF] Route matched with {action = "AddContact", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddContact(xbytechat.api.CRM.Dtos.ContactDto) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:34:22.472 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api) in 29.0116ms
2025-09-03 17:34:22.474 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:34:22.516 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.AddContact(ContactDto dto) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 17:34:22.526 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 500 null application/json; charset=utf-8 94.1484ms
2025-09-03 17:35:11.755 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-03 17:35:11.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:35:11.762 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:35:11.765 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA==","status":"delivered","timestamp":"1756733781","recipient_id":"918974005240","conversation":{"id":"2758576454c78f04ed34294d9b5635b2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 17:35:11.768 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:35:11.770 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:35:11.772 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.2851ms
2025-09-03 17:35:11.772 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA==","status":"delivered","timestamp":"1756733781","recipient_id":"918974005240","conversation":{"id":"2758576454c78f04ed34294d9b5635b2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 17:35:11.781 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:35:11.786 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.1312ms
2025-09-03 17:35:11.809 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 17:35:11.816 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 17:35:11.820 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 17:35:11.822 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:35:11.851 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:35:11.855 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA==
2025-09-03 17:35:11.867 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:35:11.870 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzA0NTk5RDExMzJGMTcxQTA0AA== (legacy)
2025-09-03 17:35:23.154 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-03 17:35:23.160 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:35:23.161 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:35:23.166 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDE5QzcyNEQzNkU2MTgzMUM5AA==","status":"sent","timestamp":"1756650884","recipient_id":"918974005240","conversation":{"id":"ee67e2109747e81f07127e1c518f78df","expiration_timestamp":"1756650884","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 17:35:23.168 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:35:23.169 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:35:23.171 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9845ms
2025-09-03 17:35:23.174 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:35:23.176 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.4972ms
2025-09-03 17:35:23.180 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDE5QzcyNEQzNkU2MTgzMUM5AA==","status":"sent","timestamp":"1756650884","recipient_id":"918974005240","conversation":{"id":"ee67e2109747e81f07127e1c518f78df","expiration_timestamp":"1756650884","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 17:35:23.184 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:35:23.196 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDE5QzcyNEQzNkU2MTgzMUM5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:35:23.199 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDE5QzcyNEQzNkU2MTgzMUM5AA==
2025-09-03 17:35:23.204 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDE5QzcyNEQzNkU2MTgzMUM5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:35:23.208 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDE5QzcyNEQzNkU2MTgzMUM5AA== (legacy)
2025-09-03 17:36:43.800 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 130
2025-09-03 17:36:43.812 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:36:43.813 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:36:43.815 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:36:43.817 +05:30 [INF] Route matched with {action = "AddContact", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddContact(xbytechat.api.CRM.Dtos.ContactDto) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:36:50.911 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-03 17:36:51.099 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:36:51.126 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:36:51.256 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggN0IzRDIzOEU0NkEyNDNFMTZFODMwMUZGQkIyMTM5NDAA","timestamp":"1756572417","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 17:36:51.261 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:36:51.263 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:36:51.263 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggN0IzRDIzOEU0NkEyNDNFMTZFODMwMUZGQkIyMTM5NDAA","timestamp":"1756572417","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 17:36:51.266 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 120.2436ms
2025-09-03 17:36:51.267 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api) in 7445.9437ms
2025-09-03 17:36:51.268 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 17:36:51.270 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:36:51.276 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 365.0703ms
2025-09-03 17:36:51.276 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:36:51.316 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 17:36:51.333 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggN0IzRDIzOEU0NkEyNDNFMTZFODMwMUZGQkIyMTM5NDAA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDhFNzNFRDRGNTdDREU1QjlDAA==, Text: Contact Sales
2025-09-03 17:38:08.687 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 17:38:08.728 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 17:38:08.744 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 17:38:09.551 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 17:38:10.090 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 17:38:10.105 +05:30 [INF] ClickLogWorker started
2025-09-03 17:38:10.281 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 17:38:10.285 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 17:38:10.286 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 17:38:10.288 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 17:38:10.288 +05:30 [INF] Hosting environment: Development
2025-09-03 17:38:10.290 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 17:38:10.297 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[@__cutoff_0='2025-08-27T12:08:08.8540354Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 17:38:11.150 +05:30 [INF] ClickLogWorker stopped
2025-09-03 17:38:12.433 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 17:38:12.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 223.0444ms
2025-09-03 17:38:12.678 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 17:38:12.689 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.5388ms
2025-09-03 17:38:12.777 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 17:38:12.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.9993ms
2025-09-03 17:38:13.025 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 17:38:13.309 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 283.9179ms
2025-09-03 17:38:30.849 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 130
2025-09-03 17:38:30.856 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 17:38:30.904 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:38:30.907 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:38:30.970 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 17:38:30.991 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 17:38:30.995 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 146.741ms
2025-09-03 17:38:33.296 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 130
2025-09-03 17:38:33.311 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:38:33.313 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:38:33.317 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 17:38:33.318 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 17:38:33.320 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 23.8397ms
2025-09-03 17:38:40.747 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 130
2025-09-03 17:38:40.752 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:38:40.753 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:38:40.757 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 17:38:40.759 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 17:38:40.760 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 13.0951ms
2025-09-03 17:39:26.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.8c56f9512d60b3fff24e.hot-update.json - null null
2025-09-03 17:39:26.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.8c56f9512d60b3fff24e.hot-update.json - 404 0 null 13.112ms
2025-09-03 17:39:26.084 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.8c56f9512d60b3fff24e.hot-update.json, Response status code: 404
2025-09-03 17:39:28.823 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:28.831 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:28.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.233ms
2025-09-03 17:39:28.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:28.851 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:29.036 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:29.076 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:39:29.345 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 17:39:29.493 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:39:29.511 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:39:29.555 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 467.8387ms
2025-09-03 17:39:29.559 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:29.571 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 729.374ms
2025-09-03 17:39:29.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:29.587 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:29.591 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:29.594 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:39:29.613 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:39:29.629 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:39:29.633 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 33.5641ms
2025-09-03 17:39:29.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:29.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 58.2684ms
2025-09-03 17:39:37.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 17:39:37.228 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:37.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 11.542ms
2025-09-03 17:39:37.239 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 17:39:37.248 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:37.251 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 17:39:37.264 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 17:39:37.318 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 17:39:37.397 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 17:39:37.535 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 17:39:37.769 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 17:39:37.785 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 17:39:37.805 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 17:39:37.809 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 17:39:37.813 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:39:37.819 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 549.5409ms
2025-09-03 17:39:37.822 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 17:39:37.825 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 585.8189ms
2025-09-03 17:39:37.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:37.838 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:37.840 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.0966ms
2025-09-03 17:39:37.846 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:37.851 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:37.856 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:37.859 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:39:37.871 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:39:37.879 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:39:37.883 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 21.2193ms
2025-09-03 17:39:37.886 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:37.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.6586ms
2025-09-03 17:39:37.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:37.925 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:37.928 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:37.931 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:39:37.941 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:39:37.948 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:39:37.951 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6623ms
2025-09-03 17:39:37.955 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:37.957 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.8353ms
2025-09-03 17:39:38.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:39:38.067 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:38.070 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:38.073 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:39:38.083 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:39:38.091 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:39:38.095 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.1489ms
2025-09-03 17:39:38.099 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:39:38.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 41.8944ms
2025-09-03 17:39:45.743 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 17:39:45.751 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:39:45.759 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 17:39:45.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:39:45.871 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 107.082ms
2025-09-03 17:39:45.873 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:45.876 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:39:45.878 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 31.7827ms
2025-09-03 17:39:45.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:39:45.944 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:39:45.969 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:39:45.977 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:39:45.994 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 17:39:45.938 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 17:39:46.020 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 276.3929ms
2025-09-03 17:39:46.039 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 17:39:46.110 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 17:39:46.260 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:39:46.305 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 323.031ms
2025-09-03 17:39:46.308 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:39:46.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 371.5716ms
2025-09-03 17:40:03.864 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 129
2025-09-03 17:40:03.871 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:40:03.873 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:40:03.876 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 17:40:03.878 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 17:40:03.880 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 15.5955ms
2025-09-03 17:40:24.666 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 17:40:24.754 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 17:40:24.781 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 17:40:26.365 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 17:40:27.384 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 17:40:27.419 +05:30 [INF] ClickLogWorker started
2025-09-03 17:40:27.731 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 17:40:27.757 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 17:40:27.759 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 17:40:27.762 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 17:40:27.765 +05:30 [INF] Hosting environment: Development
2025-09-03 17:40:27.767 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 17:40:27.773 +05:30 [INF] Executed DbCommand (142ms) [Parameters=[@__cutoff_0='2025-08-27T12:10:24.9922266Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 17:40:28.497 +05:30 [INF] ClickLogWorker stopped
2025-09-03 17:40:28.544 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 17:40:28.838 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 306.2134ms
2025-09-03 17:40:28.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 17:40:28.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.214ms
2025-09-03 17:40:29.007 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 17:40:29.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.9961ms
2025-09-03 17:40:29.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 17:40:29.737 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 352.5252ms
2025-09-03 17:40:35.095 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 129
2025-09-03 17:40:35.105 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 17:40:35.175 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:40:35.177 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:40:35.262 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 17:40:35.265 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 17:40:35.269 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 174.5351ms
2025-09-03 17:41:36.890 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 17:41:36.913 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:41:36.940 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:41:36.974 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTRGOUQwRTNFRDg0NDdBMzAxAA==","status":"delivered","timestamp":"1756732358","recipient_id":"918974005240","conversation":{"id":"8668268d2d264b430e82698849b38159","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:41:36.981 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:41:36.993 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:41:37.016 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 64.0279ms
2025-09-03 17:41:37.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:41:37.024 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 133.7617ms
2025-09-03 17:41:37.255 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTRGOUQwRTNFRDg0NDdBMzAxAA==","status":"delivered","timestamp":"1756732358","recipient_id":"918974005240","conversation":{"id":"8668268d2d264b430e82698849b38159","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 17:41:37.444 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 17:41:37.463 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 17:41:37.469 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 17:41:37.474 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 17:41:37.510 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTRGOUQwRTNFRDg0NDdBMzAxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:41:37.515 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTRGOUQwRTNFRDg0NDdBMzAxAA==
2025-09-03 17:41:37.532 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTRGOUQwRTNFRDg0NDdBMzAxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 17:41:37.536 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTRGOUQwRTNFRDg0NDdBMzAxAA== (legacy)
2025-09-03 17:42:10.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 17:42:10.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 37.4988ms
2025-09-03 17:42:10.172 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 17:42:10.178 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 17:42:10.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 16.3752ms
2025-09-03 17:42:10.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.6418ms
2025-09-03 17:42:10.910 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 17:42:11.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 129.2945ms
2025-09-03 17:42:12.793 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 129
2025-09-03 17:42:12.801 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:42:12.803 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:42:12.808 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:42:12.817 +05:30 [INF] Route matched with {action = "AddContact", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddContact(xbytechat.api.CRM.Dtos.ContactDto) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:42:18.861 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api) in 6040.2519ms
2025-09-03 17:42:18.870 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.AddContact (xbytechat.api)'
2025-09-03 17:54:23.427 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 17:54:23.511 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 17:54:23.537 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 17:54:25.165 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 17:54:26.227 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 17:54:26.259 +05:30 [INF] ClickLogWorker started
2025-09-03 17:54:26.646 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 17:54:26.648 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 17:54:26.651 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 17:54:26.653 +05:30 [INF] Hosting environment: Development
2025-09-03 17:54:26.654 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 17:54:26.675 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 17:54:26.715 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__cutoff_0='2025-08-27T12:24:23.7313662Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 17:54:27.237 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 17:54:27.345 +05:30 [INF] ClickLogWorker stopped
2025-09-03 17:54:27.584 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 358.4308ms
2025-09-03 17:54:27.786 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 17:54:27.786 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 17:54:27.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 15.678ms
2025-09-03 17:54:27.856 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.4572ms
2025-09-03 17:54:28.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 17:54:28.711 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 399.3336ms
2025-09-03 17:54:33.995 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 129
2025-09-03 17:54:34.006 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 17:54:34.080 +05:30 [INF] CORS policy execution failed.
2025-09-03 17:54:34.084 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 17:54:34.187 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 17:54:34.191 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 17:54:34.197 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 201.8236ms
2025-09-03 17:54:44.872 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:44.888 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:44.892 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 19.6964ms
2025-09-03 17:54:44.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:44.908 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:45.052 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:45.085 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:54:45.438 +05:30 [INF] Executed DbCommand (100ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 17:54:45.571 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:54:45.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:54:45.631 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 535.3171ms
2025-09-03 17:54:45.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:45.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 754.9356ms
2025-09-03 17:54:45.781 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:45.789 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:45.800 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:45.803 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:54:45.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:54:45.829 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:54:45.831 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 24.1157ms
2025-09-03 17:54:45.834 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:45.837 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 55.9355ms
2025-09-03 17:54:54.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 17:54:54.225 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:54.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 11.8265ms
2025-09-03 17:54:54.233 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 17:54:54.240 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:54.243 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 17:54:54.252 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 17:54:54.302 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 17:54:54.366 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 17:54:54.486 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 17:54:54.690 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 17:54:54.709 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 17:54:54.730 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 17:54:54.733 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 17:54:54.738 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:54:54.743 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 487.2369ms
2025-09-03 17:54:54.747 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 17:54:54.749 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 515.9603ms
2025-09-03 17:54:54.755 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:54.759 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:54.761 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.9321ms
2025-09-03 17:54:54.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:54.774 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:54.777 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:54.779 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:54:54.791 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:54:54.797 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:54:54.799 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.177ms
2025-09-03 17:54:54.802 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:54.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.5478ms
2025-09-03 17:54:54.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:54.832 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:54.834 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:54.836 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:54:54.845 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:54:54.854 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:54:54.857 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.3677ms
2025-09-03 17:54:54.860 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:54.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.5822ms
2025-09-03 17:54:54.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:54:54.983 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:54:54.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:54.989 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:54:55.009 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:54:55.013 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:54:55.016 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 23.6363ms
2025-09-03 17:54:55.019 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:54:55.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 44.1448ms
2025-09-03 17:55:08.215 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 17:55:08.222 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:55:08.232 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 17:55:08.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:55:08.360 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 125.144ms
2025-09-03 17:55:08.363 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:55:08.366 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:55:08.367 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 9.9214ms
2025-09-03 17:55:08.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:55:08.448 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:55:08.472 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:55:08.480 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:55:08.493 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 17:55:08.437 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 17:55:08.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 300.1868ms
2025-09-03 17:55:08.538 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 17:55:08.616 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 17:55:08.751 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:55:08.788 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 304.6329ms
2025-09-03 17:55:08.792 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:55:08.795 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 355.6684ms
2025-09-03 17:56:54.526 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-03 17:56:54.533 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:56:54.537 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 17:56:54.551 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTQzQUIwMTk4NDhCMUUxN0FDODM2RDFFMkNBRjBEMEEA","timestamp":"1756574548","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-03 17:56:54.558 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 17:56:54.562 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:56:54.567 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 24.7355ms
2025-09-03 17:56:54.577 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 17:56:54.578 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 52.6698ms
2025-09-03 17:56:54.790 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTQzQUIwMTk4NDhCMUUxN0FDODM2RDFFMkNBRjBEMEEA","timestamp":"1756574548","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-03 17:56:54.794 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 17:56:54.806 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 17:56:54.808 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTQzQUIwMTk4NDhCMUUxN0FDODM2RDFFMkNBRjBEMEEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA==, Text: Explore Our Services
2025-09-03 17:56:54.829 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 17:56:54.881 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 17:56:54.886 +05:30 [WRN] ❌ No MessageLog or CampaignSendLog for original WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJCODlFNUY0NjczRkUwMTY3AA==
2025-09-03 17:57:03.060 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:57:03.068 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:57:03.070 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.2366ms
2025-09-03 17:57:03.076 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:57:03.081 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:57:03.084 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:57:03.086 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:57:03.095 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:57:03.103 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:57:03.106 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.4338ms
2025-09-03 17:57:03.109 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:57:03.111 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.8083ms
2025-09-03 17:57:03.255 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:57:03.260 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:57:03.263 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:57:03.267 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:57:03.277 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:57:03.284 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:57:03.287 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.9879ms
2025-09-03 17:57:03.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:57:03.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.3243ms
2025-09-03 17:57:03.349 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:57:03.353 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 17:57:03.353 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 17:57:03.366 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:57:03.370 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:57:03.375 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:57:03.376 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 27.0674ms
2025-09-03 17:57:03.378 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 17:57:03.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:57:03.387 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-09-03 17:57:03.412 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 17:57:03.435 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 44.8305ms
2025-09-03 17:57:03.438 +05:30 [INF] CORS policy execution successful.
2025-09-03 17:57:03.447 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 17:57:03.445 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 17:57:03.450 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:57:03.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 17:57:03.509 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 17:57:03.511 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 17:57:03.513 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 72.3215ms
2025-09-03 17:57:03.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 171.0079ms
2025-09-03 17:57:03.526 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 17:57:03.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 17:57:03.538 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 186.4347ms
2025-09-03 17:57:03.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 17:57:03.557 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 17:57:03.562 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 17:57:03.565 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 39.7255ms
2025-09-03 17:57:03.569 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 17:57:03.573 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 185.6991ms
2025-09-03 18:02:12.986 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts - application/json 133
2025-09-03 18:02:12.991 +05:30 [INF] CORS policy execution failed.
2025-09-03 18:02:12.992 +05:30 [INF] Request origin http://localhost:7113/ does not have permission to access the resource.
2025-09-03 18:02:12.995 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 18:02:12.997 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 18:02:13.000 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts - 405 0 null 14.0269ms
2025-09-03 18:19:10.203 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:19:10.217 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:19:10.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 16.4885ms
2025-09-03 18:19:10.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:19:10.242 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:19:10.244 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:19:10.246 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:19:10.250 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:19:10.391 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:19:10.405 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:19:10.411 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:19:10.415 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 165.6279ms
2025-09-03 18:19:10.417 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:19:10.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 184.5295ms
2025-09-03 18:20:27.698 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:20:27.709 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:20:27.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.6351ms
2025-09-03 18:20:27.718 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:20:27.723 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:20:27.727 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:20:27.729 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:20:27.737 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:20:27.750 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:20:27.753 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 21.1615ms
2025-09-03 18:20:27.756 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:20:27.761 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.9336ms
2025-09-03 18:20:27.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:20:27.905 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:20:27.908 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:20:27.910 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:20:27.917 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:20:27.924 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:20:27.927 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.516ms
2025-09-03 18:20:27.930 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:20:27.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.615ms
2025-09-03 18:20:27.997 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:20:28.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:20:27.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:20:28.015 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:20:28.021 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:20:28.027 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:20:28.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:20:28.030 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:20:28.032 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 32.8613ms
2025-09-03 18:20:28.034 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:20:28.101 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 63.8625ms
2025-09-03 18:20:28.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:20:28.110 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:20:28.110 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:20:28.116 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:20:28.177 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:20:28.176 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 18:20:28.179 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:20:28.182 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 76.8724ms
2025-09-03 18:20:28.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 186.1454ms
2025-09-03 18:20:28.195 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:20:28.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:20:28.211 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:20:28.213 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 216.8992ms
2025-09-03 18:20:28.219 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:20:28.233 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:20:28.239 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:20:28.243 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 32.3889ms
2025-09-03 18:20:28.246 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:20:28.248 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 146.0069ms
2025-09-03 18:21:31.812 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:31.889 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:31.932 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 120.7944ms
2025-09-03 18:21:31.978 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:31.983 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:31.986 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:31.988 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:21:31.995 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:21:32.002 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:21:32.017 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:21:32.022 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:21:32.025 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 30.001ms
2025-09-03 18:21:32.027 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:32.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 51.7614ms
2025-09-03 18:21:35.467 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=favourites&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:35.473 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:35.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=favourites&search=&page=1&pageSize=20 - 204 null null 7.5538ms
2025-09-03 18:21:35.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=favourites&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:35.487 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:35.491 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:35.494 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:21:35.498 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=favourites, page=1, pageSize=20
2025-09-03 18:21:35.509 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsFavorite"
2025-09-03 18:21:35.550 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsFavorite"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:21:35.558 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:21:35.561 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 63.9854ms
2025-09-03 18:21:35.564 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:35.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=favourites&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 85.938ms
2025-09-03 18:21:35.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=archived&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:35.992 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:35.994 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=archived&search=&page=1&pageSize=20 - 204 null null 7.1766ms
2025-09-03 18:21:36.016 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=archived&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:36.022 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:36.024 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:36.026 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:21:36.031 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=archived, page=1, pageSize=20
2025-09-03 18:21:36.043 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsArchived"
2025-09-03 18:21:36.076 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsArchived"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:21:36.081 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:21:36.084 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 53.7201ms
2025-09-03 18:21:36.087 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:36.089 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=archived&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 73.183ms
2025-09-03 18:21:36.697 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=groups&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:36.703 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:36.705 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=groups&search=&page=1&pageSize=20 - 204 null null 8.1299ms
2025-09-03 18:21:36.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=groups&search=&page=1&pageSize=20 - null null
2025-09-03 18:21:36.717 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:21:36.720 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:36.723 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:21:36.728 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=groups, page=1, pageSize=20
2025-09-03 18:21:36.765 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."Group" IS NOT NULL AND c."Group" <> ''
2025-09-03 18:21:36.794 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."Group" IS NOT NULL AND c."Group" <> ''
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:21:36.800 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:21:36.806 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 79.7456ms
2025-09-03 18:21:36.810 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:21:36.812 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=groups&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 100.0703ms
2025-09-03 18:22:33.626 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:33.637 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:33.639 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.4059ms
2025-09-03 18:22:33.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:33.657 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:33.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:33.662 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:22:33.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:22:33.679 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:22:33.684 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.4934ms
2025-09-03 18:22:33.696 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:33.701 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 49.5505ms
2025-09-03 18:22:33.725 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:33.730 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:33.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:33.735 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:22:33.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:22:33.749 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:22:33.752 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.339ms
2025-09-03 18:22:33.756 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:33.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.6708ms
2025-09-03 18:22:33.823 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:33.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:22:33.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:22:33.837 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:33.843 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:33.849 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:22:33.851 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:33.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 28.279ms
2025-09-03 18:22:33.855 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:22:33.864 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:22:33.872 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:22:33.979 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 103.1186ms
2025-09-03 18:22:33.987 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:33.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:22:33.994 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:22:33.996 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:22:34.001 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:22:34.037 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:22:34.061 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 18:22:34.063 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 76.9887ms
2025-09-03 18:22:34.068 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:22:34.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 247.9512ms
2025-09-03 18:22:34.090 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:22:34.082 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:34.107 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:22:34.107 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 284.3158ms
2025-09-03 18:22:34.114 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:22:34.123 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 55.4917ms
2025-09-03 18:22:34.126 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:22:34.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 257.2123ms
2025-09-03 18:22:47.129 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:47.135 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:47.137 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2204ms
2025-09-03 18:22:47.144 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:47.151 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:47.153 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:47.156 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:22:47.163 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:22:47.171 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:22:47.174 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.0354ms
2025-09-03 18:22:47.177 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:47.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.6718ms
2025-09-03 18:22:47.347 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:47.355 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:47.358 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:47.361 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:22:47.369 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:22:47.377 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:22:47.381 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.3315ms
2025-09-03 18:22:47.384 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:47.386 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.152ms
2025-09-03 18:22:47.456 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:22:47.457 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:22:47.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:22:47.462 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:22:47.466 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:47.471 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:47.473 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:22:47.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:47.476 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 19.1098ms
2025-09-03 18:22:47.522 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:22:47.523 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 42.5675ms
2025-09-03 18:22:47.537 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:22:47.539 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:22:47.530 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:22:47.544 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:22:47.599 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 18:22:47.601 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:22:47.604 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 70.4317ms
2025-09-03 18:22:47.616 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:22:47.616 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 159.9502ms
2025-09-03 18:22:47.618 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:22:47.620 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:22:47.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 174.4676ms
2025-09-03 18:22:47.636 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:22:47.648 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:22:47.658 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:22:47.665 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:22:47.669 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 34.1292ms
2025-09-03 18:22:47.672 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:22:47.675 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 145.7461ms
2025-09-03 18:24:53.188 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:24:53.200 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:24:53.201 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 13.6279ms
2025-09-03 18:24:53.214 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:24:53.219 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:24:53.221 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:24:53.224 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:24:53.228 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:24:53.370 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:24:53.380 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:24:53.387 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:24:53.390 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 162.6846ms
2025-09-03 18:24:53.393 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:24:53.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 182.0557ms
2025-09-03 18:25:16.205 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-03 18:25:16.229 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:16.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 27.0454ms
2025-09-03 18:25:16.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-03 18:25:16.249 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:16.251 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-03 18:25:16.260 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-03 18:25:16.331 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-03 18:25:16.338 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-03 18:25:16.353 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 88.7738ms
2025-09-03 18:25:16.357 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-03 18:25:16.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 121.364ms
2025-09-03 18:25:19.338 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-09-03 18:25:19.338 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/79c1efba-c3c8-4379-b6ab-76e1ed70d365 - null null
2025-09-03 18:25:19.362 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-03 18:25:19.342 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-09-03 18:25:19.384 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.392 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.400 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.414 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/79c1efba-c3c8-4379-b6ab-76e1ed70d365 - 204 null null 76.0892ms
2025-09-03 18:25:19.405 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.407 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 68.9996ms
2025-09-03 18:25:19.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 59.0787ms
2025-09-03 18:25:19.429 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 87.5178ms
2025-09-03 18:25:19.450 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-03 18:25:19.477 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:25:19.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/79c1efba-c3c8-4379-b6ab-76e1ed70d365 - null null
2025-09-03 18:25:19.490 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.499 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.504 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.506 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:25:19.510 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:25:19.510 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-03 18:25:19.512 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:25:19.515 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:25:19.523 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-03 18:25:19.526 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-09-03 18:25:19.553 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:25:19.572 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:25:19.579 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:25:19.582 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 57.4621ms
2025-09-03 18:25:19.585 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:25:19.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 137.2159ms
2025-09-03 18:25:19.633 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__campaignId_0='79c1efba-c3c8-4379-b6ab-76e1ed70d365', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-03 18:25:19.716 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-03 18:25:19.724 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:25:19.738 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 206.5194ms
2025-09-03 18:25:19.741 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:25:19.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:25:19.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 266.868ms
2025-09-03 18:25:19.749 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:19.758 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:25:19.760 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:25:19.768 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-03 18:25:19.777 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:25:19.781 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 16.3317ms
2025-09-03 18:25:19.784 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:25:19.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 47.1226ms
2025-09-03 18:25:19.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-03 18:25:19.835 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 297.2384ms
2025-09-03 18:25:19.839 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-03 18:25:19.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/79c1efba-c3c8-4379-b6ab-76e1ed70d365 - 200 null application/json; charset=utf-8 360.656ms
2025-09-03 18:25:30.979 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/filter-by-tags - null null
2025-09-03 18:25:30.988 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:30.991 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/filter-by-tags - 204 null null 11.6182ms
2025-09-03 18:25:30.997 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/contacts/filter-by-tags - application/json 40
2025-09-03 18:25:31.004 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:31.007 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactsByTags (xbytechat.api)'
2025-09-03 18:25:31.014 +05:30 [INF] Route matched with {action = "GetContactsByTags", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactsByTags(System.Collections.Generic.List`1[System.String]) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:25:31.211 +05:30 [INF] Executed DbCommand (129ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__tagIds_1={ '4c6bbfb4-fe09-4d8a-8bae-0fb3b404300f' } (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c1."Id", c1."AssignedAt", c1."AssignedBy", c1."BusinessId", c1."ContactId", c1."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c1
    INNER JOIN "Tags" AS t ON c1."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsArchived") AND EXISTS (
    SELECT 1
    FROM "ContactTags" AS c0
    WHERE c."Id" = c0."ContactId" AND c0."TagId" = ANY (@__tagIds_1))
ORDER BY c."Id", t0."Id"
2025-09-03 18:25:31.218 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:25:31.227 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactsByTags (xbytechat.api) in 208.4312ms
2025-09-03 18:25:31.230 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactsByTags (xbytechat.api)'
2025-09-03 18:25:31.233 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/contacts/filter-by-tags - 200 null application/json; charset=utf-8 235.7806ms
2025-09-03 18:25:33.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-03 18:25:33.103 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:33.105 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 19.6914ms
2025-09-03 18:25:33.111 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-03 18:25:33.115 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:25:33.117 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:25:33.120 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:25:33.124 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-09-03 18:25:33.131 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:25:33.141 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:25:33.146 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:25:33.149 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 25.9534ms
2025-09-03 18:25:33.152 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:25:33.155 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 44.0744ms
2025-09-03 18:31:18.632 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 567
2025-09-03 18:31:18.648 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 18:31:18.650 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 18:31:18.657 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA==","status":"delivered","timestamp":"1756827778","recipient_id":"917082156227","conversation":{"id":"7b86dfb69043d138d779dc13af03183a","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 18:31:18.661 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 18:31:18.663 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:31:18.667 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.2193ms
2025-09-03 18:31:18.668 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA==","status":"delivered","timestamp":"1756827778","recipient_id":"917082156227","conversation":{"id":"7b86dfb69043d138d779dc13af03183a","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 18:31:18.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 18:31:18.685 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 53.202ms
2025-09-03 18:31:18.854 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 18:31:18.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 18:31:18.870 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 18:31:18.875 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 18:31:18.909 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__messageId_0='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 18:31:19.030 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='fc98399f-ea4f-4942-9356-6fd6be1a237b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-03 18:31:19.231 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p2='fc98399f-ea4f-4942-9356-6fd6be1a237b', @p0='2025-09-02T15:42:58.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-03 18:31:19.261 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA== → Delivered
2025-09-03 18:33:29.143 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:33:29.151 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:33:29.152 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 9.3836ms
2025-09-03 18:33:29.155 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:33:29.157 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:33:29.158 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:33:29.159 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:33:29.162 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:33:29.166 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:33:29.172 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:33:29.175 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:33:29.176 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 15.283ms
2025-09-03 18:33:29.177 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:33:29.179 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 23.6238ms
2025-09-03 18:33:29.452 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:33:29.454 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:33:29.455 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:33:29.488 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 30.8296ms
2025-09-03 18:33:29.489 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:33:29.516 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 18:33:29.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 69.6546ms
2025-09-03 18:48:10.011 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-03 18:48:10.013 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 18:48:10.014 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 18:48:10.018 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTkzRjJFQ0NGMTNFMTgwQjYzOUE0RDg5MTM3RDI0OUUA","timestamp":"1756569810","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-03 18:48:10.020 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 18:48:10.020 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:48:10.022 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.5622ms
2025-09-03 18:48:10.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 18:48:10.035 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.6196ms
2025-09-03 18:48:10.041 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTkzRjJFQ0NGMTNFMTgwQjYzOUE0RDg5MTM3RDI0OUUA","timestamp":"1756569810","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-03 18:48:10.043 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 18:48:10.044 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 18:48:10.045 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTkzRjJFQ0NGMTNFMTgwQjYzOUE0RDg5MTM3RDI0OUUA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA==, Text: Customer Support
2025-09-03 18:48:10.161 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 18:48:10.171 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 18:48:10.174 +05:30 [WRN] ❌ No MessageLog or CampaignSendLog for original WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA==
2025-09-03 18:50:20.786 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-03 18:50:20.789 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 18:50:20.790 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 18:50:20.793 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMkM3NTQ0NDk3QzMyQUVGODA0MUI4RkZDNzMwNzJCMUQA","timestamp":"1756569855","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 18:50:20.795 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 18:50:20.795 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMkM3NTQ0NDk3QzMyQUVGODA0MUI4RkZDNzMwNzJCMUQA","timestamp":"1756569855","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-03 18:50:20.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:50:20.796 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-03 18:50:20.797 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3343ms
2025-09-03 18:50:20.799 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-03 18:50:20.802 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 18:50:20.803 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMkM3NTQ0NDk3QzMyQUVGODA0MUI4RkZDNzMwNzJCMUQA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA==, Text: Contact Sales
2025-09-03 18:50:20.805 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 18.3933ms
2025-09-03 18:50:20.824 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-03 18:50:20.838 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-09-03 18:50:20.840 +05:30 [WRN] ❌ No MessageLog or CampaignSendLog for original WAMID wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMyQUNGNkJCMjQ2N0NGOUMzAA==
2025-09-03 18:58:22.340 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-03 18:58:22.345 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:22.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.5429ms
2025-09-03 18:58:22.354 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-03 18:58:22.358 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:22.359 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 18:58:22.360 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-03 18:58:22.366 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-09-03 18:58:22.432 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-03 18:58:22.439 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-03 18:58:22.453 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-03 18:58:22.457 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-09-03 18:58:22.460 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-09-03 18:58:22.461 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-09-03 18:58:22.462 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:22.464 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 101.6139ms
2025-09-03 18:58:22.465 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-03 18:58:22.466 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 111.6999ms
2025-09-03 18:58:22.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:22.473 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:22.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5627ms
2025-09-03 18:58:22.477 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:22.480 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:22.481 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:22.482 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:58:22.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-03 18:58:22.492 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:58:22.494 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:22.496 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1067ms
2025-09-03 18:58:22.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:22.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3003ms
2025-09-03 18:58:22.516 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:22.522 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:22.523 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:22.525 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:58:22.530 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:58:22.534 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:22.536 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0283ms
2025-09-03 18:58:22.538 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:22.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.0016ms
2025-09-03 18:58:22.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:22.604 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:22.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:22.608 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:58:22.612 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:58:22.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:22.617 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7328ms
2025-09-03 18:58:22.619 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:22.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0276ms
2025-09-03 18:58:34.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:58:34.996 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:58:34.997 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:58:35.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:58:35.026 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 26.9411ms
2025-09-03 18:58:35.027 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:35.029 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:58:35.029 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 15.6703ms
2025-09-03 18:58:35.056 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 18:58:35.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:58:35.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 69.7744ms
2025-09-03 18:58:35.064 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:35.068 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:58:35.069 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:58:35.070 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:58:35.074 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:58:35.079 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:58:35.082 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:58:35.083 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 12.622ms
2025-09-03 18:58:35.084 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:58:35.085 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 26.8881ms
2025-09-03 18:58:44.659 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:44.663 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:44.664 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5806ms
2025-09-03 18:58:44.672 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:44.675 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:44.677 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:44.678 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:58:44.684 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:58:44.688 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:44.690 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1276ms
2025-09-03 18:58:44.692 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:44.694 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.3063ms
2025-09-03 18:58:44.791 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:44.799 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:44.801 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:44.803 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:58:44.811 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:58:44.816 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:44.819 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.3415ms
2025-09-03 18:58:44.821 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:44.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.8539ms
2025-09-03 18:58:44.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 18:58:44.879 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:58:44.880 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 18:58:44.880 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:44.883 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:44.887 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:58:44.888 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:44.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 10.1931ms
2025-09-03 18:58:44.891 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 18:58:44.892 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 18:58:44.904 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 18:58:44.941 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 35.4972ms
2025-09-03 18:58:44.945 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 18:58:44.948 +05:30 [INF] CORS policy execution successful.
2025-09-03 18:58:44.950 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 18:58:44.952 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 18:58:44.953 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:58:44.976 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 34.1932ms
2025-09-03 18:58:45.000 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 18:58:44.999 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 18:58:45.002 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 18:58:45.005 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 18:58:45.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 135.3694ms
2025-09-03 18:58:45.019 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 18:58:45.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 132.1878ms
2025-09-03 18:58:45.031 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 18:58:45.040 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 18:58:45.042 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 37.5618ms
2025-09-03 18:58:45.044 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 18:58:45.045 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 141.506ms
2025-09-03 19:03:13.421 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:03:13.447 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:03:13.448 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 27.6383ms
2025-09-03 19:03:13.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:03:13.464 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:03:13.466 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:03:13.468 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:03:13.474 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:03:13.478 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:03:13.481 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2089ms
2025-09-03 19:03:13.483 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:03:13.485 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.4848ms
2025-09-03 19:03:13.590 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:03:13.594 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:03:13.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:03:13.599 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:03:13.605 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:03:13.610 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:03:13.613 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.1812ms
2025-09-03 19:03:13.616 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:03:13.621 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.9767ms
2025-09-03 19:03:13.688 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 19:03:13.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:03:13.689 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:03:13.702 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 19:03:13.707 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:03:13.711 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:03:13.712 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-03 19:03:13.714 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 23.0901ms
2025-09-03 19:03:13.715 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:03:13.760 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 42.303ms
2025-09-03 19:03:13.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:03:13.764 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:03:13.766 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-03 19:03:13.770 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:03:13.776 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:03:13.799 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:03:13.821 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:03:13.820 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 436
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-03 19:03:13.822 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:03:13.824 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 51.7928ms
2025-09-03 19:03:13.832 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 144.1656ms
2025-09-03 19:03:13.833 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 19:03:13.834 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:03:13.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:03:13.844 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 155.5341ms
2025-09-03 19:03:13.850 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:03:13.857 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:03:13.859 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 26.9157ms
2025-09-03 19:03:13.861 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:03:13.863 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 99.9714ms
2025-09-03 19:04:54.200 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/tag/get-tag - null null
2025-09-03 19:04:54.207 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/tag/get-tag - 404 0 null 6.8502ms
2025-09-03 19:04:54.217 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/tag/get-tag, Response status code: 404
2025-09-03 19:05:02.196 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/tags/get-tag - null null
2025-09-03 19:05:02.199 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/tags/get-tag - 404 0 null 3.1961ms
2025-09-03 19:05:02.203 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/tags/get-tag, Response status code: 404
2025-09-03 19:05:49.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:05:49.016 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:05:49.024 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.1193ms
2025-09-03 19:05:49.028 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:05:49.037 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:05:49.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:05:49.046 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:05:49.159 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:05:49.163 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:05:49.169 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 120.8472ms
2025-09-03 19:05:49.170 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:05:49.172 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 144.3758ms
2025-09-03 19:05:49.182 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:05:49.185 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:05:49.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:05:49.188 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:05:49.193 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:05:49.197 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:05:49.198 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3728ms
2025-09-03 19:05:49.200 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:05:49.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.6722ms
2025-09-03 19:05:49.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:05:49.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/tags/get-tag - null null
2025-09-03 19:05:49.252 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:05:49.254 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:05:49.265 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:05:49.257 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/tags/get-tag - 404 0 null 6.0133ms
2025-09-03 19:05:49.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 17.0876ms
2025-09-03 19:05:49.270 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:05:49.277 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/tags/get-tag, Response status code: 404
2025-09-03 19:05:49.288 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:05:49.290 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:05:49.298 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:05:49.301 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:05:49.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:05:49.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:05:49.312 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:05:49.312 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2339ms
2025-09-03 19:05:49.316 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 19:05:49.317 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:05:49.322 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 70.116ms
2025-09-03 19:05:49.324 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:05:49.337 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:05:49.341 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:05:49.350 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 35.1818ms
2025-09-03 19:05:49.352 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:05:49.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 67.0228ms
2025-09-03 19:09:05.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:09:05.196 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:09:05.197 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.2668ms
2025-09-03 19:09:05.202 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:09:05.207 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:09:05.209 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:09:05.211 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:09:05.218 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:09:05.230 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:09:05.233 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.1929ms
2025-09-03 19:09:05.235 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:09:05.237 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.8869ms
2025-09-03 19:09:05.339 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:09:05.350 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:09:05.352 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:09:05.355 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:09:05.362 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:09:05.368 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:09:05.370 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7056ms
2025-09-03 19:09:05.374 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:09:05.376 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.8452ms
2025-09-03 19:09:05.436 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:09:05.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:09:05.443 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/tags/get-tag - null null
2025-09-03 19:09:05.441 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:09:05.453 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:09:05.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/tags/get-tag - 404 0 null 14.4039ms
2025-09-03 19:09:05.458 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 21.6708ms
2025-09-03 19:09:05.460 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:09:05.464 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/tags/get-tag, Response status code: 404
2025-09-03 19:09:05.470 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:09:05.472 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:09:05.478 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:09:05.482 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:09:05.483 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:09:05.485 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:09:05.488 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:09:05.491 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 19:09:05.492 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6331ms
2025-09-03 19:09:05.496 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:09:05.498 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:09:05.504 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 64.7957ms
2025-09-03 19:09:05.504 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:09:05.514 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:09:05.519 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 28.8104ms
2025-09-03 19:09:05.524 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:09:05.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 55.9747ms
2025-09-03 19:16:10.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:16:10.224 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:10.225 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.6678ms
2025-09-03 19:16:10.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:16:10.239 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:10.241 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:16:10.243 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:16:10.395 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:16:10.398 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:16:10.400 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 154.8953ms
2025-09-03 19:16:10.402 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:16:10.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 168.9811ms
2025-09-03 19:16:10.413 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:16:10.417 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:10.419 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:16:10.420 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:16:10.424 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:16:10.429 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:16:10.449 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 26.3527ms
2025-09-03 19:16:10.451 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:16:10.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.9847ms
2025-09-03 19:16:10.509 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-03 19:16:10.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:16:10.519 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:10.523 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:10.525 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:16:10.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 15.9155ms
2025-09-03 19:16:10.528 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-03 19:16:10.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:16:10.538 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-03 19:16:10.542 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:10.545 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:16:10.546 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:16:10.548 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.0297ms
2025-09-03 19:16:10.550 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:16:10.552 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-03 19:16:10.555 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 19:16:10.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 46.6228ms
2025-09-03 19:16:10.562 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:16:10.575 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:16:10.581 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:16:10.583 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 29.1736ms
2025-09-03 19:16:10.585 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:16:10.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 54.6355ms
2025-09-03 19:16:12.170 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-09-03 19:16:12.176 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:12.182 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 11.8626ms
2025-09-03 19:16:12.190 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 19:16:12.196 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:12.198 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 19:16:12.200 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 19:16:12.202 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 405 0 null 11.6781ms
2025-09-03 19:16:33.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-09-03 19:16:33.482 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:33.484 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 7.7301ms
2025-09-03 19:16:33.494 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 19:16:33.498 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:33.500 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 19:16:33.502 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 19:16:33.504 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 405 0 null 9.58ms
2025-09-03 19:16:43.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:16:43.363 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:43.365 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 204 null null 8.5332ms
2025-09-03 19:16:43.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - null null
2025-09-03 19:16:43.376 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:43.378 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:16:43.380 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:16:43.383 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=20
2025-09-03 19:16:43.388 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:16:43.401 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='20', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:16:43.406 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:16:43.408 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 26.4083ms
2025-09-03 19:16:43.411 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:16:43.412 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search=&page=1&pageSize=20 - 200 null application/json; charset=utf-8 41.6443ms
2025-09-03 19:16:45.039 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-09-03 19:16:45.043 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:45.045 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 5.9432ms
2025-09-03 19:16:45.050 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-09-03 19:16:45.054 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:45.057 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-03 19:16:45.058 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-03 19:16:45.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 405 0 null 9.8771ms
2025-09-03 19:16:55.831 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 19:16:55.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 19:16:55.836 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:55.842 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:55.845 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.3187ms
2025-09-03 19:16:55.846 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 13.6255ms
2025-09-03 19:16:55.851 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 19:16:55.855 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 19:16:55.860 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:55.863 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:16:55.865 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 19:16:55.866 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:16:55.869 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:16:55.871 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 19:16:55.872 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 19:16:55.877 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:16:55.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:16:55.896 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:16:55.898 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 26.7809ms
2025-09-03 19:16:55.900 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:16:55.902 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 46.3307ms
2025-09-03 19:16:55.912 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 19:16:55.917 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:16:55.924 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 40.2127ms
2025-09-03 19:16:55.927 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 19:16:55.928 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 77.3741ms
2025-09-03 19:17:37.386 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 19:17:37.396 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:17:37.398 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 12.088ms
2025-09-03 19:17:37.403 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 105
2025-09-03 19:17:37.409 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:17:37.412 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:17:37.418 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 19:17:37.449 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+919845345678'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 19:17:37.474 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 19:17:37.534 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:17:37.540 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:17:38.755 +05:30 [INF] Received HTTP response headers after 1209.6907ms - 401
2025-09-03 19:17:38.758 +05:30 [INF] End processing HTTP request after 1226.6019ms - 401
2025-09-03 19:17:38.762 +05:30 [WRN] MetaCloud send failed (HTTP 401): {"error":{"message":"Error validating access token: Session has expired on Wednesday, 03-Sep-25 06:00:00 PDT. The current time is Wednesday, 03-Sep-25 06:47:40 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AubQISfPoNOPipUn4G5SjJn"}}
2025-09-03 19:17:38.908 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='ff69096c-2bb8-48ac-8560-f67e5c9a86f9', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T13:47:38.7674772Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='This is testing  mesaging service.' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Error validating access token: Session has expired on Wednesday, 03-Sep-25 06:00:00 PDT. The current time is Wednesday, 03-Sep-25 06:47:40 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AubQISfPoNOPipUn4G5SjJn"}}', @p15='+919845345678' (Nullable = false), @p16=NULL (DbType = Guid), @p17='This is testing  mesaging service.', @p18=NULL (DbType = Guid), @p19='2025-09-03T13:47:38.7675440Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 19:17:38.915 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:17:38.920 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1498.6292ms
2025-09-03 19:17:38.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:17:38.924 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1520.5942ms
2025-09-03 19:18:27.454 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 19:18:27.458 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:27.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.836ms
2025-09-03 19:18:27.468 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 105
2025-09-03 19:18:27.473 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:27.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:18:27.476 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 19:18:27.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 19:18:27.496 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 19:18:27.500 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:18:27.502 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:18:27.863 +05:30 [INF] Received HTTP response headers after 358.2897ms - 401
2025-09-03 19:18:27.865 +05:30 [INF] End processing HTTP request after 365.0982ms - 401
2025-09-03 19:18:27.867 +05:30 [WRN] MetaCloud send failed (HTTP 401): {"error":{"message":"Error validating access token: Session has expired on Wednesday, 03-Sep-25 06:00:00 PDT. The current time is Wednesday, 03-Sep-25 06:48:29 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AzGoiq0ZEDa0zbfGTUaoyEG"}}
2025-09-03 19:18:27.884 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p0='aa20b9d3-a258-4852-8daf-9cb977e04281', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T13:48:27.8690769Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='This is testing  mesaging service.' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Error validating access token: Session has expired on Wednesday, 03-Sep-25 06:00:00 PDT. The current time is Wednesday, 03-Sep-25 06:48:29 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AzGoiq0ZEDa0zbfGTUaoyEG"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='This is testing  mesaging service.', @p18=NULL (DbType = Guid), @p19='2025-09-03T13:48:27.8690775Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 19:18:27.888 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:18:27.890 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 411.5161ms
2025-09-03 19:18:27.892 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:18:27.894 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 425.1534ms
2025-09-03 19:18:49.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 19:18:49.537 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:49.539 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.233ms
2025-09-03 19:18:49.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 19:18:49.564 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:49.567 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 19:18:49.575 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 19:18:49.584 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 19:18:49.591 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-03 19:18:49.597 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.6499ms
2025-09-03 19:18:49.600 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 19:18:49.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 43.5318ms
2025-09-03 19:18:54.719 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-03 19:18:54.723 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:54.725 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 6.1048ms
2025-09-03 19:18:54.730 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 636
2025-09-03 19:18:54.735 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:54.737 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 19:18:54.744 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 19:18:54.767 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-09-03 19:18:54.782 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__providerNorm_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND lower(w."Provider") = @__providerNorm_1
LIMIT 1
2025-09-03 19:18:54.795 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPXSj7mQhLmmseInq0BCYZCBUhNpgZAVuUYjOQUf7QSAqCdhuws57A1pK9YYW7XZBpvrsaNwXjX8RoYIqxSjcUjXQniRZAAg8WxdhZBEIlQQ7CNp7jtVy0QhbOfv4Jl9pyn0o0mZAWvmC0C8KhlponxNJqXlGLSWwR1GafcPMIzyZC9RWrvrbcK3JnZBPQv0kqkZAmUw4mkDYYFZBam9XkndWMx9ZAFRQWfJ5gv4Hnojcb87yTpijM03IXZCGjAZDZD' (Nullable = false), @p1='2025-09-03T13:48:54.7891055Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-03 19:18:54.801 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:18:54.804 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 56.8477ms
2025-09-03 19:18:54.807 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 19:18:54.808 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 78.2805ms
2025-09-03 19:18:55.622 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-03 19:18:55.626 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:55.627 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.8139ms
2025-09-03 19:18:55.634 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 466
2025-09-03 19:18:55.639 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:18:55.640 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 19:18:55.649 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 19:18:55.658 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 19:18:55.660 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 19:18:57.799 +05:30 [INF] Received HTTP response headers after 2137.9275ms - 200
2025-09-03 19:18:57.801 +05:30 [INF] End processing HTTP request after 2143.3754ms - 200
2025-09-03 19:18:57.814 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:18:57.816 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2164.1554ms
2025-09-03 19:18:57.818 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 19:18:57.819 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2185.2511ms
2025-09-03 19:19:04.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 19:19:04.433 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:19:04.435 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 4.7425ms
2025-09-03 19:19:04.438 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 19:19:04.444 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:19:04.445 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.4001ms
2025-09-03 19:19:04.458 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 19:19:04.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 19:19:04.466 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:19:04.473 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:19:04.474 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:19:04.476 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 19:19:04.477 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:19:04.479 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 19:19:04.482 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 19:19:04.488 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 19:19:04.498 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:19:04.508 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 23.1064ms
2025-09-03 19:19:04.510 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 19:19:04.512 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 51.4463ms
2025-09-03 19:19:04.614 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:19:04.620 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:19:04.624 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:19:04.626 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 144.8456ms
2025-09-03 19:19:04.628 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:19:04.630 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 172.7394ms
2025-09-03 19:19:21.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 19:19:21.186 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:19:21.188 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 7.0377ms
2025-09-03 19:19:21.193 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 19:19:21.203 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:19:21.205 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:19:21.207 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 19:19:21.216 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 19:19:21.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 19:19:21.227 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:19:21.230 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:19:22.544 +05:30 [INF] Received HTTP response headers after 1312.9251ms - 200
2025-09-03 19:19:22.546 +05:30 [INF] End processing HTTP request after 1319.1905ms - 200
2025-09-03 19:19:22.575 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='efa566ea-c3fd-4c05-9322-a67ed3e345b4', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T13:49:22.5701068Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T13:49:22.5701071Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 19:19:22.580 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:19:22.582 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1371.8991ms
2025-09-03 19:19:22.584 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:19:22.586 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 1392.406ms
2025-09-03 19:19:24.093 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 19:19:24.097 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:19:24.100 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 19:19:24.107 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==","status":"sent","timestamp":"1756907364","recipient_id":"918974005240","conversation":{"id":"af3f2e385b9bd0444ad0f0f9092fbb55","expiration_timestamp":"1756907364","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:19:24.109 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 19:19:24.110 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:19:24.110 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==","status":"sent","timestamp":"1756907364","recipient_id":"918974005240","conversation":{"id":"af3f2e385b9bd0444ad0f0f9092fbb55","expiration_timestamp":"1756907364","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:19:24.112 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.2601ms
2025-09-03 19:19:24.114 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:19:24.115 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.9249ms
2025-09-03 19:19:24.117 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 19:19:24.127 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 19:19:24.130 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 19:19:24.133 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 19:19:24.139 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:19:24.144 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==
2025-09-03 19:19:24.153 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:19:24.157 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA== (legacy)
2025-09-03 19:19:24.699 +05:30 [INF] Request starting HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 19:19:24.706 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:19:24.708 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 19:19:24.711 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==","status":"delivered","timestamp":"1756907365","recipient_id":"918974005240","conversation":{"id":"af3f2e385b9bd0444ad0f0f9092fbb55","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:19:24.715 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 19:19:24.716 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:19:24.715 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==","status":"delivered","timestamp":"1756907365","recipient_id":"918974005240","conversation":{"id":"af3f2e385b9bd0444ad0f0f9092fbb55","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:19:24.719 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.1216ms
2025-09-03 19:19:24.722 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:19:24.724 +05:30 [INF] Request finished HTTP/1.1 POST http://0c6e491f48ae.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.417ms
2025-09-03 19:19:24.723 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 19:19:24.734 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:19:24.742 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA==
2025-09-03 19:19:24.747 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:19:24.753 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='efa566ea-c3fd-4c05-9322-a67ed3e345b4', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 19:19:24.756 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTUyQkRCQzFCM0U1NzMyNkZFAA== → Delivered
2025-09-03 19:20:07.513 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 19:20:07.516 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:20:07.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.8226ms
2025-09-03 19:20:07.548 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 76
2025-09-03 19:20:07.551 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:20:07.552 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:20:07.554 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 19:20:25.673 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 19:25:17.524 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 19:25:17.598 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 19:25:17.622 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 19:25:18.930 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 19:25:19.941 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 19:25:19.976 +05:30 [INF] ClickLogWorker started
2025-09-03 19:25:20.209 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 19:25:20.257 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[@__cutoff_0='2025-08-27T13:55:17.8131089Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 19:25:20.302 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 19:25:20.304 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 19:25:20.306 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 19:25:20.307 +05:30 [INF] Hosting environment: Development
2025-09-03 19:25:20.309 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 19:25:21.057 +05:30 [INF] ClickLogWorker stopped
2025-09-03 19:25:21.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 19:25:21.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 316.4124ms
2025-09-03 19:25:21.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 19:25:21.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.7897ms
2025-09-03 19:25:21.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 19:25:22.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.3687ms
2025-09-03 19:25:22.273 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 19:25:22.616 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 343.2008ms
2025-09-03 19:25:38.058 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 19:25:38.123 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 19:25:38.605 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:25:38.850 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 791.8922ms
2025-09-03 19:25:38.873 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 78
2025-09-03 19:25:38.894 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:25:41.361 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:25:41.588 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 19:25:56.939 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 19:34:03.952 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-03 19:34:03.993 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-03 19:34:04.009 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-03 19:34:04.879 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-03 19:34:05.440 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-03 19:34:05.459 +05:30 [INF] ClickLogWorker started
2025-09-03 19:34:05.671 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-03 19:34:05.673 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-03 19:34:05.674 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-03 19:34:05.675 +05:30 [INF] Hosting environment: Development
2025-09-03 19:34:05.676 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-03 19:34:05.683 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-03 19:34:05.700 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[@__cutoff_0='2025-08-27T14:04:04.1130293Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-03 19:34:06.534 +05:30 [INF] ClickLogWorker stopped
2025-09-03 19:34:07.448 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-03 19:34:07.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 229.7828ms
2025-09-03 19:34:07.702 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-03 19:34:07.710 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7831ms
2025-09-03 19:34:07.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-03 19:34:07.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.799ms
2025-09-03 19:34:08.091 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-03 19:34:08.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 468.2199ms
2025-09-03 19:34:53.330 +05:30 [INF] Request starting HTTP/1.1 GET http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=551781223&hub.verify_token=xbytechat-secret-token - null null
2025-09-03 19:34:53.338 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-03 19:34:53.485 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-03 19:34:53.508 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 19:34:53.533 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-09-03 19:34:53.542 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-03 19:34:53.552 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 35.58ms
2025-09-03 19:34:53.554 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-03 19:34:53.557 +05:30 [INF] Request finished HTTP/1.1 GET http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=551781223&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 227.9541ms
2025-09-03 19:35:28.939 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 19:35:28.958 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:28.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 23.5546ms
2025-09-03 19:35:28.967 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-03 19:35:28.977 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:29.103 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 19:35:29.112 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 19:35:29.238 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 19:35:29.348 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-03 19:35:29.388 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 271.5924ms
2025-09-03 19:35:29.391 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-03 19:35:29.398 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 430.9116ms
2025-09-03 19:35:32.753 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-03 19:35:32.758 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:32.760 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.5941ms
2025-09-03 19:35:32.767 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 636
2025-09-03 19:35:32.771 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:32.778 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 19:35:32.785 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 19:35:32.817 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-09-03 19:35:32.917 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__providerNorm_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND lower(w."Provider") = @__providerNorm_1
LIMIT 1
2025-09-03 19:35:33.053 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPeVIyigPDpLUh6uJMuBhYbu6FxgSST4snrZBjZCDtZCKj2KId14GN7A8AJ8vZCDHzTZB4QugwZAFZBjD9hsgHKPWg6kXyOIvLhoyXMVtZA6gfnuPvbFAGiuMoBOZAIMe4E1mZCv4DK6nv7C2oZAXb60fXzTMiKVIkdR2ZCHD0wc3jXeKYOVZCWwzmSodxuYNptKneS1rVS3c89zrMg80DNZAGBAiSAXZBaNNrGY72XeG2rpY3P8ZCTfmziHA1AZDZD' (Nullable = false), @p1='2025-09-03T14:05:32.9227047Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-03 19:35:33.072 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:35:33.078 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 289.6232ms
2025-09-03 19:35:33.081 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-03 19:35:33.083 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 316.1644ms
2025-09-03 19:35:34.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-03 19:35:34.246 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:34.247 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 6.0328ms
2025-09-03 19:35:34.255 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 466
2025-09-03 19:35:34.260 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:34.264 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 19:35:34.272 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-03 19:35:34.291 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 19:35:34.296 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-03 19:35:38.919 +05:30 [INF] Received HTTP response headers after 4616.9655ms - 200
2025-09-03 19:35:38.922 +05:30 [INF] End processing HTTP request after 4632.722ms - 200
2025-09-03 19:35:38.930 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:35:38.932 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 4657.3376ms
2025-09-03 19:35:38.935 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-03 19:35:38.937 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 4681.8938ms
2025-09-03 19:35:42.917 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-03 19:35:42.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 19:35:42.925 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:42.929 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:42.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.0292ms
2025-09-03 19:35:42.931 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 10.4223ms
2025-09-03 19:35:42.936 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-03 19:35:42.940 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-03 19:35:42.945 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:42.949 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:35:42.950 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:35:42.951 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 19:35:42.958 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-03 19:35:42.958 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-03 19:35:42.967 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-09-03 19:35:43.009 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-03 19:35:43.015 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:35:43.032 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-03 19:35:43.034 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 70.745ms
2025-09-03 19:35:43.040 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-03 19:35:43.042 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 101.2742ms
2025-09-03 19:35:43.149 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-03 19:35:43.294 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:35:43.314 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 352.7838ms
2025-09-03 19:35:43.316 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-03 19:35:43.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 382.0028ms
2025-09-03 19:36:22.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-03 19:36:22.633 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:36:22.634 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 13.7295ms
2025-09-03 19:36:22.650 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 79
2025-09-03 19:36:22.656 +05:30 [INF] CORS policy execution successful.
2025-09-03 19:36:22.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:36:22.666 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-03 19:36:28.599 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-03 19:36:38.182 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-03 19:36:38.227 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:36:38.229 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-03 19:36:39.569 +05:30 [INF] Received HTTP response headers after 1338.9928ms - 200
2025-09-03 19:36:39.572 +05:30 [INF] End processing HTTP request after 1344.3538ms - 200
2025-09-03 19:36:44.250 +05:30 [INF] Request starting HTTP/1.1 POST http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-03 19:36:45.092 +05:30 [INF] Request starting HTTP/1.1 POST http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-03 19:36:46.306 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:36:46.344 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:36:46.366 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 19:36:46.380 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 19:36:47.651 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==","status":"sent","timestamp":"1756908401","recipient_id":"918974005240","conversation":{"id":"b4730e0e4b29878541c87caf89a72cf5","expiration_timestamp":"1756908401","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:36:47.654 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==","status":"delivered","timestamp":"1756908402","recipient_id":"918974005240","conversation":{"id":"b4730e0e4b29878541c87caf89a72cf5","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:36:47.661 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 19:36:47.669 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:36:47.655 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 19:36:47.673 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-03 19:36:47.675 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 1270.9042ms
2025-09-03 19:36:47.675 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 1290.6936ms
2025-09-03 19:36:47.685 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:36:47.687 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 19:36:47.691 +05:30 [INF] Request finished HTTP/1.1 POST http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 2611.6725ms
2025-09-03 19:36:47.692 +05:30 [INF] Request finished HTTP/1.1 POST http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 3442.6095ms
2025-09-03 19:36:48.411 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@p0='16ec21c1-a925-42a2-9547-d82797e9e134', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='2025-09-03T14:06:46.4411859Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='Hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='Hello', @p18=NULL (DbType = Guid), @p19='2025-09-03T14:06:46.4558109Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-09-03 19:37:29.559 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-03 19:37:29.567 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 66897.9559ms
2025-09-03 19:37:29.569 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-03 19:37:29.570 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 66919.6143ms
2025-09-03 19:37:29.649 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==","status":"sent","timestamp":"1756908401","recipient_id":"918974005240","conversation":{"id":"b4730e0e4b29878541c87caf89a72cf5","expiration_timestamp":"1756908401","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:37:29.667 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 19:37:29.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 19:37:29.681 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 19:37:29.685 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 19:39:08.910 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:39:08.936 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==
2025-09-03 19:39:16.253 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:39:45.747 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA== (legacy)
2025-09-03 19:39:59.271 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==","status":"delivered","timestamp":"1756908402","recipient_id":"918974005240","conversation":{"id":"b4730e0e4b29878541c87caf89a72cf5","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-03 19:39:59.278 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 19:39:59.283 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-03 19:39:59.294 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-03 19:39:59.297 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-03 19:41:06.407 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:41:06.411 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA==
2025-09-03 19:41:08.051 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-03 19:41:19.610 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='16ec21c1-a925-42a2-9547-d82797e9e134', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1;
2025-09-03 19:41:20.820 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg3MTEzRDU5ODJERDU0NjM3AA== → Delivered
2025-09-03 21:27:52.920 +05:30 [INF] Request starting HTTP/1.1 POST http://f69394f94cad.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-03 21:27:52.926 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-03 21:27:52.929 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-03 21:27:52.933 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjY4MDhFNjZBMEU4Q0UzM0EwAA==","status":"sent","timestamp":"1756732495","recipient_id":"918974005240","conversation":{"id":"bcef11c896e4c0ad1ad09240b461a0e0","expiration_timestamp":"1756732495","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-03 21:27:52.935 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-03 21:27:52.949 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType101`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
