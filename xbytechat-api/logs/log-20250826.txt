2025-08-26 09:03:54.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 09:03:54.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 09:03:54.460 +05:30 [INF] CORS policy execution successful.
2025-08-26 09:03:54.460 +05:30 [INF] CORS policy execution successful.
2025-08-26 09:03:54.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 88.2104ms
2025-08-26 09:03:54.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 89.3116ms
2025-08-26 09:03:54.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 09:03:54.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 09:03:54.488 +05:30 [INF] CORS policy execution successful.
2025-08-26 09:03:54.489 +05:30 [INF] CORS policy execution successful.
2025-08-26 09:03:54.532 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-08-2025 03:44:49 PM', Current time (UTC): '26-08-2025 03:33:54 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-26 09:03:54.532 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-08-2025 03:44:49 PM', Current time (UTC): '26-08-2025 03:33:54 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-26 09:03:54.778 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-08-2025 03:44:49 PM', Current time (UTC): '26-08-2025 03:33:54 AM'.
2025-08-26 09:03:54.778 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-08-2025 03:44:49 PM', Current time (UTC): '26-08-2025 03:33:54 AM'.
2025-08-26 09:03:54.781 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 09:03:54.783 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 09:03:54.804 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 09:03:54.804 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 09:03:55.048 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 09:03:55.069 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 09:03:55.071 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 09:03:55.081 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 09:03:55.091 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 278.6035ms
2025-08-26 09:03:55.091 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 282.3217ms
2025-08-26 09:03:55.095 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 09:03:55.097 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 09:03:55.799 +05:30 [ERR] ‚ùå An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 808
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-26 09:03:55.799 +05:30 [ERR] ‚ùå An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 808
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-26 09:03:55.857 +05:30 [ERR] Response has already started, unable to write error response for path: /api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89
2025-08-26 09:03:55.867 +05:30 [ERR] Response has already started, unable to write error response for path: /api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary
2025-08-26 09:03:55.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 401 null application/json 1391.5818ms
2025-08-26 09:03:55.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 401 null application/json 1404.0377ms
2025-08-26 10:20:24.236 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 10:20:24.272 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 10:20:24.287 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 10:20:25.118 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 10:20:25.708 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 10:20:25.976 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 10:20:25.981 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 10:20:25.983 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 10:20:25.985 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 10:20:25.986 +05:30 [INF] Hosting environment: Development
2025-08-26 10:20:25.987 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 10:20:26.004 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__cutoff_0='2025-08-19T04:50:24.4063780Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 10:20:28.950 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 10:20:29.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 227.4832ms
2025-08-26 10:20:29.229 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 10:20:29.237 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.3053ms
2025-08-26 10:20:29.305 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 10:20:29.348 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.6016ms
2025-08-26 10:20:29.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 10:20:29.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.4058ms
2025-08-26 10:20:40.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 10:20:40.222 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 10:20:40.262 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:40.264 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 45.8711ms
2025-08-26 10:20:40.268 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 10:20:40.276 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:40.317 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 10:20:40.332 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 10:20:40.392 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 10:20:40.468 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 10:20:40.548 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 10:20:40.665 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 10:20:40.673 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 10:20:40.727 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 10:20:40.729 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 10:20:40.735 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:20:40.742 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 406.2309ms
2025-08-26 10:20:40.743 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 10:20:40.748 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 480.2205ms
2025-08-26 10:20:40.751 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:20:40.755 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:40.756 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7409ms
2025-08-26 10:20:40.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:20:40.762 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:40.797 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:40.802 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:20:40.814 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 10:20:40.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:20:40.845 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:20:40.856 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 52.3832ms
2025-08-26 10:20:40.857 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:40.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 99.4545ms
2025-08-26 10:20:40.873 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:20:40.876 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:40.881 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:40.883 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:20:40.895 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:20:40.901 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:20:40.903 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.2456ms
2025-08-26 10:20:40.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:40.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:20:40.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.7097ms
2025-08-26 10:20:40.909 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:40.914 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:40.916 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:20:40.927 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:20:40.929 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:20:40.931 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.3864ms
2025-08-26 10:20:40.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:40.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.5308ms
2025-08-26 10:20:40.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:20:40.998 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:41.000 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:41.001 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:20:41.006 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:20:41.009 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:20:41.010 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1097ms
2025-08-26 10:20:41.012 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:20:41.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5458ms
2025-08-26 10:20:44.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:20:44.922 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:44.923 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4773ms
2025-08-26 10:20:44.928 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:20:44.933 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:44.935 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:20:44.939 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:20:44.985 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:20:44.988 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:20:44.997 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 56.7141ms
2025-08-26 10:20:44.999 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:20:45.000 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 72.316ms
2025-08-26 10:20:46.199 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:20:46.203 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:46.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 5.5696ms
2025-08-26 10:20:46.209 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-26 10:20:46.213 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:20:46.216 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 10:20:46.222 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:20:53.031 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 10:20:53.052 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 10:21:09.122 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 10:21:09.150 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 10:21:09.152 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 10:21:10.462 +05:30 [INF] Received HTTP response headers after 1308.1661ms - 200
2025-08-26 10:21:10.464 +05:30 [INF] End processing HTTP request after 1315.147ms - 200
2025-08-26 10:21:37.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 10:21:49.988 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 10:21:49.990 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 10:21:49.991 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 10:21:54.604 +05:30 [INF] Received HTTP response headers after 4612.8492ms - 200
2025-08-26 10:21:54.606 +05:30 [INF] End processing HTTP request after 4615.9878ms - 200
2025-08-26 10:25:53.230 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 10:25:53.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:25:53.240 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 10:25:53.236 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 10:25:53.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:25:53.248 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 18.8515ms
2025-08-26 10:25:53.251 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.253 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.255 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 25.0406ms
2025-08-26 10:25:53.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:25:53.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 27.814ms
2025-08-26 10:25:53.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 23.7763ms
2025-08-26 10:25:53.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 20.471ms
2025-08-26 10:25:53.263 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 10:25:53.265 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:25:53.270 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:25:53.272 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 10:25:53.274 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 16.5977ms
2025-08-26 10:25:53.277 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.282 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:25:53.279 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.281 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.285 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 10:25:53.286 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:25:53.287 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 10:25:53.289 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 10:25:53.289 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:25:53.291 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:25:53.292 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 10:25:53.301 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 10:25:53.304 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:25:53.307 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:25:53.310 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:25:53.310 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-26 10:25:53.311 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 17.9021ms
2025-08-26 10:25:53.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:25:53.314 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:25:53.316 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.317 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 25.5631ms
2025-08-26 10:25:53.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 47.372ms
2025-08-26 10:25:53.318 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:25:53.319 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:25:53.325 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 10:25:53.327 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 62.6417ms
2025-08-26 10:25:53.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 10:25:53.323 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:25:53.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 10:25:53.342 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:25:53.339 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 10:25:53.344 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:53.346 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:25:53.348 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:25:53.349 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.6908ms
2025-08-26 10:25:53.350 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 10:25:53.351 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:25:53.351 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 56.2064ms
2025-08-26 10:25:53.355 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 10:25:53.353 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 41.5517ms
2025-08-26 10:25:53.358 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:25:53.356 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 10:25:53.362 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 10:25:53.363 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 10.2611ms
2025-08-26 10:25:53.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 96.3135ms
2025-08-26 10:25:53.367 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:25:53.370 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:25:53.371 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 49.0445ms
2025-08-26 10:25:53.378 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 81.8847ms
2025-08-26 10:25:53.379 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 10:25:53.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 107.9181ms
2025-08-26 10:25:53.505 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p0='2cca8524-5aab-44be-adac-7ad666cfa9a0', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='03ef3838-08f4-4605-b705-046ce8661d89' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-26T04:55:53.2187845Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='automation_builder_launch' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjlFOTE0RUE0NzU0NzkwMzRDAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjlFOTE0RUE0NzU0NzkwMzRDAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T04:55:53.2190202Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false), @p19='995c7561-3af5-40ef-aebc-c79867338c05', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='03ef3838-08f4-4605-b705-046ce8661d89', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-26T04:55:53.3002078Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='automation_builder_launch' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjlFOTE0RUE0NzU0NzkwMzRDAA==', @p42='2cca8524-5aab-44be-adac-7ad666cfa9a0' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='029ed98b-45f3-49c7-aa12-10f5f20da99d', @p45='0', @p46='Sent', @p47='2025-08-26T04:55:53.3003589Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='automation_builder_launch', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 10:25:53.524 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:25:53.526 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 307301.7033ms
2025-08-26 10:25:53.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 10:25:53.528 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 307319.1475ms
2025-08-26 10:25:57.309 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:25:57.311 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:57.312 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 3.397ms
2025-08-26 10:25:57.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:25:57.319 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:25:57.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-26 10:25:57.324 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:25:57.335 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-26 10:25:57.339 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:25:57.341 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 15.1016ms
2025-08-26 10:25:57.342 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-26 10:25:57.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 26.7723ms
2025-08-26 10:26:00.604 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:26:00.607 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:00.608 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6301ms
2025-08-26 10:26:00.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:26:00.614 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:00.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:26:00.616 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:26:00.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:26:00.623 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:26:00.624 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.0252ms
2025-08-26 10:26:00.625 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:26:00.626 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 14.7188ms
2025-08-26 10:26:01.917 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 10:26:01.919 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 3.293ms
2025-08-26 10:26:01.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:26:01.922 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 10:26:01.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 10:26:01.924 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 10:26:01.926 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.928 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.930 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.932 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.933 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 11.5715ms
2025-08-26 10:26:01.933 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 11.5158ms
2025-08-26 10:26:01.934 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 12.7037ms
2025-08-26 10:26:01.935 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:26:01.940 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 10:26:01.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:26:01.943 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 10:26:01.944 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.946 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.949 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 10:26:01.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 10:26:01.951 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 10:26:01.950 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 10:26:01.951 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:26:01.953 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:26:01.955 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-26 10:26:01.958 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 10:26:01.957 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 9.2132ms
2025-08-26 10:26:01.958 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 10:26:01.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 10:26:01.962 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 10:26:01.963 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:26:01.967 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 11.666ms
2025-08-26 10:26:01.965 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:01.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 44.2113ms
2025-08-26 10:26:01.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 10:26:01.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 10:26:01.970 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:26:01.973 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:26:01.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 31.6301ms
2025-08-26 10:26:01.975 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 10:26:01.976 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 21.511ms
2025-08-26 10:26:01.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 10:26:01.982 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 10:26:01.984 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 10:26:01.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 44.1888ms
2025-08-26 10:26:01.985 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 6.5807ms
2025-08-26 10:26:01.988 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 10:26:01.989 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 31.5827ms
2025-08-26 10:26:15.381 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:26:15.383 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:15.384 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.0001ms
2025-08-26 10:26:15.387 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:26:15.390 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:26:15.391 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:26:15.393 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:26:15.397 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:26:15.400 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:26:15.402 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.4313ms
2025-08-26 10:26:15.403 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:26:15.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.4424ms
2025-08-26 10:35:58.446 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:35:58.447 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:35:58.453 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:35:58.455 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 8.4082ms
2025-08-26 10:35:58.455 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:35:58.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:35:58.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 16.6106ms
2025-08-26 10:35:58.465 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:35:58.467 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:35:58.468 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:35:58.470 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:35:58.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:35:58.473 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:35:58.473 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:35:58.548 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:35:58.553 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 10:35:58.555 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 80.4658ms
2025-08-26 10:35:58.557 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:35:58.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 90.3066ms
2025-08-26 10:35:58.578 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:35:58.581 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:35:58.586 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 110.3408ms
2025-08-26 10:35:58.588 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:35:58.589 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 125.8457ms
2025-08-26 10:36:05.391 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:36:05.400 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:05.403 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.0527ms
2025-08-26 10:36:05.406 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:36:05.408 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:05.409 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:36:05.410 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:36:05.416 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:36:05.419 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:36:05.420 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.7669ms
2025-08-26 10:36:05.421 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:36:05.422 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.3137ms
2025-08-26 10:36:10.699 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:36:10.701 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:10.702 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 2.8712ms
2025-08-26 10:36:10.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:36:10.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:36:10.707 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:10.709 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:10.709 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 5.7438ms
2025-08-26 10:36:10.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:36:10.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:36:10.713 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:36:10.714 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:10.717 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:36:10.718 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:36:10.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:36:10.723 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:36:10.725 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:36:10.727 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 10:36:10.728 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 11.9907ms
2025-08-26 10:36:10.729 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 8.1813ms
2025-08-26 10:36:10.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:36:10.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:36:10.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 26.0016ms
2025-08-26 10:36:10.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 19.9314ms
2025-08-26 10:36:18.103 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:18.106 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.106 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9521ms
2025-08-26 10:36:18.109 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:18.111 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:18.113 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:36:18.117 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:36:18.119 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:36:18.120 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0842ms
2025-08-26 10:36:18.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:18.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9772ms
2025-08-26 10:36:18.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:18.176 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:18.179 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:36:18.183 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:36:18.186 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:36:18.187 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3435ms
2025-08-26 10:36:18.188 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:18.189 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.9123ms
2025-08-26 10:36:18.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:36:18.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:18.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:36:18.221 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.224 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.226 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 12.9076ms
2025-08-26 10:36:18.228 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:18.229 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 13.9963ms
2025-08-26 10:36:18.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:36:18.236 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:36:18.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:36:18.242 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.246 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:36:18.248 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:18.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:36:18.251 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:36:18.252 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:36:18.252 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:36:18.254 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.271ms
2025-08-26 10:36:18.256 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:36:18.259 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:18.262 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:36:18.265 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:36:18.264 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.0834ms
2025-08-26 10:36:18.268 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:36:18.270 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 10:36:18.274 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 15.8177ms
2025-08-26 10:36:18.275 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 12.0265ms
2025-08-26 10:36:18.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:36:18.277 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:36:18.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 42.8772ms
2025-08-26 10:36:18.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 39.6679ms
2025-08-26 10:36:20.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:20.659 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:20.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:20.660 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:36:20.663 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:36:20.666 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:36:20.667 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1211ms
2025-08-26 10:36:20.669 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:20.670 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3179ms
2025-08-26 10:36:20.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:20.684 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:20.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:20.687 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:36:20.696 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:36:20.698 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:36:20.700 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0358ms
2025-08-26 10:36:20.701 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:20.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.5073ms
2025-08-26 10:36:20.718 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 10:36:20.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:36:20.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:36:20.721 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:20.722 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:20.724 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:36:20.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:20.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:36:20.726 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:36:20.727 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 10:36:20.728 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:36:20.729 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:36:20.732 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 10:36:20.735 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:36:20.739 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 10:36:20.744 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:36:20.744 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.7738ms
2025-08-26 10:36:20.745 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.2105ms
2025-08-26 10:36:20.746 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 10:36:20.747 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:36:20.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.7474ms
2025-08-26 10:36:20.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 30.2505ms
2025-08-26 10:36:20.800 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:36:20.802 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 10:36:20.803 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 68.9803ms
2025-08-26 10:36:20.804 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:36:20.805 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 86.1278ms
2025-08-26 10:39:27.395 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:39:27.403 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:39:27.404 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.0088ms
2025-08-26 10:39:27.411 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 10:39:27.413 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:39:27.414 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:39:27.415 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 10:39:27.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 10:39:27.424 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:39:27.425 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.4005ms
2025-08-26 10:39:27.426 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 10:39:27.427 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.5506ms
2025-08-26 10:39:43.140 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:39:43.142 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:39:43.148 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:39:43.150 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:39:43.151 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 10.6611ms
2025-08-26 10:39:43.152 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 9.3163ms
2025-08-26 10:39:43.154 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 10:39:43.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 10:39:43.159 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:39:43.161 +05:30 [INF] CORS policy execution successful.
2025-08-26 10:39:43.162 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:39:43.162 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:39:43.163 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:39:43.163 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 10:39:43.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:39:43.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 10:39:43.172 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 10:39:43.173 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 8.3061ms
2025-08-26 10:39:43.175 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 10:39:43.176 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 10:39:43.177 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.7332ms
2025-08-26 10:39:43.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 23.642ms
2025-08-26 10:39:43.179 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 10:39:43.182 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 25.3475ms
2025-08-26 11:13:05.290 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 11:13:05.370 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 11:13:05.394 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 11:13:06.707 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 11:13:07.647 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 11:13:08.032 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 11:13:08.041 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 11:13:08.042 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 11:13:08.045 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 11:13:08.046 +05:30 [INF] Hosting environment: Development
2025-08-26 11:13:08.048 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 11:13:08.063 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[@__cutoff_0='2025-08-19T05:43:05.6056733Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 11:13:09.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 11:13:09.581 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 278.1864ms
2025-08-26 11:13:09.612 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 11:13:09.623 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.6947ms
2025-08-26 11:13:09.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 11:13:09.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.668ms
2025-08-26 11:13:09.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 11:13:10.439 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 466.6756ms
2025-08-26 11:19:01.431 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 11:19:01.441 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 11:19:01.529 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:01.535 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 103.635ms
2025-08-26 11:19:01.539 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 11:19:01.553 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:01.806 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 11:19:01.841 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 11:19:02.116 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 11:19:02.166 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:19:02.210 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 360.0505ms
2025-08-26 11:19:02.214 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 11:19:02.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 683.5322ms
2025-08-26 11:19:10.378 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-26 11:19:10.381 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-26 11:19:10.385 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:10.387 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:10.388 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 10.2721ms
2025-08-26 11:19:10.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 7.9195ms
2025-08-26 11:19:10.409 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-26 11:19:10.409 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-26 11:19:10.415 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:10.420 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:10.424 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:19:10.425 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-26 11:19:10.431 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-26 11:19:10.431 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 11:19:10.443 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-26 11:19:10.500 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-26 11:19:10.605 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-26 11:19:10.609 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-26 11:19:10.637 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 11:19:10.772 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 11:19:10.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:19:10.867 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 431.1662ms
2025-08-26 11:19:10.870 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:19:10.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 462.7783ms
2025-08-26 11:19:11.606 +05:30 [INF] Received HTTP response headers after 993.5379ms - 401
2025-08-26 11:19:11.610 +05:30 [INF] End processing HTTP request after 1006.4034ms - 401
2025-08-26 11:19:11.631 +05:30 [INF] üì¶ Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-26 11:19:11.633 +05:30 [ERR] ‚ùå Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-26 11:19:11.634 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-26 11:19:11.635 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-26 11:19:12.751 +05:30 [INF] Received HTTP response headers after 1113.7845ms - 401
2025-08-26 11:19:12.754 +05:30 [INF] End processing HTTP request after 1119.8537ms - 401
2025-08-26 11:19:12.756 +05:30 [INF] üì¶ Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"error":{"message":"Error validating access token: Session has expired on Saturday, 23-Aug-25 05:00:00 PDT. The current time is Monday, 25-Aug-25 22:49:11 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AcBsGhysxMrX7C9buGsW4-r"}}
2025-08-26 11:19:12.757 +05:30 [ERR] ‚ùå Failed to fetch templates for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": {"error":{"message":"Error validating access token: Session has expired on Saturday, 23-Aug-25 05:00:00 PDT. The current time is Monday, 25-Aug-25 22:49:11 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AcBsGhysxMrX7C9buGsW4-r"}}
2025-08-26 11:19:12.759 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:19:12.763 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2329.5967ms
2025-08-26 11:19:12.765 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-26 11:19:12.767 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2358.295ms
2025-08-26 11:19:16.944 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-26 11:19:16.944 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 11:19:16.954 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:16.959 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:16.960 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 15.4686ms
2025-08-26 11:19:16.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 16.3782ms
2025-08-26 11:19:16.976 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-26 11:19:16.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 11:19:16.980 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:16.988 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:19:16.988 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:16.990 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 11:19:16.993 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 11:19:16.994 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-26 11:19:17.000 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-26 11:19:17.004 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 11:19:17.014 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 11:19:17.018 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:19:17.021 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 27.9182ms
2025-08-26 11:19:17.022 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:19:17.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 47.8308ms
2025-08-26 11:19:17.031 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-26 11:19:17.038 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:19:17.049 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 46.8241ms
2025-08-26 11:19:17.051 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 11:19:17.053 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 73.353ms
2025-08-26 11:19:53.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:19:53.196 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:53.197 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.0301ms
2025-08-26 11:19:53.231 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:19:53.236 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:53.239 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:19:53.244 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:19:53.303 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:19:53.308 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:19:53.314 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 67.2878ms
2025-08-26 11:19:53.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:19:53.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 86.2092ms
2025-08-26 11:19:57.121 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:19:57.122 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:19:57.127 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:57.132 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 10.9209ms
2025-08-26 11:19:57.133 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:57.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 15.9465ms
2025-08-26 11:19:57.155 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:19:57.155 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:19:57.166 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:57.168 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:19:57.169 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:19:57.170 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:19:57.175 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:19:57.175 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:19:57.196 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:19:57.220 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:19:57.227 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:19:57.240 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 60.856ms
2025-08-26 11:19:57.242 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:19:57.244 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 88.9881ms
2025-08-26 11:19:57.295 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 11:19:57.299 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 121.6465ms
2025-08-26 11:19:57.302 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:19:57.303 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 147.7908ms
2025-08-26 11:22:46.991 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 11:22:46.994 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:46.996 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.928ms
2025-08-26 11:22:47.001 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 11:22:47.005 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:47.006 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 11:22:47.012 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 11:22:47.051 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 11:22:47.077 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 11:22:47.157 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 11:22:47.297 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 11:22:47.310 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 11:22:47.325 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 11:22:47.327 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 11:22:47.329 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:22:47.333 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 317.7696ms
2025-08-26 11:22:47.336 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 11:22:47.337 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 336.4276ms
2025-08-26 11:22:47.342 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:22:47.347 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:47.348 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.2353ms
2025-08-26 11:22:47.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:22:47.365 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:47.369 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.375 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:22:47.397 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 11:22:47.431 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:22:47.435 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:22:47.441 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 63.9798ms
2025-08-26 11:22:47.444 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.445 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 86.0425ms
2025-08-26 11:22:47.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:22:47.475 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:47.478 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.480 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:22:47.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:22:47.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:22:47.498 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.5189ms
2025-08-26 11:22:47.501 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.504 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:22:47.513 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.0862ms
2025-08-26 11:22:47.521 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:47.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.527 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:22:47.537 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:22:47.542 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:22:47.544 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.1811ms
2025-08-26 11:22:47.546 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.548 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 45.772ms
2025-08-26 11:22:47.593 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:22:47.597 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:47.600 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.602 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:22:47.611 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:22:47.617 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:22:47.619 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.5402ms
2025-08-26 11:22:47.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:22:47.623 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.32ms
2025-08-26 11:22:51.404 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:22:51.408 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:51.410 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.5528ms
2025-08-26 11:22:51.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:22:51.431 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:51.432 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:22:51.434 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:22:51.448 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:22:51.453 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:22:51.455 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 18.6643ms
2025-08-26 11:22:51.457 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:22:51.459 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 33.9602ms
2025-08-26 11:22:57.164 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:22:57.166 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:22:57.169 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:57.173 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:57.174 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 10.0645ms
2025-08-26 11:22:57.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 9.1781ms
2025-08-26 11:22:57.179 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:22:57.183 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:22:57.186 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:57.189 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:22:57.191 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:22:57.192 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:22:57.194 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:22:57.195 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:22:57.205 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:22:57.205 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:22:57.215 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:22:57.219 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 11:22:57.220 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 19.0616ms
2025-08-26 11:22:57.222 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 23.5034ms
2025-08-26 11:22:57.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:22:57.225 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:22:57.227 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 43.3157ms
2025-08-26 11:22:57.228 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 48.651ms
2025-08-26 11:24:56.588 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:24:56.598 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:24:56.599 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.9195ms
2025-08-26 11:24:56.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:24:56.606 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:24:56.609 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:24:56.610 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:24:56.738 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:24:56.741 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:24:56.743 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 129.5893ms
2025-08-26 11:24:56.745 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:24:56.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 143.9383ms
2025-08-26 11:25:04.466 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:25:04.466 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:25:04.485 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:25:04.493 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:25:04.494 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 28.9459ms
2025-08-26 11:25:04.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:25:04.496 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 30.4824ms
2025-08-26 11:25:04.510 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:25:04.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:25:04.516 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:25:04.519 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:25:04.520 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:25:04.523 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:25:04.526 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:25:04.532 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:25:04.546 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:25:04.559 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 33.6274ms
2025-08-26 11:25:04.579 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:25:04.580 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 77.314ms
2025-08-26 11:25:04.652 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:25:04.656 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 11:25:04.658 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 120.0034ms
2025-08-26 11:25:04.660 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:25:04.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 146.7499ms
2025-08-26 11:25:06.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:25:06.577 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:25:06.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.8952ms
2025-08-26 11:25:06.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:25:06.586 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:25:06.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:25:06.590 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:25:06.597 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:25:06.601 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:25:06.603 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.6177ms
2025-08-26 11:25:06.605 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:25:06.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 24.5011ms
2025-08-26 11:26:04.797 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:26:04.797 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:26:04.810 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:04.813 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:04.815 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 17.7016ms
2025-08-26 11:26:04.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 18.7334ms
2025-08-26 11:26:04.828 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:26:04.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:26:04.835 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:04.837 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:04.839 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:26:04.840 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:26:04.841 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:26:04.842 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:26:04.849 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:26:04.856 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:26:04.859 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 11:26:04.861 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:26:04.862 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 17.8863ms
2025-08-26 11:26:04.864 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 15.7923ms
2025-08-26 11:26:04.866 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:26:04.868 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:26:04.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 41.4948ms
2025-08-26 11:26:04.871 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 39.4976ms
2025-08-26 11:26:23.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:26:23.534 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:23.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.695ms
2025-08-26 11:26:23.540 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:26:23.544 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:23.546 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:26:23.548 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:26:23.556 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:26:23.561 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:26:23.563 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.7768ms
2025-08-26 11:26:23.565 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:26:23.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 26.575ms
2025-08-26 11:26:29.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:26:29.958 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:29.959 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 4.9365ms
2025-08-26 11:26:29.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:26:29.974 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:29.975 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 5.8879ms
2025-08-26 11:26:29.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 11:26:29.999 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:30.001 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:26:30.002 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:26:30.011 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 11:26:30.012 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:26:30.016 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:26:30.019 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:26:30.021 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:26:30.023 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 17.6347ms
2025-08-26 11:26:30.024 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 11:26:30.026 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 11:26:30.030 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 33.851ms
2025-08-26 11:26:30.033 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 11:26:30.043 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 11:26:30.046 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 17.3872ms
2025-08-26 11:26:30.048 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 11:26:30.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 39.3036ms
2025-08-26 11:27:10.135 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 11:27:10.144 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:10.146 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 11.6894ms
2025-08-26 11:27:10.151 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-26 11:27:10.157 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:10.159 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 11:27:10.160 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 11:27:10.165 +05:30 [INF] üîë Login attempt for email: admin@xbytechat.com
2025-08-26 11:27:10.173 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 11:27:10.194 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-26 11:27:10.197 +05:30 [INF] ‚úÖ Token generated for: admin@xbytechat.com
2025-08-26 11:27:10.199 +05:30 [INF] üîé JWT includes plan_id: 
2025-08-26 11:27:10.200 +05:30 [INF] ‚úÖ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-26 11:27:10.202 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:27:10.203 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 41.785ms
2025-08-26 11:27:10.206 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 11:27:10.207 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 56.3402ms
2025-08-26 11:27:10.212 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:27:10.216 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:10.217 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6729ms
2025-08-26 11:27:10.223 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:27:10.228 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:10.229 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:27:10.231 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:27:10.234 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:27:10.240 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0744ms
2025-08-26 11:27:10.242 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:27:10.243 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.2146ms
2025-08-26 11:27:10.344 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:27:10.348 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:10.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:27:10.351 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:27:10.356 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:27:10.358 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.3852ms
2025-08-26 11:27:10.360 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:27:10.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7425ms
2025-08-26 11:27:17.484 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 11:27:17.489 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:17.491 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.5557ms
2025-08-26 11:27:17.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 11:27:17.509 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:27:17.512 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 11:27:17.519 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 11:27:17.639 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 116.5588ms
2025-08-26 11:27:17.642 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 11:27:17.704 +05:30 [ERR] ‚ùå An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 808
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-26 11:27:17.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 303.6014ms
2025-08-26 11:39:13.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-26 11:39:13.335 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:13.336 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 10.3199ms
2025-08-26 11:39:13.350 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 528
2025-08-26 11:39:13.354 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:13.355 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 11:39:13.362 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 11:39:13.381 +05:30 [INF] üîß [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-26 11:39:13.420 +05:30 [WRN] ‚ùå [UpdateSetting] BusinessId claim missing/invalid: Invalid or missing businessId in token.
2025-08-26 11:39:13.424 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:39:13.427 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 59.5279ms
2025-08-26 11:39:13.429 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 11:39:13.430 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 401 null application/json; charset=utf-8 79.3748ms
2025-08-26 11:39:28.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 11:39:28.151 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.153 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.0893ms
2025-08-26 11:39:28.164 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 11:39:28.168 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.170 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 11:39:28.172 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 11:39:28.179 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 11:39:28.296 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 11:39:28.304 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 11:39:28.314 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 11:39:28.319 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 11:39:28.320 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 11:39:28.322 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 11:39:28.323 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:39:28.325 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 151.013ms
2025-08-26 11:39:28.327 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 11:39:28.328 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 164.4164ms
2025-08-26 11:39:28.334 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:39:28.337 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.338 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1819ms
2025-08-26 11:39:28.343 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:39:28.346 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.348 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.349 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:39:28.356 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:39:28.359 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:39:28.361 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5249ms
2025-08-26 11:39:28.363 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.365 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6748ms
2025-08-26 11:39:28.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:39:28.395 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.397 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.398 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:39:28.406 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:39:28.411 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:39:28.413 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3161ms
2025-08-26 11:39:28.415 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.5598ms
2025-08-26 11:39:28.433 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:39:28.436 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.438 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.440 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:39:28.445 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:39:28.451 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:39:28.453 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4352ms
2025-08-26 11:39:28.455 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.9227ms
2025-08-26 11:39:28.507 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 11:39:28.512 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:28.515 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.516 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 11:39:28.523 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 11:39:28.529 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:39:28.532 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2907ms
2025-08-26 11:39:28.536 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 11:39:28.538 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.0153ms
2025-08-26 11:39:31.958 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 11:39:31.962 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:31.964 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.7492ms
2025-08-26 11:39:31.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 11:39:31.981 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:39:31.983 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 11:39:31.986 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 11:39:31.999 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:39:32.004 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-26 11:39:32.009 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 21.0843ms
2025-08-26 11:39:32.011 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 11:39:32.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 35.6739ms
2025-08-26 11:40:55.502 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-26 11:40:55.512 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:40:55.513 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 10.9936ms
2025-08-26 11:40:55.524 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 547
2025-08-26 11:40:55.527 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:40:55.529 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 11:40:55.531 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 11:40:55.535 +05:30 [INF] üîß [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-26 11:40:55.547 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-26 11:40:55.669 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p3='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPa13BXINrSWOnzGSmOK3FQKsXrPYNXytAoSzHKfPmONr2v03ZAep7C5VlyZC9TqjdV7SPadpG86dlDtbcZAxwcQc11NTOGExGye6YEcADSnWNqNRPEZCyB01q5ZAWicfx189yZBbSqXhIDlJaw3tcJmnnKQoB8Yhb0QrRqMRvqTiU38wJc0xNALYnopszLnNnaFZAtzFDnDInHH4macvgcq4YXiLPlmlG9zqjmPDKed93xhoRn3HuUZD' (Nullable = false), @p1='Meta_cloud' (Nullable = false), @p2='2025-08-26T06:10:55.5530947Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "Provider" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3;
2025-08-26 11:40:55.685 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:40:55.687 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 153.9331ms
2025-08-26 11:40:55.689 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 11:40:55.691 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 166.1558ms
2025-08-26 11:40:57.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-26 11:40:57.156 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:40:57.158 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.7235ms
2025-08-26 11:40:57.162 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 379
2025-08-26 11:40:57.165 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:40:57.167 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 11:40:57.172 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 11:40:57.180 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 11:40:57.182 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 11:40:59.025 +05:30 [INF] Received HTTP response headers after 1842.0708ms - 200
2025-08-26 11:40:59.027 +05:30 [INF] End processing HTTP request after 1847.7194ms - 200
2025-08-26 11:40:59.051 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:40:59.054 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1879.6825ms
2025-08-26 11:40:59.056 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 11:40:59.057 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1895.2232ms
2025-08-26 11:41:09.720 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-26 11:41:09.724 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 11:41:09.743 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:41:09.747 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:41:09.748 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 28.4474ms
2025-08-26 11:41:09.750 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 26.7255ms
2025-08-26 11:41:09.757 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 11:41:09.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-26 11:41:09.762 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:41:09.765 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:41:09.767 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 11:41:09.768 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:41:09.769 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-26 11:41:09.770 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 11:41:09.775 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-26 11:41:09.781 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-26 11:41:09.792 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:41:09.794 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 21.9313ms
2025-08-26 11:41:09.796 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 11:41:09.797 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 40.3626ms
2025-08-26 11:41:09.885 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 11:41:09.893 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 11:41:09.935 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:41:09.939 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 164.0532ms
2025-08-26 11:41:09.940 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:41:09.942 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 183.1425ms
2025-08-26 11:42:06.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-26 11:42:06.966 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:42:06.967 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 4.7589ms
2025-08-26 11:42:06.981 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 57
2025-08-26 11:42:06.986 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:42:06.988 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 11:42:07.008 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 11:42:07.024 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-26 11:42:07.035 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-26 11:42:07.108 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p0='26b8b9a2-5624-40ed-a659-65de71d03d20', @p1=NULL (DbType = Guid), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='2025-08-26T06:12:07.0417320Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='True', @p7='False', @p8='False', @p9='False', @p10=NULL (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Guid), @p13=NULL (DbType = DateTime), @p14=NULL, @p15='WhatsApp User' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL, @p18='+918974005240' (Nullable = false), @p19=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contacts" ("Id", "AssignedAgentId", "BusinessId", "CreatedAt", "Email", "Group", "IsActive", "IsArchived", "IsAutomationPaused", "IsFavorite", "LastCTAInteraction", "LastCTAType", "LastClickedProductId", "LastContactedAt", "LeadSource", "Name", "NextFollowUpAt", "Notes", "PhoneNumber", "Tags")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-08-26 11:42:07.112 +05:30 [INF] Contact created: "26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 11:42:07.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:42:07.133 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:42:07.135 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:42:09.618 +05:30 [INF] Received HTTP response headers after 2481.1886ms - 200
2025-08-26 11:42:09.621 +05:30 [INF] End processing HTTP request after 2488.4018ms - 200
2025-08-26 11:42:09.722 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='5ed4c0b3-bf50-48cc-a5d9-3c1e5a6ac65f', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T06:12:09.6406975Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='dfdsf' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjQyNDk4NDM0MjZGMDNERTMzAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRjQyNDk4NDM0MjZGMDNERTMzAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='dfdsf', @p16='2025-08-26T06:12:09.6407404Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-26 11:42:09.728 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:42:09.733 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2721.734ms
2025-08-26 11:42:09.735 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 11:42:09.736 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 2754.6042ms
2025-08-26 11:42:45.459 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-26 11:42:45.463 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:42:45.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 5.3259ms
2025-08-26 11:42:45.470 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 57
2025-08-26 11:42:45.485 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:42:45.487 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 11:42:45.489 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 11:42:45.496 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-26 11:42:45.501 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-26 11:42:45.506 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 11:42:45.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:42:45.514 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:42:45.515 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:42:47.197 +05:30 [INF] Received HTTP response headers after 1680.2068ms - 200
2025-08-26 11:42:47.201 +05:30 [INF] End processing HTTP request after 1687.8577ms - 200
2025-08-26 11:42:47.227 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='273d0d78-a7ab-4203-b061-6e64259c3bbe', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T06:12:47.2039191Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='dfdsf' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjg0MTc5QTEzMkJGNjEwOEREAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjg0MTc5QTEzMkJGNjEwOEREAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='dfdsf', @p16='2025-08-26T06:12:47.2039192Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-26 11:42:47.234 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:42:47.237 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1743.6074ms
2025-08-26 11:42:47.239 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 11:42:47.241 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1771.0351ms
2025-08-26 11:42:57.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:42:57.337 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:42:57.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.8107ms
2025-08-26 11:42:57.361 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:42:57.366 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:42:57.368 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:42:57.371 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:42:57.381 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:42:57.384 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:42:57.387 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.6438ms
2025-08-26 11:42:57.389 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:42:57.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 30.4261ms
2025-08-26 11:43:00.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null null
2025-08-26 11:43:00.829 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:43:00.832 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 204 null null 6.8014ms
2025-08-26 11:43:00.839 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null 0
2025-08-26 11:43:00.843 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:43:00.845 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 11:43:00.851 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:43:06.752 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 11:43:06.778 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='2469b720-d917-45a4-b234-d3c5bb3d2207'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 11:43:07.065 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 11:43:07.068 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 11:43:07.073 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 11:43:08.393 +05:30 [INF] Received HTTP response headers after 1319.4765ms - 200
2025-08-26 11:43:08.396 +05:30 [INF] End processing HTTP request after 1327.8236ms - 200
2025-08-26 11:43:08.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:43:08.605 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:43:08.607 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:43:09.324 +05:30 [INF] Received HTTP response headers after 714.5839ms - 400
2025-08-26 11:43:09.326 +05:30 [INF] End processing HTTP request after 720.5514ms - 400
2025-08-26 11:43:09.328 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132018) There\u2019s an issue with the parameters in your template","type":"OAuthException","code":132018,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url does not require parameters"},"fbtrace_id":"AxZMIsfN3epcJ5RkaJ2ysR-"}}
2025-08-26 11:43:09.437 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='3df74370-d86f-415a-87ac-f47aa2116ff3', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='2469b720-d917-45a4-b234-d3c5bb3d2207' (Nullable = true), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-26T06:13:09.3315925Z' (DbType = DateTime), @p7='‚ùå WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132018) There\u2019s an issue with the parameters in your template","type":"OAuthException","code":132018,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url does not require parameters"},"fbtrace_id":"AxZMIsfN3epcJ5RkaJ2ysR-"}}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='15757522-edbc-4157-8401-73b5427c75bc', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='2469b720-d917-45a4-b234-d3c5bb3d2207', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='8aac7c57-6699-4511-897b-4121b407eb1c', @p28=NULL, @p29='2025-08-26T06:13:09.3354460Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Users,

Your new account has been created successfully. 

Please verify Emails to complete your profile.' (Nullable = false), @p41=NULL, @p42='3df74370-d86f-415a-87ac-f47aa2116ff3' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='3bd2d034-f135-460b-8fb7-3321e968f996', @p45='0', @p46='Failed', @p47='2025-08-26T06:13:09.3355204Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='account_creation_confirmation_3', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 11:43:09.456 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:43:09.458 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8604.1338ms
2025-08-26 11:43:09.460 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 11:43:09.462 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 200 null application/json; charset=utf-8 8623.3638ms
2025-08-26 11:43:28.583 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null null
2025-08-26 11:43:28.587 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:43:28.588 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 204 null null 4.6826ms
2025-08-26 11:43:28.595 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null 0
2025-08-26 11:43:28.599 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:43:28.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 11:43:28.602 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:43:38.431 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='2469b720-d917-45a4-b234-d3c5bb3d2207'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 11:43:59.990 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 11:44:45.725 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 11:44:45.728 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 11:44:47.236 +05:30 [INF] Received HTTP response headers after 1505.0575ms - 200
2025-08-26 11:44:47.238 +05:30 [INF] End processing HTTP request after 1513.6213ms - 200
2025-08-26 11:46:11.833 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:46:36.675 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:46:36.680 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:46:37.789 +05:30 [INF] Received HTTP response headers after 1105.8782ms - 400
2025-08-26 11:46:37.792 +05:30 [INF] End processing HTTP request after 1116.7864ms - 400
2025-08-26 11:46:37.795 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132018) There\u2019s an issue with the parameters in your template","type":"OAuthException","code":132018,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url does not require parameters"},"fbtrace_id":"AF7woQx9vVM5tMJy5vprpZs"}}
2025-08-26 11:46:57.789 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[@p0='8e37589a-22ba-419a-aa65-3d68d1590d58', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='2469b720-d917-45a4-b234-d3c5bb3d2207' (Nullable = true), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-26T06:16:48.1939143Z' (DbType = DateTime), @p7='‚ùå WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132018) There\u2019s an issue with the parameters in your template","type":"OAuthException","code":132018,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url does not require parameters"},"fbtrace_id":"AF7woQx9vVM5tMJy5vprpZs"}}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='6d96df75-7df8-4b6a-bae7-e273f2d2220a', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='2469b720-d917-45a4-b234-d3c5bb3d2207', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='8aac7c57-6699-4511-897b-4121b407eb1c', @p28=NULL, @p29='2025-08-26T06:16:52.7168084Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Users,

Your new account has been created successfully. 

Please verify Emails to complete your profile.' (Nullable = false), @p41=NULL, @p42='8e37589a-22ba-419a-aa65-3d68d1590d58' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='3bd2d034-f135-460b-8fb7-3321e968f996', @p45='0', @p46='Failed', @p47='2025-08-26T06:16:52.7176272Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='account_creation_confirmation_3', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 11:47:25.103 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:47:27.214 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 238609.5149ms
2025-08-26 11:47:27.217 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 11:47:27.218 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 200 null application/json; charset=utf-8 238622.8121ms
2025-08-26 11:48:50.284 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 11:48:50.298 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:48:50.299 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 15.6145ms
2025-08-26 11:48:50.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 11:48:50.314 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:48:50.316 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 11:48:50.318 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 11:48:50.327 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:48:50.341 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-26 11:48:50.343 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 22.5803ms
2025-08-26 11:48:50.345 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 11:48:50.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 38.0343ms
2025-08-26 11:56:07.084 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 11:56:07.158 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 11:56:07.179 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 11:56:08.499 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 11:56:09.387 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 11:56:09.669 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 11:56:09.743 +05:30 [INF] Executed DbCommand (130ms) [Parameters=[@__cutoff_0='2025-08-19T06:26:07.3274225Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 11:56:09.775 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 11:56:09.776 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 11:56:09.778 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 11:56:09.780 +05:30 [INF] Hosting environment: Development
2025-08-26 11:56:09.781 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 11:56:11.609 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 11:56:11.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 241.113ms
2025-08-26 11:56:11.874 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 11:56:11.884 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.438ms
2025-08-26 11:56:11.949 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 11:56:11.994 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.2595ms
2025-08-26 11:56:12.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 11:56:12.479 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 291.7566ms
2025-08-26 11:56:40.544 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:56:40.554 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 11:56:40.643 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:56:40.651 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 107.1483ms
2025-08-26 11:56:40.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 11:56:40.673 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:56:40.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:56:40.901 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:56:41.229 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 11:56:41.264 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 11:56:41.305 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 395.8404ms
2025-08-26 11:56:41.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 11:56:41.319 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 662.6254ms
2025-08-26 11:56:43.272 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null null
2025-08-26 11:56:43.280 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:56:43.282 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 204 null null 10.1927ms
2025-08-26 11:56:43.287 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null 0
2025-08-26 11:56:43.294 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:56:43.298 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 11:56:43.306 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 11:56:51.038 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 11:56:51.064 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='2469b720-d917-45a4-b234-d3c5bb3d2207'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 11:56:51.433 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 11:56:51.467 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 11:56:51.471 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 11:56:53.461 +05:30 [INF] Received HTTP response headers after 1985.1213ms - 200
2025-08-26 11:56:53.464 +05:30 [INF] End processing HTTP request after 1999.1162ms - 200
2025-08-26 11:56:53.631 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:56:53.659 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:56:53.661 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:56:54.777 +05:30 [INF] Received HTTP response headers after 1113.4987ms - 400
2025-08-26 11:56:54.779 +05:30 [INF] End processing HTTP request after 1120.0746ms - 400
2025-08-26 11:56:54.782 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132018) There\u2019s an issue with the parameters in your template","type":"OAuthException","code":132018,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url does not require parameters"},"fbtrace_id":"A-EtpAPhaUKjxogl5sr5A3m"}}
2025-08-26 11:56:55.145 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[@p0='c99e57f2-43f3-437d-9931-106c3bd53a60', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='2469b720-d917-45a4-b234-d3c5bb3d2207' (Nullable = true), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-26T06:26:54.7886568Z' (DbType = DateTime), @p7='‚ùå WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132018) There\u2019s an issue with the parameters in your template","type":"OAuthException","code":132018,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url does not require parameters"},"fbtrace_id":"A-EtpAPhaUKjxogl5sr5A3m"}}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='abc39a33-4270-419d-8319-5695f10d04c7', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='2469b720-d917-45a4-b234-d3c5bb3d2207', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='8aac7c57-6699-4511-897b-4121b407eb1c', @p28=NULL, @p29='2025-08-26T06:26:54.8590569Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Users,

Your new account has been created successfully. 

Please verify Emails to complete your profile.' (Nullable = false), @p41=NULL, @p42='c99e57f2-43f3-437d-9931-106c3bd53a60' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='3bd2d034-f135-460b-8fb7-3321e968f996', @p45='0', @p46='Failed', @p47='2025-08-26T06:26:54.8591237Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='account_creation_confirmation_3', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 11:56:55.182 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:56:55.192 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 11882.8997ms
2025-08-26 11:56:55.195 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 11:56:55.197 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 200 null application/json; charset=utf-8 11909.5229ms
2025-08-26 11:57:09.801 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-26 11:57:09.801 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 11:57:09.805 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:57:09.810 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 8.6825ms
2025-08-26 11:57:09.810 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:57:09.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-26 11:57:09.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 14.7487ms
2025-08-26 11:57:09.820 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:57:09.826 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 11:57:09.831 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:57:09.833 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:57:09.839 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 11:57:09.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 11:57:09.849 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-26 11:57:09.850 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-26 11:57:09.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 11:57:09.887 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-26 11:57:09.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 11:57:09.907 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 49.7214ms
2025-08-26 11:57:09.909 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 11:57:09.912 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 85.5819ms
2025-08-26 11:57:09.920 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 11:57:09.968 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:57:09.978 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 136.3757ms
2025-08-26 11:57:09.981 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 11:57:09.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 168.2878ms
2025-08-26 11:57:16.570 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-26 11:57:16.575 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:57:16.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 6.7016ms
2025-08-26 11:57:16.585 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 58
2025-08-26 11:57:16.596 +05:30 [INF] CORS policy execution successful.
2025-08-26 11:57:16.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 11:57:16.606 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 11:57:16.642 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-26 11:57:16.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-26 11:57:16.661 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 11:57:16.669 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 11:57:16.676 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:57:16.679 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 11:57:17.919 +05:30 [INF] Received HTTP response headers after 1237.5355ms - 200
2025-08-26 11:57:17.921 +05:30 [INF] End processing HTTP request after 1244.5337ms - 200
2025-08-26 11:57:17.933 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='1cdbce1f-17a0-4347-a865-dae37e98a24e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T06:27:17.9268987Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='xczczc' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM0QjUyNzczQUMyOUQ0Q0E5AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM0QjUyNzczQUMyOUQ0Q0E5AA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='xczczc', @p16='2025-08-26T06:27:17.9268988Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-26 11:57:17.938 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 11:57:17.944 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1335.8019ms
2025-08-26 11:57:17.946 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 11:57:17.948 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1363.46ms
2025-08-26 12:37:34.779 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 12:37:34.810 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 12:37:34.824 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 12:37:35.464 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 12:37:35.926 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 12:37:36.127 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 12:37:36.128 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 12:37:36.129 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 12:37:36.130 +05:30 [INF] Hosting environment: Development
2025-08-26 12:37:36.131 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 12:37:36.149 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 12:37:36.167 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__cutoff_0='2025-08-19T07:07:34.9050841Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 12:37:38.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 12:37:38.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 162.1594ms
2025-08-26 12:37:38.492 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 12:37:38.500 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.0516ms
2025-08-26 12:37:38.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 12:37:38.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.8177ms
2025-08-26 12:37:38.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 12:37:38.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 200.3521ms
2025-08-26 12:37:55.008 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 12:37:55.013 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 12:37:55.048 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 43.7799ms
2025-08-26 12:37:55.055 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 12:37:55.062 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.156 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 12:37:55.169 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 12:37:55.235 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 12:37:55.298 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 12:37:55.380 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 12:37:55.483 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 12:37:55.492 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 12:37:55.500 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 12:37:55.502 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 12:37:55.508 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:37:55.518 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 341.7551ms
2025-08-26 12:37:55.520 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 12:37:55.525 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 469.6056ms
2025-08-26 12:37:55.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:37:55.533 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0166ms
2025-08-26 12:37:55.537 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:37:55.542 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.573 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:37:55.591 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 12:37:55.618 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:37:55.622 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:37:55.631 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 56.4042ms
2025-08-26 12:37:55.632 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.633 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 96.4304ms
2025-08-26 12:37:55.654 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:37:55.659 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.665 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.667 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:37:55.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:37:55.683 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:37:55.685 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.1807ms
2025-08-26 12:37:55.687 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:37:55.688 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.0532ms
2025-08-26 12:37:55.691 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.698 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.699 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:37:55.709 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:37:55.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:37:55.717 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.6345ms
2025-08-26 12:37:55.720 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.721 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.1493ms
2025-08-26 12:37:55.758 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:37:55.762 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:37:55.764 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.765 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:37:55.771 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:37:55.776 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:37:55.778 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.7835ms
2025-08-26 12:37:55.780 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:37:55.782 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1632ms
2025-08-26 12:38:00.607 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:38:00.610 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:00.612 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4273ms
2025-08-26 12:38:00.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:38:00.619 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:00.621 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:38:00.626 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:38:00.673 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 12:38:00.676 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 12:38:00.688 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 59.8922ms
2025-08-26 12:38:00.689 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:38:00.690 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 75.5918ms
2025-08-26 12:38:05.539 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null null
2025-08-26 12:38:05.543 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:05.544 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 204 null null 4.3534ms
2025-08-26 12:38:05.547 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - null 0
2025-08-26 12:38:05.550 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:05.551 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:38:05.556 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:38:12.104 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 12:38:12.115 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='2469b720-d917-45a4-b234-d3c5bb3d2207'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 12:38:12.208 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:38:12.274 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 12:38:12.291 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:38:12.293 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:38:13.297 +05:30 [INF] Received HTTP response headers after 1000.8326ms - 200
2025-08-26 12:38:13.298 +05:30 [INF] End processing HTTP request after 1008.3312ms - 200
2025-08-26 12:38:13.391 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:38:13.401 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 12:38:13.402 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 12:38:14.601 +05:30 [INF] Received HTTP response headers after 1198.001ms - 200
2025-08-26 12:38:14.603 +05:30 [INF] End processing HTTP request after 1201.3999ms - 200
2025-08-26 12:38:14.650 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:38:14.656 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9097.0279ms
2025-08-26 12:38:14.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:38:14.658 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/2469b720-d917-45a4-b234-d3c5bb3d2207 - 200 null application/json; charset=utf-8 9110.9685ms
2025-08-26 12:38:34.664 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 12:38:34.666 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.666 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.8913ms
2025-08-26 12:38:34.673 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 12:38:34.674 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.675 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 12:38:34.676 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 12:38:34.680 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 12:38:34.684 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 12:38:34.689 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 12:38:34.694 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 12:38:34.696 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 12:38:34.697 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 12:38:34.698 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 12:38:34.699 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:38:34.700 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.7475ms
2025-08-26 12:38:34.701 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 12:38:34.702 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 29.7707ms
2025-08-26 12:38:34.705 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:38:34.707 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.707 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5549ms
2025-08-26 12:38:34.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:38:34.712 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.713 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:38:34.718 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:38:34.721 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:38:34.722 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2439ms
2025-08-26 12:38:34.723 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.724 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2119ms
2025-08-26 12:38:34.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:38:34.736 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.738 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.738 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:38:34.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:38:34.745 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:38:34.747 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8291ms
2025-08-26 12:38:34.748 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:38:34.748 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.750 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.751 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2953ms
2025-08-26 12:38:34.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.755 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:38:34.759 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:38:34.762 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:38:34.763 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5855ms
2025-08-26 12:38:34.764 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7075ms
2025-08-26 12:38:34.801 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:38:34.803 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:34.804 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.807 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:38:34.815 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:38:34.818 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:38:34.819 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2582ms
2025-08-26 12:38:34.821 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:38:34.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.1858ms
2025-08-26 12:38:39.224 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:38:39.226 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:39.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.4985ms
2025-08-26 12:38:39.231 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:38:39.232 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:39.233 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:38:39.234 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:38:39.246 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 12:38:39.249 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 12:38:39.250 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.8574ms
2025-08-26 12:38:39.251 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:38:39.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 21.8043ms
2025-08-26 12:38:40.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 12:38:40.708 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:40.709 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 2.9524ms
2025-08-26 12:38:40.712 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-26 12:38:40.714 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:38:40.715 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:38:40.716 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:38:42.863 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 12:38:42.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:38:42.871 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 12:38:42.873 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 12:38:42.874 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 12:38:43.958 +05:30 [INF] Received HTTP response headers after 1083.6686ms - 200
2025-08-26 12:38:43.959 +05:30 [INF] End processing HTTP request after 1086.2942ms - 200
2025-08-26 12:38:43.966 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:38:43.970 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 12:38:43.971 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 12:38:43.972 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 12:38:49.301 +05:30 [INF] Received HTTP response headers after 5327.3588ms - 200
2025-08-26 12:38:49.302 +05:30 [INF] End processing HTTP request after 5330.3042ms - 200
2025-08-26 12:38:49.304 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:38:49.306 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8588.2324ms
2025-08-26 12:38:49.307 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:38:49.308 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 8595.5978ms
2025-08-26 12:39:11.550 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 12:39:11.553 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5863ms
2025-08-26 12:39:11.557 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 12:39:11.559 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.560 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 12:39:11.561 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 12:39:11.565 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 12:39:11.569 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 12:39:11.578 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 12:39:11.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 12:39:11.584 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 12:39:11.585 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 12:39:11.586 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 12:39:11.587 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:11.588 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 26.5176ms
2025-08-26 12:39:11.589 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 12:39:11.590 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 33.3817ms
2025-08-26 12:39:11.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:39:11.595 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.595 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6976ms
2025-08-26 12:39:11.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:39:11.600 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.602 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:39:11.606 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:39:11.609 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:11.610 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7811ms
2025-08-26 12:39:11.611 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.612 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2172ms
2025-08-26 12:39:11.622 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:39:11.625 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.627 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:39:11.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:39:11.634 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:11.636 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3552ms
2025-08-26 12:39:11.637 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:39:11.637 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.640 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.640 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.058ms
2025-08-26 12:39:11.642 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.645 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:39:11.649 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:39:11.652 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:11.654 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6871ms
2025-08-26 12:39:11.655 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.2255ms
2025-08-26 12:39:11.708 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 12:39:11.711 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:11.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.714 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 12:39:11.718 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 12:39:11.722 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:11.723 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6713ms
2025-08-26 12:39:11.724 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 12:39:11.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0231ms
2025-08-26 12:39:20.631 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 12:39:20.634 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:20.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 4.3607ms
2025-08-26 12:39:20.638 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 12:39:20.641 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:20.643 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 12:39:20.648 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 12:39:20.666 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 12:39:20.670 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:20.675 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 25.1749ms
2025-08-26 12:39:20.676 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 12:39:20.677 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 39.4403ms
2025-08-26 12:39:27.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-26 12:39:27.833 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:27.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.3809ms
2025-08-26 12:39:27.836 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-26 12:39:27.839 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:27.840 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-26 12:39:27.843 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 12:39:27.851 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:39:27.864 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-26 12:39:27.880 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-26 12:39:27.881 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-26 12:39:29.069 +05:30 [INF] Received HTTP response headers after 1186.8765ms - 200
2025-08-26 12:39:29.070 +05:30 [INF] End processing HTTP request after 1190.501ms - 200
2025-08-26 12:39:29.113 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 12:39:29.158 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 12:39:29.162 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 12:39:29.214 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='9dc08b5b-90bb-480f-bf03-17faebce4090', @p1='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[]' (Nullable = false), @p4='UTILITY', @p5='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p6='617143187619824', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p11='hello_world' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p17='d3af80fd-8671-4871-87f0-3d5676c92913', @p18='Hello {{}}! The moment has arrived! üéâ

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend‚Äîset it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p23='1100798472016654', @p24='True', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p28='shoe_launch_offer' (Nullable = false), @p29='1', @p30='meta_cloud' (Nullable = false), @p31='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwEDWJ4P&_nc_oc=AdmVpVae-zFPNoRq20qoQrUgbrqp_h1VW_oqSfLhV6qz4iZQU6GrU9LM2dCg7giO2RQBpkjTkhRhGXslZHI5M3vy&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=pMs3Zk1oDKU_VYfnLIwF_A&oh=01_Q5Aa2QFPs3Ba7OCotdrBg6rMysh_mV05ovVeCOWxtkPXrHJqRQ&oe=68D4BD0F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! üéâ\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend‚Äîset it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p34='f9aa5606-ac62-4e91-bdcd-764f2ec3bf2f', @p35='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p38='UTILITY', @p39='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p40='817241660991962', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-26T07:09:27.8550158Z' (DbType = DateTime), @p45='account_creation_confirmation_3' (Nullable = false), @p46='2', @p47='meta_cloud' (Nullable = false), @p48='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-26T07:09:27.8550158Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 12:39:29.231 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 12:39:29.234 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1388.7912ms
2025-08-26 12:39:29.236 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-26 12:39:29.237 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1400.2793ms
2025-08-26 12:39:29.250 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 12:39:29.252 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:29.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 2.7916ms
2025-08-26 12:39:29.255 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 12:39:29.258 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:29.258 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 12:39:29.259 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 12:39:29.264 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 12:39:29.268 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:29.270 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 9.0018ms
2025-08-26 12:39:29.271 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 12:39:29.272 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 16.4098ms
2025-08-26 12:39:54.197 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/hello_world - null null
2025-08-26 12:39:54.204 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:54.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/hello_world - 204 null null 7.2784ms
2025-08-26 12:39:54.211 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/hello_world - null null
2025-08-26 12:39:54.213 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:39:54.214 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 12:39:54.219 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 12:39:54.229 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='hello_world'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-26 12:39:54.233 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:39:54.236 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 15.1296ms
2025-08-26 12:39:54.237 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 12:39:54.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/hello_world - 200 null application/json; charset=utf-8 27.479ms
2025-08-26 12:40:06.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-26 12:40:06.949 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:06.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.7918ms
2025-08-26 12:40:06.952 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 249
2025-08-26 12:40:06.954 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:06.955 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 12:40:06.959 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:40:06.976 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 12:40:06.978 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:40:06.980 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:40:07.883 +05:30 [INF] Received HTTP response headers after 902.0767ms - 200
2025-08-26 12:40:07.885 +05:30 [INF] End processing HTTP request after 906.6966ms - 200
2025-08-26 12:40:07.921 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='0ce62821-8657-45fa-b187-4aed386eee14', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-26T07:10:07.8884656Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.', @p14='hello_world' (Nullable = false), @p15='hello_world' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='hello_world', @p20='[]', @p21='2025-08-26T07:10:07.8885163Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-26 12:40:07.924 +05:30 [INF] ‚úÖ Campaign 'hello_world' created with 0 recipients, 0 user buttons, 0 template buttons and 0 template parameters
2025-08-26 12:40:07.928 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:40:07.931 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 970.1367ms
2025-08-26 12:40:07.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 12:40:07.933 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 981.2253ms
2025-08-26 12:40:07.989 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 12:40:07.995 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 12:40:07.996 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:07.989 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 12:40:07.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 12:40:08.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 13.8099ms
2025-08-26 12:40:08.002 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.004 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.010 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 12:40:08.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 18.4478ms
2025-08-26 12:40:08.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 204 null null 24.806ms
2025-08-26 12:40:08.016 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 18.2847ms
2025-08-26 12:40:08.021 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 12:40:08.022 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:40:08.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 12:40:08.026 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.029 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.029 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 12:40:08.030 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 12:40:08.030 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 12:40:08.034 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:40:08.035 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 12:40:08.039 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 12:40:08.043 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-26 12:40:08.044 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:40:08.050 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 18.8667ms
2025-08-26 12:40:08.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 12:40:08.052 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:40:08.054 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:08.057 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 44.3811ms
2025-08-26 12:40:08.059 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 12:40:08.061 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:40:08.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 12:40:08.068 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 12:40:08.072 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 12:40:08.073 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 12:40:08.078 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:40:08.079 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 7.8205ms
2025-08-26 12:40:08.080 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:40:08.080 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 44.8145ms
2025-08-26 12:40:08.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 30.0578ms
2025-08-26 12:40:08.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 12:40:08.086 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 200 null application/json; charset=utf-8 64.8688ms
2025-08-26 12:40:08.093 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 12:40:08.116 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:40:08.121 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 83.8545ms
2025-08-26 12:40:08.123 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 12:40:08.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 99.9079ms
2025-08-26 12:40:14.270 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14/assign-contacts - null null
2025-08-26 12:40:14.272 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:14.273 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14/assign-contacts - 204 null null 3.4585ms
2025-08-26 12:40:14.276 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14/assign-contacts - application/json 55
2025-08-26 12:40:14.278 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:14.279 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 12:40:14.283 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:40:14.320 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 12:40:14.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='f6a9a563-ddf6-4f9a-96bb-70cafbd309d8', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='0ce62821-8657-45fa-b187-4aed386eee14', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-26T07:10:14.3263447Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-26T07:10:14.3263927Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-26 12:40:14.335 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:40:14.336 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 52.2802ms
2025-08-26 12:40:14.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 12:40:14.338 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/0ce62821-8657-45fa-b187-4aed386eee14/assign-contacts - 200 null application/json; charset=utf-8 62.7299ms
2025-08-26 12:40:16.985 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:40:16.992 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:16.994 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.6144ms
2025-08-26 12:40:16.997 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:40:17.000 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:17.001 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:40:17.002 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:40:17.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 12:40:17.012 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 12:40:17.014 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.0843ms
2025-08-26 12:40:17.015 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:40:17.016 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 19.0873ms
2025-08-26 12:40:19.170 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 12:40:19.172 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:19.173 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 204 null null 2.8895ms
2025-08-26 12:40:19.175 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null 0
2025-08-26 12:40:19.177 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:40:19.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:40:19.179 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:40:24.583 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 12:40:34.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:40:55.695 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 12:40:55.723 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:40:55.724 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:40:56.752 +05:30 [INF] Received HTTP response headers after 1026.2001ms - 200
2025-08-26 12:40:56.757 +05:30 [INF] End processing HTTP request after 1033.5598ms - 200
2025-08-26 12:42:22.548 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:42:46.463 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 12:42:46.469 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 12:42:48.156 +05:30 [INF] Received HTTP response headers after 1684.8581ms - 200
2025-08-26 12:42:48.158 +05:30 [INF] End processing HTTP request after 1695.0741ms - 200
2025-08-26 12:42:58.538 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:42:58.542 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 159361.0467ms
2025-08-26 12:42:58.549 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:42:58.552 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 200 null application/json; charset=utf-8 159376.3934ms
2025-08-26 12:43:15.669 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 12:43:15.677 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:43:15.679 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 10.0433ms
2025-08-26 12:43:15.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 12:43:15.710 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:43:15.712 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 12:43:15.717 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 12:43:15.724 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 12:43:15.730 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:43:15.732 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 12.6327ms
2025-08-26 12:43:15.734 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 12:43:15.736 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 31.3376ms
2025-08-26 12:43:19.564 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/shoe_launch_offer - null null
2025-08-26 12:43:19.569 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:43:19.570 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/shoe_launch_offer - 204 null null 5.8982ms
2025-08-26 12:43:19.594 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/shoe_launch_offer - null null
2025-08-26 12:43:19.598 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:43:19.600 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 12:43:19.601 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 12:43:19.609 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='shoe_launch_offer'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-26 12:43:19.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:43:19.617 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 13.5666ms
2025-08-26 12:43:19.620 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 12:43:19.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/shoe_launch_offer - 200 null application/json; charset=utf-8 29.7584ms
2025-08-26 12:44:42.131 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-26 12:44:42.143 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:42.144 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 13.0587ms
2025-08-26 12:44:42.158 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 454
2025-08-26 12:44:42.162 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:42.164 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 12:44:42.166 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:44:42.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 12:44:42.284 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:44:42.286 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:44:43.360 +05:30 [INF] Received HTTP response headers after 1072.5852ms - 200
2025-08-26 12:44:43.362 +05:30 [INF] End processing HTTP request after 1078.156ms - 200
2025-08-26 12:44:43.385 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='image', @p4='2025-08-26T07:14:43.3670472Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11='https://picsum.photos/seed/picsum/200/300', @p12='False', @p13='Hello {{}}! The moment has arrived! üéâ

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend‚Äîset it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!', @p14='shoe_launch_offer' (Nullable = false), @p15='Shoes_Launch' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='shoe_launch_offer', @p20='["Sam"]', @p21='2025-08-26T07:14:43.3670472Z' (DbType = DateTime), @p22='c687ff64-167c-4c8b-b9c1-087db8290851', @p23='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p24='True', @p25='1', @p26='Shop now' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://xplorebytesolutions.com/' (Nullable = false), @p29='dd88455d-2130-4bd4-8b68-fec93d62c6ce', @p30='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p31='True', @p32='2', @p33='Call us' (Nullable = false), @p34='PHONE_NUMBER' (Nullable = false), @p35='+917082156227' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-26 12:44:43.390 +05:30 [INF] ‚úÖ Campaign 'Shoes_Launch' created with 0 recipients, 0 user buttons, 2 template buttons and 1 template parameters
2025-08-26 12:44:43.394 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:44:43.396 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1227.4729ms
2025-08-26 12:44:43.398 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 12:44:43.400 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1242.347ms
2025-08-26 12:44:43.475 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 12:44:43.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 12:44:43.487 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 12:44:43.494 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.495 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 19.8099ms
2025-08-26 12:44:43.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 12:44:43.508 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 32.5596ms
2025-08-26 12:44:43.513 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 12:44:43.517 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.518 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 41.7266ms
2025-08-26 12:44:43.527 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.528 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 50.4238ms
2025-08-26 12:44:43.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 12:44:43.534 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:44:43.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 12:44:43.541 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.543 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 12:44:43.546 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.547 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 12:44:43.551 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 12:44:43.553 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:44:43.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 12:44:43.558 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 12:44:43.569 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:44:43.571 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-26 12:44:43.573 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 23.1356ms
2025-08-26 12:44:43.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 12:44:43.574 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 12:44:43.579 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:44:43.589 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 12:44:43.590 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:43.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 78.1682ms
2025-08-26 12:44:43.596 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:44:43.596 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:44:43.604 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 32.9849ms
2025-08-26 12:44:43.606 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 12:44:43.608 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 12:44:43.613 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 12:44:43.614 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 76.4171ms
2025-08-26 12:44:43.619 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:44:43.626 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 15.4607ms
2025-08-26 12:44:43.628 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 12:44:43.630 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 56.4899ms
2025-08-26 12:44:43.671 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 12:44:43.676 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 12:44:43.680 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 119.4573ms
2025-08-26 12:44:43.683 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 12:44:43.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 152.5771ms
2025-08-26 12:44:48.872 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/assign-contacts - null null
2025-08-26 12:44:48.875 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:48.876 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/assign-contacts - 204 null null 4.1563ms
2025-08-26 12:44:48.880 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/assign-contacts - application/json 55
2025-08-26 12:44:48.883 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:48.885 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 12:44:48.886 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:44:48.893 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 12:44:48.918 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='2f01a3ad-8c8d-418b-add3-2ca29d7afa8c', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-26T07:14:48.8964124Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-26T07:14:48.8964128Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-26 12:44:48.922 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 12:44:48.923 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 35.1162ms
2025-08-26 12:44:48.925 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 12:44:48.926 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/assign-contacts - 200 null application/json; charset=utf-8 46.77ms
2025-08-26 12:44:51.798 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:44:51.801 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:51.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.0909ms
2025-08-26 12:44:51.805 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 12:44:51.810 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:51.811 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:44:51.813 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:44:51.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 12:44:51.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 12:44:51.825 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.5441ms
2025-08-26 12:44:51.826 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 12:44:51.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 22.6179ms
2025-08-26 12:44:58.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 12:44:58.131 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:58.132 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 5.2188ms
2025-08-26 12:44:58.137 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 12:44:58.141 +05:30 [INF] CORS policy execution successful.
2025-08-26 12:44:58.143 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:44:58.145 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 12:45:00.431 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 12:45:00.442 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 12:45:00.447 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:45:00.448 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 12:45:01.177 +05:30 [INF] Received HTTP response headers after 727.1118ms - 200
2025-08-26 12:45:01.179 +05:30 [INF] End processing HTTP request after 732.6813ms - 200
2025-08-26 12:45:01.197 +05:30 [WRN] ‚ö†Ô∏è Template expects 0 body parameters but received 1.
2025-08-26 12:45:01.220 +05:30 [INF] ‚ÑπÔ∏è Skipping parameters for static button 'Shop now' (url)
2025-08-26 12:45:01.223 +05:30 [INF] ‚ÑπÔ∏è Skipping parameters for static button 'Call us' (voice_call)
2025-08-26 12:45:01.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 12:45:01.248 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 12:45:01.250 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 12:45:01.995 +05:30 [INF] Received HTTP response headers after 743.3922ms - 400
2025-08-26 12:45:01.997 +05:30 [INF] End processing HTTP request after 748.7395ms - 400
2025-08-26 12:45:01.999 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132000) Number of parameters does not match the expected number of params","type":"OAuthException","code":132000,"error_data":{"messaging_product":"whatsapp","details":"body: number of localizable_params (1) does not match the expected number of params (0)"},"fbtrace_id":"As8-E86AuuksHU2yNlgqse_"}}
2025-08-26 12:45:02.157 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='6cb17c99-0a99-4a65-8133-0a96b9bf8ba2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='aef7b2fa-1966-404c-bb5b-6f180fa7116c' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T07:15:02.0023841Z' (DbType = DateTime), @p7='‚ùå WhatsApp API returned an error.', @p8='False', @p9='https://picsum.photos/seed/picsum/200/300', @p10='shoe_launch_offer' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132000) Number of parameters does not match the expected number of params","type":"OAuthException","code":132000,"error_data":{"messaging_product":"whatsapp","details":"body: number of localizable_params (1) does not match the expected number of params (0)"},"fbtrace_id":"As8-E86AuuksHU2yNlgqse_"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false), @p19='d5c4c883-bb8c-4476-923c-eb512a60c41b', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-26T07:15:02.0509991Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello {{}}! The moment has arrived! üéâ

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend‚Äîset it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p41=NULL, @p42='6cb17c99-0a99-4a65-8133-0a96b9bf8ba2' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='2f01a3ad-8c8d-418b-add3-2ca29d7afa8c', @p45='0', @p46='Failed', @p47='2025-08-26T07:15:02.0510703Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='shoe_launch_offer', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 12:45:02.184 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 12:45:02.186 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4038.3639ms
2025-08-26 12:45:02.188 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 12:45:02.190 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 4053.4997ms
2025-08-26 13:00:38.041 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 13:00:38.095 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 13:00:38.110 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 13:00:39.562 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 13:00:40.143 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 13:00:40.358 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 13:00:40.360 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 13:00:40.361 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 13:00:40.362 +05:30 [INF] Hosting environment: Development
2025-08-26 13:00:40.363 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 13:00:40.390 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 13:00:40.411 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__cutoff_0='2025-08-19T07:30:38.2106698Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 13:00:42.515 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 13:00:42.791 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 287.413ms
2025-08-26 13:00:42.985 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 13:00:42.985 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 13:00:43.000 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.1518ms
2025-08-26 13:00:43.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.6214ms
2025-08-26 13:00:43.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 13:00:43.495 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 262.6075ms
2025-08-26 13:00:56.757 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 13:00:56.766 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 13:00:56.832 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:56.837 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 79.9082ms
2025-08-26 13:00:56.843 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 13:00:56.858 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:57.037 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:00:57.060 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 13:00:57.163 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 13:00:57.275 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 13:00:57.432 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 13:00:57.590 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 13:00:57.608 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 13:00:57.626 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 13:00:57.630 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 13:00:57.644 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:00:57.657 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 589.1666ms
2025-08-26 13:00:57.660 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:00:57.668 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 824.859ms
2025-08-26 13:00:57.673 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:00:57.685 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:57.687 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.493ms
2025-08-26 13:00:57.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:00:57.699 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:57.708 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.718 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:00:57.745 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 13:00:57.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:00:57.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:00:57.814 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 91.8207ms
2025-08-26 13:00:57.817 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 127.073ms
2025-08-26 13:00:57.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:00:57.853 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:57.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.863 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:00:57.877 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:00:57.883 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:00:57.885 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9683ms
2025-08-26 13:00:57.888 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:00:57.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.8535ms
2025-08-26 13:00:57.893 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:57.900 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.902 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:00:57.913 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:00:57.920 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:00:57.923 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.9609ms
2025-08-26 13:00:57.925 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.1785ms
2025-08-26 13:00:57.970 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:00:57.980 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:00:57.984 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:57.987 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:00:57.995 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:00:58.000 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:00:58.004 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.2789ms
2025-08-26 13:00:58.006 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:00:58.007 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.0814ms
2025-08-26 13:01:05.026 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:01:05.037 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:05.043 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 17.4614ms
2025-08-26 13:01:05.053 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:01:05.063 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:05.067 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:01:05.077 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:01:05.156 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-08-26 13:01:05.162 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:01:05.182 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 101.3742ms
2025-08-26 13:01:05.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:01:05.186 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 133.5222ms
2025-08-26 13:01:08.297 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:01:08.301 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:08.303 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.2614ms
2025-08-26 13:01:08.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:01:08.325 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:08.327 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:01:08.329 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:01:08.360 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:01:08.364 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:01:08.367 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 35.1653ms
2025-08-26 13:01:08.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:01:08.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 51.4001ms
2025-08-26 13:01:10.364 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:01:10.369 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:10.370 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 6.2728ms
2025-08-26 13:01:10.374 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 13:01:10.380 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:10.381 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:01:10.389 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:01:13.767 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 13:01:13.786 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 13:01:13.996 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:01:14.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 13:01:14.168 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:01:14.171 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:01:15.444 +05:30 [INF] Received HTTP response headers after 1269.2029ms - 200
2025-08-26 13:01:15.447 +05:30 [INF] End processing HTTP request after 1280.6814ms - 200
2025-08-26 13:01:15.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:01:15.589 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:01:15.592 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:01:16.861 +05:30 [INF] Received HTTP response headers after 1267.4831ms - 400
2025-08-26 13:01:16.878 +05:30 [INF] End processing HTTP request after 1288.5453ms - 400
2025-08-26 13:01:16.883 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132000) Number of parameters does not match the expected number of params","type":"OAuthException","code":132000,"error_data":{"messaging_product":"whatsapp","details":"body: number of localizable_params (1) does not match the expected number of params (0)"},"fbtrace_id":"AjyqZt0k-3Qpw8P8pee-dos"}}
2025-08-26 13:01:16.971 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:01:16.981 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6589.3424ms
2025-08-26 13:01:16.983 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:01:16.986 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 6610.9719ms
2025-08-26 13:01:29.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 13:01:29.060 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:29.062 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 204 null null 9.0341ms
2025-08-26 13:01:29.067 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null 0
2025-08-26 13:01:29.070 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:29.072 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:01:29.074 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:01:30.735 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 13:01:30.745 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:01:30.752 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 13:01:30.757 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:01:30.759 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:01:31.506 +05:30 [INF] Received HTTP response headers after 745.6969ms - 200
2025-08-26 13:01:31.509 +05:30 [INF] End processing HTTP request after 751.907ms - 200
2025-08-26 13:01:31.515 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:01:31.518 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:01:31.520 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:01:32.593 +05:30 [INF] Received HTTP response headers after 1071.5564ms - 200
2025-08-26 13:01:32.596 +05:30 [INF] End processing HTTP request after 1077.1903ms - 200
2025-08-26 13:01:32.601 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:01:32.604 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3527.2334ms
2025-08-26 13:01:32.606 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:01:32.608 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 200 null application/json; charset=utf-8 3541.6462ms
2025-08-26 13:01:54.151 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 13:01:54.156 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.3675ms
2025-08-26 13:01:54.162 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 13:01:54.165 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.167 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:01:54.169 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 13:01:54.174 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 13:01:54.179 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 13:01:54.188 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 13:01:54.197 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 13:01:54.202 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 13:01:54.204 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 13:01:54.205 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 13:01:54.208 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:01:54.210 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 38.5301ms
2025-08-26 13:01:54.212 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:01:54.213 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 51.5623ms
2025-08-26 13:01:54.220 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:01:54.223 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.224 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.8483ms
2025-08-26 13:01:54.229 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:01:54.233 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.235 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.237 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:01:54.242 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:01:54.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:01:54.250 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6025ms
2025-08-26 13:01:54.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.9985ms
2025-08-26 13:01:54.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:01:54.292 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.295 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:01:54.303 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:01:54.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:01:54.310 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3235ms
2025-08-26 13:01:54.311 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:01:54.312 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.315 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.0741ms
2025-08-26 13:01:54.319 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.325 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:01:54.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:01:54.337 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:01:54.340 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4434ms
2025-08-26 13:01:54.342 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.613ms
2025-08-26 13:01:54.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:01:54.427 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:54.429 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.431 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:01:54.447 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:01:54.454 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:01:54.456 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.2837ms
2025-08-26 13:01:54.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:01:54.461 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.1469ms
2025-08-26 13:01:59.511 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:01:59.519 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:59.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.6879ms
2025-08-26 13:01:59.526 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:01:59.530 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:01:59.532 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:01:59.534 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:01:59.540 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:01:59.545 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:01:59.548 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.671ms
2025-08-26 13:01:59.550 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:01:59.551 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 25.0753ms
2025-08-26 13:02:07.617 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null null
2025-08-26 13:02:07.622 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:07.624 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 204 null null 7.4754ms
2025-08-26 13:02:07.629 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - null 0
2025-08-26 13:02:07.634 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:07.636 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:02:07.637 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:02:09.773 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 13:02:09.787 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:02:09.792 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 13:02:09.798 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 13:02:09.800 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 13:02:11.441 +05:30 [INF] Received HTTP response headers after 1639.0128ms - 200
2025-08-26 13:02:11.443 +05:30 [INF] End processing HTTP request after 1645.1298ms - 200
2025-08-26 13:02:11.449 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:02:11.461 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 13:02:11.463 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 13:02:11.465 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 13:02:15.559 +05:30 [INF] Received HTTP response headers after 4086.3645ms - 200
2025-08-26 13:02:15.561 +05:30 [INF] End processing HTTP request after 4098.2559ms - 200
2025-08-26 13:02:15.565 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:02:15.567 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7921.6329ms
2025-08-26 13:02:15.568 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:02:15.570 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/03ef3838-08f4-4605-b705-046ce8661d89 - 200 null application/json; charset=utf-8 7940.6969ms
2025-08-26 13:02:50.566 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 13:02:50.573 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.576 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 9.7264ms
2025-08-26 13:02:50.581 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 13:02:50.585 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.586 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:02:50.588 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 13:02:50.597 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 13:02:50.601 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 13:02:50.610 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 13:02:50.624 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 13:02:50.628 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 13:02:50.630 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 13:02:50.631 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 13:02:50.633 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:02:50.636 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 44.9752ms
2025-08-26 13:02:50.638 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:02:50.639 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 58.2828ms
2025-08-26 13:02:50.644 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:02:50.648 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.650 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0408ms
2025-08-26 13:02:50.657 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:02:50.660 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.662 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.664 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:02:50.673 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:02:50.676 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:02:50.678 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4083ms
2025-08-26 13:02:50.680 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.682 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.1962ms
2025-08-26 13:02:50.708 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:02:50.713 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.715 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.717 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:02:50.725 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:02:50.730 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:02:50.732 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2287ms
2025-08-26 13:02:50.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:02:50.734 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.739 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.2273ms
2025-08-26 13:02:50.743 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.750 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:02:50.757 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:02:50.763 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:02:50.765 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6917ms
2025-08-26 13:02:50.767 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.769 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.976ms
2025-08-26 13:02:50.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:02:50.900 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:02:50.902 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.904 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:02:50.912 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:02:50.917 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:02:50.919 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6179ms
2025-08-26 13:02:50.921 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:02:50.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.7795ms
2025-08-26 13:03:05.037 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:03:05.041 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:05.043 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 5.1658ms
2025-08-26 13:03:05.066 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:03:05.070 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:05.072 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:05.073 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:03:05.083 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-08-26 13:03:05.086 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:03:05.089 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.4501ms
2025-08-26 13:03:05.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:05.092 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 25.8374ms
2025-08-26 13:03:11.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:03:11.362 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:11.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.8833ms
2025-08-26 13:03:11.368 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:03:11.376 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:11.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:11.380 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:03:11.389 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:03:11.395 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:03:11.396 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.8427ms
2025-08-26 13:03:11.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:11.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 32.8804ms
2025-08-26 13:03:20.891 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 13:03:20.895 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:20.896 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.1833ms
2025-08-26 13:03:20.902 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 13:03:20.905 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:20.907 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:03:20.909 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 13:03:20.912 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 13:03:20.917 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 13:03:20.924 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 13:03:20.934 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 13:03:20.937 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 13:03:20.938 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 13:03:20.939 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 13:03:20.942 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:03:20.944 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 32.653ms
2025-08-26 13:03:20.946 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:03:20.948 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 45.7068ms
2025-08-26 13:03:20.952 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:03:20.956 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:20.957 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6244ms
2025-08-26 13:03:20.962 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:03:20.966 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:20.967 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:20.969 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:03:20.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:03:20.980 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:03:20.983 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0124ms
2025-08-26 13:03:20.985 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:20.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3743ms
2025-08-26 13:03:21.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:03:21.014 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:21.016 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:21.019 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:03:21.025 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:03:21.031 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:03:21.033 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9475ms
2025-08-26 13:03:21.034 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:03:21.035 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:21.039 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:21.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.6209ms
2025-08-26 13:03:21.043 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:21.050 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:03:21.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:03:21.062 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:03:21.065 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1257ms
2025-08-26 13:03:21.067 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:21.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.7238ms
2025-08-26 13:03:21.137 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:03:21.141 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:21.143 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:21.144 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:03:21.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:03:21.157 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:03:21.159 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6986ms
2025-08-26 13:03:21.161 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:03:21.163 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.2038ms
2025-08-26 13:03:24.652 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:03:24.655 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:24.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 5.1743ms
2025-08-26 13:03:24.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:03:24.669 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:24.671 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:24.673 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:03:24.683 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-08-26 13:03:24.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:03:24.691 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 15.6819ms
2025-08-26 13:03:24.694 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:24.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 31.2389ms
2025-08-26 13:03:26.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:03:26.558 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:26.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 7.5003ms
2025-08-26 13:03:26.568 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 13:03:26.574 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:26.577 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendImageCampaign (xbytechat.api)'
2025-08-26 13:03:26.585 +05:30 [INF] Route matched with {action = "SendImageCampaign", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendImageCampaign(System.Guid) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 13:03:26.614 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 13:03:26.648 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."CampaignId", c."CategoryBrowsed", c."ClickedCTA", c."ContactId", c."IsAutoTagged", c."MessagePreview", c."ProductBrowsed", c."SentAt", c."Status", c."UpdatedAt", c0."Id", c0."AssignedAgentId", c0."BusinessId", c0."CreatedAt", c0."Email", c0."Group", c0."IsActive", c0."IsArchived", c0."IsAutomationPaused", c0."IsFavorite", c0."LastCTAInteraction", c0."LastCTAType", c0."LastClickedProductId", c0."LastContactedAt", c0."LeadSource", c0."Name", c0."NextFollowUpAt", c0."Notes", c0."PhoneNumber", c0."Tags"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
2025-08-26 13:03:26.653 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:03:26.655 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendImageCampaign (xbytechat.api) in 68.0441ms
2025-08-26 13:03:26.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendImageCampaign (xbytechat.api)'
2025-08-26 13:03:26.659 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 91.3925ms
2025-08-26 13:03:30.094 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:03:30.097 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:30.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.0771ms
2025-08-26 13:03:30.119 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:03:30.124 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:30.125 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:30.127 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:03:30.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:03:30.139 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:03:30.142 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.8856ms
2025-08-26 13:03:30.144 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:03:30.146 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 26.5144ms
2025-08-26 13:03:31.678 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:03:31.683 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:31.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 5.9602ms
2025-08-26 13:03:31.689 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 13:03:31.694 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:03:31.696 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:03:31.698 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:03:42.800 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 13:03:42.810 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:03:42.818 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 13:03:42.822 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:03:42.824 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:03:44.013 +05:30 [INF] Received HTTP response headers after 1186.4227ms - 200
2025-08-26 13:03:44.015 +05:30 [INF] End processing HTTP request after 1192.7856ms - 200
2025-08-26 13:03:44.020 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:03:44.023 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:03:44.025 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:03:45.046 +05:30 [INF] Received HTTP response headers after 1018.9609ms - 400
2025-08-26 13:03:45.048 +05:30 [INF] End processing HTTP request after 1024.1391ms - 400
2025-08-26 13:03:45.050 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132000) Number of parameters does not match the expected number of params","type":"OAuthException","code":132000,"error_data":{"messaging_product":"whatsapp","details":"body: number of localizable_params (1) does not match the expected number of params (0)"},"fbtrace_id":"AwOY9L9vrGM-kCnWhZw0q-N"}}
2025-08-26 13:03:45.052 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:03:45.055 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 13354.1308ms
2025-08-26 13:03:45.057 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:03:45.059 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 13369.2238ms
2025-08-26 13:08:18.368 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 13:08:18.409 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 13:08:18.425 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 13:08:19.253 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 13:08:19.813 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 13:08:20.030 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 13:08:20.032 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 13:08:20.033 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 13:08:20.035 +05:30 [INF] Hosting environment: Development
2025-08-26 13:08:20.036 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 13:08:20.036 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 13:08:20.065 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__cutoff_0='2025-08-19T07:38:18.5299189Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 13:08:22.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 13:08:22.512 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 268.4282ms
2025-08-26 13:08:22.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 13:08:22.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 25.1774ms
2025-08-26 13:08:22.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 13:08:22.708 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.9641ms
2025-08-26 13:08:22.955 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 13:08:23.272 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 317.0045ms
2025-08-26 13:08:45.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 13:08:45.969 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 13:08:46.052 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:46.059 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 96.6918ms
2025-08-26 13:08:46.072 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 13:08:46.091 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:46.285 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:08:46.313 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 13:08:46.432 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 13:08:46.568 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 13:08:46.721 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 13:08:46.899 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 13:08:46.912 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 13:08:46.926 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 13:08:46.930 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 13:08:46.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:08:46.952 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 630.3747ms
2025-08-26 13:08:46.956 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:08:46.967 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 894.4004ms
2025-08-26 13:08:46.980 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:08:46.984 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:46.986 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6817ms
2025-08-26 13:08:46.991 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:08:46.996 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:47.006 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.014 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:08:47.035 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 13:08:47.084 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:08:47.090 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:08:47.109 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 91.0782ms
2025-08-26 13:08:47.112 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.114 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 123.1646ms
2025-08-26 13:08:47.134 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:08:47.140 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:47.147 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.149 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:08:47.163 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:08:47.169 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:08:47.172 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.8277ms
2025-08-26 13:08:47.175 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:08:47.176 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.180 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:47.182 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.7652ms
2025-08-26 13:08:47.185 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.190 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:08:47.200 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:08:47.206 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:08:47.209 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.615ms
2025-08-26 13:08:47.212 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.213 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.7121ms
2025-08-26 13:08:47.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:08:47.295 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:47.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.310 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:08:47.317 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:08:47.323 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:08:47.326 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.7296ms
2025-08-26 13:08:47.330 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:08:47.332 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 49.8317ms
2025-08-26 13:08:54.420 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:08:54.430 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:54.432 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.1434ms
2025-08-26 13:08:54.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:08:54.447 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:54.451 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:08:54.462 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:08:54.544 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:08:54.551 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:08:54.570 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 105.1575ms
2025-08-26 13:08:54.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:08:54.575 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 136.037ms
2025-08-26 13:08:56.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:08:56.034 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:56.036 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 7.0325ms
2025-08-26 13:08:56.047 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 13:08:56.052 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:08:56.054 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:08:56.061 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:09:10.650 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 13:09:10.669 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 13:09:10.879 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:09:10.989 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 13:09:11.018 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:09:11.021 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:09:12.226 +05:30 [INF] Received HTTP response headers after 1199.6808ms - 200
2025-08-26 13:09:12.229 +05:30 [INF] End processing HTTP request after 1212.4251ms - 200
2025-08-26 13:09:12.362 +05:30 [WRN] Campaign provided 1 body parameter(s), but the template expects 0. Skipping body component.
2025-08-26 13:09:12.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:09:12.390 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:09:12.392 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:09:13.849 +05:30 [INF] Received HTTP response headers after 1455.4562ms - 200
2025-08-26 13:09:13.851 +05:30 [INF] End processing HTTP request after 1461.448ms - 200
2025-08-26 13:09:13.937 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:09:13.947 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 17882.9028ms
2025-08-26 13:09:13.950 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:09:13.952 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 17904.7404ms
2025-08-26 13:10:27.167 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 13:10:27.171 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:27.173 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.2463ms
2025-08-26 13:10:27.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 13:10:27.219 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:27.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.0278ms
2025-08-26 13:10:27.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-26 13:10:27.253 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:27.254 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 6.6235ms
2025-08-26 13:10:27.261 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 13:10:27.265 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:27.267 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 5.9399ms
2025-08-26 13:10:27.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 13:10:27.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-26 13:10:27.285 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:27.288 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 13:10:27.288 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:27.292 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 13:10:27.294 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 13:10:27.297 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 13:10:27.304 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-08-26 13:10:27.320 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-26 13:10:27.345 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-26 13:10:27.358 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-26 13:10:27.399 +05:30 [INF] GetAllContactsAsync returned 12 contacts
2025-08-26 13:10:27.402 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:10:27.419 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 118.9778ms
2025-08-26 13:10:27.422 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 13:10:27.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 146.0797ms
2025-08-26 13:10:27.430 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:10:27.436 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 139.1411ms
2025-08-26 13:10:27.440 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 13:10:27.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 162.8182ms
2025-08-26 13:10:39.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:10:39.522 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.524 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6234ms
2025-08-26 13:10:39.530 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:10:39.534 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.536 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:10:39.537 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:10:39.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:10:39.551 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:10:39.553 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.258ms
2025-08-26 13:10:39.555 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:10:39.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.5309ms
2025-08-26 13:10:39.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:10:39.679 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.682 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:10:39.687 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:10:39.694 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:10:39.705 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:10:39.708 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.6882ms
2025-08-26 13:10:39.710 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:10:39.712 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.1586ms
2025-08-26 13:10:39.761 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 13:10:39.766 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.767 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.0071ms
2025-08-26 13:10:39.768 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 13:10:39.774 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-26 13:10:39.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 13:10:39.775 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:10:39.788 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.791 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.795 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.799 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.800 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 32.3029ms
2025-08-26 13:10:39.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 28.5269ms
2025-08-26 13:10:39.803 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 28.5013ms
2025-08-26 13:10:39.805 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:10:39.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 13:10:39.820 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-26 13:10:39.822 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:10:39.825 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.829 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:10:39.833 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 13:10:39.834 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 13:10:39.838 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 13:10:39.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:10:39.842 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 13:10:39.849 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-26 13:10:39.852 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:10:39.854 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-08-26 13:10:39.860 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 28.3852ms
2025-08-26 13:10:39.860 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-26 13:10:39.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:10:39.869 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-26 13:10:39.871 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 96.6313ms
2025-08-26 13:10:39.874 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:10:39.876 +05:30 [INF] GetAllContactsAsync returned 12 contacts
2025-08-26 13:10:39.881 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 36.9846ms
2025-08-26 13:10:39.883 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:10:39.884 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 13:10:39.886 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 32.9362ms
2025-08-26 13:10:39.888 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 70.8657ms
2025-08-26 13:10:39.890 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 13:10:39.897 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 76.6276ms
2025-08-26 13:11:06.352 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 13:11:06.361 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:06.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 10.4561ms
2025-08-26 13:11:06.368 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 13:11:06.373 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:06.378 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 13:11:06.386 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 13:11:06.414 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 13:11:06.419 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:11:06.430 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 41.1688ms
2025-08-26 13:11:06.432 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 13:11:06.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 65.2577ms
2025-08-26 13:11:09.965 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:11:09.969 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:09.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.4742ms
2025-08-26 13:11:09.986 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:11:09.993 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:09.995 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:11:09.997 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:11:10.018 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:11:10.023 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:11:10.027 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 27.8817ms
2025-08-26 13:11:10.029 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:11:10.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 44.6849ms
2025-08-26 13:11:14.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:11:14.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:11:15.000 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:15.004 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:15.005 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 18.3891ms
2025-08-26 13:11:15.006 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 22.1256ms
2025-08-26 13:11:15.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:11:15.016 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:11:15.023 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:15.028 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:15.028 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:11:15.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:11:15.034 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:15.035 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:15.067 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:11:15.084 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:11:15.093 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:11:15.104 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 64.6063ms
2025-08-26 13:11:15.107 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:11:15.109 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 95.9108ms
2025-08-26 13:11:15.152 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:11:15.168 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 124.2407ms
2025-08-26 13:11:15.171 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:11:15.172 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 156.5432ms
2025-08-26 13:11:27.220 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/d5c4c883-bb8c-4476-923c-eb512a60c41b/retry - null null
2025-08-26 13:11:27.226 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:27.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/d5c4c883-bb8c-4476-923c-eb512a60c41b/retry - 204 null null 8.7304ms
2025-08-26 13:11:27.233 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign-logs/d5c4c883-bb8c-4476-923c-eb512a60c41b/retry - null 0
2025-08-26 13:11:27.238 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:27.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.RetrySingle (xbytechat.api)'
2025-08-26 13:11:27.246 +05:30 [INF] Route matched with {action = "RetrySingle", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RetrySingle(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:27.268 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_0='d5c4c883-bb8c-4476-923c-eb512a60c41b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_0
LIMIT 1
2025-08-26 13:11:27.407 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@p4='d5c4c883-bb8c-4476-923c-eb512a60c41b', @p0='2025-08-26T07:41:27.2753334Z' (Nullable = true) (DbType = DateTime), @p1='Sent', @p2='1', @p3='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "LastRetryAt" = @p0, "LastRetryStatus" = @p1, "RetryCount" = @p2, "SendStatus" = @p3
WHERE "Id" = @p4;
2025-08-26 13:11:27.427 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType27`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:11:27.430 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.RetrySingle (xbytechat.api) in 181.5237ms
2025-08-26 13:11:27.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.RetrySingle (xbytechat.api)'
2025-08-26 13:11:27.434 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign-logs/d5c4c883-bb8c-4476-923c-eb512a60c41b/retry - 200 null application/json; charset=utf-8 200.5405ms
2025-08-26 13:11:27.445 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:11:27.446 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:11:27.449 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:27.452 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:27.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 7.7025ms
2025-08-26 13:11:27.454 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 8.4745ms
2025-08-26 13:11:27.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:11:27.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:11:27.467 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:27.469 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:27.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:11:27.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:11:27.473 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:27.474 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:27.481 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:11:27.494 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:11:27.497 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:11:27.499 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:11:27.501 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 23.9273ms
2025-08-26 13:11:27.503 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 23.5674ms
2025-08-26 13:11:27.505 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:11:27.507 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:11:27.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 48.7116ms
2025-08-26 13:11:27.509 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 45.9015ms
2025-08-26 13:11:48.717 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:11:48.723 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.725 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.9222ms
2025-08-26 13:11:48.730 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:11:48.734 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.736 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:11:48.737 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:11:48.744 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:11:48.750 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:11:48.752 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6342ms
2025-08-26 13:11:48.754 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:11:48.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2631ms
2025-08-26 13:11:48.841 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:11:48.846 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.848 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:11:48.850 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:11:48.859 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:11:48.863 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:11:48.864 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7252ms
2025-08-26 13:11:48.866 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:11:48.868 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.8419ms
2025-08-26 13:11:48.903 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:11:48.904 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:11:48.904 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:11:48.913 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.917 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.920 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.923 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:11:48.922 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 18.5125ms
2025-08-26 13:11:48.924 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 20.361ms
2025-08-26 13:11:48.931 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:11:48.935 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:11:48.944 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:11:48.951 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:11:48.953 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.956 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:48.959 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:11:48.961 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:11:48.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:11:48.963 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0211ms
2025-08-26 13:11:48.965 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:48.967 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:11:48.976 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:11:48.987 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:11:48.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:11:48.991 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:11:48.994 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:11:48.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 92.0721ms
2025-08-26 13:11:48.998 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 26.4882ms
2025-08-26 13:11:49.000 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 22.6431ms
2025-08-26 13:11:49.007 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:11:49.010 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:11:49.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 76.3617ms
2025-08-26 13:11:49.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 68.6917ms
2025-08-26 13:11:58.596 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:11:58.600 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:58.601 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.7538ms
2025-08-26 13:11:58.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:11:58.610 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:11:58.612 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:11:58.613 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:11:58.623 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:11:58.629 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:11:58.631 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.8375ms
2025-08-26 13:11:58.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:11:58.636 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 30.1279ms
2025-08-26 13:12:04.917 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 13:12:04.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 13:12:04.921 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:04.923 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:04.925 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 204 null null 8.5102ms
2025-08-26 13:12:04.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 204 null null 7.242ms
2025-08-26 13:12:04.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 13:12:04.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 13:12:04.951 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:04.958 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:04.960 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:04.963 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:04.965 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:04.967 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:04.974 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:04.981 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:04.983 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:04.986 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:12:04.988 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.0304ms
2025-08-26 13:12:04.989 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 16.0507ms
2025-08-26 13:12:04.991 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:04.993 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:04.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 200 null application/json; charset=utf-8 53.024ms
2025-08-26 13:12:04.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 200 null application/json; charset=utf-8 54.0849ms
2025-08-26 13:12:09.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:09.678 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:09.679 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.5341ms
2025-08-26 13:12:09.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:09.684 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:09.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:09.687 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:12:09.693 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:12:09.697 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:09.698 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.8539ms
2025-08-26 13:12:09.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:09.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.7883ms
2025-08-26 13:12:13.760 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 13:12:13.762 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:13.763 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 204 null null 3.1185ms
2025-08-26 13:12:13.766 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 13:12:13.768 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:13.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 204 null null 3.0094ms
2025-08-26 13:12:13.772 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - null null
2025-08-26 13:12:13.772 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 13:12:13.775 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:13.777 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:13.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:13.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:13.780 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:13.781 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:13.785 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:13.789 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:13.791 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:13.793 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:12:13.794 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 11.6644ms
2025-08-26 13:12:13.795 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 10.7502ms
2025-08-26 13:12:13.796 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:13.797 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:13.798 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14 - 200 null application/json; charset=utf-8 25.3248ms
2025-08-26 13:12:13.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 200 null application/json; charset=utf-8 26.2575ms
2025-08-26 13:12:17.037 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:17.039 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:17.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.8887ms
2025-08-26 13:12:17.044 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:17.047 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:17.049 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:17.050 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:12:17.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:12:17.059 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:17.060 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.4691ms
2025-08-26 13:12:17.061 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:17.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.2291ms
2025-08-26 13:12:20.519 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:12:20.522 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:20.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 3.2787ms
2025-08-26 13:12:20.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:12:20.529 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:20.530 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 3.2485ms
2025-08-26 13:12:20.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:12:20.535 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:12:20.537 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:20.539 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:20.540 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:20.541 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:20.542 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:20.543 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:20.547 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:20.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:20.553 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:20.556 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:12:20.557 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 12.6816ms
2025-08-26 13:12:20.559 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 13.025ms
2025-08-26 13:12:20.560 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:20.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:20.562 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 28.2751ms
2025-08-26 13:12:20.563 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 28.9813ms
2025-08-26 13:12:33.819 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:33.823 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:33.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4201ms
2025-08-26 13:12:33.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:33.829 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:33.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:33.832 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:12:33.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:12:33.841 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:33.842 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.2756ms
2025-08-26 13:12:33.843 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:33.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.6378ms
2025-08-26 13:12:35.727 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:12:35.729 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:35.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 3.1375ms
2025-08-26 13:12:35.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:12:35.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:12:35.735 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:35.737 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:35.738 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 5.3174ms
2025-08-26 13:12:35.739 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:35.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:12:35.742 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:35.745 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:35.747 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:35.748 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:12:35.749 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:35.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:12:35.756 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:35.758 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:12:35.759 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 13.3472ms
2025-08-26 13:12:35.760 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 8.1429ms
2025-08-26 13:12:35.761 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:12:35.762 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:12:35.763 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 29.1911ms
2025-08-26 13:12:35.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 22.2684ms
2025-08-26 13:12:48.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 13:12:48.080 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:48.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.2529ms
2025-08-26 13:12:48.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 13:12:48.091 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:48.092 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 13:12:48.093 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 13:12:48.099 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 13:12:48.102 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType142`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:12:48.104 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.9501ms
2025-08-26 13:12:48.105 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 13:12:48.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 17.894ms
2025-08-26 13:12:59.800 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:59.804 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:59.805 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.3674ms
2025-08-26 13:12:59.807 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:12:59.809 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:12:59.810 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:59.811 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:12:59.815 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:12:59.819 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:12:59.820 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.8486ms
2025-08-26 13:12:59.821 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:12:59.822 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.1233ms
2025-08-26 13:13:04.201 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:13:04.203 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:04.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 3.2968ms
2025-08-26 13:13:04.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-26 13:13:04.218 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:04.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:04.220 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:13:04.228 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-08-26 13:13:04.231 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:13:04.233 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.0513ms
2025-08-26 13:13:04.234 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:04.235 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 19.8041ms
2025-08-26 13:13:10.318 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:13:10.321 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:10.322 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 3.4686ms
2025-08-26 13:13:10.325 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 13:13:10.330 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:10.331 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendImageCampaign (xbytechat.api)'
2025-08-26 13:13:10.337 +05:30 [INF] Route matched with {action = "SendImageCampaign", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendImageCampaign(System.Guid) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 13:13:10.353 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 13:13:10.365 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."CampaignId", c."CategoryBrowsed", c."ClickedCTA", c."ContactId", c."IsAutoTagged", c."MessagePreview", c."ProductBrowsed", c."SentAt", c."Status", c."UpdatedAt", c0."Id", c0."AssignedAgentId", c0."BusinessId", c0."CreatedAt", c0."Email", c0."Group", c0."IsActive", c0."IsArchived", c0."IsAutomationPaused", c0."IsFavorite", c0."LastCTAInteraction", c0."LastCTAType", c0."LastClickedProductId", c0."LastContactedAt", c0."LeadSource", c0."Name", c0."NextFollowUpAt", c0."Notes", c0."PhoneNumber", c0."Tags"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
2025-08-26 13:13:10.368 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:13:10.370 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendImageCampaign (xbytechat.api) in 31.2187ms
2025-08-26 13:13:10.371 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendImageCampaign (xbytechat.api)'
2025-08-26 13:13:10.372 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-image-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 46.6586ms
2025-08-26 13:13:15.264 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:13:15.267 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:15.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.0646ms
2025-08-26 13:13:15.270 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:13:15.273 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:15.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:15.275 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:13:15.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:13:15.283 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:13:15.285 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.2621ms
2025-08-26 13:13:15.286 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:15.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.1504ms
2025-08-26 13:13:36.856 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 13:13:36.856 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:13:36.860 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 13:13:36.859 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 13:13:36.865 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.867 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.870 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.872 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 17.2151ms
2025-08-26 13:13:36.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 17.082ms
2025-08-26 13:13:36.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 14.4029ms
2025-08-26 13:13:36.875 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 16.305ms
2025-08-26 13:13:36.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 13:13:36.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 13:13:36.889 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:13:36.891 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.892 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.894 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:36.895 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 13:13:36.895 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 13:13:36.896 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 13:13:36.899 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 13:13:36.899 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 13:13:36.901 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:13:36.905 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-26 13:13:36.987 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 13:13:36.991 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:13:36.996 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 95.0558ms
2025-08-26 13:13:36.997 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 13:13:36.997 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 13:13:36.998 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 112.1544ms
2025-08-26 13:13:37.001 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:37.004 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 13:13:37.005 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 13:13:37.010 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 13:13:37.014 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:13:37.016 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 7.9952ms
2025-08-26 13:13:37.017 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 13:13:37.018 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 13:13:37.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 20.975ms
2025-08-26 13:13:37.037 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 13:13:37.042 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:13:37.044 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 13:13:37.045 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 142.9986ms
2025-08-26 13:13:37.047 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 13:13:37.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 164.1877ms
2025-08-26 13:13:37.052 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 13:13:37.056 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 152.6808ms
2025-08-26 13:13:37.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 13:13:37.059 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 170.1422ms
2025-08-26 13:13:39.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:13:39.530 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:39.530 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 2.8946ms
2025-08-26 13:13:39.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:13:39.535 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:39.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:39.537 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:13:39.543 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:13:39.546 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:13:39.547 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.3778ms
2025-08-26 13:13:39.549 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:39.550 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.9148ms
2025-08-26 13:13:46.588 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:13:46.591 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:46.591 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 3.4662ms
2025-08-26 13:13:46.597 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:13:46.600 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:46.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-26 13:13:46.606 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:13:46.619 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-26 13:13:46.623 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:13:46.624 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 15.6372ms
2025-08-26 13:13:46.625 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-26 13:13:46.626 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 29.1488ms
2025-08-26 13:13:50.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:13:50.251 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:50.251 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.5047ms
2025-08-26 13:13:50.254 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:13:50.256 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:50.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:50.258 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:13:50.263 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:13:50.265 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:13:50.266 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.3592ms
2025-08-26 13:13:50.267 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:13:50.268 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 14.4253ms
2025-08-26 13:13:57.626 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:13:57.628 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:57.629 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 3.0231ms
2025-08-26 13:13:57.631 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 13:13:57.633 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:13:57.634 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:13:57.635 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:14:00.066 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 13:14:00.070 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:14:00.074 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 13:14:00.076 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:14:00.077 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 13:14:01.075 +05:30 [INF] Received HTTP response headers after 996.5119ms - 200
2025-08-26 13:14:01.077 +05:30 [INF] End processing HTTP request after 1000.4695ms - 200
2025-08-26 13:14:01.079 +05:30 [WRN] Campaign provided 1 body parameter(s), but the template expects 0. Skipping body component.
2025-08-26 13:14:01.082 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 13:14:01.084 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:14:01.086 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 13:14:02.083 +05:30 [INF] Received HTTP response headers after 995.8734ms - 200
2025-08-26 13:14:02.084 +05:30 [INF] End processing HTTP request after 1000.119ms - 200
2025-08-26 13:14:02.087 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 13:14:02.088 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4451.8211ms
2025-08-26 13:14:02.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 13:14:02.090 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 4459.2428ms
2025-08-26 13:29:14.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:29:14.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:29:14.629 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:29:14.631 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:29:14.631 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 11.1105ms
2025-08-26 13:29:14.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 5.1225ms
2025-08-26 13:29:14.640 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:29:14.643 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:29:14.645 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:29:14.646 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:29:14.647 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:29:14.648 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:29:14.648 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:29:14.649 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:29:14.716 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:29:14.718 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:29:14.720 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 69.0466ms
2025-08-26 13:29:14.721 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:29:14.721 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 80.9483ms
2025-08-26 13:29:14.840 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CampaignId", c."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", c."MessageBody", c."TemplateId", c."SendStatus", c."ErrorMessage", c."CreatedAt", c."SentAt", c."DeliveredAt", c."ReadAt", c."IpAddress", c."DeviceInfo", c."MacAddress", c."SourceChannel", c."IsClicked", c."ClickedAt", c."ClickType"
FROM "CampaignSendLogs" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:29:14.842 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:29:14.843 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 190.9843ms
2025-08-26 13:29:14.844 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:29:14.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 202.1918ms
2025-08-26 13:58:51.496 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 13:58:51.548 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 13:58:51.564 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 13:58:52.351 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 13:58:52.877 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 13:58:53.110 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 13:58:53.132 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@__cutoff_0='2025-08-19T08:28:51.6914219Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 13:58:53.159 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 13:58:53.160 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 13:58:53.161 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 13:58:53.161 +05:30 [INF] Hosting environment: Development
2025-08-26 13:58:53.162 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 13:58:55.202 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 13:58:55.414 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 222.8598ms
2025-08-26 13:58:55.444 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 13:58:55.454 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.441ms
2025-08-26 13:58:55.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 13:58:55.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.6968ms
2025-08-26 13:58:55.717 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 13:58:55.953 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 235.6728ms
2025-08-26 13:59:07.752 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 13:59:07.756 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 13:59:07.797 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:07.800 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 48.4144ms
2025-08-26 13:59:07.803 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 13:59:07.810 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:07.936 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:59:07.951 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 13:59:08.016 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 13:59:08.088 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 13:59:08.183 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 13:59:08.290 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 13:59:08.298 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 13:59:08.307 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 13:59:08.308 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 13:59:08.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:59:08.322 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 366.8834ms
2025-08-26 13:59:08.323 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 13:59:08.329 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 526.2594ms
2025-08-26 13:59:08.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:59:08.337 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:08.338 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.4612ms
2025-08-26 13:59:08.342 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:59:08.346 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:08.352 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:59:08.357 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:59:08.370 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 13:59:08.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:59:08.402 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:59:08.413 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 54.167ms
2025-08-26 13:59:08.415 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:59:08.416 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 74.3505ms
2025-08-26 13:59:08.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:59:08.433 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:08.438 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:59:08.440 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:59:08.452 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:59:08.456 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:59:08.458 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.2858ms
2025-08-26 13:59:08.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:59:08.461 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.1938ms
2025-08-26 13:59:08.518 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 13:59:08.522 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:08.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:59:08.536 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 13:59:08.549 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 13:59:08.556 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 13:59:08.558 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9033ms
2025-08-26 13:59:08.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 13:59:08.563 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 45.8597ms
2025-08-26 13:59:13.807 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:59:13.811 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:13.813 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.0988ms
2025-08-26 13:59:13.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:59:13.824 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:13.826 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:59:13.834 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:59:13.903 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:59:13.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:59:13.926 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 89.8359ms
2025-08-26 13:59:13.928 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:59:13.929 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 112.0267ms
2025-08-26 13:59:20.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 13:59:20.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:59:20.248 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:21.203 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:21.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 963.2177ms
2025-08-26 13:59:21.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 956.1553ms
2025-08-26 13:59:21.208 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:59:21.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 13:59:21.214 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:21.217 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:21.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 11.0373ms
2025-08-26 13:59:21.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 7.8115ms
2025-08-26 13:59:21.224 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 13:59:21.227 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 13:59:25.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:59:25.808 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:25.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.7849ms
2025-08-26 13:59:25.811 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 13:59:25.814 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:25.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:59:25.816 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 13:59:25.828 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 13:59:25.831 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:59:25.832 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.6586ms
2025-08-26 13:59:25.833 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 13:59:25.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 23.0453ms
2025-08-26 13:59:47.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:59:47.089 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:47.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 4.0408ms
2025-08-26 13:59:47.094 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:59:47.097 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:47.098 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 4.1291ms
2025-08-26 13:59:47.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 13:59:47.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 13:59:47.106 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:47.107 +05:30 [INF] CORS policy execution successful.
2025-08-26 13:59:47.108 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:59:47.108 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:59:47.111 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:59:47.112 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 13:59:47.129 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 13:59:47.142 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 13:59:47.152 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 13:59:47.156 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 13:59:47.156 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 13:59:47.159 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 13:59:47.160 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 46.9704ms
2025-08-26 13:59:47.161 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 13:59:47.163 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 60.7381ms
2025-08-26 13:59:47.168 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 52.7532ms
2025-08-26 13:59:47.169 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 13:59:47.170 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 68.0371ms
2025-08-26 14:13:40.375 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:13:40.378 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:40.380 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.2318ms
2025-08-26 14:13:40.388 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:13:40.391 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:40.392 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:13:40.393 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:13:40.488 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:13:40.490 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:13:40.492 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 97.2206ms
2025-08-26 14:13:40.494 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:13:40.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 107.7564ms
2025-08-26 14:13:40.504 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:13:40.507 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:40.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:13:40.510 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:13:40.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:13:40.518 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:13:40.520 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9392ms
2025-08-26 14:13:40.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:13:40.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.876ms
2025-08-26 14:13:40.570 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:13:40.573 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:13:40.582 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:40.586 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:40.587 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 16.2763ms
2025-08-26 14:13:40.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:13:40.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:13:40.592 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:13:40.595 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:40.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 6.1074ms
2025-08-26 14:13:40.599 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:13:40.604 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 14:13:40.607 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:13:40.609 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.9618ms
2025-08-26 14:13:40.611 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:13:40.612 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.1189ms
2025-08-26 14:13:41.096 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:13:41.100 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:41.101 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 4.5238ms
2025-08-26 14:13:41.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:13:41.176 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:41.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 5.0186ms
2025-08-26 14:13:41.181 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 14:13:47.590 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:13:47.600 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:47.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.0506ms
2025-08-26 14:13:47.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:13:47.611 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:47.614 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:13:47.615 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:13:47.638 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:13:47.641 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:13:47.643 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 25.3533ms
2025-08-26 14:13:47.646 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:13:47.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 40.0295ms
2025-08-26 14:13:51.431 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:13:51.437 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:51.439 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 9.29ms
2025-08-26 14:13:51.456 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:13:51.462 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:51.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 8.1415ms
2025-08-26 14:13:51.469 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 14:13:51.910 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:13:51.914 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:51.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 4.7507ms
2025-08-26 14:13:51.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:13:51.922 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:13:51.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 4.9043ms
2025-08-26 14:13:51.928 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 14:14:09.006 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:14:09.010 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.012 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.2635ms
2025-08-26 14:14:09.023 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:14:09.026 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.028 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:14:09.030 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:14:09.036 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:14:09.040 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:14:09.041 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.422ms
2025-08-26 14:14:09.046 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:14:09.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2305ms
2025-08-26 14:14:09.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:14:09.162 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.164 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:14:09.166 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:14:09.175 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:14:09.180 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:14:09.182 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3318ms
2025-08-26 14:14:09.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:14:09.186 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.9616ms
2025-08-26 14:14:09.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:14:09.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:14:09.270 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.273 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:14:09.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 7.3407ms
2025-08-26 14:14:09.277 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:14:09.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:14:09.295 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:14:09.308 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.310 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:14:09.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 23.6661ms
2025-08-26 14:14:09.312 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.4133ms
2025-08-26 14:14:09.317 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 14:14:09.323 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:14:09.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 63.1236ms
2025-08-26 14:14:09.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:14:09.768 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 5.1336ms
2025-08-26 14:14:09.774 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:14:09.777 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:14:09.779 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 4.848ms
2025-08-26 14:14:09.786 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 14:17:47.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:17:47.240 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:17:47.241 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 10.39ms
2025-08-26 14:17:47.249 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:17:47.254 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:17:47.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 6.497ms
2025-08-26 14:17:47.261 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 14:17:47.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:17:47.739 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:17:47.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 5.98ms
2025-08-26 14:17:47.749 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:17:47.753 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:17:47.754 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 5.2619ms
2025-08-26 14:17:47.760 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 14:18:00.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:18:00.359 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:00.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.136ms
2025-08-26 14:18:00.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:18:00.368 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:00.370 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:18:00.371 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:18:00.379 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:18:00.382 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:18:00.384 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4111ms
2025-08-26 14:18:00.386 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:18:00.388 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.5066ms
2025-08-26 14:18:00.477 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:18:00.483 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:00.486 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:18:00.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:18:00.496 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:18:00.501 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:18:00.503 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1655ms
2025-08-26 14:18:00.504 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:18:00.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.8907ms
2025-08-26 14:18:00.556 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:18:00.557 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:18:00.567 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:00.570 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:00.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:18:00.571 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 14.0583ms
2025-08-26 14:18:00.573 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:18:00.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:18:00.583 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:18:00.585 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:00.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:18:00.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 12.2705ms
2025-08-26 14:18:00.591 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.9349ms
2025-08-26 14:18:00.607 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 14:18:00.611 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:18:00.617 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 61.035ms
2025-08-26 14:18:01.057 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:18:01.064 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:01.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 7.8923ms
2025-08-26 14:18:01.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:18:01.071 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:01.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 4.4585ms
2025-08-26 14:18:01.078 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 14:18:03.522 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:18:03.526 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:03.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.6767ms
2025-08-26 14:18:03.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:18:03.537 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:03.539 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:18:03.540 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:18:03.548 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:18:03.553 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:18:03.555 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.7311ms
2025-08-26 14:18:03.557 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:18:03.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 27.0996ms
2025-08-26 14:18:07.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:18:07.965 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:07.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 4.8282ms
2025-08-26 14:18:07.981 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:18:07.985 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:07.987 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 404 0 null 6.7949ms
2025-08-26 14:18:07.992 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary, Response status code: 404
2025-08-26 14:18:08.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:18:08.441 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:08.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 4.5047ms
2025-08-26 14:18:08.446 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:18:08.449 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:18:08.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 404 0 null 4.5204ms
2025-08-26 14:18:08.454 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c, Response status code: 404
2025-08-26 14:19:01.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:19:01.391 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:01.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 8.9987ms
2025-08-26 14:19:01.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:19:01.406 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:01.408 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:19:01.411 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:19:01.527 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:19:01.531 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:19:01.533 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 119.1507ms
2025-08-26 14:19:01.535 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:19:01.536 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 133.7135ms
2025-08-26 14:19:01.896 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:19:01.900 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:01.901 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 5.0546ms
2025-08-26 14:19:01.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:19:01.909 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:01.911 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:19:01.913 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:19:01.925 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:19:01.934 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:19:01.938 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:19:01.940 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 24.9126ms
2025-08-26 14:19:01.942 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:19:01.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 37.944ms
2025-08-26 14:19:16.367 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:19:16.371 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:16.372 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.1387ms
2025-08-26 14:19:16.376 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:19:16.379 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:16.382 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:19:16.384 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:19:16.390 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:19:16.395 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:19:16.397 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0106ms
2025-08-26 14:19:16.400 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:19:16.402 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.6232ms
2025-08-26 14:19:16.446 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:19:16.454 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:16.455 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:19:16.457 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:19:16.462 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:19:16.468 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:19:16.471 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3493ms
2025-08-26 14:19:16.473 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:19:16.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.4102ms
2025-08-26 14:19:16.539 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:19:16.540 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:19:16.543 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:16.546 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:16.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 8.4118ms
2025-08-26 14:19:16.549 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:19:16.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:19:16.555 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:19:16.558 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:16.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:19:16.564 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:19:16.566 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:19:16.569 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:19:16.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:19:16.575 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.3007ms
2025-08-26 14:19:16.580 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:19:16.582 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:19:16.584 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 12.4317ms
2025-08-26 14:19:16.586 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 45.9777ms
2025-08-26 14:19:16.587 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:19:16.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 40.1245ms
2025-08-26 14:19:17.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:19:17.039 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:17.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 5.0032ms
2025-08-26 14:19:17.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:19:17.054 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:17.056 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:19:17.058 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:19:17.067 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:19:17.074 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:19:17.078 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:19:17.080 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.6554ms
2025-08-26 14:19:17.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:19:17.085 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 39.3911ms
2025-08-26 14:19:37.842 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:19:37.856 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:37.859 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 17.0853ms
2025-08-26 14:19:37.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:19:37.876 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:37.878 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:19:37.879 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:19:37.896 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:19:37.902 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:19:37.904 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 19.2509ms
2025-08-26 14:19:37.906 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:19:37.908 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 41.571ms
2025-08-26 14:19:46.425 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:19:46.428 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:46.430 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 204 null null 5.0369ms
2025-08-26 14:19:46.446 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:19:46.450 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:46.452 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:19:46.455 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:19:46.470 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:19:46.478 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:19:46.480 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 16.2416ms
2025-08-26 14:19:46.482 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:19:46.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 200 null application/json; charset=utf-8 37.6864ms
2025-08-26 14:19:46.878 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:19:46.883 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:46.886 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 204 null null 8.0896ms
2025-08-26 14:19:46.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:19:46.898 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:19:46.899 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:19:46.901 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:19:46.907 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:19:46.915 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:19:46.919 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:19:46.921 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 17.4729ms
2025-08-26 14:19:46.924 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:19:46.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 31.4752ms
2025-08-26 14:22:30.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Sent&search= - null null
2025-08-26 14:22:30.504 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:30.505 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Sent&search= - 204 null null 13.9882ms
2025-08-26 14:22:30.516 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Sent&search= - null null
2025-08-26 14:22:30.521 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:30.522 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:30.524 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:22:30.540 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Sent'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:22:30.557 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Sent', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:22:30.561 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:22:30.563 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 36.1758ms
2025-08-26 14:22:30.566 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:30.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Sent&search= - 200 null application/json; charset=utf-8 50.9448ms
2025-08-26 14:22:33.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Delivered&search= - null null
2025-08-26 14:22:33.017 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:33.018 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Delivered&search= - 204 null null 5.6232ms
2025-08-26 14:22:33.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Delivered&search= - null null
2025-08-26 14:22:33.031 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:33.033 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:33.034 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:22:33.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Delivered'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:22:33.054 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Delivered', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:22:33.061 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:22:33.064 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 27.883ms
2025-08-26 14:22:33.066 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:33.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Delivered&search= - 200 null application/json; charset=utf-8 41.8039ms
2025-08-26 14:22:35.283 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Read&search= - null null
2025-08-26 14:22:35.287 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:35.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Read&search= - 204 null null 4.8697ms
2025-08-26 14:22:35.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Read&search= - null null
2025-08-26 14:22:35.300 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:35.301 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:35.303 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:22:35.311 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Read'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:22:35.318 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Read', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:22:35.325 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:22:35.327 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 20.159ms
2025-08-26 14:22:35.329 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:35.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Read&search= - 200 null application/json; charset=utf-8 35.1325ms
2025-08-26 14:22:37.441 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Queued&search= - null null
2025-08-26 14:22:37.446 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:37.447 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Queued&search= - 204 null null 5.575ms
2025-08-26 14:22:37.451 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Queued&search= - null null
2025-08-26 14:22:37.455 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:37.457 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:37.459 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:22:37.465 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Queued'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:22:37.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__status_1='Queued', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:22:37.476 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:22:37.478 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 16.7947ms
2025-08-26 14:22:37.481 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:37.482 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=Queued&search= - 200 null application/json; charset=utf-8 30.858ms
2025-08-26 14:22:39.132 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:22:39.136 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:39.137 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 204 null null 5.0342ms
2025-08-26 14:22:39.142 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:22:39.145 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:22:39.147 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:39.149 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:22:39.154 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:22:39.160 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:22:39.163 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:22:39.165 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.2757ms
2025-08-26 14:22:39.167 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:22:39.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 26.9631ms
2025-08-26 14:27:45.167 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:27:45.177 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:45.180 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.6778ms
2025-08-26 14:27:45.185 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:27:45.194 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:45.196 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:27:45.198 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:27:45.341 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:27:45.346 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:27:45.348 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 148.2277ms
2025-08-26 14:27:45.350 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:27:45.352 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 167.3976ms
2025-08-26 14:27:48.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 14:27:48.800 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:48.801 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 204 null null 5.2609ms
2025-08-26 14:27:48.810 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 14:27:48.815 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:48.817 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:27:48.819 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:27:48.828 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:27:48.832 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:27:48.834 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 12.594ms
2025-08-26 14:27:48.836 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:27:48.838 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 200 null application/json; charset=utf-8 27.8429ms
2025-08-26 14:27:49.268 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:27:49.272 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:49.274 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - 204 null null 5.5452ms
2025-08-26 14:27:49.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:27:49.281 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:49.283 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:49.285 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:27:49.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:27:49.298 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:27:49.301 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:27:49.303 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 15.7913ms
2025-08-26 14:27:49.305 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:49.307 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 28.9245ms
2025-08-26 14:27:53.097 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Sent&search= - null null
2025-08-26 14:27:53.102 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:53.104 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Sent&search= - 204 null null 6.0236ms
2025-08-26 14:27:53.108 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Sent&search= - null null
2025-08-26 14:27:53.112 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:53.113 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:53.115 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:27:53.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__status_1='Sent'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:27:53.129 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__status_1='Sent', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:27:53.132 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:27:53.134 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 16.9963ms
2025-08-26 14:27:53.137 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:53.139 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Sent&search= - 200 null application/json; charset=utf-8 30.2197ms
2025-08-26 14:27:54.769 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Delivered&search= - null null
2025-08-26 14:27:54.774 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:54.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Delivered&search= - 204 null null 6.0669ms
2025-08-26 14:27:54.779 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Delivered&search= - null null
2025-08-26 14:27:54.783 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:54.784 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:54.786 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:27:54.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__status_1='Delivered'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:27:54.798 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__status_1='Delivered', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:27:54.801 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:27:54.803 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.6177ms
2025-08-26 14:27:54.805 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:54.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=Delivered&search= - 200 null application/json; charset=utf-8 27.6214ms
2025-08-26 14:27:56.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:27:56.739 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:56.741 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - 204 null null 7.1547ms
2025-08-26 14:27:56.745 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:27:56.749 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:56.751 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:56.753 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:27:56.759 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:27:56.770 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:27:56.774 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:27:56.777 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 21.5883ms
2025-08-26 14:27:56.781 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:27:56.783 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 38.0167ms
2025-08-26 14:27:57.664 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:27:57.670 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:57.671 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.9193ms
2025-08-26 14:27:57.686 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:27:57.690 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:27:57.692 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:27:57.693 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:27:57.701 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:27:57.705 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:27:57.707 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.8592ms
2025-08-26 14:27:57.709 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:27:57.710 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 24.134ms
2025-08-26 14:28:01.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 14:28:01.335 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:01.336 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 204 null null 6.438ms
2025-08-26 14:28:01.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - null null
2025-08-26 14:28:01.354 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:01.356 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:28:01.357 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:01.364 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:28:01.369 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:28:01.371 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 11.0731ms
2025-08-26 14:28:01.373 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:28:01.375 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14/summary - 200 null application/json; charset=utf-8 25.4879ms
2025-08-26 14:28:01.798 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:28:01.802 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:01.803 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - 204 null null 5.1102ms
2025-08-26 14:28:01.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:28:01.813 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:01.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:01.816 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:01.822 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:28:01.830 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='0ce62821-8657-45fa-b187-4aed386eee14', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:28:01.835 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:28:01.837 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.0886ms
2025-08-26 14:28:01.839 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:01.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/0ce62821-8657-45fa-b187-4aed386eee14?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 32.0073ms
2025-08-26 14:28:03.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:28:03.300 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:03.301 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.9284ms
2025-08-26 14:28:03.306 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:28:03.310 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:03.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:28:03.315 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:28:03.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:28:03.327 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:28:03.330 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.7778ms
2025-08-26 14:28:03.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:28:03.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 27.8868ms
2025-08-26 14:28:06.225 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:28:06.230 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:06.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 6.3462ms
2025-08-26 14:28:06.249 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:28:06.254 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:06.256 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:28:06.258 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:06.266 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:28:06.272 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:28:06.274 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 11.9383ms
2025-08-26 14:28:06.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:28:06.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 28.3859ms
2025-08-26 14:28:06.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:28:06.695 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:06.696 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 5.1454ms
2025-08-26 14:28:06.700 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:28:06.704 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:06.706 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:06.708 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:06.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:28:06.720 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:28:06.724 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:28:06.727 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 16.2074ms
2025-08-26 14:28:06.729 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:06.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 30.4228ms
2025-08-26 14:28:20.469 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Failed&search= - null null
2025-08-26 14:28:20.473 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:20.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Failed&search= - 204 null null 5.9462ms
2025-08-26 14:28:20.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Failed&search= - null null
2025-08-26 14:28:20.482 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:20.484 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:20.486 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:20.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__status_1='Failed'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:28:20.501 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__status_1='Failed', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:28:20.505 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:28:20.507 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.3189ms
2025-08-26 14:28:20.509 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:20.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Failed&search= - 200 null application/json; charset=utf-8 31.6535ms
2025-08-26 14:28:22.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Queued&search= - null null
2025-08-26 14:28:22.768 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:22.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Queued&search= - 204 null null 5.8513ms
2025-08-26 14:28:22.774 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Queued&search= - null null
2025-08-26 14:28:22.777 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:22.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:22.781 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:22.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__status_1='Queued'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 14:28:22.794 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__status_1='Queued', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:28:22.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:28:22.800 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 16.3477ms
2025-08-26 14:28:22.802 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:22.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=Queued&search= - 200 null application/json; charset=utf-8 30.2023ms
2025-08-26 14:28:24.210 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:28:24.214 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:24.215 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 5.4507ms
2025-08-26 14:28:24.219 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:28:24.222 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:28:24.224 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:24.225 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:28:24.231 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:28:24.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:28:24.242 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:28:24.243 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 15.21ms
2025-08-26 14:28:24.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:28:24.248 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 28.5838ms
2025-08-26 14:34:19.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:34:19.131 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.132 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7899ms
2025-08-26 14:34:19.136 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:34:19.138 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.139 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:34:19.140 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:34:19.214 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:34:19.216 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:34:19.217 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 75.6558ms
2025-08-26 14:34:19.218 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:34:19.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 82.7692ms
2025-08-26 14:34:19.226 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:34:19.229 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.230 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:34:19.231 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:34:19.233 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:34:19.236 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:34:19.238 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6957ms
2025-08-26 14:34:19.239 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:34:19.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.6188ms
2025-08-26 14:34:19.273 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:34:19.274 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:34:19.279 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.281 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.281 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 8.4934ms
2025-08-26 14:34:19.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:34:19.284 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:34:19.284 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:34:19.286 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.288 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:34:19.288 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:34:19.290 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:34:19.291 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:34:19.293 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4118ms
2025-08-26 14:34:19.296 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:34:19.296 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:34:19.297 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.661ms
2025-08-26 14:34:19.298 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:34:19.302 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 9.8669ms
2025-08-26 14:34:19.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:34:19.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 20.3787ms
2025-08-26 14:34:19.772 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:34:19.774 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 3.1299ms
2025-08-26 14:34:19.777 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:34:19.779 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:19.780 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:34:19.781 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:34:19.784 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:34:19.788 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:34:19.789 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:34:19.790 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 8.0464ms
2025-08-26 14:34:19.791 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:34:19.792 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 14.7078ms
2025-08-26 14:34:27.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:34:27.267 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:27.270 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.6087ms
2025-08-26 14:34:27.274 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:34:27.276 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:27.277 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:34:27.279 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:34:27.286 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:34:27.289 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:34:27.291 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.1975ms
2025-08-26 14:34:27.292 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:34:27.293 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.8633ms
2025-08-26 14:34:34.543 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:34:34.548 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:34.551 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 204 null null 7.95ms
2025-08-26 14:34:34.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:34:34.567 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:34.568 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:34:34.569 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:34:34.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:34:34.576 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:34:34.577 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 6.7819ms
2025-08-26 14:34:34.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:34:34.580 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 200 null application/json; charset=utf-8 16.0782ms
2025-08-26 14:34:35.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:34:35.023 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:35.024 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 204 null null 2.6679ms
2025-08-26 14:34:35.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:34:35.028 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:34:35.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:34:35.029 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:34:35.032 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:34:35.036 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:34:35.039 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:34:35.040 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.558ms
2025-08-26 14:34:35.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:34:35.042 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 16.3282ms
2025-08-26 14:36:23.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:36:23.697 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:23.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.7768ms
2025-08-26 14:36:23.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:36:23.706 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:23.707 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:36:23.708 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:36:23.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:36:23.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:36:23.716 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.514ms
2025-08-26 14:36:23.718 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:36:23.720 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4358ms
2025-08-26 14:36:23.782 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:36:23.786 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:23.787 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:36:23.789 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:36:23.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:36:23.798 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:36:23.800 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8763ms
2025-08-26 14:36:23.801 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:36:23.803 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4067ms
2025-08-26 14:36:23.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:36:23.856 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:36:23.858 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:23.859 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:23.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 204 null null 4.7473ms
2025-08-26 14:36:23.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:36:23.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:36:23.869 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:36:23.871 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:23.873 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:36:23.875 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:36:23.876 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:36:23.878 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:36:23.882 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:36:23.882 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3739ms
2025-08-26 14:36:23.885 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:36:23.886 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:36:23.887 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 7.5752ms
2025-08-26 14:36:23.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.085ms
2025-08-26 14:36:23.890 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:36:23.894 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 200 null application/json; charset=utf-8 25.7044ms
2025-08-26 14:36:24.348 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:36:24.350 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:24.351 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 204 null null 2.9314ms
2025-08-26 14:36:24.353 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:36:24.355 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:36:24.356 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:36:24.356 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:36:24.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:36:24.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:36:24.365 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:36:24.366 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 8.6835ms
2025-08-26 14:36:24.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:36:24.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 14.9982ms
2025-08-26 14:41:45.538 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:41:45.544 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:45.544 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.5964ms
2025-08-26 14:41:45.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:41:45.549 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:45.550 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:41:45.551 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:41:45.638 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:41:45.640 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:41:45.642 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 89.3384ms
2025-08-26 14:41:45.643 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:41:45.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 97.2944ms
2025-08-26 14:41:45.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:41:45.655 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:45.656 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:41:45.657 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:41:45.661 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:41:45.664 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:41:45.665 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2084ms
2025-08-26 14:41:45.666 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:41:45.667 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5387ms
2025-08-26 14:41:45.707 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:41:45.707 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:41:45.715 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:45.718 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:45.719 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:41:45.720 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 204 null null 12.2256ms
2025-08-26 14:41:45.721 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:41:45.724 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - null null
2025-08-26 14:41:45.729 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:41:45.733 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:45.735 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:41:45.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:41:45.737 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8032ms
2025-08-26 14:41:45.738 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:41:45.739 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:41:45.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.5128ms
2025-08-26 14:41:45.747 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:41:45.753 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:41:45.755 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 13.1494ms
2025-08-26 14:41:45.757 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:41:45.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be/summary - 200 null application/json; charset=utf-8 33.4758ms
2025-08-26 14:41:46.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:41:46.205 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:46.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 204 null null 3.0433ms
2025-08-26 14:41:46.208 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:41:46.210 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:41:46.211 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:41:46.212 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:41:46.215 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:41:46.219 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='1ed614e8-8b66-4049-93d2-1a23085585be', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:41:46.221 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:41:46.222 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.291ms
2025-08-26 14:41:46.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:41:46.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/1ed614e8-8b66-4049-93d2-1a23085585be?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 16.1361ms
2025-08-26 14:47:53.278 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:47:53.284 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:47:53.285 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.5721ms
2025-08-26 14:47:53.294 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:47:53.297 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:47:53.298 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:47:53.300 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:47:53.480 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:47:53.482 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:47:53.484 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 182.4465ms
2025-08-26 14:47:53.485 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:47:53.486 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 192.2558ms
2025-08-26 14:48:00.983 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 14:48:00.986 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:48:00.987 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 204 null null 3.8061ms
2025-08-26 14:48:00.990 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 14:48:00.992 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:48:00.994 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:48:00.995 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:48:01.000 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:48:01.002 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:48:01.003 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 7.1931ms
2025-08-26 14:48:01.005 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:48:01.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 200 null application/json; charset=utf-8 16.1858ms
2025-08-26 14:48:01.449 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:48:01.451 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:48:01.452 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 204 null null 2.6911ms
2025-08-26 14:48:01.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:48:01.456 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:48:01.457 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:48:01.457 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:48:01.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:48:01.464 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:48:01.465 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:48:01.466 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 7.5706ms
2025-08-26 14:48:01.467 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:48:01.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 13.6625ms
2025-08-26 14:49:58.586 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:49:58.589 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:49:58.590 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.5509ms
2025-08-26 14:49:58.596 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:49:58.598 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:49:58.599 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:49:58.600 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:49:58.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:49:58.607 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:49:58.608 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 6.9524ms
2025-08-26 14:49:58.610 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:49:58.610 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 14.6209ms
2025-08-26 14:50:01.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:50:01.571 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:50:01.571 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 3.1473ms
2025-08-26 14:50:01.585 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:50:01.587 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:50:01.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:50:01.589 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:50:01.593 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:50:01.596 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:50:01.597 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 6.5277ms
2025-08-26 14:50:01.599 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:50:01.600 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 15.4439ms
2025-08-26 14:50:02.067 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:50:02.069 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:50:02.070 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 3.1847ms
2025-08-26 14:50:02.115 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:50:02.119 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:50:02.120 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:50:02.121 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:50:02.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:50:02.132 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:50:02.135 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:50:02.136 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 12.9013ms
2025-08-26 14:50:02.138 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:50:02.139 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 23.5075ms
2025-08-26 14:53:39.508 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:53:39.515 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:53:39.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.7555ms
2025-08-26 14:53:39.524 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:53:39.526 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:53:39.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:53:39.527 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:53:39.592 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:53:39.594 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:53:39.595 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 65.9777ms
2025-08-26 14:53:39.596 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:53:39.596 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 72.6142ms
2025-08-26 14:53:44.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:53:44.630 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:53:44.631 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 2.7005ms
2025-08-26 14:53:44.636 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:53:44.638 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:53:44.639 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:53:44.640 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:53:44.645 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:53:44.648 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:53:44.649 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 7.6868ms
2025-08-26 14:53:44.650 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:53:44.651 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 15.6465ms
2025-08-26 14:53:45.116 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:53:45.119 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:53:45.119 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 4.0691ms
2025-08-26 14:53:45.123 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:53:45.126 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:53:45.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:53:45.128 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:53:45.134 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:53:45.140 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:53:45.142 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:53:45.143 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 13.2869ms
2025-08-26 14:53:45.144 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:53:45.146 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 22.1552ms
2025-08-26 14:56:00.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:56:00.951 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:00.952 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.782ms
2025-08-26 14:56:00.957 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:56:00.958 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:00.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:56:00.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:56:00.963 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:56:00.965 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:56:00.966 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8746ms
2025-08-26 14:56:00.967 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:56:00.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.1116ms
2025-08-26 14:56:00.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:56:00.997 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:00.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:56:00.999 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:56:01.003 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:56:01.008 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:56:01.010 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.1318ms
2025-08-26 14:56:01.012 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:56:01.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.1015ms
2025-08-26 14:56:01.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 14:56:01.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:56:01.060 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:01.062 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:01.063 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:56:01.064 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 10.6524ms
2025-08-26 14:56:01.065 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 14:56:01.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 14:56:01.070 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 14:56:01.072 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:01.074 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 14:56:01.075 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:56:01.076 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1056ms
2025-08-26 14:56:01.077 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:56:01.078 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 14:56:01.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.4141ms
2025-08-26 14:56:01.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:56:01.087 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:56:01.089 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 10.1021ms
2025-08-26 14:56:01.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:56:01.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 26.6865ms
2025-08-26 14:56:01.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:56:01.552 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:01.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 3.1014ms
2025-08-26 14:56:01.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:56:01.557 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:01.558 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:56:01.559 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:56:01.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:56:01.565 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:56:01.567 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:56:01.568 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 7.7767ms
2025-08-26 14:56:01.569 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:56:01.570 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 14.7274ms
2025-08-26 14:56:04.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:56:04.969 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:04.969 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.0735ms
2025-08-26 14:56:04.976 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 14:56:04.978 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:04.979 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:56:04.980 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 14:56:04.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 14:56:04.989 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:56:04.990 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.7875ms
2025-08-26 14:56:04.991 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 14:56:04.992 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.7437ms
2025-08-26 14:56:13.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 14:56:13.459 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:13.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 204 null null 2.8753ms
2025-08-26 14:56:13.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 14:56:13.473 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:13.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:56:13.475 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:56:13.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalSent", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 14:56:13.481 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 14:56:13.482 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 5.8942ms
2025-08-26 14:56:13.483 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 14:56:13.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 200 null application/json; charset=utf-8 13.092ms
2025-08-26 14:56:13.940 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:56:13.943 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:13.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 204 null null 3.0402ms
2025-08-26 14:56:13.946 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 14:56:13.948 +05:30 [INF] CORS policy execution successful.
2025-08-26 14:56:13.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:56:13.950 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 14:56:13.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 14:56:13.956 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 14:56:13.958 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 14:56:13.959 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 7.8903ms
2025-08-26 14:56:13.960 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 14:56:13.961 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 14.4243ms
2025-08-26 15:04:24.070 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 15:04:24.114 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 15:04:24.129 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 15:04:24.903 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 15:04:25.421 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 15:04:25.668 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 15:04:25.670 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 15:04:25.674 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 15:04:25.675 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 15:04:25.677 +05:30 [INF] Hosting environment: Development
2025-08-26 15:04:25.678 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 15:04:25.692 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__cutoff_0='2025-08-19T09:34:24.2546882Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 15:04:27.716 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 15:04:27.898 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 192.572ms
2025-08-26 15:04:27.924 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 15:04:27.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9859ms
2025-08-26 15:04:28.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 15:04:28.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.944ms
2025-08-26 15:04:28.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 15:04:28.478 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.2744ms
2025-08-26 15:04:40.018 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 15:04:40.023 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 15:04:40.067 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:40.071 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 52.7623ms
2025-08-26 15:04:40.074 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 15:04:40.082 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:40.123 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 15:04:40.138 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 15:04:40.204 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 15:04:40.274 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 15:04:40.368 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 15:04:40.483 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 15:04:40.491 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 15:04:40.549 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 15:04:40.551 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 15:04:40.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:04:40.565 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 422.3298ms
2025-08-26 15:04:40.566 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 15:04:40.571 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 497.238ms
2025-08-26 15:04:40.575 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:04:40.579 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:40.580 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5835ms
2025-08-26 15:04:40.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:04:40.586 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:40.617 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:04:40.622 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:04:40.639 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 15:04:40.669 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:04:40.672 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:04:40.683 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 58.2489ms
2025-08-26 15:04:40.684 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:04:40.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 102.021ms
2025-08-26 15:04:40.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:04:40.701 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:40.707 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:04:40.709 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:04:40.721 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:04:40.726 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:04:40.728 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.9196ms
2025-08-26 15:04:40.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:04:40.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.2975ms
2025-08-26 15:04:40.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:04:40.812 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:40.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:04:40.817 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:04:40.826 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:04:40.831 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:04:40.832 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6825ms
2025-08-26 15:04:40.834 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:04:40.835 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.7039ms
2025-08-26 15:04:45.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:04:45.796 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:45.798 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.3071ms
2025-08-26 15:04:45.801 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:04:45.807 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:45.809 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:04:45.815 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:04:45.875 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:04:45.880 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:04:45.893 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 76.2546ms
2025-08-26 15:04:45.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:04:45.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 95.1376ms
2025-08-26 15:04:49.558 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 15:04:49.562 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:49.563 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 204 null null 5.5027ms
2025-08-26 15:04:49.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 15:04:49.571 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:49.573 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:04:49.579 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:04:49.613 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 15:04:49.626 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:04:49.630 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:04:49.633 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 51.0869ms
2025-08-26 15:04:49.634 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:04:49.636 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 200 null application/json; charset=utf-8 68.4083ms
2025-08-26 15:04:50.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:04:50.038 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:50.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 204 null null 4.0698ms
2025-08-26 15:04:50.041 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:04:50.044 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:04:50.045 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:04:50.049 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:04:50.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:04:50.107 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:04:50.115 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:04:50.129 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 77.7781ms
2025-08-26 15:04:50.131 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:04:50.133 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 91.7383ms
2025-08-26 15:10:22.872 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 15:10:22.875 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:10:22.876 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.921ms
2025-08-26 15:10:22.880 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-26 15:10:22.884 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:10:22.885 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 15:10:22.890 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 15:10:22.961 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 15:10:22.964 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:10:22.970 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 78.2534ms
2025-08-26 15:10:22.972 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 15:10:22.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 92.687ms
2025-08-26 15:10:33.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-26 15:10:33.799 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:10:33.799 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 204 null null 3.7957ms
2025-08-26 15:10:33.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-26 15:10:33.805 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:10:33.806 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 15:10:33.809 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 15:10:33.821 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='account_creation_confirmation_3'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-26 15:10:33.825 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:10:33.828 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 17.5932ms
2025-08-26 15:10:33.830 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 15:10:33.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 200 null application/json; charset=utf-8 28.3423ms
2025-08-26 15:11:05.538 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-26 15:11:05.544 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:05.545 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 6.6608ms
2025-08-26 15:11:05.551 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 380
2025-08-26 15:11:05.554 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:05.555 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 15:11:05.559 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:05.696 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:11:05.717 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:11:05.720 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:11:07.594 +05:30 [INF] Received HTTP response headers after 1871.568ms - 401
2025-08-26 15:11:07.596 +05:30 [INF] End processing HTTP request after 1880.3293ms - 401
2025-08-26 15:11:07.598 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 01:00:00 PDT. The current time is Tuesday, 26-Aug-25 02:41:05 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AEWbtazEe3-EFm4QpvrGi2o"}}
2025-08-26 15:11:07.728 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-26T09:41:07.6033828Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='account_creation_confirmation_3', @p14='account_creation_confirmation_3' (Nullable = false), @p15='Email_verification_Stat' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='account_creation_confirmation_3', @p20='["User","Email"]', @p21='2025-08-26T09:41:07.6034235Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-26 15:11:07.738 +05:30 [INF] ‚úÖ Campaign 'Email_verification_Stat' created with 0 recipients, 0 user buttons, 0 template buttons and 2 template parameters
2025-08-26 15:11:07.741 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:11:07.744 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2183.825ms
2025-08-26 15:11:07.745 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 15:11:07.746 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2195.0505ms
2025-08-26 15:11:07.802 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 15:11:07.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 15:11:07.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 15:11:07.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:07.809 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.811 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.813 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.815 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 14.4655ms
2025-08-26 15:11:07.817 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 12.7359ms
2025-08-26 15:11:07.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 13.5447ms
2025-08-26 15:11:07.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 14.3906ms
2025-08-26 15:11:07.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 15:11:07.829 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:07.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 15:11:07.833 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.835 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.837 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.838 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 15:11:07.838 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 15:11:07.839 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:07.844 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 15:11:07.844 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 15:11:07.844 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:07.850 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-26 15:11:07.856 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:11:07.862 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:11:07.871 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 26.0553ms
2025-08-26 15:11:07.872 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 15:11:07.872 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:07.874 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:07.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 43.9345ms
2025-08-26 15:11:07.876 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:07.879 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 15:11:07.883 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:11:07.887 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:11:07.888 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 7.6493ms
2025-08-26 15:11:07.889 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:07.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 18.4904ms
2025-08-26 15:11:07.898 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 15:11:07.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 15:11:07.912 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 64.3045ms
2025-08-26 15:11:07.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 15:11:07.915 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 86.0998ms
2025-08-26 15:11:07.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 15:11:07.938 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 15:11:07.988 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:11:07.993 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 147.0543ms
2025-08-26 15:11:07.995 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 15:11:07.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 168.8221ms
2025-08-26 15:11:33.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/assign-contacts - null null
2025-08-26 15:11:33.842 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:33.843 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/assign-contacts - 204 null null 3.6192ms
2025-08-26 15:11:33.850 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/assign-contacts - application/json 172
2025-08-26 15:11:33.853 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:33.854 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 15:11:33.857 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:33.878 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 15:11:33.921 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='4ec881bf-8c87-4b70-b608-b85d7333cb5c', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p4=NULL, @p5=NULL, @p6='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-26T09:41:33.9051238Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-26T09:41:33.9051238Z' (DbType = DateTime), @p13='5f025339-a66b-4fab-8ef0-535fb3ac1a8a', @p14=NULL, @p15='c13be597-6ae2-42bb-9d43-925815f24ff8', @p16='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p17=NULL, @p18=NULL, @p19='26b8b9a2-5624-40ed-a659-65de71d03d20', @p20='False', @p21=NULL, @p22=NULL, @p23='2025-08-26T09:41:33.9049921Z' (Nullable = true) (DbType = DateTime), @p24='Pending' (Nullable = false), @p25='2025-08-26T09:41:33.9049925Z' (DbType = DateTime), @p26='985eb57b-c8eb-41e2-98a1-96a2da4f72de', @p27=NULL, @p28='c13be597-6ae2-42bb-9d43-925815f24ff8', @p29='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p30=NULL, @p31=NULL, @p32='80c43c6a-508b-47ff-9360-201bfd5521d3', @p33='False', @p34=NULL, @p35=NULL, @p36='2025-08-26T09:41:33.9051487Z' (Nullable = true) (DbType = DateTime), @p37='Pending' (Nullable = false), @p38='2025-08-26T09:41:33.9051487Z' (DbType = DateTime), @p39='da480a6b-140e-4232-8b76-4c8b951d0732', @p40=NULL, @p41='c13be597-6ae2-42bb-9d43-925815f24ff8', @p42='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p43=NULL, @p44=NULL, @p45='8aac7c57-6699-4511-897b-4121b407eb1c', @p46='False', @p47=NULL, @p48=NULL, @p49='2025-08-26T09:41:33.8839322Z' (Nullable = true) (DbType = DateTime), @p50='Pending' (Nullable = false), @p51='2025-08-26T09:41:33.8839854Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51);
2025-08-26 15:11:33.936 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:11:33.938 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 79.6452ms
2025-08-26 15:11:33.939 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 15:11:33.940 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/assign-contacts - 200 null application/json; charset=utf-8 90.3425ms
2025-08-26 15:11:39.183 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:11:39.187 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:39.188 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4681ms
2025-08-26 15:11:39.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:11:39.194 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:39.196 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:11:39.197 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:39.203 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:11:39.207 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:11:39.208 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.5996ms
2025-08-26 15:11:39.211 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:11:39.212 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 20.8721ms
2025-08-26 15:11:43.945 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:43.948 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:43.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 4.1105ms
2025-08-26 15:11:43.958 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:43.962 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:43.963 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-26 15:11:43.966 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:43.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-26 15:11:43.982 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:11:43.983 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 15.6323ms
2025-08-26 15:11:43.985 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-26 15:11:43.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 28.0152ms
2025-08-26 15:11:46.793 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:11:46.795 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:46.796 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 2.899ms
2025-08-26 15:11:46.801 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:11:46.804 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:46.805 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:11:46.806 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:46.811 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:11:46.814 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:11:46.816 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.6425ms
2025-08-26 15:11:46.818 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:11:46.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.9801ms
2025-08-26 15:11:48.255 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 15:11:48.257 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.258 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 3.1733ms
2025-08-26 15:11:48.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:48.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 15:11:48.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 15:11:48.264 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.266 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 15:11:48.269 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 8.6229ms
2025-08-26 15:11:48.278 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 15.9248ms
2025-08-26 15:11:48.278 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.269 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 7.2458ms
2025-08-26 15:11:48.286 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:48.290 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 15:11:48.291 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:48.297 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.300 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.301 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 15:11:48.302 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 15:11:48.302 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 15:11:48.305 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:48.306 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 15:11:48.308 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:11:48.313 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 15:11:48.314 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-26 15:11:48.316 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:11:48.319 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 15:11:48.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 15:11:48.323 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 19.4331ms
2025-08-26 15:11:48.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 15:11:48.325 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 14.8914ms
2025-08-26 15:11:48.328 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:48.329 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 15:11:48.331 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:48.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 15:11:48.333 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 64.2406ms
2025-08-26 15:11:48.337 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:48.337 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:11:48.337 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 50.8871ms
2025-08-26 15:11:48.341 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 15:11:48.342 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 29.6289ms
2025-08-26 15:11:48.347 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 15:11:48.348 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:11:48.351 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 60.8776ms
2025-08-26 15:11:48.353 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:11:48.357 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 11.1207ms
2025-08-26 15:11:48.358 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 15:11:48.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 35.5879ms
2025-08-26 15:11:53.201 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:11:53.204 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:53.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6666ms
2025-08-26 15:11:53.208 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:11:53.211 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:53.212 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:11:53.214 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:11:53.221 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:11:53.225 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:11:53.227 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.0972ms
2025-08-26 15:11:53.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:11:53.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 21.376ms
2025-08-26 15:11:56.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:11:56.572 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:56.573 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 4.0568ms
2025-08-26 15:11:56.576 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 15:11:56.579 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:11:56.580 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:11:56.583 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:12:00.561 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 15:12:00.572 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:12:00.585 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:12:00.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:12:00.593 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:12:00.595 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:12:00.927 +05:30 [INF] Received HTTP response headers after 330.0898ms - 401
2025-08-26 15:12:00.928 +05:30 [INF] End processing HTTP request after 334.5577ms - 401
2025-08-26 15:12:00.929 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 01:00:00 PDT. The current time is Tuesday, 26-Aug-25 02:41:59 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ad7cbl6TtY-ae_hayOFtdaX"}}
2025-08-26 15:12:00.932 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:12:00.933 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4348.182ms
2025-08-26 15:12:00.934 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:12:00.935 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 400 null application/json; charset=utf-8 4359.6444ms
2025-08-26 15:12:20.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 15:12:20.242 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:20.243 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9113ms
2025-08-26 15:12:20.247 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 15:12:20.248 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:20.249 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 15:12:20.250 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 15:12:20.254 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 15:12:20.257 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 15:12:20.263 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 15:12:20.269 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 15:12:20.271 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 15:12:20.272 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 15:12:20.273 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 15:12:20.274 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:12:20.275 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 23.189ms
2025-08-26 15:12:20.276 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 15:12:20.277 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 30.7206ms
2025-08-26 15:12:20.280 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:12:20.282 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:20.283 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5479ms
2025-08-26 15:12:20.286 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:12:20.287 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:20.288 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:12:20.289 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:12:20.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:12:20.296 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:12:20.297 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8695ms
2025-08-26 15:12:20.299 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:12:20.300 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.1346ms
2025-08-26 15:12:20.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:12:20.317 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:20.318 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:12:20.319 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:12:20.324 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:12:20.327 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:12:20.329 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0906ms
2025-08-26 15:12:20.330 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:12:20.332 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5857ms
2025-08-26 15:12:20.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:12:20.389 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:20.390 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:12:20.392 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:12:20.398 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:12:20.403 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:12:20.404 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.028ms
2025-08-26 15:12:20.406 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:12:20.407 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.6711ms
2025-08-26 15:12:26.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:12:26.203 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:26.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.7829ms
2025-08-26 15:12:26.208 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:12:26.212 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:26.213 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:12:26.214 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:12:26.219 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:12:26.223 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:12:26.225 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.3108ms
2025-08-26 15:12:26.226 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:12:26.228 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 19.9098ms
2025-08-26 15:12:28.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:12:28.193 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:28.194 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 3.1207ms
2025-08-26 15:12:28.197 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 15:12:28.199 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:28.200 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:12:28.201 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:12:31.037 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:12:31.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:12:31.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:12:31.048 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:12:31.049 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:12:31.574 +05:30 [INF] Received HTTP response headers after 523.0989ms - 401
2025-08-26 15:12:31.575 +05:30 [INF] End processing HTTP request after 527.4371ms - 401
2025-08-26 15:12:31.577 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 01:00:00 PDT. The current time is Tuesday, 26-Aug-25 02:42:30 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A5fE5ulG62g2P0rpFVTIqFB"}}
2025-08-26 15:12:31.578 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:12:31.580 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3377.8809ms
2025-08-26 15:12:31.581 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:12:31.582 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 400 null application/json; charset=utf-8 3385.7632ms
2025-08-26 15:12:42.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 15:12:42.967 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:42.967 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 2.977ms
2025-08-26 15:12:42.970 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 15:12:42.972 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:42.973 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:12:42.973 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:12:45.266 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:12:45.282 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:12:45.287 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:12:45.289 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:12:45.290 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:12:45.555 +05:30 [INF] Received HTTP response headers after 263.4679ms - 401
2025-08-26 15:12:45.557 +05:30 [INF] End processing HTTP request after 267.4541ms - 401
2025-08-26 15:12:45.558 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 01:00:00 PDT. The current time is Tuesday, 26-Aug-25 02:42:44 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AWJvSqJDoQI9vcPC1PWly7O"}}
2025-08-26 15:12:45.560 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:12:45.561 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2586.1931ms
2025-08-26 15:12:45.563 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:12:45.564 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 2593.9374ms
2025-08-26 15:12:56.190 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 15:12:56.193 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:56.194 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.013ms
2025-08-26 15:12:56.199 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 15:12:56.203 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:12:56.205 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 15:12:56.210 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 15:12:56.224 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:12:56.227 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-26 15:12:56.232 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 20.2603ms
2025-08-26 15:12:56.233 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 15:12:56.235 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 35.6397ms
2025-08-26 15:13:12.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:13:12.198 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:12.199 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.0282ms
2025-08-26 15:13:12.203 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:13:12.207 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:12.208 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:13:12.209 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:13:12.215 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:13:12.219 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:13:12.221 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.5439ms
2025-08-26 15:13:12.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:13:12.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 20.8652ms
2025-08-26 15:13:17.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:13:17.243 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:17.244 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 3.7395ms
2025-08-26 15:13:17.258 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:13:17.261 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:17.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:13:17.264 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:13:17.271 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:13:17.274 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:13:17.276 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 9.9029ms
2025-08-26 15:13:17.277 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:13:17.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 20.0022ms
2025-08-26 15:13:17.724 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:13:17.726 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:17.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.0207ms
2025-08-26 15:13:17.729 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:13:17.731 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:17.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:13:17.733 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:13:17.737 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:13:17.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:13:17.743 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:13:17.744 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.5241ms
2025-08-26 15:13:17.745 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:13:17.746 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 16.7505ms
2025-08-26 15:13:26.270 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:13:26.274 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:26.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.617ms
2025-08-26 15:13:26.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:13:26.282 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:26.284 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:13:26.285 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:13:26.291 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:13:26.295 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:13:26.297 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.2518ms
2025-08-26 15:13:26.298 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:13:26.299 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 19.9392ms
2025-08-26 15:13:30.802 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:13:30.804 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:30.805 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 3.3272ms
2025-08-26 15:13:30.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:13:30.821 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:30.823 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:13:30.824 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:13:30.828 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:13:30.831 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:13:30.832 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 6.8222ms
2025-08-26 15:13:30.833 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:13:30.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 15.4385ms
2025-08-26 15:13:31.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:13:31.291 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:31.291 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 2.8595ms
2025-08-26 15:13:31.294 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:13:31.296 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:31.296 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:13:31.297 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:13:31.300 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:13:31.304 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:13:31.306 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:13:31.306 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 8.0924ms
2025-08-26 15:13:31.307 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:13:31.308 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 14.3645ms
2025-08-26 15:13:36.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:13:36.205 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:36.206 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.0236ms
2025-08-26 15:13:36.208 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:13:36.210 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:36.210 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:13:36.211 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:13:36.216 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:13:36.219 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:13:36.220 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.5024ms
2025-08-26 15:13:36.222 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:13:36.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 14.997ms
2025-08-26 15:13:40.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 15:13:40.532 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:40.532 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 204 null null 2.778ms
2025-08-26 15:13:40.544 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - null null
2025-08-26 15:13:40.546 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:40.548 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:13:40.548 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:13:40.552 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:13:40.555 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:13:40.556 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 6.3653ms
2025-08-26 15:13:40.557 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:13:40.558 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0/summary - 200 null application/json; charset=utf-8 14.5511ms
2025-08-26 15:13:41.010 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:13:41.012 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:41.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 204 null null 3.2481ms
2025-08-26 15:13:41.015 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:13:41.017 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:13:41.018 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:13:41.019 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:13:41.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:13:41.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:13:41.027 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:13:41.029 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 8.4212ms
2025-08-26 15:13:41.030 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:13:41.030 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3b5d1770-f5ec-4890-90ae-7bfd58fe0ae0?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 15.0215ms
2025-08-26 15:14:36.689 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 15:14:36.696 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:36.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.0414ms
2025-08-26 15:14:36.703 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 15:14:36.705 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:36.707 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 15:14:36.708 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 15:14:36.714 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:14:36.721 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-26 15:14:36.722 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 12.5621ms
2025-08-26 15:14:36.723 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 15:14:36.724 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 21.5726ms
2025-08-26 15:14:43.924 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-26 15:14:43.926 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:43.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 2.8166ms
2025-08-26 15:14:43.929 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 555
2025-08-26 15:14:43.931 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:43.932 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 15:14:43.936 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 15:14:43.944 +05:30 [INF] üîß [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-26 15:14:43.950 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-26 15:14:43.963 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPV6WdW9bLdmZBBVmA2ZAAywl8PZBmt1JITCiWZAVknTHHATUpv47ORHQPdlFZAY0iERQ7gLoFpJf1Y1wFNeM5tclLj0bZBKFeWZAcOs1ZBz8hvBtZBm8wSGQWnzARN919XtD5HMIAs30uANANgLKcKUxQjIDcFmFgizXSqaY6oFfri7egn0tzjsPlRkNasNYQZCRdJZA49nYkuKg3kS7UdP3OKjZBUzOwchAiLvZBHszCotfLeVW6pZAhEPwZDZD' (Nullable = false), @p1='2025-08-26T09:44:43.9542005Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-26 15:14:43.966 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:14:43.967 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 29.8092ms
2025-08-26 15:14:43.967 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 15:14:43.968 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 39.287ms
2025-08-26 15:14:44.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-26 15:14:44.758 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:44.758 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.4701ms
2025-08-26 15:14:44.761 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 387
2025-08-26 15:14:44.763 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:44.764 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 15:14:44.767 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 15:14:44.771 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 15:14:44.772 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 15:14:46.421 +05:30 [INF] Received HTTP response headers after 1647.4316ms - 200
2025-08-26 15:14:46.422 +05:30 [INF] End processing HTTP request after 1650.6913ms - 200
2025-08-26 15:14:46.445 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:14:46.447 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1678.2308ms
2025-08-26 15:14:46.448 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 15:14:46.448 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1687.5752ms
2025-08-26 15:14:54.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:14:54.332 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:54.334 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4601ms
2025-08-26 15:14:54.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:14:54.340 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:54.341 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:14:54.342 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:14:54.346 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:14:54.349 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:14:54.350 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 6.7616ms
2025-08-26 15:14:54.351 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:14:54.352 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 14.4328ms
2025-08-26 15:14:58.019 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:14:58.021 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:58.022 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 2.8835ms
2025-08-26 15:14:58.024 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 15:14:58.025 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:14:58.026 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:14:58.027 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:15:02.577 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:15:02.581 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:15:02.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:15:02.592 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:15:02.593 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:15:03.349 +05:30 [INF] Received HTTP response headers after 754.9452ms - 200
2025-08-26 15:15:03.350 +05:30 [INF] End processing HTTP request after 757.9128ms - 200
2025-08-26 15:15:03.433 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:15:03.440 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:03.441 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:04.599 +05:30 [INF] Received HTTP response headers after 1156.8ms - 400
2025-08-26 15:15:04.600 +05:30 [INF] End processing HTTP request after 1159.8451ms - 400
2025-08-26 15:15:04.602 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"ADdJePovBcilEtKmoFeXh-4"}}
2025-08-26 15:15:04.605 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:15:04.607 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:04.608 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:05.621 +05:30 [INF] Received HTTP response headers after 1012.4324ms - 200
2025-08-26 15:15:05.623 +05:30 [INF] End processing HTTP request after 1015.3538ms - 200
2025-08-26 15:15:05.627 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:15:05.629 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:05.630 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:06.421 +05:30 [INF] Received HTTP response headers after 790.4205ms - 400
2025-08-26 15:15:06.423 +05:30 [INF] End processing HTTP request after 793.7372ms - 400
2025-08-26 15:15:06.424 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"A0xFuazXR-MprvmRsFQ4d0m"}}
2025-08-26 15:15:06.426 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:15:06.428 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:06.429 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:15:07.380 +05:30 [INF] Received HTTP response headers after 949.471ms - 200
2025-08-26 15:15:07.381 +05:30 [INF] End processing HTTP request after 952.7504ms - 200
2025-08-26 15:15:07.391 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:15:07.393 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9364.6014ms
2025-08-26 15:15:07.394 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:15:07.395 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 9370.8515ms
2025-08-26 15:15:35.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:15:35.132 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:35.133 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 2.9317ms
2025-08-26 15:15:35.145 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:15:35.147 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:35.148 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:15:35.149 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:15:35.214 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:15:35.216 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:15:35.217 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 66.4812ms
2025-08-26 15:15:35.218 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:15:35.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 74.4701ms
2025-08-26 15:15:35.622 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:15:35.625 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:35.626 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.6362ms
2025-08-26 15:15:35.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:15:35.630 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:35.631 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:15:35.632 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:15:35.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:15:35.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:15:35.643 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:15:35.644 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.665ms
2025-08-26 15:15:35.645 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:15:35.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 18.0042ms
2025-08-26 15:15:40.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:15:40.557 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:40.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3565ms
2025-08-26 15:15:40.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:15:40.563 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:40.564 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:15:40.565 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:15:40.570 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:15:40.573 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:15:40.575 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6793ms
2025-08-26 15:15:40.576 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:15:40.577 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6859ms
2025-08-26 15:15:40.616 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:15:40.619 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:40.621 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:15:40.622 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:15:40.630 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:15:40.635 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:15:40.637 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0708ms
2025-08-26 15:15:40.639 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:15:40.641 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.3595ms
2025-08-26 15:15:40.681 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:15:40.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:15:40.690 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:40.692 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:40.693 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 11.8235ms
2025-08-26 15:15:40.694 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:15:40.697 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:15:40.698 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:15:40.701 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:40.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:15:40.704 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:15:40.707 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:15:40.709 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:15:40.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:15:40.713 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0215ms
2025-08-26 15:15:40.722 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:15:40.723 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:15:40.725 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 14.3316ms
2025-08-26 15:15:40.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.9398ms
2025-08-26 15:15:40.727 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:15:40.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 35.0503ms
2025-08-26 15:15:41.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:15:41.184 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:41.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.5718ms
2025-08-26 15:15:41.188 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:15:41.190 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:15:41.191 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:15:41.191 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:15:41.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:15:41.200 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:15:41.202 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:15:41.204 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.5727ms
2025-08-26 15:15:41.205 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:15:41.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 17.9134ms
2025-08-26 15:17:05.826 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:17:05.828 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:05.829 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.2942ms
2025-08-26 15:17:05.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:17:05.837 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:05.838 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:17:05.840 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:17:05.845 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:17:05.856 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:17:05.858 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 16.4552ms
2025-08-26 15:17:05.859 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:17:05.860 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 25.4319ms
2025-08-26 15:17:08.683 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 15:17:08.685 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:08.686 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 2.8403ms
2025-08-26 15:17:08.689 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 15:17:08.691 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:08.692 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:17:08.692 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:17:10.831 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:17:10.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:17:10.839 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:17:10.845 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:17:10.846 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:17:12.427 +05:30 [INF] Received HTTP response headers after 1580.4424ms - 200
2025-08-26 15:17:12.429 +05:30 [INF] End processing HTTP request after 1584.2188ms - 200
2025-08-26 15:17:12.434 +05:30 [WRN] Campaign provided 1 body parameter(s), but the template expects 0. Skipping body component.
2025-08-26 15:17:12.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:17:12.440 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:17:12.441 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:17:13.783 +05:30 [INF] Received HTTP response headers after 1341.0055ms - 200
2025-08-26 15:17:13.785 +05:30 [INF] End processing HTTP request after 1344.4707ms - 200
2025-08-26 15:17:13.791 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:17:13.793 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5099.3951ms
2025-08-26 15:17:13.795 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:17:13.796 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 5107.3974ms
2025-08-26 15:17:41.875 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:17:41.884 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:41.884 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.7189ms
2025-08-26 15:17:41.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:17:41.894 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:41.895 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:17:41.896 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:17:41.899 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:17:41.903 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:17:41.904 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6031ms
2025-08-26 15:17:41.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:17:41.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.8374ms
2025-08-26 15:17:41.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:17:41.955 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:41.957 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:17:41.958 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:17:41.963 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:17:41.967 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:17:41.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0895ms
2025-08-26 15:17:41.972 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:17:41.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3472ms
2025-08-26 15:17:42.010 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:17:42.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:17:42.014 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:42.018 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:42.019 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.8371ms
2025-08-26 15:17:42.021 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:17:42.029 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:17:42.031 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:17:42.033 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:42.036 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:17:42.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:17:42.041 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:17:42.049 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:17:42.056 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.8453ms
2025-08-26 15:17:42.057 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:17:42.059 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:17:42.061 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:17:42.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 53.5215ms
2025-08-26 15:17:42.065 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.7089ms
2025-08-26 15:17:42.070 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:17:42.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 42.9917ms
2025-08-26 15:17:45.576 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 15:17:45.578 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:45.579 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 204 null null 3.491ms
2025-08-26 15:17:45.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - null null
2025-08-26 15:17:45.585 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:45.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:17:45.587 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:17:45.591 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:17:45.594 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:17:45.596 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 7.0047ms
2025-08-26 15:17:45.597 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:17:45.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c/summary - 200 null application/json; charset=utf-8 15.2363ms
2025-08-26 15:17:46.065 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:17:46.067 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:46.068 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 204 null null 3.3896ms
2025-08-26 15:17:46.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:17:46.119 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:17:46.121 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:17:46.122 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:17:46.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:17:46.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:17:46.136 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:17:46.138 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.0682ms
2025-08-26 15:17:46.139 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:17:46.140 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 23.9722ms
2025-08-26 15:18:31.547 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:18:31.549 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:18:31.551 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4985ms
2025-08-26 15:18:31.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:18:31.561 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:18:31.562 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:18:31.563 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:18:31.568 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:18:31.571 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:18:31.573 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.8613ms
2025-08-26 15:18:31.574 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:18:31.575 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.6918ms
2025-08-26 15:18:33.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 15:18:33.692 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:18:33.693 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 2.7528ms
2025-08-26 15:18:33.695 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 15:18:33.697 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:18:33.698 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:18:33.699 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:18:35.215 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:18:35.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:18:35.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:18:35.224 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:18:35.225 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:18:36.192 +05:30 [INF] Received HTTP response headers after 966.5041ms - 200
2025-08-26 15:18:36.194 +05:30 [INF] End processing HTTP request after 969.8936ms - 200
2025-08-26 15:18:36.196 +05:30 [WRN] Campaign provided 1 body parameter(s), but the template expects 0. Skipping body component.
2025-08-26 15:18:36.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:18:36.201 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:18:36.202 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:18:37.165 +05:30 [INF] Received HTTP response headers after 961.8225ms - 200
2025-08-26 15:18:37.167 +05:30 [INF] End processing HTTP request after 965.5352ms - 200
2025-08-26 15:18:37.169 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:18:37.170 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3469.9033ms
2025-08-26 15:18:37.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:18:37.173 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 3477.4575ms
2025-08-26 15:19:49.232 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 15:19:49.234 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:19:49.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 2.9233ms
2025-08-26 15:19:49.241 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 15:19:49.243 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:19:49.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:19:49.245 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:19:51.817 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:19:51.821 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:19:51.828 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:19:51.830 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:19:51.831 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:19:53.946 +05:30 [INF] Received HTTP response headers after 2113.6355ms - 200
2025-08-26 15:19:53.947 +05:30 [INF] End processing HTTP request after 2117.185ms - 200
2025-08-26 15:19:53.949 +05:30 [WRN] Campaign provided 1 body parameter(s), but the template expects 0. Skipping body component.
2025-08-26 15:19:53.952 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:19:53.954 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:19:53.955 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:19:55.113 +05:30 [INF] Received HTTP response headers after 1156.9205ms - 200
2025-08-26 15:19:55.115 +05:30 [INF] End processing HTTP request after 1160.8269ms - 200
2025-08-26 15:19:55.117 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:19:55.119 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5872.2973ms
2025-08-26 15:19:55.120 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:19:55.121 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 5880.3385ms
2025-08-26 15:21:48.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-26 15:21:48.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 15:21:48.291 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:21:48.294 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:21:48.297 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 14.8176ms
2025-08-26 15:21:48.303 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 20.669ms
2025-08-26 15:21:48.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-26 15:21:48.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 15:21:48.318 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:21:48.321 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:21:48.322 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 15:21:48.322 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 15:21:48.323 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 15:21:48.327 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-26 15:21:48.327 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-26 15:21:48.399 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 15:21:48.404 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 15:21:48.408 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:21:48.409 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 82.8741ms
2025-08-26 15:21:48.410 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 15:21:48.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 103.1496ms
2025-08-26 15:21:48.436 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-26 15:21:48.440 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:21:48.444 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 112.0194ms
2025-08-26 15:21:48.445 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 15:21:48.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 130.4594ms
2025-08-26 15:21:56.416 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-26 15:21:56.419 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:21:56.419 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.2989ms
2025-08-26 15:21:56.421 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 59
2025-08-26 15:21:56.424 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:21:56.425 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 15:21:56.428 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 15:21:56.437 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-26 15:21:56.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-26 15:21:56.446 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 15:21:56.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:21:56.452 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:21:56.453 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:21:57.776 +05:30 [INF] Received HTTP response headers after 1321.7853ms - 200
2025-08-26 15:21:57.777 +05:30 [INF] End processing HTTP request after 1325.0609ms - 200
2025-08-26 15:21:57.813 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b8855a22-08e7-4a8c-a713-3e69c1633050', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T09:51:57.7799900Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='asm.zfc' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOENCRkJGQzdBQzg0OEU5NzlGAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOENCRkJGQzdBQzg0OEU5NzlGAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='asm.zfc', @p16='2025-08-26T09:51:57.7800204Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-26 15:21:57.817 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:21:57.819 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1389.8898ms
2025-08-26 15:21:57.820 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 15:21:57.821 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1399.4173ms
2025-08-26 15:27:20.377 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 15:27:20.411 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 15:27:20.424 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 15:27:21.075 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 15:27:21.554 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 15:27:21.733 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 15:27:21.734 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 15:27:21.735 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 15:27:21.736 +05:30 [INF] Hosting environment: Development
2025-08-26 15:27:21.737 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 15:27:21.773 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 15:27:21.773 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@__cutoff_0='2025-08-19T09:57:20.5171341Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 15:27:23.938 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 15:27:24.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 160.614ms
2025-08-26 15:27:24.109 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 15:27:24.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.6905ms
2025-08-26 15:27:24.177 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 15:27:24.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.8408ms
2025-08-26 15:27:24.358 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 15:27:24.560 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 202.1642ms
2025-08-26 15:27:37.407 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:27:37.413 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 15:27:37.459 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:27:37.462 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 55.6789ms
2025-08-26 15:27:37.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 15:27:37.482 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:27:37.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:27:37.611 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:27:37.753 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 15:27:37.774 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:27:37.795 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 178.8507ms
2025-08-26 15:27:37.796 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 15:27:37.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 329.5131ms
2025-08-26 15:27:39.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 15:27:39.631 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:27:39.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 4.3605ms
2025-08-26 15:27:39.635 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 15:27:39.637 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:27:39.639 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:27:39.644 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 15:27:42.904 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 15:27:42.916 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 15:27:43.039 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:27:43.130 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 15:27:43.155 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:27:43.158 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 15:27:44.846 +05:30 [INF] Received HTTP response headers after 1684.905ms - 200
2025-08-26 15:27:44.848 +05:30 [INF] End processing HTTP request after 1694.4396ms - 200
2025-08-26 15:27:44.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:27:44.963 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:44.964 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:45.954 +05:30 [INF] Received HTTP response headers after 988.6645ms - 400
2025-08-26 15:27:45.955 +05:30 [INF] End processing HTTP request after 991.784ms - 400
2025-08-26 15:27:45.957 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"A3hoVvcBi5qMdUgkbbvr7HO"}}
2025-08-26 15:27:46.049 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:27:46.052 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:46.053 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:47.074 +05:30 [INF] Received HTTP response headers after 1020.3033ms - 200
2025-08-26 15:27:47.076 +05:30 [INF] End processing HTTP request after 1023.7257ms - 200
2025-08-26 15:27:47.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:27:47.083 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:47.084 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:47.654 +05:30 [INF] Received HTTP response headers after 569.2807ms - 400
2025-08-26 15:27:47.655 +05:30 [INF] End processing HTTP request after 572.329ms - 400
2025-08-26 15:27:47.656 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AeQJoRKZVI2XtkjS_NyDsRN"}}
2025-08-26 15:27:47.659 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 15:27:47.661 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:47.662 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 15:27:48.674 +05:30 [INF] Received HTTP response headers after 1010.7715ms - 200
2025-08-26 15:27:48.675 +05:30 [INF] End processing HTTP request after 1013.3331ms - 200
2025-08-26 15:27:48.798 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='57762a30-3ef6-4bd4-ad91-f06edcdc18d2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p5='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true), @p6='2025-08-26T09:57:47.6578392Z' (DbType = DateTime), @p7='‚ùå WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AeQJoRKZVI2XtkjS_NyDsRN"}}', @p13='447543746206' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='b19f2db7-a1e2-4b9a-972e-53a7d47f96f6', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p24='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p25='2025-08-26T09:57:47.0792749Z' (DbType = DateTime), @p26=NULL, @p27='False', @p28=NULL, @p29='account_creation_confirmation_3' (Nullable = false), @p30='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjJCNzVBMEM0MEQ2RDZCREZDAA==', @p31='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjJCNzVBMEM0MEQ2RDZCREZDAA==","message_status":"accepted"}]}', @p32='+918974005240' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35='2025-08-26T09:57:47.0792751Z' (Nullable = true) (DbType = DateTime), @p36='campaign', @p37='Sent' (Nullable = false), @p38='bd4c6b1c-6856-4958-86d5-da592f06fa3a', @p39='c13be597-6ae2-42bb-9d43-925815f24ff8', @p40=NULL (DbType = Guid), @p41=NULL (DbType = Guid), @p42='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p43='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true), @p44='2025-08-26T09:57:45.9597125Z' (DbType = DateTime), @p45='‚ùå WhatsApp API returned an error.', @p46='False', @p47=NULL, @p48='account_creation_confirmation_3' (Nullable = false), @p49=NULL, @p50='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"A3hoVvcBi5qMdUgkbbvr7HO"}}', @p51='1234567890' (Nullable = false), @p52=NULL (DbType = Guid), @p53=NULL, @p54=NULL (DbType = DateTime), @p55='campaign', @p56='Failed' (Nullable = false), @p57='d5898d92-ca36-4bb6-8a7a-ca356478a3d9', @p58='c13be597-6ae2-42bb-9d43-925815f24ff8', @p59=NULL (DbType = Guid), @p60=NULL (DbType = Guid), @p61='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p62='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p63='2025-08-26T09:57:48.6763941Z' (DbType = DateTime), @p64=NULL, @p65='False', @p66=NULL, @p67='account_creation_confirmation_3' (Nullable = false), @p68='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMkIzRTM2RjAxOEY3QUI1RTczAA==', @p69='{"messaging_product":"whatsapp","contacts":[{"input":"+917082156227","wa_id":"917082156227"}],"messages":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMkIzRTM2RjAxOEY3QUI1RTczAA==","message_status":"accepted"}]}', @p70='+917082156227' (Nullable = false), @p71=NULL (DbType = Guid), @p72=NULL, @p73='2025-08-26T09:57:48.6763942Z' (Nullable = true) (DbType = DateTime), @p74='campaign', @p75='Sent' (Nullable = false), @p76='32561885-c3da-4b84-a8d7-a78f88f8783d', @p77='True', @p78=NULL, @p79='c13be597-6ae2-42bb-9d43-925815f24ff8', @p80='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p81=NULL, @p82=NULL, @p83=NULL (DbType = DateTime), @p84='8aac7c57-6699-4511-897b-4121b407eb1c', @p85=NULL, @p86='2025-08-26T09:57:48.6765996Z' (DbType = DateTime), @p87='system', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91=NULL, @p92=NULL, @p93='False', @p94=NULL (DbType = DateTime), @p95=NULL, @p96=NULL, @p97='account_creation_confirmation_3' (Nullable = false), @p98='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMkIzRTM2RjAxOEY3QUI1RTczAA==', @p99='d5898d92-ca36-4bb6-8a7a-ca356478a3d9' (Nullable = true), @p100=NULL (DbType = DateTime), @p101='da480a6b-140e-4232-8b76-4c8b951d0732', @p102='0', @p103='Sent', @p104='2025-08-26T09:57:48.6765997Z' (Nullable = true) (DbType = DateTime), @p105=NULL, @p106='account_creation_confirmation_3', @p107=NULL (DbType = Guid), @p108='3e94adb4-f108-4fa2-bacf-06a39da3963e', @p109='True', @p110=NULL, @p111='c13be597-6ae2-42bb-9d43-925815f24ff8', @p112='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p113=NULL, @p114=NULL, @p115=NULL (DbType = DateTime), @p116='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @p117=NULL, @p118='2025-08-26T09:57:46.0031331Z' (DbType = DateTime), @p119='system', @p120=NULL (DbType = DateTime), @p121=NULL, @p122=NULL, @p123='‚ùå WhatsApp API returned an error.', @p124=NULL, @p125='False', @p126=NULL (DbType = DateTime), @p127=NULL, @p128=NULL, @p129='account_creation_confirmation_3' (Nullable = false), @p130=NULL, @p131='bd4c6b1c-6856-4958-86d5-da592f06fa3a' (Nullable = true), @p132=NULL (DbType = DateTime), @p133='4ec881bf-8c87-4b70-b608-b85d7333cb5c', @p134='0', @p135='Failed', @p136='2025-08-26T09:57:46.0031716Z' (Nullable = true) (DbType = DateTime), @p137=NULL, @p138='account_creation_confirmation_3', @p139=NULL (DbType = Guid), @p140='cc9dd5d4-ff1f-4736-8fac-0d3eb7367854', @p141='True', @p142=NULL, @p143='c13be597-6ae2-42bb-9d43-925815f24ff8', @p144='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p145=NULL, @p146=NULL, @p147=NULL (DbType = DateTime), @p148='80c43c6a-508b-47ff-9360-201bfd5521d3', @p149=NULL, @p150='2025-08-26T09:57:47.6580644Z' (DbType = DateTime), @p151='system', @p152=NULL (DbType = DateTime), @p153=NULL, @p154=NULL, @p155='‚ùå WhatsApp API returned an error.', @p156=NULL, @p157='False', @p158=NULL (DbType = DateTime), @p159=NULL, @p160=NULL, @p161='account_creation_confirmation_3' (Nullable = false), @p162=NULL, @p163='57762a30-3ef6-4bd4-ad91-f06edcdc18d2' (Nullable = true), @p164=NULL (DbType = DateTime), @p165='985eb57b-c8eb-41e2-98a1-96a2da4f72de', @p166='0', @p167='Failed', @p168='2025-08-26T09:57:47.6580645Z' (Nullable = true) (DbType = DateTime), @p169=NULL, @p170='account_creation_confirmation_3', @p171=NULL (DbType = Guid), @p172='f1b2c0b2-0126-40a1-ba68-54d6967e42ca', @p173='True', @p174=NULL, @p175='c13be597-6ae2-42bb-9d43-925815f24ff8', @p176='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p177=NULL, @p178=NULL, @p179=NULL (DbType = DateTime), @p180='26b8b9a2-5624-40ed-a659-65de71d03d20', @p181=NULL, @p182='2025-08-26T09:57:47.0796346Z' (DbType = DateTime), @p183='system', @p184=NULL (DbType = DateTime), @p185=NULL, @p186=NULL, @p187=NULL, @p188=NULL, @p189='False', @p190=NULL (DbType = DateTime), @p191=NULL, @p192=NULL, @p193='account_creation_confirmation_3' (Nullable = false), @p194='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjJCNzVBMEM0MEQ2RDZCREZDAA==', @p195='b19f2db7-a1e2-4b9a-972e-53a7d47f96f6' (Nullable = true), @p196=NULL (DbType = DateTime), @p197='5f025339-a66b-4fab-8ef0-535fb3ac1a8a', @p198='0', @p199='Sent', @p200='2025-08-26T09:57:47.0796346Z' (Nullable = true) (DbType = DateTime), @p201=NULL, @p202='account_creation_confirmation_3', @p203=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203);
2025-08-26 15:27:48.818 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 15:27:48.825 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9179.7367ms
2025-08-26 15:27:48.826 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 15:27:48.827 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 9192.5603ms
2025-08-26 15:30:27.570 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:30:27.579 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:30:27.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 13.5564ms
2025-08-26 15:30:27.586 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:30:27.590 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:30:27.593 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:30:27.597 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:30:27.621 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 15:30:27.630 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:30:27.633 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:30:27.636 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 38.1791ms
2025-08-26 15:30:27.638 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:30:27.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 52.5393ms
2025-08-26 15:30:28.058 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:30:28.061 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:30:28.062 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.7294ms
2025-08-26 15:30:28.112 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:30:28.114 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:30:28.116 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:30:28.120 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:30:28.143 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:30:28.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:30:28.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:30:28.181 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 58.9556ms
2025-08-26 15:30:28.182 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:30:28.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 71.94ms
2025-08-26 15:31:36.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Delivered&search= - null null
2025-08-26 15:31:36.560 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:36.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Delivered&search= - 204 null null 7.427ms
2025-08-26 15:31:36.568 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Delivered&search= - null null
2025-08-26 15:31:36.570 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:36.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:36.572 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:31:36.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Delivered'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 15:31:36.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Delivered', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:31:36.590 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:31:36.591 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 17.2706ms
2025-08-26 15:31:36.592 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:36.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Delivered&search= - 200 null application/json; charset=utf-8 25.0915ms
2025-08-26 15:31:38.354 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Read&search= - null null
2025-08-26 15:31:38.357 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:38.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Read&search= - 204 null null 3.7112ms
2025-08-26 15:31:38.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Read&search= - null null
2025-08-26 15:31:38.380 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:38.381 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:38.382 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:31:38.387 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Read'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 15:31:38.395 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Read', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:31:38.397 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:31:38.398 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.6484ms
2025-08-26 15:31:38.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:38.400 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Read&search= - 200 null application/json; charset=utf-8 22.1813ms
2025-08-26 15:31:40.599 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Sent&search= - null null
2025-08-26 15:31:40.602 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:40.603 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Sent&search= - 204 null null 4.0096ms
2025-08-26 15:31:40.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Sent&search= - null null
2025-08-26 15:31:40.609 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:40.610 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:40.611 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:31:40.615 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Sent'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 15:31:40.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Sent', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:31:40.622 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:31:40.623 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 11.0081ms
2025-08-26 15:31:40.624 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:40.625 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Sent&search= - 200 null application/json; charset=utf-8 18.9848ms
2025-08-26 15:31:43.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Failed&search= - null null
2025-08-26 15:31:43.354 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:43.355 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Failed&search= - 204 null null 3.804ms
2025-08-26 15:31:43.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Failed&search= - null null
2025-08-26 15:31:43.363 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:43.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:43.365 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:31:43.369 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Failed'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
2025-08-26 15:31:43.375 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__status_1='Failed', @__p_3='10', @__p_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0 AND c."SendStatus" = @__status_1
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_3 OFFSET @__p_2
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:31:43.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:31:43.378 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 11.286ms
2025-08-26 15:31:43.379 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:43.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=Failed&search= - 200 null application/json; charset=utf-8 19.819ms
2025-08-26 15:31:45.910 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:31:45.913 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:45.914 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.6875ms
2025-08-26 15:31:45.917 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:31:45.919 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:31:45.920 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:45.921 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:31:45.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:31:45.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:31:45.933 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:31:45.934 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.8845ms
2025-08-26 15:31:45.935 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:31:45.936 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 19.2211ms
2025-08-26 15:39:23.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:39:24.474 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:24.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 1093.4877ms
2025-08-26 15:39:24.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:39:24.487 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:24.493 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:39:24.496 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:39:24.568 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 15:39:24.588 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:39:24.591 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:39:24.596 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 98.1976ms
2025-08-26 15:39:24.597 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:39:24.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 114.5439ms
2025-08-26 15:39:24.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:39:24.608 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:24.610 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:39:24.611 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:39:24.615 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:39:24.618 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:39:24.619 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2746ms
2025-08-26 15:39:24.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:39:24.622 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0107ms
2025-08-26 15:39:24.652 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:39:24.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 15:39:24.655 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:24.657 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:24.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 4.8481ms
2025-08-26 15:39:24.660 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:39:24.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 15:39:24.661 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 15:39:24.663 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:24.665 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:39:24.666 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:39:24.668 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 15:39:24.673 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 15:39:24.682 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.1752ms
2025-08-26 15:39:24.683 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 15:39:24.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.4727ms
2025-08-26 15:39:24.851 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 15:39:24.854 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 15:39:24.856 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 186.3796ms
2025-08-26 15:39:24.857 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 15:39:24.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 198.136ms
2025-08-26 15:39:25.150 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:39:25.153 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:25.153 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.2443ms
2025-08-26 15:39:25.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 15:39:25.159 +05:30 [INF] CORS policy execution successful.
2025-08-26 15:39:25.160 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:39:25.160 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 15:39:25.165 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 15:39:25.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 15:39:25.171 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 15:39:25.172 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.9517ms
2025-08-26 15:39:25.173 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 15:39:25.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 17.799ms
2025-08-26 16:06:40.466 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 16:06:40.494 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 25.8048ms
2025-08-26 16:06:41.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 16:06:41.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 147.7761ms
2025-08-26 17:43:39.425 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 17:43:39.469 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 17:43:39.486 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 17:43:40.331 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 17:43:40.860 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 17:43:41.038 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 17:43:41.074 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[@__cutoff_0='2025-08-19T12:13:39.6097799Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 17:43:41.120 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 17:43:41.121 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 17:43:41.122 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 17:43:41.123 +05:30 [INF] Hosting environment: Development
2025-08-26 17:43:41.124 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 17:43:43.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 17:43:43.181 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 171.9441ms
2025-08-26 17:43:43.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 17:43:43.216 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.3988ms
2025-08-26 17:43:43.280 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 17:43:43.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.1926ms
2025-08-26 17:43:43.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 17:43:43.803 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.0681ms
2025-08-26 17:44:07.604 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 17:44:07.619 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 17:44:07.673 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:07.676 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 72.708ms
2025-08-26 17:44:07.684 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 17:44:07.691 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:07.736 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 17:44:07.752 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 17:44:07.819 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 17:44:07.889 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 17:44:07.972 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 17:44:08.092 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 17:44:08.101 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 17:44:08.154 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 17:44:08.155 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 17:44:08.163 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:44:08.170 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 413.9182ms
2025-08-26 17:44:08.171 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 17:44:08.176 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 492.1228ms
2025-08-26 17:44:08.180 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 17:44:08.183 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:08.184 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8587ms
2025-08-26 17:44:08.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 17:44:08.194 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:08.221 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 17:44:08.227 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 17:44:08.240 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 17:44:08.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 17:44:08.269 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:44:08.282 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 52.8788ms
2025-08-26 17:44:08.283 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 17:44:08.284 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 92.9813ms
2025-08-26 17:44:08.300 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 17:44:08.304 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:08.309 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 17:44:08.311 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 17:44:08.321 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 17:44:08.325 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:44:08.327 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6011ms
2025-08-26 17:44:08.329 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 17:44:08.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.0221ms
2025-08-26 17:44:08.405 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 17:44:08.408 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:08.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 17:44:08.412 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 17:44:08.419 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 17:44:08.423 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:44:08.424 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4645ms
2025-08-26 17:44:08.426 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 17:44:08.427 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.7469ms
2025-08-26 17:44:17.454 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 17:44:17.458 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:17.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.7282ms
2025-08-26 17:44:17.462 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 17:44:17.466 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:17.468 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 17:44:17.472 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 17:44:17.517 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 17:44:17.519 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 17:44:17.529 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 55.395ms
2025-08-26 17:44:17.531 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 17:44:17.532 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 69.6495ms
2025-08-26 17:44:23.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 17:44:23.634 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:23.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 204 null null 5.1927ms
2025-08-26 17:44:23.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - null null
2025-08-26 17:44:23.652 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:23.653 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 17:44:23.656 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 17:44:23.683 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 17:44:23.692 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 17:44:23.694 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 17:44:23.698 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 39.3034ms
2025-08-26 17:44:23.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 17:44:23.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc/summary - 200 null application/json; charset=utf-8 52.5109ms
2025-08-26 17:44:24.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 17:44:24.114 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:24.114 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 204 null null 3.4312ms
2025-08-26 17:44:24.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - null null
2025-08-26 17:44:24.119 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:24.120 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 17:44:24.123 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 17:44:24.139 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 17:44:24.160 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 17:44:24.163 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 17:44:24.170 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 45.262ms
2025-08-26 17:44:24.171 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 17:44:24.172 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 55.2611ms
2025-08-26 17:44:29.768 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 17:44:29.771 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:29.772 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.3679ms
2025-08-26 17:44:29.785 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 17:44:29.787 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:29.789 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 17:44:29.790 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 17:44:29.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 17:44:29.804 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 17:44:29.805 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.1807ms
2025-08-26 17:44:29.806 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 17:44:29.808 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 22.7685ms
2025-08-26 17:44:35.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 17:44:35.238 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:35.239 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 3.5625ms
2025-08-26 17:44:35.246 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 17:44:35.249 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:44:35.250 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 17:44:35.254 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 17:44:38.344 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 17:44:38.355 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 17:44:38.449 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:44:38.555 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 17:44:38.576 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 17:44:38.578 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 17:44:39.438 +05:30 [INF] Received HTTP response headers after 856.5189ms - 401
2025-08-26 17:44:39.440 +05:30 [INF] End processing HTTP request after 865.6427ms - 401
2025-08-26 17:44:39.443 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 04:00:00 PDT. The current time is Tuesday, 26-Aug-25 05:14:37 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Aqz5IH_96gb1vcqxhskicV9"}}
2025-08-26 17:44:39.446 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 17:44:39.454 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4197.9351ms
2025-08-26 17:44:39.455 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 17:44:39.457 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 400 null application/json; charset=utf-8 4210.222ms
2025-08-26 17:45:13.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 17:45:13.414 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:13.416 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.7267ms
2025-08-26 17:45:13.420 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 17:45:13.424 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:13.426 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 17:45:13.430 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 17:45:13.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:13.446 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-26 17:45:13.450 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 17.6313ms
2025-08-26 17:45:13.451 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 17:45:13.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 32.7198ms
2025-08-26 17:45:17.695 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-26 17:45:17.697 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:17.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.1581ms
2025-08-26 17:45:17.700 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 551
2025-08-26 17:45:17.702 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:17.703 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 17:45:17.706 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 17:45:17.715 +05:30 [INF] üîß [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-26 17:45:17.722 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-26 17:45:17.805 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPdGCHtqx0t8U9nl9x34utD4uJf0WBpg9gqArkK9YKRZCKgttN2wfkjvniH5UEnydslFIGqZB1G9kjHgV1es4R7cevyllp0IlWqvzcZCisMM649b4l2OUM9jYavpmj7PBZAkZATZBwyIY4UQZAW7KucxbgdAL1GxmyrkYrc4pgfjryEgDgqeb5lkN1thWR72FZCZBGDwuJ0A5EerWyGAReLQgAZAaqyCjA6vdQCvf5VseKgUgrh1Nr2ewZDZD' (Nullable = false), @p1='2025-08-26T12:15:17.7253158Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-26 17:45:17.814 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:45:17.816 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 108.403ms
2025-08-26 17:45:17.817 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 17:45:17.818 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 117.8417ms
2025-08-26 17:45:18.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-26 17:45:18.459 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:18.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.7175ms
2025-08-26 17:45:18.462 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 383
2025-08-26 17:45:18.464 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:18.464 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 17:45:18.467 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 17:45:18.473 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 17:45:18.474 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 17:45:19.968 +05:30 [INF] Received HTTP response headers after 1493.2427ms - 200
2025-08-26 17:45:19.970 +05:30 [INF] End processing HTTP request after 1496.3732ms - 200
2025-08-26 17:45:19.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:45:19.975 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1506.8192ms
2025-08-26 17:45:19.976 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 17:45:19.977 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1515.3993ms
2025-08-26 17:45:23.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-26 17:45:23.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 17:45:23.258 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:23.260 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:23.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 10.031ms
2025-08-26 17:45:23.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.9989ms
2025-08-26 17:45:23.264 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-26 17:45:23.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-26 17:45:23.269 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:23.270 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:23.270 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 17:45:23.271 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 17:45:23.274 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-26 17:45:23.274 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 17:45:23.278 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-26 17:45:23.283 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-26 17:45:23.287 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 17:45:23.288 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 17:45:23.293 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 17.6707ms
2025-08-26 17:45:23.294 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-26 17:45:23.295 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 30.3886ms
2025-08-26 17:45:23.304 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 17:45:23.328 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 17:45:23.334 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 57.6209ms
2025-08-26 17:45:23.335 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 17:45:23.336 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 69.6496ms
2025-08-26 17:45:28.648 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-26 17:45:28.650 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:28.651 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.0605ms
2025-08-26 17:45:28.653 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 58
2025-08-26 17:45:28.656 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:28.657 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 17:45:28.659 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-26 17:45:28.668 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-26 17:45:28.674 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-26 17:45:28.676 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 17:45:28.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:28.687 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:28.688 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:30.804 +05:30 [INF] Received HTTP response headers after 2115.03ms - 200
2025-08-26 17:45:30.806 +05:30 [INF] End processing HTTP request after 2118.169ms - 200
2025-08-26 17:45:30.875 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='07144a4a-721c-4859-8265-87ccbd35b6ec', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T12:15:30.8098848Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='zdvxdv' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTA5MjIzRDI2OTRCOEM5NzdEAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTA5MjIzRDI2OTRCOEM5NzdEAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='zdvxdv', @p16='2025-08-26T12:15:30.8099146Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-26 17:45:30.879 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 17:45:30.882 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2221.3027ms
2025-08-26 17:45:30.883 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-26 17:45:30.884 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 2230.9804ms
2025-08-26 17:45:34.916 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 17:45:34.919 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:34.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.8786ms
2025-08-26 17:45:34.925 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 17:45:34.927 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:34.929 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 17:45:34.929 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 17:45:34.934 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 17:45:34.936 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 17:45:34.937 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 6.4029ms
2025-08-26 17:45:34.938 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 17:45:34.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 13.5773ms
2025-08-26 17:45:36.725 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 17:45:36.727 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:36.728 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 3.2949ms
2025-08-26 17:45:36.731 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 17:45:36.733 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:36.734 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 17:45:36.736 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 17:45:38.702 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 17:45:38.706 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:38.709 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 17:45:38.711 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 17:45:38.712 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 17:45:39.550 +05:30 [INF] Received HTTP response headers after 837.8404ms - 200
2025-08-26 17:45:39.551 +05:30 [INF] End processing HTTP request after 840.7143ms - 200
2025-08-26 17:45:39.648 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:39.654 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:39.654 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:40.303 +05:30 [INF] Received HTTP response headers after 647.7388ms - 400
2025-08-26 17:45:40.304 +05:30 [INF] End processing HTTP request after 650.8744ms - 400
2025-08-26 17:45:40.306 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AysIAXRESnXFhaFZKn3njbV"}}
2025-08-26 17:45:40.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:40.351 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:40.352 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:41.145 +05:30 [INF] Received HTTP response headers after 792.7284ms - 200
2025-08-26 17:45:41.146 +05:30 [INF] End processing HTTP request after 795.2814ms - 200
2025-08-26 17:45:41.150 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:41.151 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:41.152 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:41.728 +05:30 [INF] Received HTTP response headers after 574.2709ms - 400
2025-08-26 17:45:41.729 +05:30 [INF] End processing HTTP request after 577.6685ms - 400
2025-08-26 17:45:41.730 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"ANxwRPe8hx0BSlGzbbbnk1m"}}
2025-08-26 17:45:41.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:45:41.735 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:41.736 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:45:42.599 +05:30 [INF] Received HTTP response headers after 862.0234ms - 200
2025-08-26 17:45:42.601 +05:30 [INF] End processing HTTP request after 865.4399ms - 200
2025-08-26 17:45:42.646 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='482dc4d7-d11f-4878-b3bb-2a3b747e1bf3', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-26T12:15:42.6024856Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+917082156227","wa_id":"917082156227"}],"messages":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA==","message_status":"accepted"}]}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T12:15:42.6024857Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='b3f6d2c7-766a-49ad-9312-901b8dc9973a', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p24='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true), @p25='2025-08-26T12:15:40.3073875Z' (DbType = DateTime), @p26='‚ùå WhatsApp API returned an error.', @p27='False', @p28=NULL, @p29='account_creation_confirmation_3' (Nullable = false), @p30=NULL, @p31='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AysIAXRESnXFhaFZKn3njbV"}}', @p32='1234567890' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35=NULL (DbType = DateTime), @p36='campaign', @p37='Failed' (Nullable = false), @p38='bf715f44-f979-4ebd-8409-39c7e5db59d7', @p39='c13be597-6ae2-42bb-9d43-925815f24ff8', @p40=NULL (DbType = Guid), @p41=NULL (DbType = Guid), @p42='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p43='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true), @p44='2025-08-26T12:15:41.7316233Z' (DbType = DateTime), @p45='‚ùå WhatsApp API returned an error.', @p46='False', @p47=NULL, @p48='account_creation_confirmation_3' (Nullable = false), @p49=NULL, @p50='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"ANxwRPe8hx0BSlGzbbbnk1m"}}', @p51='447543746206' (Nullable = false), @p52=NULL (DbType = Guid), @p53=NULL, @p54=NULL (DbType = DateTime), @p55='campaign', @p56='Failed' (Nullable = false), @p57='fc63eae4-f1e6-4933-8d82-957b20a2eadd', @p58='c13be597-6ae2-42bb-9d43-925815f24ff8', @p59=NULL (DbType = Guid), @p60=NULL (DbType = Guid), @p61='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p62='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p63='2025-08-26T12:15:41.1479258Z' (DbType = DateTime), @p64=NULL, @p65='False', @p66=NULL, @p67='account_creation_confirmation_3' (Nullable = false), @p68='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzA4ODQ5RDZGODlCRUMxRUFBAA==', @p69='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzA4ODQ5RDZGODlCRUMxRUFBAA==","message_status":"accepted"}]}', @p70='+918974005240' (Nullable = false), @p71=NULL (DbType = Guid), @p72=NULL, @p73='2025-08-26T12:15:41.1479258Z' (Nullable = true) (DbType = DateTime), @p74='campaign', @p75='Sent' (Nullable = false), @p76='25dde674-7163-4830-8367-e72b53df855c', @p77='True', @p78=NULL, @p79='c13be597-6ae2-42bb-9d43-925815f24ff8', @p80='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p81=NULL, @p82=NULL, @p83=NULL (DbType = DateTime), @p84='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @p85=NULL, @p86='2025-08-26T12:15:40.3097484Z' (DbType = DateTime), @p87='system', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='‚ùå WhatsApp API returned an error.', @p92=NULL, @p93='False', @p94=NULL (DbType = DateTime), @p95=NULL, @p96=NULL, @p97='account_creation_confirmation_3' (Nullable = false), @p98=NULL, @p99='b3f6d2c7-766a-49ad-9312-901b8dc9973a' (Nullable = true), @p100=NULL (DbType = DateTime), @p101='4ec881bf-8c87-4b70-b608-b85d7333cb5c', @p102='0', @p103='Failed', @p104='2025-08-26T12:15:40.3097873Z' (Nullable = true) (DbType = DateTime), @p105=NULL, @p106='account_creation_confirmation_3', @p107=NULL (DbType = Guid), @p108='6467d9bf-7096-41ae-91f9-b01c2ba3a8af', @p109='True', @p110=NULL, @p111='c13be597-6ae2-42bb-9d43-925815f24ff8', @p112='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p113=NULL, @p114=NULL, @p115=NULL (DbType = DateTime), @p116='80c43c6a-508b-47ff-9360-201bfd5521d3', @p117=NULL, @p118='2025-08-26T12:15:41.7318891Z' (DbType = DateTime), @p119='system', @p120=NULL (DbType = DateTime), @p121=NULL, @p122=NULL, @p123='‚ùå WhatsApp API returned an error.', @p124=NULL, @p125='False', @p126=NULL (DbType = DateTime), @p127=NULL, @p128=NULL, @p129='account_creation_confirmation_3' (Nullable = false), @p130=NULL, @p131='bf715f44-f979-4ebd-8409-39c7e5db59d7' (Nullable = true), @p132=NULL (DbType = DateTime), @p133='985eb57b-c8eb-41e2-98a1-96a2da4f72de', @p134='0', @p135='Failed', @p136='2025-08-26T12:15:41.7318891Z' (Nullable = true) (DbType = DateTime), @p137=NULL, @p138='account_creation_confirmation_3', @p139=NULL (DbType = Guid), @p140='ea448be5-d814-42bc-a3e6-d0899ed9b572', @p141='True', @p142=NULL, @p143='c13be597-6ae2-42bb-9d43-925815f24ff8', @p144='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p145=NULL, @p146=NULL, @p147=NULL (DbType = DateTime), @p148='26b8b9a2-5624-40ed-a659-65de71d03d20', @p149=NULL, @p150='2025-08-26T12:15:41.1482986Z' (DbType = DateTime), @p151='system', @p152=NULL (DbType = DateTime), @p153=NULL, @p154=NULL, @p155=NULL, @p156=NULL, @p157='False', @p158=NULL (DbType = DateTime), @p159=NULL, @p160=NULL, @p161='account_creation_confirmation_3' (Nullable = false), @p162='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzA4ODQ5RDZGODlCRUMxRUFBAA==', @p163='fc63eae4-f1e6-4933-8d82-957b20a2eadd' (Nullable = true), @p164=NULL (DbType = DateTime), @p165='5f025339-a66b-4fab-8ef0-535fb3ac1a8a', @p166='0', @p167='Sent', @p168='2025-08-26T12:15:41.1482987Z' (Nullable = true) (DbType = DateTime), @p169=NULL, @p170='account_creation_confirmation_3', @p171=NULL (DbType = Guid), @p172='fc98399f-ea4f-4942-9356-6fd6be1a237b', @p173='True', @p174=NULL, @p175='c13be597-6ae2-42bb-9d43-925815f24ff8', @p176='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p177=NULL, @p178=NULL, @p179=NULL (DbType = DateTime), @p180='8aac7c57-6699-4511-897b-4121b407eb1c', @p181=NULL, @p182='2025-08-26T12:15:42.6027971Z' (DbType = DateTime), @p183='system', @p184=NULL (DbType = DateTime), @p185=NULL, @p186=NULL, @p187=NULL, @p188=NULL, @p189='False', @p190=NULL (DbType = DateTime), @p191=NULL, @p192=NULL, @p193='account_creation_confirmation_3' (Nullable = false), @p194='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSODZGMkI0QjVCMkM2N0U3Qzk0AA==', @p195='482dc4d7-d11f-4878-b3bb-2a3b747e1bf3' (Nullable = true), @p196=NULL (DbType = DateTime), @p197='da480a6b-140e-4232-8b76-4c8b951d0732', @p198='0', @p199='Sent', @p200='2025-08-26T12:15:42.6027972Z' (Nullable = true) (DbType = DateTime), @p201=NULL, @p202='account_creation_confirmation_3', @p203=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203);
2025-08-26 17:45:42.658 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 17:45:42.659 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5921.8955ms
2025-08-26 17:45:42.660 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 17:45:42.661 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 5929.8247ms
2025-08-26 17:45:58.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 17:45:58.765 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:58.765 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 2.8512ms
2025-08-26 17:45:58.768 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 17:45:58.770 +05:30 [INF] CORS policy execution successful.
2025-08-26 17:45:58.770 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 17:45:58.771 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 17:46:00.581 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 17:46:00.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:46:00.597 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 17:46:00.598 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 17:46:00.599 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 17:46:01.586 +05:30 [INF] Received HTTP response headers after 986.4325ms - 200
2025-08-26 17:46:01.587 +05:30 [INF] End processing HTTP request after 989.155ms - 200
2025-08-26 17:46:01.593 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 17:46:01.597 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:46:01.599 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 17:46:02.525 +05:30 [INF] Received HTTP response headers after 925.3535ms - 200
2025-08-26 17:46:02.527 +05:30 [INF] End processing HTTP request after 929.3697ms - 200
2025-08-26 17:46:02.535 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='da234c13-7625-42ea-b752-3ae9dc4a2871', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='aef7b2fa-1966-404c-bb5b-6f180fa7116c' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T12:16:02.5283756Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9='https://picsum.photos/seed/picsum/200/300', @p10='shoe_launch_offer' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkFFNDkzQ0NGN0U1RjlGODUzAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkFFNDkzQ0NGN0U1RjlGODUzAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T12:16:02.5283757Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false), @p19='0808d182-3878-45cf-9c61-ca6687f0b313', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-26T12:16:02.5288189Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello {{}}! The moment has arrived! üéâ

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend‚Äîset it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkFFNDkzQ0NGN0U1RjlGODUzAA==', @p42='da234c13-7625-42ea-b752-3ae9dc4a2871' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='2f01a3ad-8c8d-418b-add3-2ca29d7afa8c', @p45='0', @p46='Sent', @p47='2025-08-26T12:16:02.5288190Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='shoe_launch_offer', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 17:46:02.538 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 17:46:02.539 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3767.0876ms
2025-08-26 17:46:02.541 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 17:46:02.541 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 3773.5416ms
2025-08-26 18:49:57.929 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 18:49:57.985 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 18:49:58.004 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 18:49:58.947 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 18:49:59.557 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 18:49:59.799 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 18:49:59.805 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 18:49:59.806 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 18:49:59.807 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 18:49:59.808 +05:30 [INF] Hosting environment: Development
2025-08-26 18:49:59.809 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 18:49:59.818 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__cutoff_0='2025-08-19T13:19:58.1777282Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 18:50:01.561 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 18:50:01.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 164.8623ms
2025-08-26 18:50:01.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 18:50:01.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.107ms
2025-08-26 18:50:01.788 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 18:50:01.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.4508ms
2025-08-26 18:50:01.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 18:50:02.162 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 220.3418ms
2025-08-26 18:50:23.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d5a2126d0f0c22928b8b.hot-update.json - null null
2025-08-26 18:50:23.486 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 18:50:23.600 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d5a2126d0f0c22928b8b.hot-update.json - 404 0 null 120.7487ms
2025-08-26 18:50:23.606 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d5a2126d0f0c22928b8b.hot-update.json, Response status code: 404
2025-08-26 18:50:32.827 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 18:50:32.886 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:32.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 61.6606ms
2025-08-26 18:50:32.892 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 18:50:32.902 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:32.928 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 18:50:33.187 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 18:50:33.600 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 18:50:34.234 +05:30 [INF] Executed DbCommand (324ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 18:50:34.366 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 18:50:34.510 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 18:50:34.520 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 18:50:34.612 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 18:50:34.614 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 18:50:34.622 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:50:34.631 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 1420.3503ms
2025-08-26 18:50:34.633 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 18:50:34.638 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 1745.4198ms
2025-08-26 18:50:34.641 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:50:34.644 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:34.645 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.945ms
2025-08-26 18:50:34.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:50:34.651 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:34.691 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.697 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:50:34.711 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 18:50:34.737 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:50:34.740 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:50:34.754 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 55.4303ms
2025-08-26 18:50:34.755 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.756 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 108.6202ms
2025-08-26 18:50:34.770 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:50:34.773 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:34.777 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.778 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:50:34.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:50:34.792 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:50:34.794 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.123ms
2025-08-26 18:50:34.795 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:50:34.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.2717ms
2025-08-26 18:50:34.805 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:34.812 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.814 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:50:34.821 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:50:34.825 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:50:34.827 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7013ms
2025-08-26 18:50:34.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.830 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.0488ms
2025-08-26 18:50:34.909 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:50:34.911 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:34.912 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.913 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:50:34.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:50:34.922 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:50:34.924 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0473ms
2025-08-26 18:50:34.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:50:34.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.0508ms
2025-08-26 18:50:40.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 18:50:40.032 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:40.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.4118ms
2025-08-26 18:50:40.056 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 18:50:40.060 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:40.062 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 18:50:40.065 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 18:50:40.330 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 18:50:40.333 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:50:40.347 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 279.9939ms
2025-08-26 18:50:40.348 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 18:50:40.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 292.7192ms
2025-08-26 18:50:45.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 18:50:45.810 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:45.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 5.6221ms
2025-08-26 18:50:45.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 18:50:45.819 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:45.821 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:50:45.825 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:50:45.855 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 18:50:45.866 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 18:50:45.871 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 18:50:45.875 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 48.3205ms
2025-08-26 18:50:45.876 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:50:45.878 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 62.8098ms
2025-08-26 18:50:46.276 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:50:46.279 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:46.280 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - 204 null null 3.6203ms
2025-08-26 18:50:46.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:50:46.285 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:46.287 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:50:46.291 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:50:46.313 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 18:50:46.332 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 18:50:46.336 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:50:46.342 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 49.2666ms
2025-08-26 18:50:46.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:50:46.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 61.2308ms
2025-08-26 18:50:49.803 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/390d7020-55e7-4693-b7c8-62a5ca5d742f - null null
2025-08-26 18:50:49.806 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:49.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/390d7020-55e7-4693-b7c8-62a5ca5d742f - 204 null null 3.6166ms
2025-08-26 18:50:49.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/390d7020-55e7-4693-b7c8-62a5ca5d742f - null null
2025-08-26 18:50:49.812 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:50:49.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:50:49.817 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:50:49.977 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='390d7020-55e7-4693-b7c8-62a5ca5d742f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:50:49.981 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:50:49.983 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 164.7016ms
2025-08-26 18:50:49.984 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:50:49.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/390d7020-55e7-4693-b7c8-62a5ca5d742f - 200 null application/json; charset=utf-8 176.1661ms
2025-08-26 18:51:13.071 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 18:51:13.075 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:13.076 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 4.7357ms
2025-08-26 18:51:13.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 18:51:13.087 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:13.089 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 18:51:13.094 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 18:51:13.111 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 18:51:13.116 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:51:13.122 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 26.2023ms
2025-08-26 18:51:13.123 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 18:51:13.125 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 40.7882ms
2025-08-26 18:51:15.034 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-26 18:51:15.037 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:15.038 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 4.2221ms
2025-08-26 18:51:15.041 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-26 18:51:15.044 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:15.045 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-26 18:51:15.049 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 18:51:15.073 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 18:51:15.097 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-26 18:51:15.120 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-26 18:51:15.122 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-26 18:51:16.434 +05:30 [INF] Received HTTP response headers after 1309.4074ms - 200
2025-08-26 18:51:16.435 +05:30 [INF] End processing HTTP request after 1316.5635ms - 200
2025-08-26 18:51:16.583 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='new_feature_announcement', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 18:51:16.641 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='automation_builder_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 18:51:16.645 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='testing_1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 18:51:16.647 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='test_msg', @__it_Language_3='en_GB'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 18:51:16.650 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='tempalte_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-26 18:51:16.733 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p2='274d3709-2f83-45ee-85d4-440b4002a190', @p0='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p1='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p6='6c783a31-ae10-4ef9-a4c6-28df4d1ee1a5', @p3='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p4='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=HqMXtoxlchEQ7kNvwFRKxLr&_nc_oc=Adl5GldyWoa6MyD_fvBTWiiS_pl0AvQSJg1bipv08owEIzz4zWY5u6vZq_s_PJjs6eM&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=0cPzpxN44tEfykGR8gZb0A&oh=01_Q5Aa2QGssPCnrkOjTuNrE7nCKi0fsszMDKWVLjiLgxW1NxTd1Q&oe=68D529BD"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p5='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p10='a85d423e-f7c2-4b27-96d1-630d8bfd87e0', @p7='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p8='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=VUWTYFbh_iMQ7kNvwErWoWV&_nc_oc=AdlYwPN5yNGNyzF2iywEd8Lt6769EQj5dSq1kqTTRclS7YYyEFkQPrC3hU94AvGX3Dg&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=0cPzpxN44tEfykGR8gZb0A&oh=01_Q5Aa2QGmPfmULesYhylZdZcWZ62a41xLRJD8c9ner_z0bvwtJg&oe=68D51659"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p9='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p13='ae93f19e-ee5d-4f4a-ba5f-83443e6473f6', @p11='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p12='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p14='474cf31d-96ae-484d-ac41-c4e367183dcf', @p15='Hi {{1}}, 
Great news! The new {{2}} feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.' (Nullable = false), @p16='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p17='[{"Type":"URL","Text":"Try Now","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"Watch Video","SubType":"url","Index":1,"ParameterValue":"http://wati.io/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p18='MARKETING', @p19='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p20='4029843250610380', @p21='False', @p22='True', @p23='en' (Nullable = false), @p24='2025-08-26T13:21:15.0904701Z' (DbType = DateTime), @p25='new_feature_announcement' (Nullable = false), @p26='2', @p27='pinnacle' (Nullable = false), @p28='{"name":"new_feature_announcement","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hi {{1}}, \nGreat news! The new {{2}} feature you've been waiting for is now live.\n\nYou can now [describe the core benefit of the feature, e.g., \"collaborate with your team in real-time on projects\"]. We built this based on your feedback, and we're excited for you to experience it.\n\nClick below to try it now or watch a quick tutorial.","example":{"body_text":[["Sam","AI Based Bot Integration"]]}},{"type":"FOOTER","text":"Team Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Try Now","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/"]},{"type":"URL","text":"Watch Video","url":"http://wati.io/{{1}}","example":["https://www.mindsmiratus.com/"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"4029843250610380"}' (Nullable = false), @p29='APPROVED' (Nullable = false), @p30='2025-08-26T13:21:15.0904701Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p3, "RawJson" = @p4, "UpdatedAt" = @p5
WHERE "Id" = @p6;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p7, "RawJson" = @p8, "UpdatedAt" = @p9
WHERE "Id" = @p10;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p11, "UpdatedAt" = @p12
WHERE "Id" = @p13;
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30);
2025-08-26 18:51:16.749 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:51:16.753 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1701.7488ms
2025-08-26 18:51:16.754 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-26 18:51:16.755 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 1713.4647ms
2025-08-26 18:51:16.769 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 18:51:16.771 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:16.772 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 18:51:16.773 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 18:51:16.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 18:51:16.783 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:51:16.785 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.0862ms
2025-08-26 18:51:16.786 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 18:51:16.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 17.8714ms
2025-08-26 18:51:20.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - null null
2025-08-26 18:51:20.419 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:20.420 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - 204 null null 3.578ms
2025-08-26 18:51:20.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - null null
2025-08-26 18:51:20.426 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:51:20.427 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 18:51:20.431 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 18:51:20.442 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='new_feature_announcement'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-26 18:51:20.447 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:51:20.449 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 16.7897ms
2025-08-26 18:51:20.451 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 18:51:20.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - 200 null application/json; charset=utf-8 28.3004ms
2025-08-26 18:52:54.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-26 18:52:54.772 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:54.773 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 8.2131ms
2025-08-26 18:52:54.781 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 560
2025-08-26 18:52:54.783 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:54.784 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 18:52:54.788 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 18:52:54.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 18:52:54.839 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 18:52:54.840 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 18:52:55.651 +05:30 [INF] Received HTTP response headers after 810.2917ms - 200
2025-08-26 18:52:55.652 +05:30 [INF] End processing HTTP request after 813.4792ms - 200
2025-08-26 18:52:55.748 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='33c9f5cd-6556-4abf-85cc-3fc995003855', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-26T13:22:55.6755193Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hi Sam, 
Great news! The new AI Bot Integration feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.', @p14='new_feature_announcement' (Nullable = false), @p15='Feature_Launch' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='new_feature_announcement', @p20='["Sam","AI Bot Integration"]', @p21='2025-08-26T13:22:55.6755522Z' (DbType = DateTime), @p22='3f184307-910b-4d1c-8ad4-7205aadb94f0', @p23='33c9f5cd-6556-4abf-85cc-3fc995003855', @p24='True', @p25='2', @p26='Watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='http://wati.io/{{1}}' (Nullable = false), @p29='6b2977fe-8d69-4d68-9727-65a15c3900af', @p30='33c9f5cd-6556-4abf-85cc-3fc995003855', @p31='True', @p32='3', @p33='Call us' (Nullable = false), @p34='PHONE_NUMBER' (Nullable = false), @p35='+917082156227' (Nullable = false), @p36='95d23be1-3d5d-460e-a554-f81407c34610', @p37='33c9f5cd-6556-4abf-85cc-3fc995003855', @p38='True', @p39='1', @p40='Try Now' (Nullable = false), @p41='URL' (Nullable = false), @p42='https://www.mindsmiratus.com/{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-08-26 18:52:55.753 +05:30 [INF] ‚úÖ Campaign 'Feature_Launch' created with 0 recipients, 0 user buttons, 3 template buttons and 2 template parameters
2025-08-26 18:52:55.756 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:52:55.759 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 969.3166ms
2025-08-26 18:52:55.760 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 18:52:55.761 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 980.0873ms
2025-08-26 18:52:55.820 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null null
2025-08-26 18:52:55.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 18:52:55.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 18:52:55.820 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 18:52:55.827 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.830 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.831 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.833 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 11.8432ms
2025-08-26 18:52:55.835 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 13.3951ms
2025-08-26 18:52:55.836 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 16.6688ms
2025-08-26 18:52:55.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 204 null null 14.0599ms
2025-08-26 18:52:55.841 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null null
2025-08-26 18:52:55.843 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 18:52:55.848 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 18:52:55.850 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.852 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.854 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.855 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 18:52:55.855 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 18:52:55.856 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 18:52:55.860 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 18:52:55.860 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 18:52:55.861 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 18:52:55.868 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-26 18:52:55.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 18:52:55.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 18:52:55.879 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 18:52:55.887 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.9756ms
2025-08-26 18:52:55.888 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 18:52:55.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 18:52:55.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 41.2611ms
2025-08-26 18:52:55.891 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:52:55.895 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 18:52:55.897 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 18:52:55.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 18:52:55.904 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 18:52:55.905 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 6.4241ms
2025-08-26 18:52:55.908 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 18:52:55.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 20.1928ms
2025-08-26 18:52:55.910 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 18:52:55.909 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 18:52:55.926 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 18:52:55.931 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 68.6826ms
2025-08-26 18:52:55.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 18:52:55.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 200 null application/json; charset=utf-8 92.0854ms
2025-08-26 18:52:55.949 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 18:52:55.954 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 90.2061ms
2025-08-26 18:52:55.955 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 18:52:55.956 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 112.5137ms
2025-08-26 18:53:08.926 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/assign-contacts - null null
2025-08-26 18:53:08.929 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:08.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/assign-contacts - 204 null null 3.7701ms
2025-08-26 18:53:08.932 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/assign-contacts - application/json 55
2025-08-26 18:53:08.936 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:08.937 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 18:53:08.940 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 18:53:08.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 18:53:09.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='cf68a9ec-8ccc-432b-a507-5fdc6e1f045a', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='33c9f5cd-6556-4abf-85cc-3fc995003855', @p4=NULL, @p5=NULL, @p6='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-26T13:23:08.9837804Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-26T13:23:08.9838212Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-26 18:53:09.010 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:53:09.012 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 70.1836ms
2025-08-26 18:53:09.013 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 18:53:09.014 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/assign-contacts - 200 null application/json; charset=utf-8 81.2328ms
2025-08-26 18:53:14.061 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 18:53:14.064 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:14.066 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.4622ms
2025-08-26 18:53:14.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 18:53:14.074 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:14.075 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 18:53:14.076 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 18:53:14.083 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 18:53:14.086 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:53:14.088 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.8477ms
2025-08-26 18:53:14.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 18:53:14.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.4838ms
2025-08-26 18:53:18.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null null
2025-08-26 18:53:18.156 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:18.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 204 null null 3.4036ms
2025-08-26 18:53:18.159 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null 0
2025-08-26 18:53:18.162 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:18.163 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 18:53:18.167 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 18:53:22.234 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 18:53:22.242 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 18:53:22.255 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 18:53:22.261 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 18:53:22.264 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 18:53:22.266 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 18:53:22.367 +05:30 [INF] Received HTTP response headers after 99.926ms - 200
2025-08-26 18:53:22.374 +05:30 [INF] End processing HTTP request after 110.1407ms - 200
2025-08-26 18:53:22.385 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 18:53:22.425 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 18:53:22.427 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 18:53:22.428 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 18:53:32.091 +05:30 [INF] Received HTTP response headers after 9642.2661ms - 200
2025-08-26 18:53:32.092 +05:30 [INF] End processing HTTP request after 9665.2704ms - 200
2025-08-26 18:53:32.229 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='713a008a-34e3-4faf-aeb9-1e6bda99da63', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='33c9f5cd-6556-4abf-85cc-3fc995003855' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-26T13:23:32.1143493Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='new_feature_announcement' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T13:23:32.1143841Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='33c9f5cd-6556-4abf-85cc-3fc995003855', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-26T13:23:32.1470295Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Sam, 
Great news! The new AI Bot Integration feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA==', @p42='713a008a-34e3-4faf-aeb9-1e6bda99da63' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='cf68a9ec-8ccc-432b-a507-5fdc6e1f045a', @p45='0', @p46='Sent', @p47='2025-08-26T13:23:32.1470826Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='new_feature_announcement', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 18:53:32.235 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 18:53:32.237 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 14068.2215ms
2025-08-26 18:53:32.238 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 18:53:32.239 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 200 null application/json; charset=utf-8 14079.6379ms
2025-08-26 18:53:59.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 18:53:59.645 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:59.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 204 null null 11.4126ms
2025-08-26 18:53:59.649 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 18:53:59.652 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:53:59.653 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:53:59.654 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:53:59.661 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 18:53:59.665 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 18:53:59.666 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 10.1259ms
2025-08-26 18:53:59.667 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:53:59.668 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 200 null application/json; charset=utf-8 19.4611ms
2025-08-26 18:54:00.113 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:54:00.117 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:00.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 204 null null 4.9477ms
2025-08-26 18:54:00.122 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:54:00.125 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:00.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:54:00.128 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:54:00.133 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 18:54:00.139 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 18:54:00.143 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:00.153 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 22.9622ms
2025-08-26 18:54:00.156 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:54:00.158 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 35.2754ms
2025-08-26 18:54:05.546 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:05.548 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:05.549 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 204 null null 3.5558ms
2025-08-26 18:54:05.552 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:05.554 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:05.555 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:05.556 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:54:05.561 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:54:05.571 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:05.582 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:05.584 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:05.586 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 28.0454ms
2025-08-26 18:54:05.587 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:05.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 200 null application/json; charset=utf-8 35.2681ms
2025-08-26 18:54:27.998 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:28.001 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:28.002 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 204 null null 3.6952ms
2025-08-26 18:54:28.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:28.007 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:28.008 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:28.009 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:54:28.014 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:54:28.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:28.024 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:28.026 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:28.028 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 17.0496ms
2025-08-26 18:54:28.028 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:28.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 200 null application/json; charset=utf-8 24.6251ms
2025-08-26 18:54:31.504 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:31.506 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:31.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.872ms
2025-08-26 18:54:31.509 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:31.511 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:31.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:31.513 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:54:31.517 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:54:31.520 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:54:31.521 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8617ms
2025-08-26 18:54:31.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:31.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.268ms
2025-08-26 18:54:31.566 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:31.568 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:31.569 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:31.570 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:54:31.575 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:54:31.579 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:54:31.580 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0326ms
2025-08-26 18:54:31.581 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:31.582 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.979ms
2025-08-26 18:54:31.622 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 18:54:31.626 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:31.633 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:31.636 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:31.636 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 204 null null 13.8865ms
2025-08-26 18:54:31.637 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:31.640 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 18:54:31.641 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:54:31.643 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:31.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:54:31.647 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:54:31.652 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:54:31.654 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:54:31.657 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6768ms
2025-08-26 18:54:31.659 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 18:54:31.661 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:31.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 18:54:31.664 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.1796ms
2025-08-26 18:54:31.665 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 9.523ms
2025-08-26 18:54:31.669 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:54:31.670 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 200 null application/json; charset=utf-8 30.0683ms
2025-08-26 18:54:32.120 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:54:32.123 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:32.124 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 204 null null 3.3347ms
2025-08-26 18:54:32.127 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:54:32.129 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:32.130 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:54:32.131 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:54:32.134 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 18:54:32.140 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 18:54:32.141 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:32.143 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.2641ms
2025-08-26 18:54:32.144 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:54:32.145 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 18.096ms
2025-08-26 18:54:33.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:33.221 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:33.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 204 null null 2.9228ms
2025-08-26 18:54:33.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:33.226 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:33.227 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:33.228 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:54:33.232 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:54:33.238 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:33.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:33.243 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:33.244 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 14.6495ms
2025-08-26 18:54:33.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:33.247 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 200 null application/json; charset=utf-8 22.8474ms
2025-08-26 18:54:51.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:51.613 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:51.614 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 204 null null 2.8829ms
2025-08-26 18:54:51.631 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:51.634 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:51.634 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:51.635 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:54:51.640 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:54:51.644 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:51.647 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:51.649 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:51.650 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 13.2489ms
2025-08-26 18:54:51.651 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:51.652 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 200 null application/json; charset=utf-8 21.1754ms
2025-08-26 18:54:54.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:54.495 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:54.496 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9195ms
2025-08-26 18:54:54.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:54.502 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:54.504 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:54.504 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:54:54.508 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:54:54.512 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:54:54.514 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6753ms
2025-08-26 18:54:54.515 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:54.516 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0128ms
2025-08-26 18:54:54.541 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:54.544 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:54.545 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:54.546 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:54:54.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:54:54.554 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:54:54.555 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3434ms
2025-08-26 18:54:54.556 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:54.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.5462ms
2025-08-26 18:54:54.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 18:54:54.578 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 18:54:54.580 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:54.582 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:54.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 204 null null 5.3893ms
2025-08-26 18:54:54.583 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:54.587 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 18:54:54.587 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 18:54:54.589 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:54.592 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:54:54.593 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 18:54:54.594 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:54:54.597 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 18:54:54.600 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6392ms
2025-08-26 18:54:54.600 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 18:54:54.602 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 18:54:54.604 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 18:54:54.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.4333ms
2025-08-26 18:54:54.606 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 8.4467ms
2025-08-26 18:54:54.611 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 18:54:54.611 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 200 null application/json; charset=utf-8 24.8524ms
2025-08-26 18:54:55.076 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:54:55.078 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:55.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 204 null null 3.4816ms
2025-08-26 18:54:55.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 18:54:55.085 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:55.086 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:54:55.087 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 18:54:55.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 18:54:55.097 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 18:54:55.100 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:55.102 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.0109ms
2025-08-26 18:54:55.103 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 18:54:55.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 22.3048ms
2025-08-26 18:54:56.039 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:54:56.041 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:54:56.042 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:56.043 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:54:56.046 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:54:56.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:56.054 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 18:54:56.056 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:54:56.057 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.7225ms
2025-08-26 18:54:56.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:54:56.059 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 200 null application/json; charset=utf-8 20.1092ms
2025-08-26 18:55:01.281 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:55:01.284 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:55:01.285 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 204 null null 3.3474ms
2025-08-26 18:55:01.288 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - null null
2025-08-26 18:55:01.290 +05:30 [INF] CORS policy execution successful.
2025-08-26 18:55:01.291 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:55:01.291 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 18:55:01.295 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 18:55:01.299 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 18:55:01.307 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVFN0E3NkZGMjU5M0FDMTI3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 18:55:01.309 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 18:55:01.310 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 16.9715ms
2025-08-26 18:55:01.311 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 18:55:01.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bd6dd6d1-507c-481d-8f4c-1ec1abaf38ac - 200 null application/json; charset=utf-8 24.1936ms
2025-08-26 19:10:27.360 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 19:10:27.397 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 19:10:27.410 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 19:10:28.019 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 19:10:28.449 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 19:10:28.618 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 19:10:28.619 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 19:10:28.620 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 19:10:28.620 +05:30 [INF] Hosting environment: Development
2025-08-26 19:10:28.621 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 19:10:28.625 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 19:10:28.640 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[@__cutoff_0='2025-08-19T13:40:27.4915987Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 19:10:31.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 19:10:31.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 140.0042ms
2025-08-26 19:10:31.186 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 19:10:31.193 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.3382ms
2025-08-26 19:10:31.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 19:10:31.262 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.5991ms
2025-08-26 19:10:31.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 19:10:31.582 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.0212ms
2025-08-26 19:11:31.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 19:11:31.268 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 19:11:31.379 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:11:31.381 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 118.1759ms
2025-08-26 19:11:31.384 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-26 19:11:31.391 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:11:31.491 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 19:11:31.504 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 19:11:31.580 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-26 19:11:31.599 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 19:11:31.615 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 107.1354ms
2025-08-26 19:11:31.617 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-26 19:11:31.621 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 236.9911ms
2025-08-26 19:11:34.393 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - null null
2025-08-26 19:11:34.396 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:11:34.397 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - 204 null null 4.129ms
2025-08-26 19:11:34.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - null null
2025-08-26 19:11:34.402 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:11:34.406 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 19:11:34.411 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-26 19:11:34.433 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='new_feature_announcement'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-26 19:11:34.440 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 19:11:34.443 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 30.7296ms
2025-08-26 19:11:34.444 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-26 19:11:34.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/new_feature_announcement - 200 null application/json; charset=utf-8 45.7144ms
2025-08-26 19:12:31.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-26 19:12:31.113 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:31.114 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 7.5902ms
2025-08-26 19:12:31.120 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 571
2025-08-26 19:12:31.123 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:31.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 19:12:31.132 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 19:12:31.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 19:12:31.297 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 19:12:31.299 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 19:12:32.449 +05:30 [INF] Received HTTP response headers after 1146.9354ms - 200
2025-08-26 19:12:32.451 +05:30 [INF] End processing HTTP request after 1154.3517ms - 200
2025-08-26 19:12:32.723 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[@p0='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-26T13:42:32.5453589Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hi Robert, 
Great news! The new Ai Bot integration feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.', @p14='new_feature_announcement' (Nullable = false), @p15='feature_anouncement_v2' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='new_feature_announcement', @p20='["Robert","Ai Bot integration"]', @p21='2025-08-26T13:42:32.5454163Z' (DbType = DateTime), @p22='691dc3e5-231d-48f1-8cd0-765f84e6d17c', @p23='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p24='True', @p25='2', @p26='Watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='http://wati.io/{{1}}' (Nullable = false), @p29='773a4a1f-c4b5-43a4-baee-1b70b64b8f61', @p30='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p31='True', @p32='1', @p33='Try Now' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/{{1}}' (Nullable = false), @p36='bd4443d0-1769-4d59-b362-c22bac009340', @p37='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p38='True', @p39='3', @p40='Call us' (Nullable = false), @p41='PHONE_NUMBER' (Nullable = false), @p42='+917082156227' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-08-26 19:12:32.741 +05:30 [INF] ‚úÖ Campaign 'feature_anouncement_v2' created with 0 recipients, 0 user buttons, 3 template buttons and 2 template parameters
2025-08-26 19:12:32.745 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 19:12:32.749 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1615.8043ms
2025-08-26 19:12:32.750 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-26 19:12:32.751 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1631.1617ms
2025-08-26 19:12:32.808 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 19:12:32.812 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 19:12:32.811 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 19:12:32.811 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-26 19:12:32.816 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.818 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.820 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.821 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.822 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 14.0989ms
2025-08-26 19:12:32.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 204 null null 13.6148ms
2025-08-26 19:12:32.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 11.535ms
2025-08-26 19:12:32.825 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 14.2274ms
2025-08-26 19:12:32.833 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 19:12:32.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-26 19:12:32.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 19:12:32.840 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.841 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.843 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.844 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 19:12:32.845 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 19:12:32.845 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 19:12:32.849 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 19:12:32.849 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 19:12:32.850 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 19:12:32.855 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-26 19:12:32.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 19:12:32.869 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 19:12:32.877 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 26.9026ms
2025-08-26 19:12:32.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-26 19:12:32.878 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 19:12:32.881 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:32.882 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 48.7665ms
2025-08-26 19:12:32.883 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 19:12:32.886 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-26 19:12:32.895 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-26 19:12:32.898 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 19:12:32.900 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 12.7635ms
2025-08-26 19:12:32.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-26 19:12:32.902 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-26 19:12:32.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 27.8726ms
2025-08-26 19:12:32.945 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-26 19:12:32.945 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-26 19:12:32.961 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-26 19:12:32.971 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 118.4539ms
2025-08-26 19:12:32.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-26 19:12:32.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 200 null application/json; charset=utf-8 136.9244ms
2025-08-26 19:12:32.988 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 19:12:32.995 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 143.736ms
2025-08-26 19:12:32.996 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-26 19:12:32.997 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 162.2667ms
2025-08-26 19:12:36.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/assign-contacts - null null
2025-08-26 19:12:36.632 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:36.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/assign-contacts - 204 null null 3.9009ms
2025-08-26 19:12:36.636 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/assign-contacts - application/json 55
2025-08-26 19:12:36.639 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:36.640 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 19:12:36.645 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 19:12:36.673 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-26 19:12:36.710 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='9e79b33c-3f68-4953-a61b-5dcc02f155d8', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p4=NULL, @p5=NULL, @p6='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-26T13:42:36.6790521Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-26T13:42:36.6791574Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-26 19:12:36.714 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 19:12:36.715 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 69.2747ms
2025-08-26 19:12:36.716 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-26 19:12:36.717 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/assign-contacts - 200 null application/json; charset=utf-8 81.8566ms
2025-08-26 19:12:39.931 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 19:12:39.934 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:39.935 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.8314ms
2025-08-26 19:12:39.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 19:12:39.941 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:39.943 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 19:12:39.947 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 19:12:39.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 19:12:39.972 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 19:12:39.976 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 27.9196ms
2025-08-26 19:12:39.977 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 19:12:39.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 39.0977ms
2025-08-26 19:12:43.118 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 19:12:43.120 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:43.121 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 204 null null 3.156ms
2025-08-26 19:12:43.124 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null 0
2025-08-26 19:12:43.127 +05:30 [INF] CORS policy execution successful.
2025-08-26 19:12:43.128 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 19:12:43.132 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 19:12:46.506 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 19:12:46.517 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 19:12:46.527 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 19:12:46.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 19:12:46.534 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 19:12:46.535 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 19:12:46.612 +05:30 [INF] Received HTTP response headers after 76.6235ms - 200
2025-08-26 19:12:46.613 +05:30 [INF] End processing HTTP request after 79.8649ms - 200
2025-08-26 19:12:46.624 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 19:12:46.640 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 19:12:46.641 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 19:12:46.642 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 19:12:51.262 +05:30 [INF] Received HTTP response headers after 4618.7731ms - 200
2025-08-26 19:12:51.263 +05:30 [INF] End processing HTTP request after 4622.7936ms - 200
2025-08-26 19:12:51.375 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='e1f62641-bf9d-4a4d-af24-2183ad07a203', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='3ffff2d2-0080-437b-ace5-8e5c0c343acf' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-26T13:42:51.2668647Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='new_feature_announcement' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjE5MzJEMzRENDRGNkRCMTU1AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjE5MzJEMzRENDRGNkRCMTU1AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T13:42:51.2668919Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='032df711-ce6e-445e-959d-89b250940edb', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-26T13:42:51.2953303Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Robert, 
Great news! The new Ai Bot integration feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjE5MzJEMzRENDRGNkRCMTU1AA==', @p42='e1f62641-bf9d-4a4d-af24-2183ad07a203' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='9e79b33c-3f68-4953-a61b-5dcc02f155d8', @p45='0', @p46='Sent', @p47='2025-08-26T13:42:51.2953717Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='new_feature_announcement', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 19:12:51.380 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 19:12:51.381 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8247.662ms
2025-08-26 19:12:51.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 19:12:51.383 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 200 null application/json; charset=utf-8 8259.4884ms
2025-08-26 20:03:00.847 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 20:03:00.916 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 20:03:00.939 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 20:03:02.269 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 20:03:03.140 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 20:03:03.401 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 20:03:03.450 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[@__cutoff_0='2025-08-19T14:33:01.1399544Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 20:03:03.522 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 20:03:03.524 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 20:03:03.526 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 20:03:03.528 +05:30 [INF] Hosting environment: Development
2025-08-26 20:03:03.529 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 20:03:04.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 20:03:04.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 268.2766ms
2025-08-26 20:03:05.010 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 20:03:05.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7686ms
2025-08-26 20:03:05.100 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 20:03:05.150 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.4146ms
2025-08-26 20:03:05.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 20:03:05.654 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 291.34ms
2025-08-26 20:06:50.998 +05:30 [INF] Request starting HTTP/1.1 GET http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1146894545&hub.verify_token=xbytechat-secret-token - null null
2025-08-26 20:06:51.006 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 20:06:51.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 20:06:51.245 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 20:06:51.281 +05:30 [INF] ‚úÖ WhatsApp webhook verified successfully.
2025-08-26 20:06:51.290 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-26 20:06:51.300 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 47.0238ms
2025-08-26 20:06:51.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 20:06:51.305 +05:30 [INF] Request finished HTTP/1.1 GET http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1146894545&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 307.1872ms
2025-08-26 20:13:34.537 +05:30 [INF] Request starting HTTP/1.1 GET http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1604994613&hub.verify_token=xbytechat-secret-token - null null
2025-08-26 20:13:34.562 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 20:13:34.565 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 20:13:34.572 +05:30 [INF] ‚úÖ WhatsApp webhook verified successfully.
2025-08-26 20:13:34.574 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-26 20:13:34.576 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 9.0286ms
2025-08-26 20:13:34.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 20:13:34.580 +05:30 [INF] Request finished HTTP/1.1 GET http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1604994613&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 42.8969ms
2025-08-26 20:15:06.307 +05:30 [INF] Request starting HTTP/1.1 GET http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1701042311&hub.verify_token=xbytechat-secret-token - null null
2025-08-26 20:15:06.314 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 20:15:06.316 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 20:15:06.320 +05:30 [INF] ‚úÖ WhatsApp webhook verified successfully.
2025-08-26 20:15:06.323 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-26 20:15:06.326 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 7.1901ms
2025-08-26 20:15:06.328 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 20:15:06.332 +05:30 [INF] Request finished HTTP/1.1 GET http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1701042311&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 25.0104ms
2025-08-26 20:16:20.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 20:16:20.329 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:20.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 204 null null 39.8998ms
2025-08-26 20:16:20.338 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null 0
2025-08-26 20:16:20.344 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:20.482 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '26-08-2025 02:20:34 PM', Current time (UTC): '26-08-2025 02:46:20 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-26 20:16:20.554 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '26-08-2025 02:20:34 PM', Current time (UTC): '26-08-2025 02:46:20 PM'.
2025-08-26 20:16:20.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 20:16:20.564 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 20:16:23.451 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 20:16:23.600 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 20:16:23.845 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 20:16:23.984 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 20:16:24.018 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:16:24.021 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:16:25.961 +05:30 [INF] Received HTTP response headers after 1936.6096ms - 200
2025-08-26 20:16:25.964 +05:30 [INF] End processing HTTP request after 1948.3997ms - 200
2025-08-26 20:16:26.422 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 20:16:26.441 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 20:16:26.443 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:16:26.444 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:16:27.483 +05:30 [INF] Received HTTP response headers after 1036.8687ms - 400
2025-08-26 20:16:27.485 +05:30 [INF] End processing HTTP request after 1041.873ms - 400
2025-08-26 20:16:27.487 +05:30 [WRN] Pinnacle send failed (HTTP 400): {"error":{"message":"(#100) The parameter messaging_product is required.","type":"OAuthException","code":100,"fbtrace_id":"Ab1CkmVWe8te3bJWmlHuUOo"}}
2025-08-26 20:16:27.905 +05:30 [ERR] Failed executing DbCommand (57ms) [Parameters=[@p0='7f7568bf-db92-4299-9813-c2b008ba0c2b', @p1='True', @p2=NULL, @p3='00000000-0000-0000-0000-000000000000', @p4='00000000-0000-0000-0000-000000000000', @p5=NULL, @p6=NULL, @p7=NULL (DbType = DateTime), @p8='00000000-0000-0000-0000-000000000000', @p9=NULL, @p10='2025-08-26T14:46:27.5786673Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = DateTime), @p13=NULL, @p14=NULL, @p15=NULL, @p16=NULL, @p17='False', @p18=NULL (DbType = DateTime), @p19=NULL, @p20=NULL, @p21='' (Nullable = false), @p22=NULL, @p23=NULL (DbType = Guid), @p24=NULL (DbType = DateTime), @p25='00000000-0000-0000-0000-000000000000', @p26='0', @p27='Failed', @p28=NULL (DbType = DateTime), @p29=NULL, @p30=NULL, @p31=NULL (DbType = Guid), @p32='6662b989-7695-4ad5-b882-48a7e91f438d', @p33='00000000-0000-0000-0000-000000000000', @p34=NULL (DbType = Guid), @p35=NULL (DbType = Guid), @p36=NULL (DbType = Guid), @p37=NULL (DbType = Guid), @p38='2025-08-26T14:46:27.4906634Z' (DbType = DateTime), @p39=NULL, @p40='False', @p41=NULL, @p42=NULL (Nullable = false), @p43=NULL, @p44=NULL, @p45=NULL (Nullable = false), @p46=NULL (DbType = Guid), @p47=NULL, @p48=NULL (DbType = DateTime), @p49=NULL, @p50='Queued' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 20:16:27.950 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignSendLogs
    ConstraintName: FK_CampaignSendLogs_CampaignRecipients_RecipientId
    File: ri_triggers.c
    Line: 2619
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignSendLogs
    ConstraintName: FK_CampaignSendLogs_CampaignRecipients_RecipientId
    File: ri_triggers.c
    Line: 2619
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-26 20:16:30.937 +05:30 [ERR] Error while sending text template campaign
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignSendLogs
    ConstraintName: FK_CampaignSendLogs_CampaignRecipients_RecipientId
    File: ri_triggers.c
    Line: 2619
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1273
2025-08-26 20:16:32.995 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 20:16:33.002 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 12436.3501ms
2025-08-26 20:16:33.006 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 20:16:33.168 +05:30 [ERR] ‚ùå An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 811
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-26 20:16:33.181 +05:30 [ERR] Response has already started, unable to write error response for path: /api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf
2025-08-26 20:16:33.187 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 401 null application/json 12849.3561ms
2025-08-26 20:16:44.269 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 20:16:44.274 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:44.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.7477ms
2025-08-26 20:16:44.280 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 20:16:44.284 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:44.287 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 20:16:44.293 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 20:16:44.330 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 20:16:44.355 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 20:16:44.431 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 20:16:44.594 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 20:16:44.610 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 20:16:44.630 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 20:16:44.633 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 20:16:44.639 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:44.673 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 378.0112ms
2025-08-26 20:16:44.676 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 20:16:44.678 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 397.8999ms
2025-08-26 20:16:44.684 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:44.690 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:44.692 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.7974ms
2025-08-26 20:16:44.697 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:44.702 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:44.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:44.731 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:44.750 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 20:16:44.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:44.793 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:44.814 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 79.4587ms
2025-08-26 20:16:44.817 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:44.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 122.542ms
2025-08-26 20:16:44.851 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:44.861 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:44.873 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:44.876 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:44.893 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:44.899 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:44.901 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.3822ms
2025-08-26 20:16:44.904 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:44.904 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:44.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 55.7752ms
2025-08-26 20:16:44.910 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:44.919 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:44.921 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:44.930 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:44.938 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:44.940 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.3047ms
2025-08-26 20:16:44.942 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:44.945 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.5749ms
2025-08-26 20:16:44.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:44.999 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:45.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:45.007 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:45.015 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:45.021 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:45.023 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.4046ms
2025-08-26 20:16:45.026 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:45.028 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.6974ms
2025-08-26 20:16:54.938 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 20:16:54.942 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:54.944 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.5507ms
2025-08-26 20:16:54.951 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 20:16:54.955 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:54.956 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 20:16:54.958 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 20:16:54.965 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 20:16:54.970 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 20:16:54.979 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 20:16:54.986 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 20:16:54.990 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 20:16:54.992 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 20:16:54.993 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 20:16:54.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:54.998 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 37.2197ms
2025-08-26 20:16:55.000 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 20:16:55.002 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 51.4759ms
2025-08-26 20:16:55.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:55.011 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:55.012 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.1689ms
2025-08-26 20:16:55.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:55.022 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:55.024 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.027 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:55.033 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:55.038 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:55.042 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.644ms
2025-08-26 20:16:55.044 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.3226ms
2025-08-26 20:16:55.068 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:55.073 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:55.075 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.077 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:55.085 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:55.090 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:55.092 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8812ms
2025-08-26 20:16:55.094 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:55.095 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.099 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:55.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.6048ms
2025-08-26 20:16:55.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.112 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:55.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:55.126 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:55.129 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.0052ms
2025-08-26 20:16:55.132 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.134 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.1364ms
2025-08-26 20:16:55.229 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 20:16:55.234 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:16:55.236 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.238 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 20:16:55.245 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 20:16:55.251 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 20:16:55.254 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.8323ms
2025-08-26 20:16:55.255 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 20:16:55.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.0575ms
2025-08-26 20:17:01.239 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 20:17:01.243 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:17:01.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.6094ms
2025-08-26 20:17:01.264 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 20:17:01.270 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:17:01.272 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 20:17:01.279 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 20:17:01.337 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 20:17:01.344 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 20:17:01.366 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 84.1673ms
2025-08-26 20:17:01.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 20:17:01.371 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 106.8781ms
2025-08-26 20:17:05.402 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 20:17:05.408 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:17:05.410 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 204 null null 8.2283ms
2025-08-26 20:17:05.414 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null 0
2025-08-26 20:17:05.418 +05:30 [INF] CORS policy execution successful.
2025-08-26 20:17:05.420 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 20:17:05.422 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 20:17:07.506 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 20:17:07.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 20:17:07.518 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 20:17:07.522 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:17:07.524 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:17:07.826 +05:30 [INF] Received HTTP response headers after 300.0986ms - 200
2025-08-26 20:17:07.827 +05:30 [INF] End processing HTTP request after 305.5712ms - 200
2025-08-26 20:17:07.833 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 20:17:07.837 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 20:17:07.838 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:17:07.840 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 20:17:08.341 +05:30 [INF] Received HTTP response headers after 499.464ms - 400
2025-08-26 20:17:08.344 +05:30 [INF] End processing HTTP request after 505.6444ms - 400
2025-08-26 20:17:08.346 +05:30 [WRN] Pinnacle send failed (HTTP 400): {"error":{"message":"(#100) The parameter messaging_product is required.","type":"OAuthException","code":100,"fbtrace_id":"A3yBEhh38fKWkWtWL9oq7PM"}}
2025-08-26 20:17:08.374 +05:30 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='aa0dfb0c-75c5-4301-8e69-6495a9cde930', @p1='True', @p2=NULL, @p3='00000000-0000-0000-0000-000000000000', @p4='00000000-0000-0000-0000-000000000000', @p5=NULL, @p6=NULL, @p7=NULL (DbType = DateTime), @p8='00000000-0000-0000-0000-000000000000', @p9=NULL, @p10='2025-08-26T14:47:08.3677942Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = DateTime), @p13=NULL, @p14=NULL, @p15=NULL, @p16=NULL, @p17='False', @p18=NULL (DbType = DateTime), @p19=NULL, @p20=NULL, @p21='' (Nullable = false), @p22=NULL, @p23=NULL (DbType = Guid), @p24=NULL (DbType = DateTime), @p25='00000000-0000-0000-0000-000000000000', @p26='0', @p27='Failed', @p28=NULL (DbType = DateTime), @p29=NULL, @p30=NULL, @p31=NULL (DbType = Guid), @p32='51f7a688-1bdc-4973-b665-017778b8ee17', @p33='00000000-0000-0000-0000-000000000000', @p34=NULL (DbType = Guid), @p35=NULL (DbType = Guid), @p36=NULL (DbType = Guid), @p37=NULL (DbType = Guid), @p38='2025-08-26T14:47:08.3656395Z' (DbType = DateTime), @p39=NULL, @p40='False', @p41=NULL, @p42=NULL (Nullable = false), @p43=NULL, @p44=NULL, @p45=NULL (Nullable = false), @p46=NULL (DbType = Guid), @p47=NULL, @p48=NULL (DbType = DateTime), @p49=NULL, @p50='Queued' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 20:17:08.383 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignSendLogs
    ConstraintName: FK_CampaignSendLogs_CampaignRecipients_RecipientId
    File: ri_triggers.c
    Line: 2619
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignSendLogs
    ConstraintName: FK_CampaignSendLogs_CampaignRecipients_RecipientId
    File: ri_triggers.c
    Line: 2619
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-26 20:17:10.602 +05:30 [ERR] Error while sending text template campaign
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "CampaignSendLogs" violates foreign key constraint "FK_CampaignSendLogs_CampaignRecipients_RecipientId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignSendLogs
    ConstraintName: FK_CampaignSendLogs_CampaignRecipients_RecipientId
    File: ri_triggers.c
    Line: 2619
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1273
2025-08-26 20:17:12.226 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 20:17:12.237 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6812.5124ms
2025-08-26 20:17:12.240 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 20:17:12.242 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 400 null application/json; charset=utf-8 6828.3542ms
2025-08-26 22:02:14.037 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 22:02:14.094 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 22:02:14.113 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 22:02:15.699 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 22:02:16.616 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 22:02:16.965 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 22:02:17.007 +05:30 [INF] Executed DbCommand (98ms) [Parameters=[@__cutoff_0='2025-08-19T16:32:14.2684637Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 22:02:17.021 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 22:02:17.023 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 22:02:17.026 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 22:02:17.027 +05:30 [INF] Hosting environment: Development
2025-08-26 22:02:17.029 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 22:02:17.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 22:02:18.158 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 283.5978ms
2025-08-26 22:02:18.352 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 22:02:18.352 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 22:02:18.367 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.862ms
2025-08-26 22:02:18.405 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.5484ms
2025-08-26 22:02:18.594 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 22:02:19.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 452.3722ms
2025-08-26 22:02:31.313 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 22:02:31.322 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 22:02:31.402 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:31.408 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 95.1345ms
2025-08-26 22:02:31.415 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 22:02:31.433 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:31.765 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '26-08-2025 03:46:54 PM', Current time (UTC): '26-08-2025 04:32:31 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-26 22:02:31.844 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '26-08-2025 03:46:54 PM', Current time (UTC): '26-08-2025 04:32:31 PM'.
2025-08-26 22:02:31.850 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:02:31.878 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 22:02:32.001 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 22:02:32.127 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 22:02:32.292 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 22:02:32.474 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 22:02:32.486 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 22:02:32.504 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 22:02:32.508 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 22:02:32.518 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:02:32.530 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 643.6377ms
2025-08-26 22:02:32.534 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:02:32.790 +05:30 [ERR] ‚ùå An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 811
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-26 22:02:32.813 +05:30 [ERR] Response has already started, unable to write error response for path: /api/auth/login
2025-08-26 22:02:32.820 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json 1404.6527ms
2025-08-26 22:02:34.818 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 22:02:34.824 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:34.828 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:02:34.830 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 22:02:34.839 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 22:02:34.853 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 22:02:34.863 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 22:02:34.876 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 22:02:34.881 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 22:02:34.883 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 22:02:34.884 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 22:02:34.887 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:02:34.899 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 66.6042ms
2025-08-26 22:02:34.902 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:02:34.904 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 85.5038ms
2025-08-26 22:02:34.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:02:34.916 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:34.918 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.0684ms
2025-08-26 22:02:34.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:02:34.935 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:34.958 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:34.966 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:02:34.989 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 22:02:35.038 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:02:35.043 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:02:35.061 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 91.3216ms
2025-08-26 22:02:35.064 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 136.3359ms
2025-08-26 22:02:35.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:02:35.097 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:35.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.104 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:02:35.114 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:02:35.119 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:02:35.122 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6487ms
2025-08-26 22:02:35.124 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:02:35.124 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.129 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:35.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.1269ms
2025-08-26 22:02:35.133 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.138 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:02:35.149 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:02:35.155 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:02:35.159 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9137ms
2025-08-26 22:02:35.162 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.164 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.6783ms
2025-08-26 22:02:35.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:02:35.239 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:35.245 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.250 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:02:35.259 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:02:35.265 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:02:35.268 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.5443ms
2025-08-26 22:02:35.270 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:02:35.272 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.2026ms
2025-08-26 22:02:40.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:02:40.895 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:40.897 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.3252ms
2025-08-26 22:02:40.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:02:40.908 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:40.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:02:40.917 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:02:40.987 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:02:40.993 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:02:41.014 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 93.337ms
2025-08-26 22:02:41.016 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:02:41.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 116.998ms
2025-08-26 22:02:43.061 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 22:02:43.064 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:43.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 204 null null 4.8951ms
2025-08-26 22:02:43.070 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null 0
2025-08-26 22:02:43.075 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:02:43.077 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:02:43.083 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:02:45.813 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 22:02:45.832 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:02:46.026 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:02:46.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:02:46.232 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:02:46.236 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:02:47.566 +05:30 [INF] Received HTTP response headers after 1324.3408ms - 200
2025-08-26 22:02:47.569 +05:30 [INF] End processing HTTP request after 1337.8773ms - 200
2025-08-26 22:02:47.758 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:02:47.793 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 22:02:47.795 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:02:47.797 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:02:50.883 +05:30 [INF] Received HTTP response headers after 3083.6039ms - 200
2025-08-26 22:02:50.885 +05:30 [INF] End processing HTTP request after 3089.8718ms - 200
2025-08-26 22:02:51.409 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@p0='b589e2da-82ba-4962-9128-538b9fab565e', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='3ffff2d2-0080-437b-ace5-8e5c0c343acf' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-26T16:32:50.8940623Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='new_feature_announcement' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUE2RjIyNDQ0MjVDMkNENzk3AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUE2RjIyNDQ0MjVDMkNENzk3AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T16:32:50.8941357Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='bf6d74db-6a43-4cdb-84c6-038450694f4c', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-26T16:32:50.9811926Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Robert, 
Great news! The new Ai Bot integration feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUE2RjIyNDQ0MjVDMkNENzk3AA==', @p42='b589e2da-82ba-4962-9128-538b9fab565e' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='9e79b33c-3f68-4953-a61b-5dcc02f155d8', @p45='0', @p46='Sent', @p47='2025-08-26T16:32:50.9812640Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='new_feature_announcement', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 22:02:51.449 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:02:51.462 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8375.2259ms
2025-08-26 22:02:51.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:02:51.467 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 200 null application/json; charset=utf-8 8396.9593ms
2025-08-26 22:03:17.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 22:03:17.710 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.5068ms
2025-08-26 22:03:17.718 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 22:03:17.721 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.723 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:03:17.725 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 22:03:17.737 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 22:03:17.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 22:03:17.749 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 22:03:17.755 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 22:03:17.759 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 22:03:17.760 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 22:03:17.762 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 22:03:17.764 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:03:17.765 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 37.5218ms
2025-08-26 22:03:17.767 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:03:17.769 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 50.3523ms
2025-08-26 22:03:17.779 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:03:17.783 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.784 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0013ms
2025-08-26 22:03:17.788 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:03:17.791 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.792 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:17.794 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:03:17.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:03:17.808 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:03:17.810 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.789ms
2025-08-26 22:03:17.813 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:17.815 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.6855ms
2025-08-26 22:03:17.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:03:17.868 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.870 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:17.872 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:03:17.879 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:03:17.884 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:03:17.887 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4956ms
2025-08-26 22:03:17.889 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:17.893 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:03:17.903 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.1402ms
2025-08-26 22:03:17.906 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.913 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:17.915 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:03:17.922 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:03:17.928 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:03:17.930 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1871ms
2025-08-26 22:03:17.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:17.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.517ms
2025-08-26 22:03:17.992 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:03:17.996 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:17.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:18.000 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:03:18.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:03:18.013 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:03:18.015 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2664ms
2025-08-26 22:03:18.017 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:03:18.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.5141ms
2025-08-26 22:03:23.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:03:23.476 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:23.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.5525ms
2025-08-26 22:03:23.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:03:23.486 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:23.489 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:03:23.491 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:03:23.512 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:03:23.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:03:23.519 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 25.2019ms
2025-08-26 22:03:23.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:03:23.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 40.2893ms
2025-08-26 22:03:27.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 22:03:27.387 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:27.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 5.6108ms
2025-08-26 22:03:27.393 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 22:03:27.396 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:27.397 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:03:27.398 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:03:28.960 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:03:28.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:03:28.976 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:03:28.980 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:03:28.981 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:03:29.906 +05:30 [INF] Received HTTP response headers after 922.9991ms - 401
2025-08-26 22:03:29.908 +05:30 [INF] End processing HTTP request after 928.1324ms - 401
2025-08-26 22:03:29.909 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 07:00:00 PDT. The current time is Tuesday, 26-Aug-25 09:33:29 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AL71KeELz9vDTu8tTai_Epc"}}
2025-08-26 22:03:29.912 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:03:29.914 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2513.2519ms
2025-08-26 22:03:29.916 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:03:29.918 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 2524.9624ms
2025-08-26 22:03:37.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 22:03:37.421 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:37.422 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 4.9696ms
2025-08-26 22:03:37.427 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 22:03:37.446 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:03:37.448 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:03:37.450 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:03:41.012 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:03:41.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:03:41.025 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:03:41.028 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:03:41.031 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:03:41.371 +05:30 [INF] Received HTTP response headers after 337.9365ms - 401
2025-08-26 22:03:41.372 +05:30 [INF] End processing HTTP request after 344.1559ms - 401
2025-08-26 22:03:41.374 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 07:00:00 PDT. The current time is Tuesday, 26-Aug-25 09:33:41 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AP5s5jl6_c7H0asIsmiqTp3"}}
2025-08-26 22:03:41.376 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:03:41.378 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3925.7739ms
2025-08-26 22:03:41.380 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:03:41.381 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 400 null application/json; charset=utf-8 3954.2184ms
2025-08-26 22:22:20.925 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 22:22:20.967 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 22:22:20.983 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 22:22:21.838 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 22:22:22.423 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 22:22:22.658 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 22:22:22.660 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 22:22:22.662 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 22:22:22.662 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 22:22:22.663 +05:30 [INF] Hosting environment: Development
2025-08-26 22:22:22.669 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 22:22:22.688 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@__cutoff_0='2025-08-19T16:52:21.0793113Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 22:22:24.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 22:22:25.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 262.8058ms
2025-08-26 22:22:25.125 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 22:22:25.138 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.3681ms
2025-08-26 22:22:25.290 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 22:22:25.415 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 125.2746ms
2025-08-26 22:22:25.647 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 22:22:25.954 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 306.8911ms
2025-08-26 22:22:48.905 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 22:22:48.913 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 22:22:48.986 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:48.991 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 85.859ms
2025-08-26 22:22:49.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 22:22:49.020 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:49.192 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:22:49.212 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 22:22:49.312 +05:30 [INF] üîë Login attempt for email: ratan@tcs.com
2025-08-26 22:22:49.414 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 22:22:49.576 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 22:22:49.746 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 22:22:49.760 +05:30 [INF] ‚úÖ Token generated for: ratan@tcs.com
2025-08-26 22:22:49.774 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 22:22:49.777 +05:30 [INF] ‚úÖ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 22:22:49.791 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:22:49.805 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 586.277ms
2025-08-26 22:22:49.809 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:22:49.818 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 814.7882ms
2025-08-26 22:22:49.823 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:22:49.828 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:49.830 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1306ms
2025-08-26 22:22:49.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:22:49.841 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:49.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:49.860 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:22:49.882 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 22:22:49.921 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:22:49.927 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:22:49.943 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 79.9567ms
2025-08-26 22:22:49.946 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:49.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 114.1444ms
2025-08-26 22:22:49.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:22:49.970 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:49.976 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:49.978 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:22:49.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:22:49.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:22:49.999 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.9795ms
2025-08-26 22:22:50.001 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:22:50.002 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:50.005 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:50.007 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 41.8715ms
2025-08-26 22:22:50.010 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:50.015 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:22:50.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:22:50.031 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:22:50.033 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.8432ms
2025-08-26 22:22:50.036 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:50.038 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.8158ms
2025-08-26 22:22:50.113 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:22:50.118 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:50.120 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:50.122 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:22:50.130 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:22:50.136 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:22:50.140 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.3248ms
2025-08-26 22:22:50.142 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:22:50.144 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.5293ms
2025-08-26 22:22:55.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:22:55.063 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:55.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.4912ms
2025-08-26 22:22:55.072 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:22:55.078 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:55.080 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:22:55.089 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:22:55.162 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:22:55.167 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:22:55.183 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 91.5871ms
2025-08-26 22:22:55.186 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:22:55.189 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 118.0455ms
2025-08-26 22:22:56.913 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 22:22:56.922 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:56.924 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 11.7944ms
2025-08-26 22:22:56.935 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 22:22:56.942 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:22:56.944 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:22:56.950 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:22:59.700 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-26 22:22:59.715 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:22:59.860 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:22:59.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:22:59.995 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:23:00.000 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:23:00.792 +05:30 [INF] Received HTTP response headers after 786.8412ms - 401
2025-08-26 22:23:00.796 +05:30 [INF] End processing HTTP request after 801.668ms - 401
2025-08-26 22:23:00.800 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 07:00:00 PDT. The current time is Tuesday, 26-Aug-25 09:53:00 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AlaABqhONoAngjihaQXTR-4"}}
2025-08-26 22:23:00.804 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:23:00.815 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3861.7504ms
2025-08-26 22:23:00.818 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:23:00.821 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 400 null application/json; charset=utf-8 3885.4226ms
2025-08-26 22:23:09.416 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 22:23:09.430 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:23:09.432 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 16.4853ms
2025-08-26 22:23:09.437 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 22:23:09.441 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:23:09.443 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:23:09.445 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:23:11.170 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:23:11.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:23:11.202 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:23:11.206 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:23:11.207 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:23:11.721 +05:30 [INF] Received HTTP response headers after 512.842ms - 401
2025-08-26 22:23:11.724 +05:30 [INF] End processing HTTP request after 518.0401ms - 401
2025-08-26 22:23:11.726 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 07:00:00 PDT. The current time is Tuesday, 26-Aug-25 09:53:11 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Aqc5voUNJZYKF4WpUIbscch"}}
2025-08-26 22:23:11.728 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:23:11.730 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2282.2337ms
2025-08-26 22:23:11.732 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:23:11.733 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 2295.7553ms
2025-08-26 22:23:24.579 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 22:23:24.584 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:23:24.586 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 7.2147ms
2025-08-26 22:23:24.590 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 22:23:24.593 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:23:24.594 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:23:24.596 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:23:27.357 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:23:27.365 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:23:27.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:23:27.373 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:23:27.374 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:23:27.697 +05:30 [INF] Received HTTP response headers after 320.9104ms - 401
2025-08-26 22:23:27.698 +05:30 [INF] End processing HTTP request after 325.1738ms - 401
2025-08-26 22:23:27.700 +05:30 [ERR] ‚ùå Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Tuesday, 26-Aug-25 07:00:00 PDT. The current time is Tuesday, 26-Aug-25 09:53:27 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AQkMVfRyJr5jBA_YswTKCNh"}}
2025-08-26 22:23:27.702 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:23:27.704 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3105.2263ms
2025-08-26 22:23:27.705 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:23:27.707 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 3116.8751ms
2025-08-26 22:26:04.132 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 22:26:04.141 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:04.142 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 10.0629ms
2025-08-26 22:26:04.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-26 22:26:04.175 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:04.179 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 22:26:04.185 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 22:26:04.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:04.208 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-26 22:26:04.216 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 26.5986ms
2025-08-26 22:26:04.221 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-26 22:26:04.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 58.2119ms
2025-08-26 22:26:07.594 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-26 22:26:07.599 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:07.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.7626ms
2025-08-26 22:26:07.609 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 551
2025-08-26 22:26:07.612 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:07.614 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 22:26:07.620 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 22:26:07.634 +05:30 [INF] üîß [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-26 22:26:07.645 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-26 22:26:07.766 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPUHtjYczRTIIaoCfAOuH1ao36KQl7zc3VoO3IEeIFMBKUVqEi1YdkqAOB3emIESKjRINX24HmNlwIUp8C5VxBZAzLBtbzQwU1AXZB6QikZAEvYFg1s4dxGNGJ3eMjHk9w1cSd0vIZCiAS06T2HkuZAjVUsLzxf2lHg6xivwgSASRWXNzVWqww0D8hWyZBu1GZAu2ZCe98Br1GLY0goAGe21iaNd3hHDqHjZCjRC7oXMVZC1cg683MQ0wZDZD' (Nullable = false), @p1='2025-08-26T16:56:07.6518675Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-26 22:26:07.787 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:26:07.790 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 167.4582ms
2025-08-26 22:26:07.792 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-26 22:26:07.794 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 184.6442ms
2025-08-26 22:26:08.543 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-26 22:26:08.547 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:08.548 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.9976ms
2025-08-26 22:26:08.559 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 383
2025-08-26 22:26:08.563 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:08.566 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 22:26:08.574 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-26 22:26:08.582 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 22:26:08.584 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-26 22:26:10.932 +05:30 [INF] Received HTTP response headers after 2346.0459ms - 200
2025-08-26 22:26:10.934 +05:30 [INF] End processing HTTP request after 2351.4624ms - 200
2025-08-26 22:26:10.961 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:26:10.963 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2387.0422ms
2025-08-26 22:26:10.965 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-26 22:26:10.966 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2407.6387ms
2025-08-26 22:26:13.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:26:13.884 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:13.886 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.1394ms
2025-08-26 22:26:13.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:26:13.894 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:13.896 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:26:13.898 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:26:13.908 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:26:13.911 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:26:13.914 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.9417ms
2025-08-26 22:26:13.916 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:26:13.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 26.5093ms
2025-08-26 22:26:15.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-26 22:26:15.093 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:15.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 7.3295ms
2025-08-26 22:26:15.103 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-26 22:26:15.106 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:15.108 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:26:15.110 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:26:16.873 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:26:16.881 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:16.895 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:26:16.898 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:26:16.900 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:26:17.891 +05:30 [INF] Received HTTP response headers after 990.1901ms - 200
2025-08-26 22:26:17.894 +05:30 [INF] End processing HTTP request after 995.4566ms - 200
2025-08-26 22:26:18.130 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:18.146 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:18.148 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:19.233 +05:30 [INF] Received HTTP response headers after 1082.84ms - 200
2025-08-26 22:26:19.235 +05:30 [INF] End processing HTTP request after 1088.8521ms - 200
2025-08-26 22:26:19.514 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='88753303-6067-4440-83f0-c6daa0bad342', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='aef7b2fa-1966-404c-bb5b-6f180fa7116c' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T16:56:19.2627147Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9='https://picsum.photos/seed/picsum/200/300', @p10='shoe_launch_offer' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T16:56:19.2627603Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='56e9f34b-c16b-4d90-93b5-e52b4c214e3d', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-26T16:56:19.3311874Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello {{}}! The moment has arrived! üéâ

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend‚Äîset it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==', @p42='88753303-6067-4440-83f0-c6daa0bad342' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='2f01a3ad-8c8d-418b-add3-2ca29d7afa8c', @p45='0', @p46='Sent', @p47='2025-08-26T16:56:19.3312622Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='shoe_launch_offer', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 22:26:19.554 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:26:19.557 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4443.6735ms
2025-08-26 22:26:19.559 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:26:19.561 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 4457.6436ms
2025-08-26 22:26:29.458 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-26 22:26:29.462 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:26:29.465 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:26:29.474 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"sent","timestamp":"1756227387","recipient_id":"918974005240","conversation":{"id":"92991bc6b187242c94ec3c7b3504b705","expiration_timestamp":"1756227387","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:26:29.479 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:26:29.481 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:26:29.485 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 18.0662ms
2025-08-26 22:26:29.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:26:29.492 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.0796ms
2025-08-26 22:26:29.651 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"sent","timestamp":"1756227387","recipient_id":"918974005240","conversation":{"id":"92991bc6b187242c94ec3c7b3504b705","expiration_timestamp":"1756227387","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:26:29.654 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:26:29.657 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"sent","timestamp":"1756227387","recipient_id":"918974005240","conversation":{"id":"92991bc6b187242c94ec3c7b3504b705","expiration_timestamp":"1756227387","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:26:29.674 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:26:29.687 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='56e9f34b-c16b-4d90-93b5-e52b4c214e3d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:26:29.690 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA== ‚Üí sent
2025-08-26 22:26:30.303 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-26 22:26:30.308 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:26:30.310 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:26:30.313 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"delivered","timestamp":"1756227388","recipient_id":"918974005240","conversation":{"id":"92991bc6b187242c94ec3c7b3504b705","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:26:30.316 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:26:30.317 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:26:30.319 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"delivered","timestamp":"1756227388","recipient_id":"918974005240","conversation":{"id":"92991bc6b187242c94ec3c7b3504b705","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:26:30.319 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.6291ms
2025-08-26 22:26:30.321 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:26:30.323 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:26:30.324 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"delivered","timestamp":"1756227388","recipient_id":"918974005240","conversation":{"id":"92991bc6b187242c94ec3c7b3504b705","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:26:30.325 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.8422ms
2025-08-26 22:26:30.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:26:30.346 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='56e9f34b-c16b-4d90-93b5-e52b4c214e3d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:26:30.370 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p2='56e9f34b-c16b-4d90-93b5-e52b4c214e3d', @p0='2025-08-26T16:56:28.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-26 22:26:30.375 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA== ‚Üí delivered
2025-08-26 22:26:40.221 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-26 22:26:40.226 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:26:40.227 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:26:40.231 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"read","timestamp":"1756227399","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-26 22:26:40.233 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:26:40.234 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:26:40.236 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.568ms
2025-08-26 22:26:40.237 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:26:40.238 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.9121ms
2025-08-26 22:26:40.242 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"read","timestamp":"1756227399","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-26 22:26:40.245 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:26:40.245 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA==","status":"read","timestamp":"1756227399","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-26 22:26:40.250 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:26:40.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='56e9f34b-c16b-4d90-93b5-e52b4c214e3d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:26:40.282 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p2='56e9f34b-c16b-4d90-93b5-e52b4c214e3d', @p0='2025-08-26T16:56:39.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-26 22:26:40.286 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQzQ0U2QjY4RDk1RjE1ODkxAA== ‚Üí read
2025-08-26 22:26:49.854 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-26 22:26:49.857 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:49.859 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 4.6274ms
2025-08-26 22:26:49.862 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-26 22:26:49.866 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:26:49.868 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:26:49.869 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:26:52.733 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:26:52.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:52.744 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:26:52.748 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:26:52.750 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-26 22:26:53.932 +05:30 [INF] Received HTTP response headers after 1181.0287ms - 200
2025-08-26 22:26:53.934 +05:30 [INF] End processing HTTP request after 1186.4345ms - 200
2025-08-26 22:26:53.941 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:53.946 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:53.948 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:54.855 +05:30 [INF] Received HTTP response headers after 905.2934ms - 400
2025-08-26 22:26:54.857 +05:30 [INF] End processing HTTP request after 911.0416ms - 400
2025-08-26 22:26:54.859 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"A6nk-b1XZv-JRV3gKiEb4os"}}
2025-08-26 22:26:54.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:54.868 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:54.869 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:55.776 +05:30 [INF] Received HTTP response headers after 905.1417ms - 200
2025-08-26 22:26:55.777 +05:30 [INF] End processing HTTP request after 909.6232ms - 200
2025-08-26 22:26:55.783 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:55.786 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:55.788 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:56.699 +05:30 [INF] Received HTTP response headers after 909.3893ms - 400
2025-08-26 22:26:56.701 +05:30 [INF] End processing HTTP request after 914.9297ms - 400
2025-08-26 22:26:56.702 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AYI5554h6kI21gk9o8U7taO"}}
2025-08-26 22:26:56.708 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:26:56.711 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:56.712 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-26 22:26:57.825 +05:30 [INF] Received HTTP response headers after 1110.6126ms - 200
2025-08-26 22:26:57.827 +05:30 [INF] End processing HTTP request after 1116.2039ms - 200
2025-08-26 22:26:57.853 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='261f7fe6-61ed-4093-b4d4-c36468d79a15', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-26T16:56:55.7803458Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T16:56:55.7803460Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='382fc3fe-dfbd-4afa-9948-61ea618102f9', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p24='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true), @p25='2025-08-26T16:56:54.8618282Z' (DbType = DateTime), @p26='‚ùå WhatsApp API returned an error.', @p27='False', @p28=NULL, @p29='account_creation_confirmation_3' (Nullable = false), @p30=NULL, @p31='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"A6nk-b1XZv-JRV3gKiEb4os"}}', @p32='1234567890' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35=NULL (DbType = DateTime), @p36='campaign', @p37='Failed' (Nullable = false), @p38='dc72924c-88ff-46e6-a963-44e3706bcad9', @p39='c13be597-6ae2-42bb-9d43-925815f24ff8', @p40=NULL (DbType = Guid), @p41=NULL (DbType = Guid), @p42='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p43='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p44='2025-08-26T16:56:57.8292509Z' (DbType = DateTime), @p45=NULL, @p46='False', @p47=NULL, @p48='account_creation_confirmation_3' (Nullable = false), @p49='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==', @p50='{"messaging_product":"whatsapp","contacts":[{"input":"+917082156227","wa_id":"917082156227"}],"messages":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==","message_status":"accepted"}]}', @p51='+917082156227' (Nullable = false), @p52=NULL (DbType = Guid), @p53=NULL, @p54='2025-08-26T16:56:57.8292510Z' (Nullable = true) (DbType = DateTime), @p55='campaign', @p56='Sent' (Nullable = false), @p57='deac8a9d-1336-4bd9-b1ee-ffb8c879bc39', @p58='c13be597-6ae2-42bb-9d43-925815f24ff8', @p59=NULL (DbType = Guid), @p60=NULL (DbType = Guid), @p61='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p62='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true), @p63='2025-08-26T16:56:56.7044473Z' (DbType = DateTime), @p64='‚ùå WhatsApp API returned an error.', @p65='False', @p66=NULL, @p67='account_creation_confirmation_3' (Nullable = false), @p68=NULL, @p69='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AYI5554h6kI21gk9o8U7taO"}}', @p70='447543746206' (Nullable = false), @p71=NULL (DbType = Guid), @p72=NULL, @p73=NULL (DbType = DateTime), @p74='campaign', @p75='Failed' (Nullable = false), @p76='165b0b7d-9914-4c00-997d-5ac13cbba461', @p77='True', @p78=NULL, @p79='c13be597-6ae2-42bb-9d43-925815f24ff8', @p80='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p81=NULL, @p82=NULL, @p83=NULL (DbType = DateTime), @p84='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @p85=NULL, @p86='2025-08-26T16:56:54.8626349Z' (DbType = DateTime), @p87='system', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='‚ùå WhatsApp API returned an error.', @p92=NULL, @p93='False', @p94=NULL (DbType = DateTime), @p95=NULL, @p96=NULL, @p97='account_creation_confirmation_3' (Nullable = false), @p98=NULL, @p99='382fc3fe-dfbd-4afa-9948-61ea618102f9' (Nullable = true), @p100=NULL (DbType = DateTime), @p101='4ec881bf-8c87-4b70-b608-b85d7333cb5c', @p102='0', @p103='Failed', @p104='2025-08-26T16:56:54.8626350Z' (Nullable = true) (DbType = DateTime), @p105=NULL, @p106='account_creation_confirmation_3', @p107=NULL (DbType = Guid), @p108='67da9b47-a5fb-4efe-b29d-71ecb9b93d06', @p109='True', @p110=NULL, @p111='c13be597-6ae2-42bb-9d43-925815f24ff8', @p112='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p113=NULL, @p114=NULL, @p115=NULL (DbType = DateTime), @p116='26b8b9a2-5624-40ed-a659-65de71d03d20', @p117=NULL, @p118='2025-08-26T16:56:55.7808951Z' (DbType = DateTime), @p119='system', @p120=NULL (DbType = DateTime), @p121=NULL, @p122=NULL, @p123=NULL, @p124=NULL, @p125='False', @p126=NULL (DbType = DateTime), @p127=NULL, @p128=NULL, @p129='account_creation_confirmation_3' (Nullable = false), @p130='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==', @p131='261f7fe6-61ed-4093-b4d4-c36468d79a15' (Nullable = true), @p132=NULL (DbType = DateTime), @p133='5f025339-a66b-4fab-8ef0-535fb3ac1a8a', @p134='0', @p135='Sent', @p136='2025-08-26T16:56:55.7808952Z' (Nullable = true) (DbType = DateTime), @p137=NULL, @p138='account_creation_confirmation_3', @p139=NULL (DbType = Guid), @p140='75bf059f-b1db-48ab-bfc9-0c93a6d8c628', @p141='True', @p142=NULL, @p143='c13be597-6ae2-42bb-9d43-925815f24ff8', @p144='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p145=NULL, @p146=NULL, @p147=NULL (DbType = DateTime), @p148='80c43c6a-508b-47ff-9360-201bfd5521d3', @p149=NULL, @p150='2025-08-26T16:56:56.7047626Z' (DbType = DateTime), @p151='system', @p152=NULL (DbType = DateTime), @p153=NULL, @p154=NULL, @p155='‚ùå WhatsApp API returned an error.', @p156=NULL, @p157='False', @p158=NULL (DbType = DateTime), @p159=NULL, @p160=NULL, @p161='account_creation_confirmation_3' (Nullable = false), @p162=NULL, @p163='deac8a9d-1336-4bd9-b1ee-ffb8c879bc39' (Nullable = true), @p164=NULL (DbType = DateTime), @p165='985eb57b-c8eb-41e2-98a1-96a2da4f72de', @p166='0', @p167='Failed', @p168='2025-08-26T16:56:56.7047627Z' (Nullable = true) (DbType = DateTime), @p169=NULL, @p170='account_creation_confirmation_3', @p171=NULL (DbType = Guid), @p172='d0802879-3912-4f5c-8ae8-1fc1f67f660c', @p173='True', @p174=NULL, @p175='c13be597-6ae2-42bb-9d43-925815f24ff8', @p176='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p177=NULL, @p178=NULL, @p179=NULL (DbType = DateTime), @p180='8aac7c57-6699-4511-897b-4121b407eb1c', @p181=NULL, @p182='2025-08-26T16:56:57.8295576Z' (DbType = DateTime), @p183='system', @p184=NULL (DbType = DateTime), @p185=NULL, @p186=NULL, @p187=NULL, @p188=NULL, @p189='False', @p190=NULL (DbType = DateTime), @p191=NULL, @p192=NULL, @p193='account_creation_confirmation_3' (Nullable = false), @p194='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==', @p195='dc72924c-88ff-46e6-a963-44e3706bcad9' (Nullable = true), @p196=NULL (DbType = DateTime), @p197='da480a6b-140e-4232-8b76-4c8b951d0732', @p198='0', @p199='Sent', @p200='2025-08-26T16:56:57.8295577Z' (Nullable = true) (DbType = DateTime), @p201=NULL, @p202='account_creation_confirmation_3', @p203=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203);
2025-08-26 22:26:57.860 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:26:57.862 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7991.0776ms
2025-08-26 22:26:57.864 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:26:57.865 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 8002.8704ms
2025-08-26 22:27:02.952 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-26 22:27:02.956 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:02.959 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:27:02.962 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"sent","timestamp":"1756227421","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","expiration_timestamp":"1756227421","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:02.964 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:27:02.964 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"sent","timestamp":"1756227421","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","expiration_timestamp":"1756227421","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:02.965 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:27:02.967 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:27:02.970 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.3937ms
2025-08-26 22:27:02.971 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"sent","timestamp":"1756227421","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","expiration_timestamp":"1756227421","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:02.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:02.977 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.6104ms
2025-08-26 22:27:02.979 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:27:02.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='67da9b47-a5fb-4efe-b29d-71ecb9b93d06'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:27:02.994 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA== ‚Üí sent
2025-08-26 22:27:03.047 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-26 22:27:03.050 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-26 22:27:03.052 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:03.055 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:03.057 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:27:03.058 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:27:03.061 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"delivered","timestamp":"1756227422","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:03.063 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"delivered","timestamp":"1756227422","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:03.064 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:27:03.065 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"delivered","timestamp":"1756227422","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:03.067 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:27:03.068 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:27:03.070 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:27:03.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:27:03.073 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 12.112ms
2025-08-26 22:27:03.074 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"delivered","timestamp":"1756227422","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:03.076 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.0616ms
2025-08-26 22:27:03.078 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:03.082 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:27:03.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:03.084 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 37.1144ms
2025-08-26 22:27:03.091 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 40.9717ms
2025-08-26 22:27:03.091 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='67da9b47-a5fb-4efe-b29d-71ecb9b93d06'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:27:03.106 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='67da9b47-a5fb-4efe-b29d-71ecb9b93d06', @p0='2025-08-26T16:57:02.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-26 22:27:03.109 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA== ‚Üí delivered
2025-08-26 22:27:03.111 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"delivered","timestamp":"1756227422","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:03.113 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:27:03.114 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"delivered","timestamp":"1756227422","recipient_id":"918974005240","conversation":{"id":"140e629fab7d424fc596991393d438f0","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-26 22:27:03.118 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:27:03.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='67da9b47-a5fb-4efe-b29d-71ecb9b93d06'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:27:03.125 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA== ‚Üí delivered
2025-08-26 22:27:05.880 +05:30 [INF] Request starting HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - application/json 598
2025-08-26 22:27:05.887 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:05.888 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:27:05.892 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==","status":"sent","timestamp":"1756227424","recipient_id":"917082156227","conversation":{"id":"206957553a33d7e357bcb1d2f83a131e","expiration_timestamp":"1756227424","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:27:05.895 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:27:05.896 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==","status":"sent","timestamp":"1756227424","recipient_id":"917082156227","conversation":{"id":"206957553a33d7e357bcb1d2f83a131e","expiration_timestamp":"1756227424","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:27:05.896 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:27:05.898 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:27:05.900 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.5672ms
2025-08-26 22:27:05.901 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA==","status":"sent","timestamp":"1756227424","recipient_id":"917082156227","conversation":{"id":"206957553a33d7e357bcb1d2f83a131e","expiration_timestamp":"1756227424","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-08-26 22:27:05.903 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:27:05.907 +05:30 [INF] Request finished HTTP/1.1 POST http://d7027ced3eca.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.4754ms
2025-08-26 22:27:05.908 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:27:05.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='d0802879-3912-4f5c-8ae8-1fc1f67f660c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:27:05.923 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNDM4MzM0RkJGOTBCQzM0RTc2AA== ‚Üí sent
2025-08-26 22:28:00.031 +05:30 [INF] Request starting HTTP/1.1 GET http://7b2a5091aaac.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=793984533&hub.verify_token=xbytechat-secret-token - null null
2025-08-26 22:28:00.043 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 22:28:00.047 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:28:00.077 +05:30 [INF] ‚úÖ WhatsApp webhook verified successfully.
2025-08-26 22:28:00.079 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-26 22:28:00.081 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 31.5688ms
2025-08-26 22:28:00.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-26 22:28:00.084 +05:30 [INF] Request finished HTTP/1.1 GET http://7b2a5091aaac.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=793984533&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 52.7674ms
2025-08-26 22:28:33.677 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 22:28:33.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 22:28:33.694 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:33.698 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:33.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 8.4547ms
2025-08-26 22:28:33.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 22.5089ms
2025-08-26 22:28:33.720 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 22:28:33.721 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-26 22:28:33.733 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:33.736 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:33.737 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 17.3842ms
2025-08-26 22:28:33.738 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 17.4099ms
2025-08-26 22:28:33.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-26 22:28:33.746 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 22:28:33.753 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:33.755 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 22:28:33.755 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:33.758 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 22:28:33.761 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:33.763 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:33.768 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-08-26 22:28:33.889 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-26 22:28:33.918 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-26 22:28:33.932 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:28:33.939 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 173.4946ms
2025-08-26 22:28:33.942 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 22:28:33.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 197.504ms
2025-08-26 22:28:33.960 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-26 22:28:33.999 +05:30 [INF] GetAllContactsAsync returned 12 contacts
2025-08-26 22:28:34.001 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:34.013 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 249.6075ms
2025-08-26 22:28:34.015 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 22:28:34.017 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 274.9123ms
2025-08-26 22:28:40.604 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.604 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.610 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.614 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.618 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.623 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.624 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 19.7871ms
2025-08-26 22:28:40.626 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 19.9873ms
2025-08-26 22:28:40.625 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 20.6995ms
2025-08-26 22:28:40.641 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null 0
2025-08-26 22:28:40.628 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 22.2337ms
2025-08-26 22:28:40.651 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.655 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.664 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.665 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:40.670 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.672 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:40.675 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:40.677 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:40.680 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:40.682 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:40.689 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-08-26 22:28:40.695 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:40.705 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:40.707 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 25.1751ms
2025-08-26 22:28:40.709 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:40.712 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 0 null 70.631ms
2025-08-26 22:28:40.715 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:40.715 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:40.732 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:40.732 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:40.734 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 49.1723ms
2025-08-26 22:28:40.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:40.738 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:40.741 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 52.5224ms
2025-08-26 22:28:40.742 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:40.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 93.1253ms
2025-08-26 22:28:40.746 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:40.748 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:40.754 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 93.5591ms
2025-08-26 22:28:40.755 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:40.764 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-08-26 22:28:40.770 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:40.775 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:40.777 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.9699ms
2025-08-26 22:28:40.779 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:40.781 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 45.9718ms
2025-08-26 22:28:48.401 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:48.405 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:48.406 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 5.5825ms
2025-08-26 22:28:48.411 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null 0
2025-08-26 22:28:48.414 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:48.416 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:48.417 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:48.425 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:48.429 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:48.431 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 11.2032ms
2025-08-26 22:28:48.433 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:48.435 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 0 null 23.9152ms
2025-08-26 22:28:49.502 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null 0
2025-08-26 22:28:49.508 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:49.510 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:49.511 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:49.517 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:49.523 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:49.524 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.8624ms
2025-08-26 22:28:49.526 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:49.528 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 0 null 25.8285ms
2025-08-26 22:28:52.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.493 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.509 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.513 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.516 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.520 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 30.6957ms
2025-08-26 22:28:52.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 30.1028ms
2025-08-26 22:28:52.524 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 32.3309ms
2025-08-26 22:28:52.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 204 null null 33.545ms
2025-08-26 22:28:52.532 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null 0
2025-08-26 22:28:52.537 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.551 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.555 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.558 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.559 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:52.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:52.562 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:52.564 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:52.566 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:52.567 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:52.574 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:52.583 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-08-26 22:28:52.581 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:52.587 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:52.596 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:52.598 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 27.2517ms
2025-08-26 22:28:52.599 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:52.603 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:52.605 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:52.608 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 33.8588ms
2025-08-26 22:28:52.610 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 28.833ms
2025-08-26 22:28:52.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - null null
2025-08-26 22:28:52.612 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 0 null 80.1396ms
2025-08-26 22:28:52.614 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:52.616 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:52.621 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:52.626 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 89.5895ms
2025-08-26 22:28:52.628 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 86.3075ms
2025-08-26 22:28:52.630 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:52.641 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:52.645 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-08-26 22:28:52.650 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='8aac7c57-6699-4511-897b-4121b407eb1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:52.655 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:52.658 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.5409ms
2025-08-26 22:28:52.660 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:52.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/8aac7c57-6699-4511-897b-4121b407eb1c - 200 null application/json; charset=utf-8 49.9824ms
2025-08-26 22:28:53.722 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.723 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.726 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.730 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.733 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.736 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.738 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 15.2688ms
2025-08-26 22:28:53.739 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 15.9376ms
2025-08-26 22:28:53.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 16.9365ms
2025-08-26 22:28:53.741 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 204 null null 17.9249ms
2025-08-26 22:28:53.746 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null 0
2025-08-26 22:28:53.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.758 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.761 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.764 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.768 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.770 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:53.770 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:53.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:53.773 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:53.774 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:53.776 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:53.781 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:53.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:53.785 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-08-26 22:28:53.793 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:53.797 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:53.801 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:53.801 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 22.3766ms
2025-08-26 22:28:53.805 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 18.4654ms
2025-08-26 22:28:53.809 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:53.810 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:53.812 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:53.813 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 29.8634ms
2025-08-26 22:28:53.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - null null
2025-08-26 22:28:53.815 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 0 null 69.0219ms
2025-08-26 22:28:53.816 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 58.4139ms
2025-08-26 22:28:53.818 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:53.821 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:53.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 76.7557ms
2025-08-26 22:28:53.832 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:53.837 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:53.840 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="a307d00b-239b-4c7b-bb16-77838875fbec"
2025-08-26 22:28:53.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='a307d00b-239b-4c7b-bb16-77838875fbec'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:53.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:53.853 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.2339ms
2025-08-26 22:28:53.855 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:53.857 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/a307d00b-239b-4c7b-bb16-77838875fbec - 200 null application/json; charset=utf-8 42.1448ms
2025-08-26 22:28:56.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.795 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.797 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 5.9699ms
2025-08-26 22:28:56.803 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.806 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.810 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.814 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null 0
2025-08-26 22:28:56.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 20.9378ms
2025-08-26 22:28:56.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 21.6517ms
2025-08-26 22:28:56.819 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 22.5392ms
2025-08-26 22:28:56.822 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.836 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:56.839 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.842 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.843 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:56.845 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:56.846 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:56.853 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:56.853 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:56.857 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:56.860 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:56.862 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 22:28:56.866 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 16.5456ms
2025-08-26 22:28:56.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:56.875 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:56.869 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:56.879 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:56.880 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 0 null 66.5209ms
2025-08-26 22:28:56.885 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:56.888 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 25.4996ms
2025-08-26 22:28:56.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:28:56.893 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 28.713ms
2025-08-26 22:28:56.895 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:56.898 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:56.900 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:56.901 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 71.5173ms
2025-08-26 22:28:56.903 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:56.904 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 69.7882ms
2025-08-26 22:28:56.909 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:56.917 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 22:28:56.922 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:56.928 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:56.930 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.1816ms
2025-08-26 22:28:56.932 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:56.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 42.1216ms
2025-08-26 22:28:57.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.607 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.610 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.613 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.617 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.622 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.623 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 17.0839ms
2025-08-26 22:28:57.624 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 18.0071ms
2025-08-26 22:28:57.625 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 19.1808ms
2025-08-26 22:28:57.626 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 204 null null 19.9498ms
2025-08-26 22:28:57.632 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null 0
2025-08-26 22:28:57.646 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.646 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.650 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.653 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.657 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:57.660 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:57.661 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:57.663 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:57.664 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:57.666 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:57.673 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:57.682 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:57.675 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-08-26 22:28:57.685 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:57.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:57.692 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 23.1485ms
2025-08-26 22:28:57.693 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:57.696 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 19.1728ms
2025-08-26 22:28:57.698 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:57.703 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:57.704 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:57.705 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 0 null 73.0817ms
2025-08-26 22:28:57.708 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 35.0282ms
2025-08-26 22:28:57.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 62.7807ms
2025-08-26 22:28:57.714 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - null null
2025-08-26 22:28:57.716 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:57.723 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:57.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 78.837ms
2025-08-26 22:28:57.726 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:57.732 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:57.735 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="63faf7a5-4506-431d-884c-cb0a363fa7ac"
2025-08-26 22:28:57.755 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='63faf7a5-4506-431d-884c-cb0a363fa7ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:57.764 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:57.767 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 31.6904ms
2025-08-26 22:28:57.769 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:57.771 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/63faf7a5-4506-431d-884c-cb0a363fa7ac - 200 null application/json; charset=utf-8 57.0381ms
2025-08-26 22:28:58.239 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.244 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.247 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.251 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.254 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.255 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 15.957ms
2025-08-26 22:28:58.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 16.0519ms
2025-08-26 22:28:58.258 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 16.8285ms
2025-08-26 22:28:58.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 204 null null 17.7944ms
2025-08-26 22:28:58.264 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null 0
2025-08-26 22:28:58.272 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.279 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.285 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.288 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.289 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:58.292 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.292 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:58.297 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:58.295 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:58.294 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:58.303 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:58.310 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:58.306 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-08-26 22:28:58.315 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:58.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:58.322 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 22.9933ms
2025-08-26 22:28:58.317 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:58.327 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:58.328 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:58.329 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 21.599ms
2025-08-26 22:28:58.331 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 27.6433ms
2025-08-26 22:28:58.332 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - null null
2025-08-26 22:28:58.332 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 56.3569ms
2025-08-26 22:28:58.334 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:58.336 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.339 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.346 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 0 null 81.9903ms
2025-08-26 22:28:58.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 77.601ms
2025-08-26 22:28:58.351 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.361 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:58.365 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="880f8355-31f3-4950-93ef-6b9bf88f7db2"
2025-08-26 22:28:58.370 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='880f8355-31f3-4950-93ef-6b9bf88f7db2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:58.377 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:58.378 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.1232ms
2025-08-26 22:28:58.381 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/880f8355-31f3-4950-93ef-6b9bf88f7db2 - 200 null application/json; charset=utf-8 50.6419ms
2025-08-26 22:28:58.850 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.850 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.850 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.854 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.858 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.862 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.866 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.867 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 17.76ms
2025-08-26 22:28:58.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 19.0478ms
2025-08-26 22:28:58.870 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 19.8367ms
2025-08-26 22:28:58.871 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 204 null null 20.0232ms
2025-08-26 22:28:58.876 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null 0
2025-08-26 22:28:58.886 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.890 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.895 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.898 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.902 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:58.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:58.906 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.907 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:58.908 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:28:58.917 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:28:58.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:28:58.910 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:58.927 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:28:58.931 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:28:58.933 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac"
2025-08-26 22:28:58.935 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 21.5553ms
2025-08-26 22:28:58.937 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 17.869ms
2025-08-26 22:28:58.943 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:58.944 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:28:58.947 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:28:58.951 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:58.952 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 0 null 76.3044ms
2025-08-26 22:28:58.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 null application/json; charset=utf-8 68.6592ms
2025-08-26 22:28:58.957 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 23.8113ms
2025-08-26 22:28:58.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - null null
2025-08-26 22:28:58.968 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.972 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:28:58.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 null application/json; charset=utf-8 83.8486ms
2025-08-26 22:28:58.976 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:58.981 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:28:58.986 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac"
2025-08-26 22:28:58.992 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:28:58.998 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:28:59.000 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.9379ms
2025-08-26 22:28:59.003 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:28:59.004 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac - 200 null application/json; charset=utf-8 38.1694ms
2025-08-26 22:29:01.984 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:01.988 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:01.989 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6987ms
2025-08-26 22:29:01.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:01.997 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.000 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:02.002 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:02.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:02.013 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:02.015 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8577ms
2025-08-26 22:29:02.017 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:02.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1434ms
2025-08-26 22:29:02.113 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:02.117 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.119 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:02.120 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:02.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:02.132 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:02.134 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0115ms
2025-08-26 22:29:02.136 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:02.138 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.8681ms
2025-08-26 22:29:02.196 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 22:29:02.200 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.577ms
2025-08-26 22:29:02.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-26 22:29:02.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:02.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 22:29:02.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-26 22:29:02.210 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.214 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.218 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.221 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 20.0731ms
2025-08-26 22:29:02.224 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:02.225 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 19.0776ms
2025-08-26 22:29:02.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 19.6328ms
2025-08-26 22:29:02.232 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:02.237 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-26 22:29:02.241 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-26 22:29:02.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:02.251 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.259 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 22:29:02.257 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:02.254 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:02.262 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:29:02.264 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.4238ms
2025-08-26 22:29:02.265 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 22:29:02.268 +05:30 [INF] GetAllContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all
2025-08-26 22:29:02.269 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:02.271 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:29:02.276 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-26 22:29:02.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-26 22:29:02.276 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 70.6052ms
2025-08-26 22:29:02.287 +05:30 [INF] GetAllContactsAsync returned 12 contacts
2025-08-26 22:29:02.292 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-26 22:29:02.298 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:29:02.303 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:02.303 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 35.4591ms
2025-08-26 22:29:02.306 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 25.6688ms
2025-08-26 22:29:02.307 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-26 22:29:02.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-26 22:29:02.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 75.0013ms
2025-08-26 22:29:02.313 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 71.9347ms
2025-08-26 22:29:04.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.632 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.636 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.640 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.646 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.647 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 19.2563ms
2025-08-26 22:29:04.650 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 21.5436ms
2025-08-26 22:29:04.651 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 22.4232ms
2025-08-26 22:29:04.652 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 204 null null 23.225ms
2025-08-26 22:29:04.656 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null 0
2025-08-26 22:29:04.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.670 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.672 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.676 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.679 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.680 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:29:04.681 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:29:04.682 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:29:04.684 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:29:04.686 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:29:04.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-26 22:29:04.687 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-26 22:29:04.696 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 22:29:04.698 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-26 22:29:04.704 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-26 22:29:04.709 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:29:04.708 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 18.9855ms
2025-08-26 22:29:04.715 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:29:04.718 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:29:04.719 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-26 22:29:04.722 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 21.1783ms
2025-08-26 22:29:04.725 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 29.4978ms
2025-08-26 22:29:04.726 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - null null
2025-08-26 22:29:04.726 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 0 null 70.0794ms
2025-08-26 22:29:04.728 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-26 22:29:04.730 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:29:04.733 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:04.739 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 68.7436ms
2025-08-26 22:29:04.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 74.9823ms
2025-08-26 22:29:04.742 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:29:04.752 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-26 22:29:04.755 +05:30 [INF] GetContactByIdAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-26 22:29:04.760 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__contactId_1='26b8b9a2-5624-40ed-a659-65de71d03d20'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-26 22:29:04.766 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:29:04.768 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 13.1188ms
2025-08-26 22:29:04.770 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-26 22:29:04.772 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/26b8b9a2-5624-40ed-a659-65de71d03d20 - 200 null application/json; charset=utf-8 45.2589ms
2025-08-26 22:29:18.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:29:18.958 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:18.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.2938ms
2025-08-26 22:29:18.971 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:29:18.975 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:18.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:29:18.979 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:29:18.990 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:29:18.996 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:29:19.000 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 16.3551ms
2025-08-26 22:29:19.003 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:29:19.005 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 34.2683ms
2025-08-26 22:29:33.152 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-26 22:29:33.160 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 9.3437ms
2025-08-26 22:29:33.166 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-26 22:29:33.170 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.172 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:29:33.174 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-26 22:29:33.179 +05:30 [INF] üîë Login attempt for email: test@test.com
2025-08-26 22:29:33.184 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-26 22:29:33.194 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-26 22:29:33.204 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-26 22:29:33.208 +05:30 [INF] ‚úÖ Token generated for: test@test.com
2025-08-26 22:29:33.210 +05:30 [INF] üîé JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-26 22:29:33.211 +05:30 [INF] ‚úÖ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-26 22:29:33.213 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:33.215 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 38.4799ms
2025-08-26 22:29:33.217 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-26 22:29:33.219 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 52.5993ms
2025-08-26 22:29:33.224 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:33.227 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5557ms
2025-08-26 22:29:33.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:33.240 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.242 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.244 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:33.248 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:33.254 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:33.256 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4907ms
2025-08-26 22:29:33.258 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.260 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.0814ms
2025-08-26 22:29:33.290 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:33.296 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.298 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.301 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:33.307 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:33.313 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:33.315 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9786ms
2025-08-26 22:29:33.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:33.317 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.321 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.322 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.9335ms
2025-08-26 22:29:33.324 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.330 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:33.336 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:33.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:33.344 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5912ms
2025-08-26 22:29:33.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.348 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.2041ms
2025-08-26 22:29:33.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:29:33.429 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:33.431 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.432 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:29:33.439 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:29:33.445 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:33.447 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8825ms
2025-08-26 22:29:33.449 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:29:33.451 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.7944ms
2025-08-26 22:29:37.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:29:37.862 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:37.863 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.3722ms
2025-08-26 22:29:37.880 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:29:37.886 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:37.888 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:29:37.891 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:29:37.901 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:29:37.906 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:29:37.909 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.5457ms
2025-08-26 22:29:37.911 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:29:37.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 32.6613ms
2025-08-26 22:29:41.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null null
2025-08-26 22:29:41.597 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:41.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 204 null null 5.3928ms
2025-08-26 22:29:41.603 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - null 0
2025-08-26 22:29:41.607 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:29:41.609 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:29:41.611 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:29:44.718 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-26 22:29:44.725 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:29:44.730 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-26 22:29:44.734 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:29:44.736 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:29:46.414 +05:30 [INF] Received HTTP response headers after 1677.3775ms - 200
2025-08-26 22:29:46.416 +05:30 [INF] End processing HTTP request after 1682.3796ms - 200
2025-08-26 22:29:46.457 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-26 22:29:46.481 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-26 22:29:46.483 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:29:46.484 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-26 22:29:49.460 +05:30 [INF] Received HTTP response headers after 2974.0646ms - 200
2025-08-26 22:29:49.467 +05:30 [INF] End processing HTTP request after 2984.4933ms - 200
2025-08-26 22:29:49.498 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@p0='92ffa9d7-4847-459b-8248-acfdb02ae5eb', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='3ffff2d2-0080-437b-ace5-8e5c0c343acf' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-26T16:59:49.4708986Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='new_feature_announcement' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjk2QkVBQkI5MDVCOEQwMjAzAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjk2QkVBQkI5MDVCOEQwMjAzAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-26T16:59:49.4708987Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='9efed407-5133-46b6-8035-db1e7090c8dd', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-26T16:59:49.4712994Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hi Robert, 
Great news! The new Ai Bot integration feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjk2QkVBQkI5MDVCOEQwMjAzAA==', @p42='92ffa9d7-4847-459b-8248-acfdb02ae5eb' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='9e79b33c-3f68-4953-a61b-5dcc02f155d8', @p45='0', @p46='Sent', @p47='2025-08-26T16:59:49.4712994Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='new_feature_announcement', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-26 22:29:49.503 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-26 22:29:49.504 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7888.5882ms
2025-08-26 22:29:49.507 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:29:49.509 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf - 200 null application/json; charset=utf-8 7905.1877ms
2025-08-26 22:29:53.042 +05:30 [INF] Request starting HTTP/1.1 POST http://7b2a5091aaac.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-26 22:29:53.046 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:29:53.047 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-26 22:29:53.049 +05:30 [WRN] üì• Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"read","timestamp":"1756227591","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-26 22:29:53.051 +05:30 [INF] üì• Webhook payload enqueued successfully.
2025-08-26 22:29:53.052 +05:30 [WRN] üì¶ Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"read","timestamp":"1756227591","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-26 22:29:53.052 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:29:53.054 +05:30 [INF] üì¶ Routing to Status Processor
2025-08-26 22:29:53.056 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.5859ms
2025-08-26 22:29:53.057 +05:30 [WRN] üîç Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA==","status":"read","timestamp":"1756227591","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-26 22:29:53.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-26 22:29:53.063 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-26 22:29:53.063 +05:30 [INF] Request finished HTTP/1.1 POST http://7b2a5091aaac.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.1081ms
2025-08-26 22:29:53.068 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='67da9b47-a5fb-4efe-b29d-71ecb9b93d06'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-26 22:29:53.097 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p2='67da9b47-a5fb-4efe-b29d-71ecb9b93d06', @p0='2025-08-26T16:59:51.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-26 22:29:53.100 +05:30 [INF] ‚úÖ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzhEQ0JFMUZFNTE1Q0ZEQ0IwAA== ‚Üí read
2025-08-26 22:30:33.502 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:30:33.510 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:33.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.0342ms
2025-08-26 22:30:33.524 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:30:33.528 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:33.530 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:30:33.532 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:30:33.542 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:30:33.568 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:30:33.571 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 35.9459ms
2025-08-26 22:30:33.574 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:30:33.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 52.6248ms
2025-08-26 22:30:37.243 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/summary - null null
2025-08-26 22:30:37.248 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:37.250 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/summary - 204 null null 6.9928ms
2025-08-26 22:30:37.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/summary - null null
2025-08-26 22:30:37.275 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:37.277 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 22:30:37.284 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 22:30:37.325 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 22:30:37.337 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 22:30:37.341 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 22:30:37.346 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 58.183ms
2025-08-26 22:30:37.348 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 22:30:37.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf/summary - 200 null application/json; charset=utf-8 84.0833ms
2025-08-26 22:30:37.705 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf?page=1&pageSize=10&status=&search= - null null
2025-08-26 22:30:37.712 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:37.713 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf?page=1&pageSize=10&status=&search= - 204 null null 7.9488ms
2025-08-26 22:30:37.722 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf?page=1&pageSize=10&status=&search= - null null
2025-08-26 22:30:37.726 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:37.727 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 22:30:37.736 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 22:30:37.759 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 22:30:37.797 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ffff2d2-0080-437b-ace5-8e5c0c343acf', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 22:30:37.807 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:30:37.823 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 83.9064ms
2025-08-26 22:30:37.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 22:30:37.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/3ffff2d2-0080-437b-ace5-8e5c0c343acf?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 105.4547ms
2025-08-26 22:30:39.607 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/9efed407-5133-46b6-8035-db1e7090c8dd - null null
2025-08-26 22:30:39.612 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:39.613 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/9efed407-5133-46b6-8035-db1e7090c8dd - 204 null null 5.8978ms
2025-08-26 22:30:39.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/9efed407-5133-46b6-8035-db1e7090c8dd - null null
2025-08-26 22:30:39.625 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:39.627 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 22:30:39.633 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 22:30:39.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='9efed407-5133-46b6-8035-db1e7090c8dd'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 22:30:39.667 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjk2QkVBQkI5MDVCOEQwMjAzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 22:30:39.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjk2QkVBQkI5MDVCOEQwMjAzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 22:30:39.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:30:39.692 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 55.3258ms
2025-08-26 22:30:39.694 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 22:30:39.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/9efed407-5133-46b6-8035-db1e7090c8dd - 200 null application/json; charset=utf-8 75.0597ms
2025-08-26 22:30:43.736 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bf6d74db-6a43-4cdb-84c6-038450694f4c - null null
2025-08-26 22:30:43.741 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:43.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/bf6d74db-6a43-4cdb-84c6-038450694f4c - 204 null null 6.9556ms
2025-08-26 22:30:43.762 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bf6d74db-6a43-4cdb-84c6-038450694f4c - null null
2025-08-26 22:30:43.765 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:43.767 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 22:30:43.768 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 22:30:43.778 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__initialCampaignSendLogId_0='bf6d74db-6a43-4cdb-84c6-038450694f4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 22:30:43.786 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUE2RjIyNDQ0MjVDMkNENzk3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 22:30:43.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUE2RjIyNDQ0MjVDMkNENzk3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 22:30:43.796 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:30:43.798 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 27.7229ms
2025-08-26 22:30:43.800 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 22:30:43.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/bf6d74db-6a43-4cdb-84c6-038450694f4c - 200 null application/json; charset=utf-8 40.1701ms
2025-08-26 22:30:46.696 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/032df711-ce6e-445e-959d-89b250940edb - null null
2025-08-26 22:30:46.702 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:46.703 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/032df711-ce6e-445e-959d-89b250940edb - 204 null null 7.0613ms
2025-08-26 22:30:46.707 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/032df711-ce6e-445e-959d-89b250940edb - null null
2025-08-26 22:30:46.711 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:46.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 22:30:46.715 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-26 22:30:46.723 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='032df711-ce6e-445e-959d-89b250940edb'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-26 22:30:46.729 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjE5MzJEMzRENDRGNkRCMTU1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-26 22:30:46.734 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjE5MzJEMzRENDRGNkRCMTU1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-26 22:30:46.737 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:30:46.738 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 19.9411ms
2025-08-26 22:30:46.740 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-26 22:30:46.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/032df711-ce6e-445e-959d-89b250940edb - 200 null application/json; charset=utf-8 33.9099ms
2025-08-26 22:30:57.187 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:30:57.193 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:57.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.5129ms
2025-08-26 22:30:57.207 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:30:57.213 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:30:57.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:30:57.218 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:30:57.225 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:30:57.230 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:30:57.233 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.5613ms
2025-08-26 22:30:57.235 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:30:57.236 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 28.7381ms
2025-08-26 22:31:00.081 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null null
2025-08-26 22:31:00.084 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:00.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 204 null null 4.7118ms
2025-08-26 22:31:00.089 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null 0
2025-08-26 22:31:00.092 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:00.093 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-26 22:31:00.094 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:31:19.520 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 22:31:19.596 +05:30 [INF] üöÄ Webhook Queue Worker started.
2025-08-26 22:31:19.615 +05:30 [INF] üßπ FailedWebhookLogCleanupService started.
2025-08-26 22:31:20.541 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-26 22:31:21.137 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 22:31:21.348 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-26 22:31:21.349 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-26 22:31:21.351 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 22:31:21.352 +05:30 [INF] Hosting environment: Development
2025-08-26 22:31:21.353 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-26 22:31:21.360 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-26 22:31:21.381 +05:30 [INF] Executed DbCommand (49ms) [Parameters=[@__cutoff_0='2025-08-19T17:01:19.7489832Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-26 22:31:23.302 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-26 22:31:23.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 174.3111ms
2025-08-26 22:31:23.592 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-26 22:31:23.592 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 22:31:23.602 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.607ms
2025-08-26 22:31:23.627 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.0692ms
2025-08-26 22:31:23.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-26 22:31:23.946 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 203.8155ms
2025-08-26 22:31:33.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:31:33.425 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-26 22:31:33.485 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:33.490 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 73.0964ms
2025-08-26 22:31:33.496 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:31:33.507 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:33.699 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:31:33.719 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:31:33.894 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-26 22:31:33.984 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:31:33.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:31:34.022 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 295.1461ms
2025-08-26 22:31:34.025 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:31:34.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 536.6719ms
2025-08-26 22:31:34.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:31:34.043 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:34.047 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:31:34.050 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:31:34.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:31:34.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:31:34.070 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.1201ms
2025-08-26 22:31:34.072 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:31:34.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.1811ms
2025-08-26 22:31:34.109 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:31:34.111 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-26 22:31:34.114 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:34.119 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:34.120 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.2806ms
2025-08-26 22:31:34.126 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:31:34.128 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:31:34.129 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-26 22:31:34.135 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:34.137 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:31:34.143 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-26 22:31:34.149 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-26 22:31:34.151 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:31:34.151 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.7506ms
2025-08-26 22:31:34.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-26 22:31:34.170 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 58.9463ms
2025-08-26 22:31:34.264 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:31:34.270 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:31:34.287 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 132.8421ms
2025-08-26 22:31:34.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:31:34.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 164.9119ms
2025-08-26 22:31:38.409 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 22:31:38.421 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:38.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 204 null null 17.0319ms
2025-08-26 22:31:38.442 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - null null
2025-08-26 22:31:38.448 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:38.451 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 22:31:38.459 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 22:31:38.522 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-26 22:31:38.539 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 22:31:38.545 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 22:31:38.551 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 89.0448ms
2025-08-26 22:31:38.553 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 22:31:38.555 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855/summary - 200 null application/json; charset=utf-8 113.5893ms
2025-08-26 22:31:38.863 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 22:31:38.867 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:38.868 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 204 null null 4.9783ms
2025-08-26 22:31:38.873 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - null null
2025-08-26 22:31:38.876 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:38.877 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 22:31:38.883 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 22:31:38.910 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 22:31:38.947 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='33c9f5cd-6556-4abf-85cc-3fc995003855', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 22:31:38.954 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:31:38.966 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 78.6886ms
2025-08-26 22:31:38.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 22:31:38.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/33c9f5cd-6556-4abf-85cc-3fc995003855?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 97.6651ms
2025-08-26 22:31:43.453 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:31:43.459 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:43.461 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.8352ms
2025-08-26 22:31:43.467 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-26 22:31:43.471 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:43.473 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:31:43.475 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-26 22:31:43.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-26 22:31:43.497 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:31:43.499 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 22.4258ms
2025-08-26 22:31:43.502 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-26 22:31:43.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 36.4799ms
2025-08-26 22:31:48.952 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 22:31:48.956 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:48.958 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 204 null null 6.4842ms
2025-08-26 22:31:48.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - null null
2025-08-26 22:31:48.982 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:48.984 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 22:31:48.986 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 22:31:48.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-26 22:31:49.003 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-26 22:31:49.005 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 16.3184ms
2025-08-26 22:31:49.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-26 22:31:49.010 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89/summary - 200 null application/json; charset=utf-8 32.6702ms
2025-08-26 22:31:49.361 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - null null
2025-08-26 22:31:49.367 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:49.369 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - 204 null null 8.1856ms
2025-08-26 22:31:49.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - null null
2025-08-26 22:31:49.396 +05:30 [INF] CORS policy execution successful.
2025-08-26 22:31:49.398 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 22:31:49.399 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-26 22:31:49.407 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-26 22:31:49.417 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='03ef3838-08f4-4605-b705-046ce8661d89', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-26 22:31:49.420 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:31:49.423 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 19.9872ms
2025-08-26 22:31:49.425 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-26 22:31:49.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/03ef3838-08f4-4605-b705-046ce8661d89?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 42.8136ms
